# ğŸš€ ê°„ë‹¨í•œ í•´ê²°ì±… - ì¦‰ì‹œ ì‘ë™

## ë¬¸ì œì˜ í•µì‹¬
- Google OAuth UUIDì™€ ë‚´ë¶€ ì‹œìŠ¤í…œ UUIDê°€ ë§¤ì¹­ë˜ì§€ ì•ŠìŒ
- RLS ì •ì±…ì´ ë„ˆë¬´ ë³µì¡í•¨

## í•´ê²° ë°©ë²•

### 1. RLSë¥¼ ë‹¨ìˆœí™”
```sql
-- ëª¨ë“  ë¡œê·¸ì¸ ì‚¬ìš©ìì—ê²Œ CRUD ê¶Œí•œ ë¶€ì—¬
-- ì„¸ë¶€ ê¶Œí•œì€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì²˜ë¦¬

-- properties í…Œì´ë¸”
CREATE POLICY "ë¡œê·¸ì¸ ì‚¬ìš©ì ì „ì²´ ê¶Œí•œ" ON properties
FOR ALL USING (auth.uid() IS NOT NULL);

-- property_comments í…Œì´ë¸”  
CREATE POLICY "ë¡œê·¸ì¸ ì‚¬ìš©ì ì „ì²´ ê¶Œí•œ" ON property_comments
FOR ALL USING (auth.uid() IS NOT NULL);
```

### 2. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ê¶Œí•œ ì²´í¬
```javascript
// ì´ë¯¸ êµ¬í˜„ë˜ì–´ ìˆìŒ (AuthContext.jsx)
const adminEmails = ENV_CONFIG.ADMIN_EMAILS?.split(',')
const isAdmin = adminEmails.includes(googleUser.email)

// ì´ë¯¸ êµ¬í˜„ë˜ì–´ ìˆìŒ (permissions.js)
export const isAdmin = (user) => {
  const adminEmails = getAdminEmails();
  return adminEmails.includes(user?.email);
};
```

### 3. ì‹¤í–‰ ìˆœì„œ

1ï¸âƒ£ **íƒ€ì… ë¶ˆì¼ì¹˜ í•´ê²°**
```bash
ê¸´ê¸‰_íƒ€ì…ë¶ˆì¼ì¹˜_ì™„ì „ìˆ˜ì •.sql
```

2ï¸âƒ£ **ê°„ë‹¨í•œ RLS ì ìš©**
```bash
RLS_auth_uid_ë¬¸ì œí•´ê²°_v2.sql
```

3ï¸âƒ£ **Storage ë²„í‚· ìƒì„±**
- Supabase ëŒ€ì‹œë³´ë“œì—ì„œ 'property-images' ìƒì„±

4ï¸âƒ£ **í™˜ê²½ë³€ìˆ˜ ì„¤ì •**
```
VITE_ADMIN_EMAILS=admin@the-realty.co.kr,manager@the-realty.co.kr
```

## ê²°ê³¼

âœ… ë¡œê·¸ì¸í•œ ëª¨ë“  ì‚¬ìš©ìê°€ CRUD ê°€ëŠ¥
âœ… ê´€ë¦¬ì ê¶Œí•œì€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì²´í¬
âœ… Google OAuthì™€ ì¶©ëŒ ì—†ìŒ
âœ… ì¦‰ì‹œ ì‘ë™

## ë‚˜ì¤‘ì— ê°œì„ í•  ì‚¬í•­

1. users í…Œì´ë¸”ê³¼ Google OAuth ë§¤í•‘
2. DB ë ˆë²¨ ì„¸ë¶€ ê¶Œí•œ ì„¤ì •
3. manager_id UUID í†µì¼

í•˜ì§€ë§Œ ì§€ê¸ˆì€ **ì‘ë™í•˜ëŠ” ê²ƒ**ì´ ì¤‘ìš”!