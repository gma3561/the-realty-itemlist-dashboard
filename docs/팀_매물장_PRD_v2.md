# 팀 매물장 관리 시스템 PRD v2.0 (현행화)

## 1. 제품 개요

### 1.1 제품 비전
부동산 중개사무소의 매물 관리 프로세스를 디지털화하여 효율성을 높이고, 팀원 간 원활한 정보 공유를 통해 성과를 향상시키는 통합 매물 관리 플랫폼입니다.

### 1.2 타겟 사용자
- **주 사용자**: 부동산 중개사무소 소속 부동산 중개인
- **사용 환경**: 사무실 데스크톱, 외부 활동 시 모바일 기기

### 1.3 핵심 가치 제안
- 매물 정보의 체계적 관리로 업무 효율성 향상
- 팀원 간 실시간 정보 공유로 협업 강화
- 고객 정보 보안을 위한 권한 기반 접근 제어
- 모바일 환경에서도 동일한 기능 사용 가능

## 2. 기능 요구사항

### 2.1 사용자 인증 및 권한 관리
| ID | 요구사항 | 우선순위 | 구현 상태 | 상세 설명 |
|----|----------|----------|------------|----------|
| AUTH-01 | 구글 로그인 | 높음 | ✅ 구현 | Google OAuth 2.0을 통한 인증 |
| AUTH-02 | 관리자 권한 구분 | 높음 | ✅ 구현 | 환경변수 기반 관리자 이메일 설정 |
| AUTH-03 | 사용자 프로필 연동 | 높음 | ✅ 구현 | Google 프로필에서 이름, 이메일, 프로필 사진 자동 가져오기 |
| AUTH-04 | 권한 관리 | 높음 | ✅ 구현 | 관리자/일반 사용자 권한 구분 |
| AUTH-05 | 세션 관리 | 중간 | ✅ 구현 | 8시간 세션 유지, 자동 갱신 |
| AUTH-06 | 임시 바이패스 | 중간 | ✅ 구현 | 개발/테스트용 임시 로그인 기능 |

### 2.2 매물 관리
| ID | 요구사항 | 우선순위 | 구현 상태 | 상세 설명 |
|----|----------|----------|------------|----------|
| PROP-01 | 매물 등록 | 높음 | ✅ 구현 | 모든 필수 필드 포함한 매물 등록 폼 |
| PROP-02 | 매물 수정 | 높음 | ✅ 구현 | 담당자만 수정 가능 (관리자는 전체) |
| PROP-03 | 매물 조회 | 높음 | ✅ 구현 | 개별 매물 상세 정보 조회 |
| PROP-04 | 매물 목록 | 높음 | ✅ 구현 | 페이지네이션 적용된 매물 목록 |
| PROP-05 | 매물 검색 | 높음 | ✅ 구현 | 주소, 매물명 기반 검색 |
| PROP-06 | 매물 필터링 | 높음 | ✅ 구현 | 상태, 유형, 가격대 필터링 |
| PROP-07 | 매물 상태 관리 | 중간 | ✅ 구현 | 광고중/거래중/거래완료 상태 추적 |
| PROP-08 | 담당자 변경 | 중간 | ✅ 구현 | 수동 담당자 변경 및 이력 관리 |
| PROP-09 | 매물 이미지 관리 | 중간 | ✅ 구현 | Supabase Storage 활용 이미지 업로드 |
| PROP-10 | 매물 삭제 | 낮음 | ✅ 구현 | 소프트 삭제 (관리자/담당자만) |
| PROP-11 | 연락처 가시성 제한 | 높음 | ✅ 구현 | 담당자만 소유주 연락처 조회 가능 |

### 2.3 고객 정보 보안
| ID | 요구사항 | 우선순위 | 구현 상태 | 상세 설명 |
|----|-----------|-----------|------------|-----------|
| SEC-01 | 고객정보 접근 제한 | 높음 | ✅ 구현 | 담당자만 고객 연락처 조회 가능 |
| SEC-02 | 권한 기반 표시 | 높음 | ✅ 구현 | 권한 없는 경우 "권한 없음" 표시 |
| SEC-03 | 관리자 제한 모드 | 중간 | ✅ 구현 | 관리자도 매물 관리 시 고객정보 숨김 |

### 2.4 대시보드 및 통계
| ID | 요구사항 | 우선순위 | 구현 상태 | 상세 설명 |
|----|----------|----------|------------|----------|
| DASH-01 | 종합 대시보드 | 중간 | ✅ 구현 | 차트 기반 매물 현황 시각화 |
| DASH-02 | 개인 성과 | 중간 | ✅ 구현 | 내 매물 통계 및 현황 |
| DASH-03 | 전체 성과 | 낮음 | ✅ 구현 | 관리자용 전체 직원 성과 대시보드 |

### 2.5 모바일 및 PWA 지원
| ID | 요구사항 | 우선순위 | 구현 상태 | 상세 설명 |
|----|----------|----------|------------|----------|
| MOB-01 | 반응형 디자인 | 높음 | ✅ 구현 | TailwindCSS 기반 반응형 UI |
| MOB-02 | PWA 지원 | 중간 | ✅ 구현 | 설치 가능한 웹 앱 형태로 제공 |
| MOB-03 | 모바일 최적화 | 중간 | ✅ 구현 | 모바일 전용 네비게이션 |

### 2.6 배포 및 운영
| ID | 요구사항 | 우선순위 | 구현 상태 | 상세 설명 |
|----|-----------|-----------|------------|-----------|
| DEP-01 | GitHub Pages 배포 | 높음 | ✅ 구현 | 정적 호스팅으로 비용 절감 |
| DEP-02 | 환경변수 관리 | 높음 | ✅ 구현 | 환경별 설정 분리 |
| DEP-03 | 에러 로깅 제한 | 중간 | ✅ 구현 | 보안을 위한 에러 로깅 최소화 |

## 3. 데이터 구조

### 3.1 매물 정보 구조
현재 구현된 매물 필드:
- 담당자 (manager_id)
- 담당자 연락처 (manager_contact)
- 소유주 정보 (owner)
- 소유주 연락처 (owner_contact) 
- 연락처 관계 (contact_relation)
- 광고상태 (ad_status)
- 매물상태 (property_status_id)
- 거래완료날짜 (completed_date)
- 소재지 (address)
- 매물명 (name)
- 동/호 (dong, ho)
- 매물종류 (property_type_id)
- 거래유형 (transaction_type_id)
- 금액 (price)
- 공급/전용면적 (area_supply, area_exclusive)
- 층 정보 (floor_current, floor_total)
- 방/욕실 (rooms, bathrooms)
- 방향 (direction)
- 관리비 (maintenance_fee)
- 주차 (parking)
- 입주가능일 (move_in_date)
- 특이사항 (special_notes)
- 담당자메모 (manager_memo)
- 이미지 (images)

### 3.2 사용자 정보 구조
- 사용자 ID (UUID)
- Google 계정 정보
- 이름 (Google 프로필)
- 이메일 
- 프로필 사진 URL
- 역할/권한 (관리자/일반)
- 등록일
- 마지막 로그인

### 3.3 권한 체계
```javascript
// 역할 기반 권한
ADMIN: 모든 매물 조회/수정/삭제, 사용자 관리, 전체 성과 조회
USER: 본인 매물만 수정/삭제, 전체 매물 조회, 본인 성과만 조회

// 고객정보 조회 권한
- 관리자: 매물 관리 모드에서는 고객정보 숨김
- 일반사용자: 본인 담당 매물의 고객정보만 조회 가능
```

## 4. 비기능적 요구사항

### 4.1 성능 요구사항
- 페이지 로딩 시간: 3초 이내
- 검색 결과 표시 시간: 2초 이내
- 이미지 업로드: 최대 10MB

### 4.2 보안 요구사항
- Google OAuth 2.0 인증
- 고객 정보 권한 기반 접근 제어
- 민감한 정보 로깅 제한
- HTTPS 통신 필수

### 4.3 확장성 요구사항
- 모듈식 컴포넌트 설계
- React 기반 SPA 구조
- Supabase RLS 정책 적용

### 4.4 사용성 요구사항
- 직관적인 UI/UX
- 모바일 환경 최적화
- 한글 메뉴 및 레이블

## 5. 기술 스택

### 5.1 프론트엔드
- React 18 + Vite
- TailwindCSS (반응형 디자인)
- React Router (SPA 라우팅)
- React Query (상태 관리)
- Recharts (데이터 시각화)

### 5.2 백엔드
- Supabase (BaaS)
- PostgreSQL 데이터베이스
- Row Level Security (RLS)
- Storage (이미지 저장)

### 5.3 배포 및 인프라
- GitHub Pages (프론트엔드)
- GitHub Actions (CI/CD)
- 환경변수 관리

## 6. 주요 변경 사항 (v1.0 → v2.0)

### 6.1 제거된 기능
- 도메인 제한 (@the-realty.co.kr) - 유연성을 위해 제거
- 고객 관리 시스템 - 매물 내 정보로 통합
- 퍼널 분석 - 복잡도 감소를 위해 제거
- 수수료 계산 - 추후 구현 예정
- 공동중개 기능 - 추후 구현 예정
- Google Drive 연동 - 추후 구현 예정

### 6.2 추가/개선된 기능
- 환경변수 기반 관리자 설정
- 고객정보 권한 기반 접근 제어
- GitHub Pages 배포 최적화
- 보안 강화 (에러 로깅 제한)
- 한글화 완료

## 7. 향후 로드맵

### 7.1 단기 (1-2개월)
- 수수료 계산 기능
- 공동중개 관리
- 엑셀 내보내기

### 7.2 중기 (3-6개월)
- 고객 관리 시스템
- 계약서 관리
- 알림 기능

### 7.3 장기 (6개월+)
- Google Drive 연동
- AI 기반 매물 추천
- 모바일 앱 개발

## 8. 성공 기준

### 8.1 정량적 기준
- 일일 활성 사용자 90% 이상
- 매물 등록 시간 50% 단축
- 시스템 가동률 99% 이상

### 8.2 정성적 기준
- 직원 만족도 향상
- 고객 정보 보안 강화
- 업무 효율성 개선

---

**문서 버전**: 2.0  
**최종 수정일**: 2025-08-03  
**작성자**: Product Owner  
**상태**: 현행화 완료