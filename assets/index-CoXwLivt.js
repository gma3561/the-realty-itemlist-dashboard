var e=Object.getOwnPropertyNames;import{r as t,b as s,d as r,R as a,u as n,N as i,e as l,L as o,f as c,a as d,O as u,B as m,h,i as x}from"./react-vendor-DilD2z74.js";import{_ as f,a as g,P as y,A as b,b as v,B as j,F as w,E as N,C as _,c as k,d as S,X as E,e as C,R as O,L as T,f as A,g as D,Y as F,T as P,h as I,i as R,S as M,j as $,M as L,H as q,k as U,l as B,m as V,n as z,G as Q,o as K,U as W,p as G,q as Y,r as H,s as J,t as X,u as Z,v as ee,w as te,x as se,y as re,z as ae,D as ne,I as ie,J as le,K as oe,N as ce,O as de,Q as ue,V as me,W as he,Z as pe,$ as xe,a0 as fe,a1 as ge,a2 as ye,a3 as be,a4 as ve,a5 as je,a6 as we,a7 as Ne,a8 as _e,a9 as ke,aa as Se,ab as Ee,ac as Ce,ad as Oe}from"./ui-vendor-DNXoTqsH.js";import{c as Te}from"./supabase-vendor-BoTMvlkA.js";var Ae,De,Fe=(Ae={"assets/index-CoXwLivt.js"(e,Ae){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var De={exports:{}},Fe={},Pe=t,Ie=Symbol.for("react.element"),Re=Symbol.for("react.fragment"),Me=Object.prototype.hasOwnProperty,$e=Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Le={key:!0,ref:!0,__self:!0,__source:!0};function qe(e,t,s){var r,a={},n=null,i=null;for(r in void 0!==s&&(n=""+s),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(i=t.ref),t)Me.call(t,r)&&!Le.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:Ie,type:e,key:n,ref:i,props:a,_owner:$e.current}}Fe.Fragment=Re,Fe.jsx=qe,Fe.jsxs=qe,De.exports=Fe;var Ue=De.exports,Be={},Ve=s;Be.createRoot=Ve.createRoot,Be.hydrateRoot=Ve.hydrateRoot;var ze=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(e){var t=this,s=e||function(){};return this.listeners.push(s),this.onSubscribe(),function(){t.listeners=t.listeners.filter(function(e){return e!==s}),t.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),Qe="undefined"==typeof window;function Ke(){}function We(e){return"number"==typeof e&&e>=0&&e!==1/0}function Ge(e){return Array.isArray(e)?e:[e]}function Ye(e,t){return Math.max(e+(t||0)-Date.now(),0)}function He(e,t,s){return lt(e)?"function"==typeof t?f({},s,{queryKey:e,queryFn:t}):f({},t,{queryKey:e}):e}function Je(e,t,s){return lt(e)?[f({},t,{queryKey:e}),s]:[e||{},t]}function Xe(e,t){var s=e.active,r=e.exact,a=e.fetching,n=e.inactive,i=e.predicate,l=e.queryKey,o=e.stale;if(lt(l))if(r){if(t.queryHash!==et(l,t.options))return!1}else if(!st(t.queryKey,l))return!1;var c=function(e,t){return!0===e&&!0===t||null==e&&null==t?"all":!1===e&&!1===t?"none":(null!=e?e:!t)?"active":"inactive"}(s,n);if("none"===c)return!1;if("all"!==c){var d=t.isActive();if("active"===c&&!d)return!1;if("inactive"===c&&d)return!1}return!("boolean"==typeof o&&t.isStale()!==o||"boolean"==typeof a&&t.isFetching()!==a||i&&!i(t))}function Ze(e,t){var s=e.exact,r=e.fetching,a=e.predicate,n=e.mutationKey;if(lt(n)){if(!t.options.mutationKey)return!1;if(s){if(tt(t.options.mutationKey)!==tt(n))return!1}else if(!st(t.options.mutationKey,n))return!1}return!("boolean"==typeof r&&"loading"===t.state.status!==r||a&&!a(t))}function et(e,t){return((null==t?void 0:t.queryKeyHashFn)||tt)(e)}function tt(e){var t,s=Ge(e);return t=s,JSON.stringify(t,function(e,t){return nt(t)?Object.keys(t).sort().reduce(function(e,s){return e[s]=t[s],e},{}):t})}function st(e,t){return rt(Ge(e),Ge(t))}function rt(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some(function(s){return!rt(e[s],t[s])})}function at(e,t){if(e===t)return e;var s=Array.isArray(e)&&Array.isArray(t);if(s||nt(e)&&nt(t)){for(var r=s?e.length:Object.keys(e).length,a=s?t:Object.keys(t),n=a.length,i=s?[]:{},l=0,o=0;o<n;o++){var c=s?o:a[o];i[c]=at(e[c],t[c]),i[c]===e[c]&&l++}return r===n&&l===r?e:i}return t}function nt(e){if(!it(e))return!1;var t=e.constructor;if(void 0===t)return!0;var s=t.prototype;return!!it(s)&&!!s.hasOwnProperty("isPrototypeOf")}function it(e){return"[object Object]"===Object.prototype.toString.call(e)}function lt(e){return"string"==typeof e||Array.isArray(e)}function ot(e){Promise.resolve().then(e).catch(function(e){return setTimeout(function(){throw e})})}function ct(){if("function"==typeof AbortController)return new AbortController}var dt=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!Qe&&(null==(t=window)?void 0:t.addEventListener)){var s=function(){return e()};return window.addEventListener("visibilitychange",s,!1),window.addEventListener("focus",s,!1),function(){window.removeEventListener("visibilitychange",s),window.removeEventListener("focus",s)}}},t}g(t,e);var s=t.prototype;return s.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},s.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},s.setEventListener=function(e){var t,s=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"==typeof e?s.setFocused(e):s.onFocus()})},s.setFocused=function(e){this.focused=e,e&&this.onFocus()},s.onFocus=function(){this.listeners.forEach(function(e){e()})},s.isFocused=function(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(ze)),ut=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!Qe&&(null==(t=window)?void 0:t.addEventListener)){var s=function(){return e()};return window.addEventListener("online",s,!1),window.addEventListener("offline",s,!1),function(){window.removeEventListener("online",s),window.removeEventListener("offline",s)}}},t}g(t,e);var s=t.prototype;return s.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},s.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},s.setEventListener=function(e){var t,s=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"==typeof e?s.setOnline(e):s.onOnline()})},s.setOnline=function(e){this.online=e,e&&this.onOnline()},s.onOnline=function(){this.listeners.forEach(function(e){e()})},s.isOnline=function(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine},t}(ze));function mt(e){return Math.min(1e3*Math.pow(2,e),3e4)}function ht(e){return"function"==typeof(null==e?void 0:e.cancel)}var pt=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};function xt(e){return e instanceof pt}var ft=function(e){var t,s,r,a,n=this,i=!1;this.abort=e.abort,this.cancel=function(e){return null==t?void 0:t(e)},this.cancelRetry=function(){i=!0},this.continueRetry=function(){i=!1},this.continue=function(){return null==s?void 0:s()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(e,t){r=e,a=t});var l=function(t){n.isResolved||(n.isResolved=!0,null==e.onSuccess||e.onSuccess(t),null==s||s(),r(t))},o=function(t){n.isResolved||(n.isResolved=!0,null==e.onError||e.onError(t),null==s||s(),a(t))};!function r(){if(!n.isResolved){var a;try{a=e.fn()}catch(c){a=Promise.reject(c)}t=function(e){if(!n.isResolved&&(o(new pt(e)),null==n.abort||n.abort(),ht(a)))try{a.cancel()}catch(t){}},n.isTransportCancelable=ht(a),Promise.resolve(a).then(l).catch(function(t){var a,l;if(!n.isResolved){var c,d=null!=(a=e.retry)?a:3,u=null!=(l=e.retryDelay)?l:mt,m="function"==typeof u?u(n.failureCount,t):u,h=!0===d||"number"==typeof d&&n.failureCount<d||"function"==typeof d&&d(n.failureCount,t);!i&&h?(n.failureCount++,null==e.onFail||e.onFail(n.failureCount,t),(c=m,new Promise(function(e){setTimeout(e,c)})).then(function(){if(!dt.isFocused()||!ut.isOnline())return new Promise(function(t){s=t,n.isPaused=!0,null==e.onPause||e.onPause()}).then(function(){s=void 0,n.isPaused=!1,null==e.onContinue||e.onContinue()})}).then(function(){i?o(t):r()})):o(t)}})}}()},gt=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var t=e.prototype;return t.batch=function(e){var t;this.transactions++;try{t=e()}finally{this.transactions--,this.transactions||this.flush()}return t},t.schedule=function(e){var t=this;this.transactions?this.queue.push(e):ot(function(){t.notifyFn(e)})},t.batchCalls=function(e){var t=this;return function(){for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];t.schedule(function(){e.apply(void 0,r)})}},t.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&ot(function(){e.batchNotifyFn(function(){t.forEach(function(t){e.notifyFn(t)})})})},t.setNotifyFunction=function(e){this.notifyFn=e},t.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}(),yt=new gt,bt=console;function vt(){return bt}var jt=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(e){var t;this.options=f({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},t.setDefaultOptions=function(e){this.defaultOptions=e},t.scheduleGc=function(){var e=this;this.clearGcTimeout(),We(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){e.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(e,t){var s,r,a=this.state.data,n=function(e,t){return"function"==typeof e?e(t):e}(e,a);return(null==(s=(r=this.options).isDataEqual)?void 0:s.call(r,a,n))?n=a:!1!==this.options.structuralSharing&&(n=at(a,n)),this.dispatch({data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt}),n},t.setState=function(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})},t.cancel=function(e){var t,s=this.promise;return null==(t=this.retryer)||t.cancel(e),s?s.then(Ke).catch(Ke):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(e){return!1!==e.options.enabled})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(e){return e.getCurrentResult().isStale})},t.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Ye(this.state.dataUpdatedAt,e)},t.onFocus=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnWindowFocus()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.onOnline=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnReconnect()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},t.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter(function(t){return t!==e}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(e,t){var s,r,a,n=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var i;return null==(i=this.retryer)||i.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var l=this.observers.find(function(e){return e.options.queryFn});l&&this.setOptions(l.options)}var o=Ge(this.queryKey),c=ct(),d={queryKey:o,pageParam:void 0,meta:this.meta};Object.defineProperty(d,"signal",{enumerable:!0,get:function(){if(c)return n.abortSignalConsumed=!0,c.signal}});var u,m,h={fetchOptions:t,options:this.options,queryKey:o,state:this.state,fetchFn:function(){return n.options.queryFn?(n.abortSignalConsumed=!1,n.options.queryFn(d)):Promise.reject("Missing queryFn")},meta:this.meta};return(null==(s=this.options.behavior)?void 0:s.onFetch)&&(null==(u=this.options.behavior)||u.onFetch(h)),this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(r=h.fetchOptions)?void 0:r.meta)||this.dispatch({type:"fetch",meta:null==(m=h.fetchOptions)?void 0:m.meta}),this.retryer=new ft({fn:h.fetchFn,abort:null==c||null==(a=c.abort)?void 0:a.bind(c),onSuccess:function(e){n.setData(e),null==n.cache.config.onSuccess||n.cache.config.onSuccess(e,n),0===n.cacheTime&&n.optionalRemove()},onError:function(e){xt(e)&&e.silent||n.dispatch({type:"error",error:e}),xt(e)||(null==n.cache.config.onError||n.cache.config.onError(e,n),vt().error(e)),0===n.cacheTime&&n.optionalRemove()},onFail:function(){n.dispatch({type:"failed"})},onPause:function(){n.dispatch({type:"pause"})},onContinue:function(){n.dispatch({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),yt.batch(function(){t.observers.forEach(function(t){t.onQueryUpdate(e)}),t.cache.notify({query:t,type:"queryUpdated",action:e})})},t.getDefaultState=function(e){var t="function"==typeof e.initialData?e.initialData():e.initialData,s=void 0!==e.initialData?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,r=void 0!==t;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=s?s:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:r?"success":"idle"}},t.reducer=function(e,t){var s,r;switch(t.type){case"failed":return f({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return f({},e,{isPaused:!0});case"continue":return f({},e,{isPaused:!1});case"fetch":return f({},e,{fetchFailureCount:0,fetchMeta:null!=(s=t.meta)?s:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return f({},e,{data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(r=t.dataUpdatedAt)?r:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=t.error;return xt(a)&&a.revert&&this.revertState?f({},this.revertState):f({},e,{error:a,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return f({},e,{isInvalidated:!0});case"setState":return f({},e,t.state);default:return e}},e}(),wt=function(e){function t(t){var s;return(s=e.call(this)||this).config=t||{},s.queries=[],s.queriesMap={},s}g(t,e);var s=t.prototype;return s.build=function(e,t,s){var r,a=t.queryKey,n=null!=(r=t.queryHash)?r:et(a,t),i=this.get(n);return i||(i=new jt({cache:this,queryKey:a,queryHash:n,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(a),meta:t.meta}),this.add(i)),i},s.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},s.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(function(t){return t!==e}),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},s.clear=function(){var e=this;yt.batch(function(){e.queries.forEach(function(t){e.remove(t)})})},s.get=function(e){return this.queriesMap[e]},s.getAll=function(){return this.queries},s.find=function(e,t){var s=Je(e,t)[0];return void 0===s.exact&&(s.exact=!0),this.queries.find(function(e){return Xe(s,e)})},s.findAll=function(e,t){var s=Je(e,t)[0];return Object.keys(s).length>0?this.queries.filter(function(e){return Xe(s,e)}):this.queries},s.notify=function(e){var t=this;yt.batch(function(){t.listeners.forEach(function(t){t(e)})})},s.onFocus=function(){var e=this;yt.batch(function(){e.queries.forEach(function(e){e.onFocus()})})},s.onOnline=function(){var e=this;yt.batch(function(){e.queries.forEach(function(e){e.onOnline()})})},t}(ze),Nt=function(){function e(e){this.options=f({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0},this.meta=e.meta}var t=e.prototype;return t.setState=function(e){this.dispatch({type:"setState",state:e})},t.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},t.removeObserver=function(e){this.observers=this.observers.filter(function(t){return t!==e})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Ke).catch(Ke)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var e,t=this,s="loading"===this.state.status,r=Promise.resolve();return s||(this.dispatch({type:"loading",variables:this.options.variables}),r=r.then(function(){null==t.mutationCache.config.onMutate||t.mutationCache.config.onMutate(t.state.variables,t)}).then(function(){return null==t.options.onMutate?void 0:t.options.onMutate(t.state.variables)}).then(function(e){e!==t.state.context&&t.dispatch({type:"loading",context:e,variables:t.state.variables})})),r.then(function(){return t.executeMutation()}).then(function(s){e=s,null==t.mutationCache.config.onSuccess||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)}).then(function(){return null==t.options.onSuccess?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)}).then(function(){return t.dispatch({type:"success",data:e}),e}).catch(function(e){return null==t.mutationCache.config.onError||t.mutationCache.config.onError(e,t.state.variables,t.state.context,t),vt().error(e),Promise.resolve().then(function(){return null==t.options.onError?void 0:t.options.onError(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(void 0,e,t.state.variables,t.state.context)}).then(function(){throw t.dispatch({type:"error",error:e}),e})})},t.executeMutation=function(){var e,t=this;return this.retryer=new ft({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(e){var t=this;this.state=function(e,t){switch(t.type){case"failed":return f({},e,{failureCount:e.failureCount+1});case"pause":return f({},e,{isPaused:!0});case"continue":return f({},e,{isPaused:!1});case"loading":return f({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return f({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return f({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return f({},e,t.state);default:return e}}(this.state,e),yt.batch(function(){t.observers.forEach(function(t){t.onMutationUpdate(e)}),t.mutationCache.notify(t)})},e}(),_t=function(e){function t(t){var s;return(s=e.call(this)||this).config=t||{},s.mutations=[],s.mutationId=0,s}g(t,e);var s=t.prototype;return s.build=function(e,t,s){var r=new Nt({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:s,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(r),r},s.add=function(e){this.mutations.push(e),this.notify(e)},s.remove=function(e){this.mutations=this.mutations.filter(function(t){return t!==e}),e.cancel(),this.notify(e)},s.clear=function(){var e=this;yt.batch(function(){e.mutations.forEach(function(t){e.remove(t)})})},s.getAll=function(){return this.mutations},s.find=function(e){return void 0===e.exact&&(e.exact=!0),this.mutations.find(function(t){return Ze(e,t)})},s.findAll=function(e){return this.mutations.filter(function(t){return Ze(e,t)})},s.notify=function(e){var t=this;yt.batch(function(){t.listeners.forEach(function(t){t(e)})})},s.onFocus=function(){this.resumePausedMutations()},s.onOnline=function(){this.resumePausedMutations()},s.resumePausedMutations=function(){var e=this.mutations.filter(function(e){return e.state.isPaused});return yt.batch(function(){return e.reduce(function(e,t){return e.then(function(){return t.continue().catch(Ke)})},Promise.resolve())})},t}(ze);function kt(){return{onFetch:function(e){e.fetchFn=function(){var t,s,r,a,n,i,l,o=null==(t=e.fetchOptions)||null==(s=t.meta)?void 0:s.refetchPage,c=null==(r=e.fetchOptions)||null==(a=r.meta)?void 0:a.fetchMore,d=null==c?void 0:c.pageParam,u="forward"===(null==c?void 0:c.direction),m="backward"===(null==c?void 0:c.direction),h=(null==(n=e.state.data)?void 0:n.pages)||[],p=(null==(i=e.state.data)?void 0:i.pageParams)||[],x=ct(),f=null==x?void 0:x.signal,g=p,y=!1,b=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},v=function(e,t,s,r){return g=r?[t].concat(g):[].concat(g,[t]),r?[s].concat(e):[].concat(e,[s])},j=function(t,s,r,a){if(y)return Promise.reject("Cancelled");if(void 0===r&&!s&&t.length)return Promise.resolve(t);var n={queryKey:e.queryKey,signal:f,pageParam:r,meta:e.meta},i=b(n),l=Promise.resolve(i).then(function(e){return v(t,r,e,a)});return ht(i)&&(l.cancel=i.cancel),l};if(h.length)if(u){var w=void 0!==d,N=w?d:St(e.options,h);l=j(h,w,N)}else if(m){var _=void 0!==d,k=_?d:Et(e.options,h);l=j(h,_,k,!0)}else!function(){g=[];var t=void 0===e.options.getNextPageParam,s=!o||!h[0]||o(h[0],0,h);l=s?j([],t,p[0]):Promise.resolve(v([],p[0],h[0]));for(var r=function(s){l=l.then(function(r){if(!o||!h[s]||o(h[s],s,h)){var a=t?p[s]:St(e.options,r);return j(r,t,a)}return Promise.resolve(v(r,p[s],h[s]))})},a=1;a<h.length;a++)r(a)}();else l=j([]);var S=l.then(function(e){return{pages:e,pageParams:g}});return S.cancel=function(){y=!0,null==x||x.abort(),ht(l)&&l.cancel()},S}}}}function St(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function Et(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}function Ct(e,t){if(e.getNextPageParam&&Array.isArray(t)){var s=St(e,t);return null!=s&&!1!==s}}function Ot(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){var s=Et(e,t);return null!=s&&!1!==s}}var Tt=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new wt,this.mutationCache=e.mutationCache||new _t,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var e=this;this.unsubscribeFocus=dt.subscribe(function(){dt.isFocused()&&ut.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())}),this.unsubscribeOnline=ut.subscribe(function(){dt.isFocused()&&ut.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())})},t.unmount=function(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)},t.isFetching=function(e,t){var s=Je(e,t)[0];return s.fetching=!0,this.queryCache.findAll(s).length},t.isMutating=function(e){return this.mutationCache.findAll(f({},e,{fetching:!0})).length},t.getQueryData=function(e,t){var s;return null==(s=this.queryCache.find(e,t))?void 0:s.state.data},t.getQueriesData=function(e){return this.getQueryCache().findAll(e).map(function(e){return[e.queryKey,e.state.data]})},t.setQueryData=function(e,t,s){var r=He(e),a=this.defaultQueryOptions(r);return this.queryCache.build(this,a).setData(t,s)},t.setQueriesData=function(e,t,s){var r=this;return yt.batch(function(){return r.getQueryCache().findAll(e).map(function(e){var a=e.queryKey;return[a,r.setQueryData(a,t,s)]})})},t.getQueryState=function(e,t){var s;return null==(s=this.queryCache.find(e,t))?void 0:s.state},t.removeQueries=function(e,t){var s=Je(e,t)[0],r=this.queryCache;yt.batch(function(){r.findAll(s).forEach(function(e){r.remove(e)})})},t.resetQueries=function(e,t,s){var r=this,a=Je(e,t,s),n=a[0],i=a[1],l=this.queryCache,o=f({},n,{active:!0});return yt.batch(function(){return l.findAll(n).forEach(function(e){e.reset()}),r.refetchQueries(o,i)})},t.cancelQueries=function(e,t,s){var r=this,a=Je(e,t,s),n=a[0],i=a[1],l=void 0===i?{}:i;void 0===l.revert&&(l.revert=!0);var o=yt.batch(function(){return r.queryCache.findAll(n).map(function(e){return e.cancel(l)})});return Promise.all(o).then(Ke).catch(Ke)},t.invalidateQueries=function(e,t,s){var r,a,n,i=this,l=Je(e,t,s),o=l[0],c=l[1],d=f({},o,{active:null==(r=null!=(a=o.refetchActive)?a:o.active)||r,inactive:null!=(n=o.refetchInactive)&&n});return yt.batch(function(){return i.queryCache.findAll(o).forEach(function(e){e.invalidate()}),i.refetchQueries(d,c)})},t.refetchQueries=function(e,t,s){var r=this,a=Je(e,t,s),n=a[0],i=a[1],l=yt.batch(function(){return r.queryCache.findAll(n).map(function(e){return e.fetch(void 0,f({},i,{meta:{refetchPage:null==n?void 0:n.refetchPage}}))})}),o=Promise.all(l).then(Ke);return(null==i?void 0:i.throwOnError)||(o=o.catch(Ke)),o},t.fetchQuery=function(e,t,s){var r=He(e,t,s),a=this.defaultQueryOptions(r);void 0===a.retry&&(a.retry=!1);var n=this.queryCache.build(this,a);return n.isStaleByTime(a.staleTime)?n.fetch(a):Promise.resolve(n.state.data)},t.prefetchQuery=function(e,t,s){return this.fetchQuery(e,t,s).then(Ke).catch(Ke)},t.fetchInfiniteQuery=function(e,t,s){var r=He(e,t,s);return r.behavior=kt(),this.fetchQuery(r)},t.prefetchInfiniteQuery=function(e,t,s){return this.fetchInfiniteQuery(e,t,s).then(Ke).catch(Ke)},t.cancelMutations=function(){var e=this,t=yt.batch(function(){return e.mutationCache.getAll().map(function(e){return e.cancel()})});return Promise.all(t).then(Ke).catch(Ke)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(e){this.defaultOptions=e},t.setQueryDefaults=function(e,t){var s=this.queryDefaults.find(function(t){return tt(e)===tt(t.queryKey)});s?s.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},t.getQueryDefaults=function(e){var t;return e?null==(t=this.queryDefaults.find(function(t){return st(e,t.queryKey)}))?void 0:t.defaultOptions:void 0},t.setMutationDefaults=function(e,t){var s=this.mutationDefaults.find(function(t){return tt(e)===tt(t.mutationKey)});s?s.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},t.getMutationDefaults=function(e){var t;return e?null==(t=this.mutationDefaults.find(function(t){return st(e,t.mutationKey)}))?void 0:t.defaultOptions:void 0},t.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var t=f({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=et(t.queryKey,t)),t},t.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},t.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:f({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),At=function(e){function t(t,s){var r;return(r=e.call(this)||this).client=t,r.options=s,r.trackedProps=[],r.selectError=null,r.bindMethods(),r.setOptions(s),r}g(t,e);var s=t.prototype;return s.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},s.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),Dt(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},s.onUnsubscribe=function(){this.listeners.length||this.destroy()},s.shouldFetchOnReconnect=function(){return Ft(this.currentQuery,this.options,this.options.refetchOnReconnect)},s.shouldFetchOnWindowFocus=function(){return Ft(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},s.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},s.setOptions=function(e,t){var s=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=s.queryKey),this.updateQuery();var a=this.hasListeners();a&&Pt(this.currentQuery,r,this.options,s)&&this.executeFetch(),this.updateResult(t),!a||this.currentQuery===r&&this.options.enabled===s.enabled&&this.options.staleTime===s.staleTime||this.updateStaleTimeout();var n=this.computeRefetchInterval();!a||this.currentQuery===r&&this.options.enabled===s.enabled&&n===this.currentRefetchInterval||this.updateRefetchInterval(n)},s.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),s=this.client.getQueryCache().build(this.client,t);return this.createResult(s,t)},s.getCurrentResult=function(){return this.currentResult},s.trackResult=function(e,t){var s=this,r={},a=function(e){s.trackedProps.includes(e)||s.trackedProps.push(e)};return Object.keys(e).forEach(function(t){Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:function(){return a(t),e[t]}})}),(t.useErrorBoundary||t.suspense)&&a("error"),r},s.getNextResult=function(e){var t=this;return new Promise(function(s,r){var a=t.subscribe(function(t){t.isFetching||(a(),t.isError&&(null==e?void 0:e.throwOnError)?r(t.error):s(t))})})},s.getCurrentQuery=function(){return this.currentQuery},s.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},s.refetch=function(e){return this.fetch(f({},e,{meta:{refetchPage:null==e?void 0:e.refetchPage}}))},s.fetchOptimistic=function(e){var t=this,s=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,s);return r.fetch().then(function(){return t.createResult(r,s)})},s.fetch=function(e){var t=this;return this.executeFetch(e).then(function(){return t.updateResult(),t.currentResult})},s.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(Ke)),t},s.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!Qe&&!this.currentResult.isStale&&We(this.options.staleTime)){var t=Ye(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(function(){e.currentResult.isStale||e.updateResult()},t)}},s.computeRefetchInterval=function(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e},s.updateRefetchInterval=function(e){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=e,!Qe&&!1!==this.options.enabled&&We(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(function(){(t.options.refetchIntervalInBackground||dt.isFocused())&&t.executeFetch()},this.currentRefetchInterval))},s.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},s.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},s.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},s.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},s.createResult=function(e,t){var s,r=this.currentQuery,a=this.options,n=this.currentResult,i=this.currentResultState,l=this.currentResultOptions,o=e!==r,c=o?e.state:this.currentQueryInitialState,d=o?this.currentResult:this.previousQueryResult,u=e.state,m=u.dataUpdatedAt,h=u.error,p=u.errorUpdatedAt,x=u.isFetching,f=u.status,g=!1,y=!1;if(t.optimisticResults){var b=this.hasListeners(),v=!b&&Dt(e,t),j=b&&Pt(e,r,t,a);(v||j)&&(x=!0,m||(f="loading"))}if(t.keepPreviousData&&!u.dataUpdateCount&&(null==d?void 0:d.isSuccess)&&"error"!==f)s=d.data,m=d.dataUpdatedAt,f=d.status,g=!0;else if(t.select&&void 0!==u.data)if(n&&u.data===(null==i?void 0:i.data)&&t.select===this.selectFn)s=this.selectResult;else try{this.selectFn=t.select,s=t.select(u.data),!1!==t.structuralSharing&&(s=at(null==n?void 0:n.data,s)),this.selectResult=s,this.selectError=null}catch(N){vt().error(N),this.selectError=N}else s=u.data;if(void 0!==t.placeholderData&&void 0===s&&("loading"===f||"idle"===f)){var w;if((null==n?void 0:n.isPlaceholderData)&&t.placeholderData===(null==l?void 0:l.placeholderData))w=n.data;else if(w="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==w)try{w=t.select(w),!1!==t.structuralSharing&&(w=at(null==n?void 0:n.data,w)),this.selectError=null}catch(N){vt().error(N),this.selectError=N}void 0!==w&&(f="success",s=w,y=!0)}return this.selectError&&(h=this.selectError,s=this.selectResult,p=Date.now(),f="error"),{status:f,isLoading:"loading"===f,isSuccess:"success"===f,isError:"error"===f,isIdle:"idle"===f,data:s,dataUpdatedAt:m,error:h,errorUpdatedAt:p,failureCount:u.fetchFailureCount,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&"loading"!==f,isLoadingError:"error"===f&&0===u.dataUpdatedAt,isPlaceholderData:y,isPreviousData:g,isRefetchError:"error"===f&&0!==u.dataUpdatedAt,isStale:It(e,t),refetch:this.refetch,remove:this.remove}},s.shouldNotifyListeners=function(e,t){if(!t)return!0;var s=this.options,r=s.notifyOnChangeProps,a=s.notifyOnChangePropsExclusions;if(!r&&!a)return!0;if("tracked"===r&&!this.trackedProps.length)return!0;var n="tracked"===r?this.trackedProps:r;return Object.keys(e).some(function(s){var r=s,i=e[r]!==t[r],l=null==n?void 0:n.some(function(e){return e===s}),o=null==a?void 0:a.some(function(e){return e===s});return i&&!o&&(!n||l)})},s.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!function(e,t){if(e&&!t||t&&!e)return!1;for(var s in e)if(e[s]!==t[s])return!1;return!0}(this.currentResult,t)){var s={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(s.listeners=!0),this.notify(f({},s,e))}},s.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},s.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||xt(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},s.notify=function(e){var t=this;yt.batch(function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach(function(e){e(t.currentResult)}),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})})},t}(ze);function Dt(e,t){return function(e,t){return!(!1===t.enabled||e.state.dataUpdatedAt||"error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&Ft(e,t,t.refetchOnMount)}function Ft(e,t,s){if(!1!==t.enabled){var r="function"==typeof s?s(e):s;return"always"===r||!1!==r&&It(e,t)}return!1}function Pt(e,t,s,r){return!1!==s.enabled&&(e!==t||!1===r.enabled)&&(!s.suspense||"error"!==e.state.status)&&It(e,s)}function It(e,t){return e.isStaleByTime(t.staleTime)}var Rt=function(e){function t(t,s){return e.call(this,t,s)||this}g(t,e);var s=t.prototype;return s.bindMethods=function(){e.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},s.setOptions=function(t,s){e.prototype.setOptions.call(this,f({},t,{behavior:kt()}),s)},s.getOptimisticResult=function(t){return t.behavior=kt(),e.prototype.getOptimisticResult.call(this,t)},s.fetchNextPage=function(e){var t;return this.fetch({cancelRefetch:null==(t=null==e?void 0:e.cancelRefetch)||t,throwOnError:null==e?void 0:e.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:null==e?void 0:e.pageParam}}})},s.fetchPreviousPage=function(e){var t;return this.fetch({cancelRefetch:null==(t=null==e?void 0:e.cancelRefetch)||t,throwOnError:null==e?void 0:e.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:null==e?void 0:e.pageParam}}})},s.createResult=function(t,s){var r,a,n,i,l,o,c=t.state,d=e.prototype.createResult.call(this,t,s);return f({},d,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Ct(s,null==(r=c.data)?void 0:r.pages),hasPreviousPage:Ot(s,null==(a=c.data)?void 0:a.pages),isFetchingNextPage:c.isFetching&&"forward"===(null==(n=c.fetchMeta)||null==(i=n.fetchMore)?void 0:i.direction),isFetchingPreviousPage:c.isFetching&&"backward"===(null==(l=c.fetchMeta)||null==(o=l.fetchMore)?void 0:o.direction)})},t}(At),Mt=function(e){function t(t,s){var r;return(r=e.call(this)||this).client=t,r.setOptions(s),r.bindMethods(),r.updateResult(),r}g(t,e);var s=t.prototype;return s.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},s.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},s.onUnsubscribe=function(){var e;this.listeners.length||null==(e=this.currentMutation)||e.removeObserver(this)},s.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},s.getCurrentResult=function(){return this.currentResult},s.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},s.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,f({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},s.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0},t=f({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset});this.currentResult=t},s.notify=function(e){var t=this;yt.batch(function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach(function(e){e(t.currentResult)})})},t}(ze),$t=r.unstable_batchedUpdates;yt.setBatchNotifyFunction($t);var Lt=console;bt=Lt;var qt=a.createContext(void 0),Ut=a.createContext(!1);function Bt(e){return e&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=qt),window.ReactQueryClientContext):qt}var Vt,zt=function(){var e=a.useContext(Bt(a.useContext(Ut)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Qt=function(e){var t=e.client,s=e.contextSharing,r=void 0!==s&&s,n=e.children;a.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var i=Bt(r);return a.createElement(Ut.Provider,{value:r},a.createElement(i.Provider,{value:t},n))},Kt=a.createContext((Vt=!1,{clearReset:function(){Vt=!1},reset:function(){Vt=!0},isReset:function(){return Vt}}));function Wt(e,t,s){return"function"==typeof t?t.apply(void 0,s):"boolean"==typeof t?t:!!e}function Gt(e,t,s){var r=a.useRef(!1),n=a.useState(0)[1],i=function(e,t,s){return lt(e)?"function"==typeof t?f({},s,{mutationKey:e,mutationFn:t}):f({},t,{mutationKey:e}):"function"==typeof e?f({},t,{mutationFn:e}):f({},e)}(e,t,s),l=zt(),o=a.useRef();o.current?o.current.setOptions(i):o.current=new Mt(l,i);var c=o.current.getCurrentResult();a.useEffect(function(){r.current=!0;var e=o.current.subscribe(yt.batchCalls(function(){r.current&&n(function(e){return e+1})}));return function(){r.current=!1,e()}},[]);var d=a.useCallback(function(e,t){o.current.mutate(e,t).catch(Ke)},[]);if(c.error&&Wt(void 0,o.current.options.useErrorBoundary,[c.error]))throw c.error;return f({},c,{mutate:d,mutateAsync:c.mutate})}function Yt(e,t){var s=a.useRef(!1),r=a.useState(0)[1],n=zt(),i=a.useContext(Kt),l=n.defaultQueryObserverOptions(e);l.optimisticResults=!0,l.onError&&(l.onError=yt.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=yt.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=yt.batchCalls(l.onSettled)),l.suspense&&("number"!=typeof l.staleTime&&(l.staleTime=1e3),0===l.cacheTime&&(l.cacheTime=1)),(l.suspense||l.useErrorBoundary)&&(i.isReset()||(l.retryOnMount=!1));var o=a.useState(function(){return new t(n,l)})[0],c=o.getOptimisticResult(l);if(a.useEffect(function(){s.current=!0,i.clearReset();var e=o.subscribe(yt.batchCalls(function(){s.current&&r(function(e){return e+1})}));return o.updateResult(),function(){s.current=!1,e()}},[i,o]),a.useEffect(function(){o.setOptions(l,{listeners:!1})},[l,o]),l.suspense&&c.isLoading)throw o.fetchOptimistic(l).then(function(e){var t=e.data;null==l.onSuccess||l.onSuccess(t),null==l.onSettled||l.onSettled(t,null)}).catch(function(e){i.clearReset(),null==l.onError||l.onError(e),null==l.onSettled||l.onSettled(void 0,e)});if(c.isError&&!i.isReset()&&!c.isFetching&&Wt(l.suspense,l.useErrorBoundary,[c.error,o.getCurrentQuery()]))throw c.error;return"tracked"===l.notifyOnChangeProps&&(c=o.trackResult(c,l)),c}function Ht(e,t,s){return Yt(He(e,t,s),At)}const Jt="https://qwxghpwasmvottahchky.supabase.co",Xt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF3eGdocHdhc212b3R0YWhjaGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI5MTI3NTksImV4cCI6MjA2ODQ4ODc1OX0.4a1Oc66k9mGmXLoHmrKyZiVeZISpyzgq1BERrb_-8n8",Zt="production",es="팀 매물장",ts="2.0.0",ss="jenny@deo-budongsan.co.kr,lucas@deo-budongsan.co.kr,hmlee@deo-budongsan.co.kr",rs=!0,as=!0,ns="6c361437-0a03-488c-9dc5-66c38f13e4c1",is={BASE_URL:"/the-realty-itemlist-dashboard/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAILS:"admin@the-realty.co.kr",VITE_APP_NAME:"팀 매물장",VITE_APP_VERSION:"2.0.0",VITE_DEBUG_MODE:"false",VITE_ENABLE_BYPASS:"false",VITE_ENABLE_DEMO_BANNER:"true",VITE_ENABLE_PWA:"true",VITE_ENVIRONMENT:"production",VITE_GOOGLE_CLIENT_ID:"your-production-google-client-id",VITE_SUPABASE_ANON_KEY:"your-production-anon-key",VITE_SUPABASE_URL:"https://your-production-project.supabase.co",VITE_USE_DUMMY_DATA:"false"},ls=(e,t="")=>{try{return is[e]||t}catch(s){return t}};let os=!1;try{os=window.location.hostname.includes("github.io")}catch(Ed){os=!1}const cs={SUPABASE_URL:Jt,SUPABASE_ANON_KEY:Xt,ENVIRONMENT:os?Zt:ls("VITE_ENVIRONMENT","development"),APP_NAME:os?es:ls("VITE_APP_NAME","팀 매물장"),APP_VERSION:os?ts:ls("VITE_APP_VERSION","2.0.0"),ADMIN_EMAILS:os?ss:ls("VITE_ADMIN_EMAILS",ss),ENABLE_DEMO_BANNER:os?rs:"false"!==ls("VITE_ENABLE_DEMO_BANNER","true"),ENABLE_PWA:os?as:"false"!==ls("VITE_ENABLE_PWA","true"),USE_DUMMY_DATA:!1,CHANNEL_TALK_PLUGIN_KEY:os?ns:ls("VITE_CHANNEL_TALK_PLUGIN_KEY",ns)};cs.ENVIRONMENT;const ds=cs.SUPABASE_URL,us=cs.SUPABASE_ANON_KEY,ms="undefined"!=typeof window&&"localhost"===window.location.hostname,hs=Te(ds,us,{auth:{persistSession:!0,autoRefreshToken:!0,sessionRefreshMargin:60},global:{headers:{"X-Client-Info":"the-realty-dashboard/2.0.0"}},db:{schema:"public"}});ms&&hs&&hs.from("properties").select("count").limit(1).then(({data:e,error:t})=>{}).catch(e=>{});const ps=()=>(window.location.hostname,!0),xs=()=>{const e="true"===new URLSearchParams(window.location.search).get("demo");return!("gma3561.github.io"===window.location.hostname&&!e)&&(ps(),!1)},fs={admin:{id:"qa-admin-user-001",email:"Lucas@the-realty.co.kr",name:"하상현",role:"admin",isAdmin:!0,avatar_url:null,created_at:(new Date).toISOString(),last_sign_in_at:(new Date).toISOString(),isQAUser:!0,testUserType:"admin"},user:{id:"qa-user-001",email:"sso@the-realty.co.kr",name:"박소현",role:"user",isAdmin:!1,avatar_url:null,created_at:(new Date).toISOString(),last_sign_in_at:(new Date).toISOString(),isQAUser:!0,testUserType:"user"},manager:{id:"qa-manager-001",email:"qa-manager@test.local",name:"QA 매니저",role:"user",isAdmin:!1,avatar_url:null,created_at:(new Date).toISOString(),last_sign_in_at:(new Date).toISOString(),isQAUser:!0,testUserType:"manager"}},gs=(e="admin")=>{if(!xs())return!1;const t=fs[e];if(!t)return!1;try{return localStorage.setItem("temp-bypass-user",JSON.stringify(t)),!0}catch(s){return!1}},ys=()=>{if(!xs())return null;try{const e=localStorage.getItem("temp-bypass-user");if(!e)return null;const t=JSON.parse(e);return t.isQAUser?t:(bs(),null)}catch(e){return bs(),null}},bs=()=>{try{return localStorage.removeItem("temp-bypass-user"),!0}catch(e){return!1}},vs=()=>({isEnabled:xs(),isProduction:ps(),currentUser:ys(),availableUsers:Object.keys(fs),environment:{hostname:window.location.hostname,isProduction:!0,viteEnvironment:"production",enableBypass:"false"}}),js=()=>{xs()&&vs().isEnabled};xs()&&"undefined"!=typeof window&&(window.QABypass={setUser:gs,clearUser:bs,getUser:ys,getStatus:vs,logInfo:js,users:fs});const ws=t.createContext(),Ns=({children:e})=>{const[s,r]=t.useState(null),[a,n]=t.useState(!0),[i,l]=t.useState(null),[o,c]=t.useState(!1),d=async(e=!1)=>{var t;try{if(e||n(!0),xs()){const e=ys();if(e)return r(e),l(null),void n(!1)}if(!hs)return r(null),l(null),void n(!1);const{data:{session:s},error:a}=await hs.auth.getSession();if(a)return r(null),l(null),void n(!1);if(null==s?void 0:s.user){const e=s.user,a=(cs.ADMIN_EMAILS?cs.ADMIN_EMAILS.split(",").map(e=>e.trim()):[]).includes(e.email);r({...e,role:a?"admin":"user",isAdmin:a,name:(null==(t=e.user_metadata)?void 0:t.full_name)||e.email,email:e.email}),l(null)}else r(null)}catch(s){l(null),r(null)}finally{e||(n(!1),setTimeout(()=>n(!1),0))}};t.useEffect(()=>{d();const e=setTimeout(()=>{n(!1)},3e3);if(!hs)return void clearTimeout(e);const{data:t}=hs.auth.onAuthStateChange(async(t,s)=>{"SIGNED_OUT"===t?(r(null),n(!1),clearTimeout(e)):"SIGNED_IN"!==t&&"TOKEN_REFRESHED"!==t||(await d(),clearTimeout(e))});return()=>{var s;null==(s=null==t?void 0:t.subscription)||s.unsubscribe(),clearTimeout(e)}},[]);const u={user:s,loading:a,error:i,signInWithGoogle:async()=>{try{if(n(!0),l(null),!hs)throw new Error("Supabase 클라이언트가 초기화되지 않았습니다.");const e="localhost"===window.location.hostname?`${window.location.origin}/the-realty-itemlist-dashboard/auth/callback`:"https://gma3561.github.io/the-realty-itemlist-dashboard/auth/callback",{error:t}=await hs.auth.signInWithOAuth({provider:"google",options:{queryParams:{access_type:"offline",prompt:"consent"},redirectTo:e}});if(t)throw t}catch(e){l(e.message),n(!1)}},signInWithBypass:async(e="admin")=>{if(!xs())return l("QA 바이패스 기능이 비활성화되어 있습니다."),!1;try{return n(!0),l(null),gs(e)?(await d(!0),!0):(l("바이패스 로그인에 실패했습니다."),!1)}catch(t){return l(t.message),!1}finally{n(!1)}},signOut:async()=>{try{n(!0),xs()&&bs(),hs&&await hs.auth.signOut(),r(null)}catch(e){l(e.message)}finally{n(!1)}},isBypassEnabled:xs(),isQAUser:(null==s?void 0:s.isQAUser)||!1};return Ue.jsx(ws.Provider,{value:u,children:e})},_s=()=>{const e=t.useContext(ws);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class ks extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?Ue.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:Ue.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:Ue.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Ue.jsxs("div",{className:"text-center",children:[Ue.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-pink-100",children:Ue.jsx("svg",{className:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ue.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),Ue.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"앱 로딩 오류"}),Ue.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"페이지를 로드하는 중 오류가 발생했습니다."}),Ue.jsx("div",{className:"mt-4",children:Ue.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary",children:"페이지 새로고침"})}),!1]})})})}):this.props.children}}ks.propTypes={children:y.node.isRequired};const Ss=({children:e})=>{const s=n(),{user:r,loading:a}=_s(),[l,o]=t.useState(!1),c=["/login","/auth/callback","/auth/process"].includes(s.pathname);return t.useEffect(()=>{const e=setTimeout(()=>{a&&o(!0)},3e3);return()=>clearTimeout(e)},[a]),t.useEffect(()=>{const e=setTimeout(()=>{o(!0)},2e3);return()=>clearTimeout(e)},[]),r||c?r&&"/login"===s.pathname?Ue.jsx(i,{to:"/",replace:!0}):e:Ue.jsx(i,{to:"/login",replace:!0})},Es=[{id:1,name:"김규민",email:"gyum@the-realty.co.kr",role:"admin"},{id:2,name:"하상현",email:"lucas@the-realty.co.kr",role:"admin"},{id:6,name:"정연서",email:"jenny@the-realty.co.kr",role:"admin"},{id:3,name:"정서연",email:"yool@the-realty.co.kr",role:"user"},{id:4,name:"정선혜",email:"grace@the-realty.co.kr",role:"user"},{id:5,name:"박소현",email:"sso@the-realty.co.kr",role:"user"},{id:7,name:"송영주",email:"joo@the-realty.co.kr",role:"user"},{id:8,name:"정윤식",email:"yun@the-realty.co.kr",role:"user"},{id:9,name:"성은미",email:"mimi@the-realty.co.kr",role:"user"},{id:10,name:"서을선",email:"sun@the-realty.co.kr",role:"user"},{id:11,name:"서지혜",email:"kylie@the-realty.co.kr",role:"user"},{id:12,name:"이혜만",email:"hmlee@the-realty.co.kr",role:"user"},{id:13,name:"김효석",email:"seok@the-realty.co.kr",role:"user"}];Es.filter(e=>"admin"===e.role);const Cs=()=>{const{user:e,loading:s,signInWithBypass:r,isBypassEnabled:a,error:n}=_s(),[l,o]=t.useState(null),[c,d]=t.useState(!1),[u,m]=t.useState(""),[h,p]=t.useState("email");if(vs(),e&&!s)return Ue.jsx(i,{to:"/",replace:!0});const x=async e=>{o(null),d(!0);try{await r(e)||o("QA 바이패스 로그인에 실패했습니다.")}catch(t){o(t.message)}finally{d(!1)}};return Ue.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[Ue.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[Ue.jsx("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"더부동산 통합 관리 시스템"}),Ue.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"매물 관리 및 직원 성과 분석 플랫폼"})]}),Ue.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:Ue.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Ue.jsxs("div",{className:"space-y-6",children:[(l||n)&&Ue.jsx("div",{className:"rounded-md bg-red-50 p-4",children:Ue.jsx("div",{className:"flex",children:Ue.jsxs("div",{className:"ml-3",children:[Ue.jsx("h3",{className:"text-sm font-medium text-red-800",children:"로그인 오류"}),Ue.jsx("div",{className:"mt-2 text-sm text-red-700",children:Ue.jsx("p",{children:l||n})})]})})}),Ue.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),u.trim()){o(null),d(!0);try{const e=(e=>e?Es.find(t=>t.email.toLowerCase()===e.toLowerCase()):null)(u);let t="user";u.includes("admin")||"admin@thereal.co.kr"===u?t="admin":e&&(t="manager"),await r(t,u)||o("로그인에 실패했습니다. 이메일을 확인해주세요.")}catch(t){o(t.message)}finally{d(!1)}}else o("이메일을 입력해주세요.")},className:"space-y-4",children:[Ue.jsxs("div",{children:[Ue.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"이메일 주소"}),Ue.jsx("div",{className:"mt-1",children:Ue.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:u,onChange:e=>m(e.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#FF66B2] focus:border-[#FF66B2] sm:text-sm",placeholder:"이메일을 입력하세요"})}),Ue.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"등록된 이메일 주소를 입력하면 자동으로 권한이 부여됩니다"})]}),Ue.jsx("div",{children:Ue.jsx("button",{type:"submit",disabled:c||s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#FF66B2] hover:bg-[#E6287F] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF66B2] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?Ue.jsxs(Ue.Fragment,{children:[Ue.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"로그인 중..."]}):"로그인"})})]}),a&&Ue.jsxs("div",{className:"mt-6",children:[Ue.jsxs("div",{className:"relative",children:[Ue.jsx("div",{className:"absolute inset-0 flex items-center",children:Ue.jsx("div",{className:"w-full border-t border-gray-300"})}),Ue.jsx("div",{className:"relative flex justify-center text-sm",children:Ue.jsx("span",{className:"px-2 bg-white text-gray-500",children:"또는"})})]}),Ue.jsxs("div",{className:"mt-6 bg-gray-50 border border-gray-200 rounded-md p-4",children:[Ue.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"빠른 테스트 로그인"}),Ue.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3",children:[Ue.jsx("button",{onClick:()=>x("admin"),disabled:c,className:"px-3 py-2 text-xs font-medium text-white bg-red-600 rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"관리자"}),Ue.jsx("button",{onClick:()=>x("manager"),disabled:c,className:"px-3 py-2 text-xs font-medium text-white bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"매니저"}),Ue.jsx("button",{onClick:()=>x("user"),disabled:c,className:"px-3 py-2 text-xs font-medium text-white bg-blue-600 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"일반사용자"})]})]})]}),Ue.jsxs("div",{className:"mt-6",children:[Ue.jsxs("div",{className:"relative",children:[Ue.jsx("div",{className:"absolute inset-0 flex items-center",children:Ue.jsx("div",{className:"w-full border-t border-gray-300"})}),Ue.jsx("div",{className:"relative flex justify-center text-sm",children:Ue.jsx("span",{className:"px-2 bg-white text-gray-500",children:"안내사항"})})]}),Ue.jsxs("div",{className:"mt-6 text-sm text-gray-600 space-y-2",children:[Ue.jsx("p",{children:"• 등록된 이메일 주소로 로그인하세요"}),Ue.jsx("p",{children:"• 이메일에 따라 자동으로 권한이 부여됩니다"}),Ue.jsx("p",{children:"• admin@thereal.co.kr: 관리자 권한"}),Ue.jsx("p",{children:"• 등록된 부동산 중개사: 매니저 권한"}),Ue.jsx("p",{children:"• 기타 이메일: 일반사용자 권한"})]})]})]})})})]})},Os=()=>{const e=l(),[s,r]=t.useState(0);return t.useEffect(()=>{const t=setTimeout(()=>{e("/",{replace:!0})},1500);return()=>clearTimeout(t)},[e]),Ue.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:Ue.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:Ue.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Ue.jsxs("div",{className:"flex flex-col items-center",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"mt-4 text-gray-600",children:"로그인 처리 중..."}),Ue.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"잠시만 기다려주세요"})]})})})})},Ts=()=>{const e=l(),s=n();return t.useEffect(()=>{(async()=>{try{const r=new URLSearchParams(s.search),a=r.get("access_token"),n=r.get("refresh_token");if(!a)return void e("/login");try{const{data:t,error:s}=await hs.auth.setSession({access_token:a,refresh_token:n||""});if(s)return void e("/login");e("/",{replace:!0})}catch(t){e("/login")}}catch(r){e("/login")}})()},[e,s]),Ue.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:Ue.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:Ue.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Ue.jsxs("div",{className:"flex justify-center items-center",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-4 text-gray-600",children:"로그인 완료 중..."})]})})})})},As=e=>{if(!e)return!1;const t=(cs.ADMIN_EMAILS||"").split(",").map(e=>e.trim()).filter(Boolean);return t.some(t=>t.toLowerCase()===e.toLowerCase())},Ds="admin",Fs="user",Ps="view_all_properties",Is="view_own_properties",Rs="view_customer_info",Ms="create_property",$s="edit_all_properties",Ls="edit_own_properties",qs="delete_all_properties",Us="delete_own_properties",Bs="comment_on_properties",Vs="view_users",zs="manage_users",Qs="view_all_performance",Ks="view_own_performance",Ws="bulk_upload",Gs="view_customers",Ys="manage_customers",Hs={[Ds]:[Ps,Is,Rs,Ms,$s,Ls,qs,Us,Bs,Vs,zs,Qs,Ks,Ws,Gs,Ys],[Fs]:[Is,Ms,Ls,Us,Ks,Bs,Gs,Ys]},Js=e=>e&&(e.role===Ds||!0===e.isAdmin),Xs=e=>e&&e.role===Fs&&!Js(e),Zs=(e,t,s)=>{if(!e)return!1;if(Js(e))return!0;if(Xs(e)){if(!t)return"create"===s;const r=t.user_id===e.id||t.manager_id===e.id||t.manager_id===e.email||t.manager_id===`hardcoded-${e.email}`;return"view"===s||"comment"===s||r}return!1},er=e=>{const t=[{name:"대시보드",path:"/",permission:Is,icon:"📊"},{name:"내 매물",path:"/my-properties",permission:Is,icon:"🏠"},{name:"매물 목록",path:"/properties",permission:Is,icon:"🏢"},{name:"고객 관리",path:"/customers",permission:Gs,icon:"👤"}];return Js(e)&&t.push({name:"직원 관리",path:"/users",permission:zs,icon:"👥"},{name:"직원 성과",path:"/performance",permission:Qs,icon:"📈"}),t.filter(t=>!t.permission||((e,t)=>!(!e||!e.role)&&(Hs[e.role]||[]).includes(t))(e,t.permission))},tr=e=>Js(e)?"관리자":Xs(e)?"일반사용자":"게스트",sr=e=>Js(e)?"bg-red-100 text-red-800 border-red-200":Xs(e)?"bg-pink-100 text-pink-800 border-pink-200":"bg-gray-100 text-gray-800 border-gray-200",rr=async()=>{try{const e=[{id:"apt",name:"아파트",display_order:1},{id:"officetel",name:"오피스텔",display_order:2},{id:"villa",name:"빌라/연립",display_order:3},{id:"house",name:"단독주택",display_order:4},{id:"commercial",name:"상가",display_order:5}],t=[{id:"presale",name:"분양",display_order:1},{id:"developer",name:"시행사매물",display_order:2},{id:"sale",name:"매매",display_order:3},{id:"lease",name:"전세",display_order:4},{id:"rent",name:"월세/렌트",display_order:5},{id:"short",name:"단기",display_order:6}],s=[{id:"available",name:"거래가능",display_order:1},{id:"completed",name:"거래완료",display_order:2},{id:"hold",name:"거래보류",display_order:3},{id:"cancelled",name:"거래철회",display_order:4},{id:"inspection_available",name:"임장가능",display_order:5}];return{success:!0,results:await Promise.allSettled([hs.from("property_types").upsert(e,{onConflict:"id"}),hs.from("transaction_types").upsert(t,{onConflict:"id"}),hs.from("property_statuses").upsert(s,{onConflict:"id"})])}}catch(e){return{success:!1,error:e.message}}},ar=async()=>{try{const[e,t,s]=await Promise.all([hs.from("property_types").select("*").order("display_order"),hs.from("transaction_types").select("*").order("display_order"),hs.from("property_statuses").select("*").order("display_order")]);if(e.error)throw e.error;if(t.error)throw t.error;if(s.error)throw s.error;return{propertyTypes:e.data||[],transactionTypes:t.data||[],propertyStatuses:s.data||[]}}catch(e){throw e}},nr=async e=>{try{const{data:t,error:s}=await hs.from("properties").select("*").eq("id",e).single();if(s)throw s;return{data:t,error:null}}catch(t){return{data:null,error:t.message}}},ir=e=>{const t=[];return e.property_name||t.push("매물명이 필요합니다"),e.location||t.push("소재지가 필요합니다"),e.property_type||t.push("매물종류가 필요합니다"),e.transaction_type||t.push("거래유형이 필요합니다"),e.property_status||t.push("진행상태가 필요합니다"),"sale"===e.transaction_type&&(!e.sale_price||e.sale_price<=0)&&t.push("매매 거래시 매매가가 필요합니다"),"lease"===e.transaction_type&&(!e.lease_price||e.lease_price<=0)&&t.push("전세 거래시 보증금이 필요합니다"),"rent"===e.transaction_type&&(!e.price||e.price<=0)&&t.push("월세 거래시 월세가 필요합니다"),t},lr=async(e,t)=>{try{await rr();const r=50;let a=0,n=0;const i=[];for(let l=0;l<e.length;l+=r){const o=e.slice(l,l+r),c=o.map(e=>({...e,manager_id:t||"admin"}));try{for(const e of c){const t=ir(e);if(t.length>0)throw new Error(`데이터 검증 실패: ${t.join(", ")}`)}const{data:t,error:s}=await hs.from("properties").insert(c).select();if(s)throw s;a+=o.length,l+r<e.length&&await new Promise(e=>setTimeout(e,100))}catch(s){n+=o.length,i.push(`배치 ${Math.floor(l/r)+1}: ${s.message}`)}}return{success:a>0,totalCount:e.length,uploadedCount:a,failedCount:n,errors:i}}catch(r){return{success:!1,totalCount:e.length,uploadedCount:0,failedCount:e.length,errors:[r.message]}}},or=ar,cr=async(e={},t=null,s=null)=>{try{if(!hs)return{data:[],error:"Supabase not initialized",totalCount:0};if(e.countOnly){let t=hs.from("properties").select("*",{count:"exact",head:!0});e.property_type_id&&(t=t.eq("property_type_id",e.property_type_id)),e.transaction_type_id&&(t=t.eq("transaction_type_id",e.transaction_type_id)),e.property_status&&(t=t.eq("property_status",e.property_status)),e.search&&(t=t.or(`property_name.ilike.%${e.search}%,location.ilike.%${e.search}%`));const{count:s,error:r}=await t;if(r)throw r;return{data:[],error:null,totalCount:s||0}}if(null===s){let t=[],s=0;const r=1e3;let a=!0;for(;a;){let n=hs.from("properties").select("*").range(s*r,(s+1)*r-1).order("created_at",{ascending:!1}).not("property_name","ilike","%테스트%").not("property_name","ilike","%test%").not("property_name","ilike","%dummy%").not("property_name","ilike","%샘플%").not("property_name","ilike","%sample%").neq("manager_id","system");e.property_type_id&&(n=n.eq("property_type_id",e.property_type_id)),e.transaction_type_id&&(n=n.eq("transaction_type_id",e.transaction_type_id)),e.property_status&&(n=n.eq("property_status",e.property_status)),e.search&&(n=n.or(`property_name.ilike.%${e.search}%,location.ilike.%${e.search}%`));const{data:i,error:l}=await n;if(l)throw l;i&&i.length>0?(t=[...t,...i],a=i.length===r,s++):a=!1}return{data:t,error:null,totalCount:t.length}}let t=hs.from("properties").select("*",{count:"exact"}).not("property_name","ilike","%테스트%").not("property_name","ilike","%test%").not("property_name","ilike","%dummy%").not("property_name","ilike","%샘플%").not("property_name","ilike","%sample%").neq("manager_id","system");if(e.property_type_id&&(t=t.eq("property_type_id",e.property_type_id)),e.transaction_type_id&&(t=t.eq("transaction_type_id",e.transaction_type_id)),e.property_status&&(t=t.eq("property_status",e.property_status)),e.search&&(t=t.or(`property_name.ilike.%${e.search}%,location.ilike.%${e.search}%`)),t=t.order("created_at",{ascending:!1}),s){const{page:e=0,pageSize:r=30}=s,a=e*r,n=a+r-1;t=t.range(a,n)}const{data:r,error:a,count:n}=await t;if(a)throw a;return{data:r||[],error:null,totalCount:n||0}}catch(r){return{data:[],error:r.message,totalCount:0}}},dr=nr,ur=async(e,t=null)=>{try{if(t){const{data:s}=await nr(e);if(!Zs(t,s,"delete"))return{error:"이 매물을 삭제할 권한이 없습니다."}}const{error:s}=await hs.from("properties").delete().eq("id",e);if(s)throw s;return{error:null}}catch(s){return{error:s.message}}},mr={"gyum@the-realty.co.kr":"김규민","lucas@the-realty.co.kr":"하상현","yool@the-realty.co.kr":"정서연","grace@the-realty.co.kr":"정선혜","sso@the-realty.co.kr":"박소현","jenny@the-realty.co.kr":"정연서","joo@the-realty.co.kr":"송영주","yun@the-realty.co.kr":"정윤식","mimi@the-realty.co.kr":"성은미","sun@the-realty.co.kr":"서을선","kylie@the-realty.co.kr":"서지혜","hmlee@the-realty.co.kr":"이혜만","seok@the-realty.co.kr":"김효석"},hr=e=>{if(!e)return"미지정";const t=e.replace("hardcoded-","");return mr[t]||t.split("@")[0]};function pr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function xr(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const fr=6048e5;let gr={};function yr(){return gr}function br(e,t){var s,r,a,n;const i=yr(),l=(null==t?void 0:t.weekStartsOn)??(null==(r=null==(s=null==t?void 0:t.locale)?void 0:s.options)?void 0:r.weekStartsOn)??i.weekStartsOn??(null==(n=null==(a=i.locale)?void 0:a.options)?void 0:n.weekStartsOn)??0,o=pr(e),c=o.getDay(),d=(c<l?7:0)+c-l;return o.setDate(o.getDate()-d),o.setHours(0,0,0,0),o}function vr(e){return br(e,{weekStartsOn:1})}function jr(e){const t=pr(e),s=t.getFullYear(),r=xr(e,0);r.setFullYear(s+1,0,4),r.setHours(0,0,0,0);const a=vr(r),n=xr(e,0);n.setFullYear(s,0,4),n.setHours(0,0,0,0);const i=vr(n);return t.getTime()>=a.getTime()?s+1:t.getTime()>=i.getTime()?s:s-1}function wr(e){const t=pr(e);return t.setHours(0,0,0,0),t}function Nr(e){const t=pr(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function _r(e){if(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const s=pr(e);return!isNaN(Number(s))}const kr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Sr(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const Er={date:Sr({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Sr({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Sr({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Cr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Or(e){return(t,s)=>{let r;if("formatting"===((null==s?void 0:s.context)?String(s.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=(null==s?void 0:s.width)?String(s.width):t;r=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=(null==s?void 0:s.width)?String(s.width):e.defaultWidth;r=e.values[a]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function Tr(e){return(t,s={})=>{const r=s.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],n=t.match(a);if(!n)return null;const i=n[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(l)?function(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s}(l,e=>e.test(i)):function(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s}(l,e=>e.test(i));let c;return c=e.valueCallback?e.valueCallback(o):o,c=s.valueCallback?s.valueCallback(c):c,{value:c,rest:t.slice(i.length)}}}function Ar(e){return(t,s={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],n=t.match(e.parsePattern);if(!n)return null;let i=e.valueCallback?e.valueCallback(n[0]):n[0];return i=s.valueCallback?s.valueCallback(i):i,{value:i,rest:t.slice(a.length)}}}const Dr={code:"en-US",formatDistance:(e,t,s)=>{let r;const a=kr[e];return r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),(null==s?void 0:s.addSuffix)?s.comparison&&s.comparison>0?"in "+r:r+" ago":r},formatLong:Er,formatRelative:(e,t,s,r)=>Cr[e],localize:{ordinalNumber:(e,t)=>{const s=Number(e),r=s%100;if(r>20||r<10)switch(r%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},era:Or({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Or({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Or({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Or({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Or({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:Ar({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:Tr({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Tr({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Tr({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Tr({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Tr({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Fr(e){const t=pr(e),s=function(e,t){const s=wr(e),r=wr(t),a=+s-Nr(s),n=+r-Nr(r);return Math.round((a-n)/864e5)}(t,function(e){const t=pr(e),s=xr(e,0);return s.setFullYear(t.getFullYear(),0,1),s.setHours(0,0,0,0),s}(t));return s+1}function Pr(e){const t=pr(e),s=+vr(t)-+function(e){const t=jr(e),s=xr(e,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),vr(s)}(t);return Math.round(s/fr)+1}function Ir(e,t){var s,r,a,n;const i=pr(e),l=i.getFullYear(),o=yr(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(s=null==t?void 0:t.locale)?void 0:s.options)?void 0:r.firstWeekContainsDate)??o.firstWeekContainsDate??(null==(n=null==(a=o.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??1,d=xr(e,0);d.setFullYear(l+1,0,c),d.setHours(0,0,0,0);const u=br(d,t),m=xr(e,0);m.setFullYear(l,0,c),m.setHours(0,0,0,0);const h=br(m,t);return i.getTime()>=u.getTime()?l+1:i.getTime()>=h.getTime()?l:l-1}function Rr(e,t){const s=pr(e),r=+br(s,t)-+function(e,t){var s,r,a,n;const i=yr(),l=(null==t?void 0:t.firstWeekContainsDate)??(null==(r=null==(s=null==t?void 0:t.locale)?void 0:s.options)?void 0:r.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(n=null==(a=i.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??1,o=Ir(e,t),c=xr(e,0);return c.setFullYear(o,0,l),c.setHours(0,0,0,0),br(c,t)}(s,t);return Math.round(r/fr)+1}function Mr(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const $r={y(e,t){const s=e.getFullYear(),r=s>0?s:1-s;return Mr("yy"===t?r%100:r,t.length)},M(e,t){const s=e.getMonth();return"M"===t?String(s+1):Mr(s+1,2)},d:(e,t)=>Mr(e.getDate(),t.length),a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return"am"===s?"a.m.":"p.m."}},h:(e,t)=>Mr(e.getHours()%12||12,t.length),H:(e,t)=>Mr(e.getHours(),t.length),m:(e,t)=>Mr(e.getMinutes(),t.length),s:(e,t)=>Mr(e.getSeconds(),t.length),S(e,t){const s=t.length,r=e.getMilliseconds();return Mr(Math.trunc(r*Math.pow(10,s-3)),t.length)}},Lr="midnight",qr="noon",Ur="morning",Br="afternoon",Vr="evening",zr="night",Qr={G:function(e,t,s){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"});case"GGGGG":return s.era(r,{width:"narrow"});default:return s.era(r,{width:"wide"})}},y:function(e,t,s){if("yo"===t){const t=e.getFullYear(),r=t>0?t:1-t;return s.ordinalNumber(r,{unit:"year"})}return $r.y(e,t)},Y:function(e,t,s,r){const a=Ir(e,r),n=a>0?a:1-a;return"YY"===t?Mr(n%100,2):"Yo"===t?s.ordinalNumber(n,{unit:"year"}):Mr(n,t.length)},R:function(e,t){return Mr(jr(e),t.length)},u:function(e,t){return Mr(e.getFullYear(),t.length)},Q:function(e,t,s){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Mr(r,2);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});default:return s.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,s){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Mr(r,2);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});default:return s.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,s){const r=e.getMonth();switch(t){case"M":case"MM":return $r.M(e,t);case"Mo":return s.ordinalNumber(r+1,{unit:"month"});case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});default:return s.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,s){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Mr(r+1,2);case"Lo":return s.ordinalNumber(r+1,{unit:"month"});case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});default:return s.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,s,r){const a=Rr(e,r);return"wo"===t?s.ordinalNumber(a,{unit:"week"}):Mr(a,t.length)},I:function(e,t,s){const r=Pr(e);return"Io"===t?s.ordinalNumber(r,{unit:"week"}):Mr(r,t.length)},d:function(e,t,s){return"do"===t?s.ordinalNumber(e.getDate(),{unit:"date"}):$r.d(e,t)},D:function(e,t,s){const r=Fr(e);return"Do"===t?s.ordinalNumber(r,{unit:"dayOfYear"}):Mr(r,t.length)},E:function(e,t,s){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"});default:return s.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,s,r){const a=e.getDay(),n=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(n);case"ee":return Mr(n,2);case"eo":return s.ordinalNumber(n,{unit:"day"});case"eee":return s.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,s,r){const a=e.getDay(),n=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(n);case"cc":return Mr(n,t.length);case"co":return s.ordinalNumber(n,{unit:"day"});case"ccc":return s.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(a,{width:"narrow",context:"standalone"});case"cccccc":return s.day(a,{width:"short",context:"standalone"});default:return s.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,s){const r=e.getDay(),a=0===r?7:r;switch(t){case"i":return String(a);case"ii":return Mr(a,t.length);case"io":return s.ordinalNumber(a,{unit:"day"});case"iii":return s.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(r,{width:"short",context:"formatting"});default:return s.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,s){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(r,{width:"narrow",context:"formatting"});default:return s.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,s){const r=e.getHours();let a;switch(a=12===r?qr:0===r?Lr:r/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,s){const r=e.getHours();let a;switch(a=r>=17?Vr:r>=12?Br:r>=4?Ur:zr,t){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,s){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),s.ordinalNumber(t,{unit:"hour"})}return $r.h(e,t)},H:function(e,t,s){return"Ho"===t?s.ordinalNumber(e.getHours(),{unit:"hour"}):$r.H(e,t)},K:function(e,t,s){const r=e.getHours()%12;return"Ko"===t?s.ordinalNumber(r,{unit:"hour"}):Mr(r,t.length)},k:function(e,t,s){let r=e.getHours();return 0===r&&(r=24),"ko"===t?s.ordinalNumber(r,{unit:"hour"}):Mr(r,t.length)},m:function(e,t,s){return"mo"===t?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):$r.m(e,t)},s:function(e,t,s){return"so"===t?s.ordinalNumber(e.getSeconds(),{unit:"second"}):$r.s(e,t)},S:function(e,t){return $r.S(e,t)},X:function(e,t,s){const r=e.getTimezoneOffset();if(0===r)return"Z";switch(t){case"X":return Wr(r);case"XXXX":case"XX":return Gr(r);default:return Gr(r,":")}},x:function(e,t,s){const r=e.getTimezoneOffset();switch(t){case"x":return Wr(r);case"xxxx":case"xx":return Gr(r);default:return Gr(r,":")}},O:function(e,t,s){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Kr(r,":");default:return"GMT"+Gr(r,":")}},z:function(e,t,s){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Kr(r,":");default:return"GMT"+Gr(r,":")}},t:function(e,t,s){return Mr(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,s){return Mr(e.getTime(),t.length)}};function Kr(e,t=""){const s=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),n=r%60;return 0===n?s+String(a):s+String(a)+t+Mr(n,2)}function Wr(e,t){return e%60==0?(e>0?"-":"+")+Mr(Math.abs(e)/60,2):Gr(e,t)}function Gr(e,t=""){const s=e>0?"-":"+",r=Math.abs(e);return s+Mr(Math.trunc(r/60),2)+t+Mr(r%60,2)}const Yr=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Hr=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Jr={p:Hr,P:(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],r=s[1],a=s[2];if(!a)return Yr(e,t);let n;switch(r){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Yr(r,t)).replace("{{time}}",Hr(a,t))}},Xr=/^D+$/,Zr=/^Y+$/,ea=["D","DD","YY","YYYY"],ta=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sa=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ra=/^'([^]*?)'?$/,aa=/''/g,na=/[a-zA-Z]/;function ia(e,t,s){var r,a,n,i,l,o,c,d;const u=yr(),m=(null==s?void 0:s.locale)??u.locale??Dr,h=(null==s?void 0:s.firstWeekContainsDate)??(null==(a=null==(r=null==s?void 0:s.locale)?void 0:r.options)?void 0:a.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(i=null==(n=u.locale)?void 0:n.options)?void 0:i.firstWeekContainsDate)??1,p=(null==s?void 0:s.weekStartsOn)??(null==(o=null==(l=null==s?void 0:s.locale)?void 0:l.options)?void 0:o.weekStartsOn)??u.weekStartsOn??(null==(d=null==(c=u.locale)?void 0:c.options)?void 0:d.weekStartsOn)??0,x=pr(e);if(!_r(x))throw new RangeError("Invalid time value");let f=t.match(sa).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,Jr[t])(e,m.formatLong):e}).join("").match(ta).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:la(e)};if(Qr[t])return{isToken:!0,value:e};if(t.match(na))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});m.localize.preprocessor&&(f=m.localize.preprocessor(x,f));const g={firstWeekContainsDate:h,weekStartsOn:p,locale:m};return f.map(r=>{if(!r.isToken)return r.value;const a=r.value;return(!(null==s?void 0:s.useAdditionalWeekYearTokens)&&function(e){return Zr.test(e)}(a)||!(null==s?void 0:s.useAdditionalDayOfYearTokens)&&function(e){return Xr.test(e)}(a))&&function(e,t,s){const r=function(e,t,s){const r="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,s);if(ea.includes(e))throw new RangeError(r)}(a,t,String(e)),(0,Qr[a[0]])(x,a,m.localize,g)}).join("")}function la(e){const t=e.match(ra);return t?t[1].replace(aa,"'"):e}const oa={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},ca={date:Sr({formats:{full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},defaultWidth:"full"}),time:Sr({formats:{full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:Sr({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},da={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},ua={code:"ko",formatDistance:(e,t,s)=>{let r;const a=oa[e];return r="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),(null==s?void 0:s.addSuffix)?s.comparison&&s.comparison>0?r+" 후":r+" 전":r},formatLong:ca,formatRelative:(e,t,s,r)=>da[e],localize:{ordinalNumber:(e,t)=>{const s=Number(e);switch(String(null==t?void 0:t.unit)){case"minute":case"second":return String(s);case"date":return s+"일";default:return s+"번째"}},era:Or({values:{narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},defaultWidth:"wide"}),quarter:Or({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Or({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},defaultWidth:"wide"}),day:Or({values:{narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},defaultWidth:"wide"}),dayPeriod:Or({values:{narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},defaultWidth:"wide",formattingValues:{narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:Ar({matchPattern:/^(\d+)(일|번째)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:Tr({matchPatterns:{narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^(bc|기원전)/i,/^(ad|서기)/i]},defaultParseWidth:"any"}),quarter:Tr({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Tr({matchPatterns:{narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:Tr({matchPatterns:{narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},defaultMatchWidth:"wide",parsePatterns:{any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},defaultParseWidth:"any"}),dayPeriod:Tr({matchPatterns:{any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},ma=()=>{var e;const{user:s}=_s(),[r,a]=t.useState(new Date);t.useEffect(()=>{const e=setInterval(()=>{a(new Date)},1e3);return()=>clearInterval(e)},[]);const{data:n=[],isLoading:i,error:l,refetch:c}=Ht(["dashboard-properties",null==s?void 0:s.email],async()=>{const e={userId:null==s?void 0:s.id,userEmail:null==s?void 0:s.email,isAdmin:As(null==s?void 0:s.email)},{data:t,error:r}=await cr({},e,null);if(r)throw new Error(r);return t||[]},{retry:!1,refetchOnWindowFocus:!1}),{data:d={},refetch:u}=Ht("lookupTables",async()=>await or(),{staleTime:3e5}),{data:m=[],refetch:h}=Ht(["recentActivities"],async()=>{if(!hs)return[];const{data:e,error:t}=await hs.from("recent_activities").select("*").neq("changed_by","system").not("changed_by","ilike","%test%").not("changed_by","ilike","%dummy%").order("changed_at",{ascending:!1}).limit(20);return t?[]:e||[]},{refetchInterval:3e4,enabled:!!hs}),{data:p={}}=Ht(["weeklyChanges"],async()=>{if(!hs)return{};const e=br(new Date,{weekStartsOn:1}),{data:t,error:s}=await hs.from("property_status_history").select("new_status").gte("changed_at",e.toISOString()).lt("changed_at",(new Date).toISOString()).neq("changed_by","system").not("changed_by","ilike","%test%").not("changed_by","ilike","%dummy%");if(s)return{};const r={};return null==t||t.forEach(e=>{r[e.new_status]=(r[e.new_status]||0)+1}),r},{refetchInterval:6e4,enabled:!!hs});t.useCallback(()=>{c(),u(),h()},[c,u,h]);const x=t.useCallback(e=>{const t=ia(new Date(e.changed_at),"HH:mm",{locale:ua}),s=M(e.old_status),r=M(e.new_status);return{time:t,user:e.changed_by_name||e.changed_by,property:e.property_name,change:s?`${s} → ${r}`:`${r}로 등록`,isNew:!e.old_status}},[d.propertyStatuses]),{monday:f,sunday:g}=(()=>{const e=new Date;return{monday:br(e,{weekStartsOn:1}),sunday:function(e,t){const s=null==t?void 0:t.weekStartsOn,r=pr(e),a=r.getDay(),n=6+(a<s?-7:0)-(a-s);return r.setDate(r.getDate()+n),r.setHours(23,59,59,999),r}(e,{weekStartsOn:1})}})();n.filter(e=>{const t=new Date(e.created_at);return t>=f&&t<=g});const y=t.useMemo(()=>{const e={available:0,contract:0,inspection_available:0,hold:0,completed:0,cancelled:0};return n.forEach(t=>{e.hasOwnProperty(t.property_status)&&e[t.property_status]++}),e},[n]),R={newRegistrations:n.filter(e=>{const t=new Date(e.created_at);return t>=f&&t<=g}).length,contractStarted:p.contract||0,completed:p.completed||0,cancelled:p.cancelled||0,onHold:p.hold||0},M=e=>{var t;const s=null==(t=d.propertyStatuses)?void 0:t.find(t=>t.id===e);return(null==s?void 0:s.name)||e},{data:$=[],refetch:L}=Ht("users",async()=>{const{data:e,error:t}=await hs.from("users").select("*").eq("status","active").order("name");if(t)throw t;return e||[]},{staleTime:3e5}),{data:q=[]}=Ht(["weeklyUserStats"],async()=>{if(!hs)return[];const e=br(new Date,{weekStartsOn:1}),{data:t,error:s}=await hs.from("property_status_history").select("changed_by, new_status").gte("changed_at",e.toISOString()).neq("changed_by","system").not("changed_by","ilike","%test%").not("changed_by","ilike","%dummy%"),{data:r,error:a}=await hs.from("properties").select("manager_id").gte("created_at",e.toISOString());if(s||a)return[];const n={};return null==r||r.forEach(e=>{const t=e.manager_id;n[t]||(n[t]={newRegistrations:0,statusChanges:0,completed:0}),n[t].newRegistrations++}),null==t||t.forEach(e=>{const t=e.changed_by;n[t]||(n[t]={newRegistrations:0,statusChanges:0,completed:0}),n[t].statusChanges++,"completed"===e.new_status&&n[t].completed++}),Object.entries(n).map(([e,t])=>{const s=$.find(t=>t.id===e||t.email===e),r=(null==s?void 0:s.name)||(e.includes("@")?hr(e):e);return{id:e,name:r,...t,total:t.newRegistrations+t.statusChanges}}).sort((e,t)=>t.total-e.total).slice(0,5)},{enabled:!!hs&&$.length>0,refetchInterval:6e4}),U=t.useMemo(()=>{const e=[];for(let t=0;t<7;t++){const s=new Date(f);s.setDate(f.getDate()+t),e.push({day:ia(s,"E",{locale:ua}),date:ia(s,"MM-dd"),"신규":0,"계약":0,"완료":0})}return e},[f]);return i?Ue.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-2 text-gray-600",children:"대시보드를 불러오는 중..."})]}):l?Ue.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[Ue.jsx(b,{className:"w-16 h-16 text-red-500"}),Ue.jsxs("div",{className:"text-center",children:[Ue.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"데이터 조회 실패"}),Ue.jsx("p",{className:"text-gray-600 mb-4",children:"매물 데이터를 불러올 수 없습니다."}),Ue.jsxs("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:["에러: ",l.message]}),Ue.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["현재 사용자: ",null==s?void 0:s.email," (",(null==s?void 0:s.testUserType)||"unknown",")"]})]})]}):Ue.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ue.jsx("div",{className:"bg-white border-b",children:Ue.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:Ue.jsxs("div",{className:"flex items-start justify-between",children:[Ue.jsxs("div",{className:"flex-1",children:[Ue.jsxs("div",{className:"mb-3",children:[Ue.jsxs("p",{className:"text-base sm:text-lg text-gray-600 mb-1",children:["안녕하세요 ",Ue.jsxs("span",{className:"font-semibold text-gray-900",children:[(null==s?void 0:s.name)||(null==(e=null==s?void 0:s.email)?void 0:e.split("@")[0]),"님"]})," 👋"]}),Ue.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:"더부동산중개법인 대시보드"})]}),Ue.jsx("p",{className:"text-lg sm:text-xl font-semibold text-primary",children:ia(r,"yyyy년 M월 d일 (E) HH:mm:ss",{locale:ua})})]}),Ue.jsx("div",{className:"ml-6 flex-shrink-0",children:Ue.jsxs(o,{to:"/properties/new",className:"inline-flex items-center px-6 sm:px-8 py-3 sm:py-4 bg-primary text-white text-base sm:text-lg font-semibold rounded-lg hover:bg-pink-600 transition-colors shadow-md",children:[Ue.jsx(v,{className:"w-5 sm:w-6 h-5 sm:h-6 mr-2 sm:mr-3"}),"매물 등록"]})})]})})}),Ue.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[Ue.jsx("h2",{className:"text-base sm:text-lg font-medium text-gray-900 mb-3 sm:mb-4",children:"현재 매물 현황"}),Ue.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[Ue.jsxs("div",{className:"bg-green-50 rounded p-2 text-center",children:[Ue.jsx(j,{className:"h-4 w-4 text-green-500 mx-auto mb-1"}),Ue.jsx("p",{className:"text-base font-bold text-green-700 mb-0.5",children:y.available.toLocaleString()}),Ue.jsx("p",{className:"text-xs text-green-600",children:"거래가능"})]}),Ue.jsxs("div",{className:"bg-pink-50 rounded p-2 text-center",children:[Ue.jsx(w,{className:"h-4 w-4 text-pink-500 mx-auto mb-1"}),Ue.jsx("p",{className:"text-base font-bold text-pink-700 mb-0.5",children:y.contract.toLocaleString()}),Ue.jsx("p",{className:"text-xs text-pink-600",children:"계약중"})]}),Ue.jsxs("div",{className:"bg-purple-50 rounded p-2 text-center",children:[Ue.jsx(N,{className:"h-4 w-4 text-purple-500 mx-auto mb-1"}),Ue.jsx("p",{className:"text-base font-bold text-purple-700 mb-0.5",children:y.inspection_available.toLocaleString()}),Ue.jsx("p",{className:"text-xs text-purple-600",children:"임장가능"})]}),Ue.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center",children:[Ue.jsx(_,{className:"h-4 w-4 text-blue-500 mx-auto mb-1"}),Ue.jsx("p",{className:"text-base font-bold text-blue-700 mb-0.5",children:y.completed.toLocaleString()}),Ue.jsx("p",{className:"text-xs text-blue-600",children:"완료"})]}),Ue.jsxs("div",{className:"bg-orange-50 rounded p-2 text-center",children:[Ue.jsx(k,{className:"h-4 w-4 text-orange-500 mx-auto mb-1"}),Ue.jsx("p",{className:"text-base font-bold text-orange-700 mb-0.5",children:y.hold.toLocaleString()}),Ue.jsx("p",{className:"text-xs text-orange-600",children:"보류"})]})]})]}),Ue.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-4 sm:pb-6",children:[Ue.jsx("h2",{className:"text-base sm:text-lg font-medium text-gray-900 mb-3 sm:mb-4",children:"이번 주 활동 현황"}),Ue.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[Ue.jsxs("div",{className:"bg-blue-50 rounded p-2 text-center",children:[Ue.jsx(v,{className:"h-4 w-4 text-blue-500 mx-auto mb-1"}),Ue.jsx("p",{className:"text-base font-bold text-blue-700 mb-0.5",children:R.newRegistrations}),Ue.jsx("p",{className:"text-xs text-blue-600",children:"신규"})]}),Ue.jsxs("div",{className:"bg-pink-50 rounded p-2 text-center",children:[Ue.jsx(S,{className:"h-4 w-4 text-pink-500 mx-auto mb-1"}),Ue.jsx("p",{className:"text-base font-bold text-pink-700 mb-0.5",children:R.contractStarted}),Ue.jsx("p",{className:"text-xs text-pink-600",children:"계약"})]}),Ue.jsxs("div",{className:"bg-green-50 rounded p-2 text-center",children:[Ue.jsx(_,{className:"h-4 w-4 text-green-500 mx-auto mb-1"}),Ue.jsx("p",{className:"text-base font-bold text-green-700 mb-0.5",children:R.completed}),Ue.jsx("p",{className:"text-xs text-green-600",children:"완료"})]}),Ue.jsxs("div",{className:"bg-red-50 rounded p-2 text-center",children:[Ue.jsx(E,{className:"h-4 w-4 text-red-500 mx-auto mb-1"}),Ue.jsx("p",{className:"text-base font-bold text-red-700 mb-0.5",children:R.cancelled}),Ue.jsx("p",{className:"text-xs text-red-600",children:"철회"})]}),Ue.jsxs("div",{className:"bg-yellow-50 rounded p-2 text-center",children:[Ue.jsx(k,{className:"h-4 w-4 text-yellow-500 mx-auto mb-1"}),Ue.jsx("p",{className:"text-base font-bold text-yellow-700 mb-0.5",children:R.onHold}),Ue.jsx("p",{className:"text-xs text-yellow-600",children:"보류"})]})]})]}),Ue.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-4 sm:pb-6",children:Ue.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:gap-6 lg:grid-cols-2",children:[Ue.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:Ue.jsxs("div",{className:"p-4 sm:p-6",children:[Ue.jsxs("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:[Ue.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900",children:"최근 활동"}),Ue.jsx(C,{className:"h-4 sm:h-5 w-4 sm:w-5 text-gray-400"})]}),Ue.jsx("div",{className:"space-y-2 sm:space-y-3 max-h-64 sm:max-h-96 overflow-y-auto",children:m.length>0?m.map((e,t)=>{const s=x(e);return Ue.jsxs("div",{className:"flex items-start space-x-2 sm:space-x-3 p-2 sm:p-3 hover:bg-gray-50 rounded-lg",children:[Ue.jsx("div",{className:"flex-shrink-0",children:Ue.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 sm:mt-2 "+(s.isNew?"bg-green-500":"bg-blue-500")})}),Ue.jsxs("div",{className:"flex-1 min-w-0",children:[Ue.jsxs("p",{className:"text-xs sm:text-sm text-gray-900",children:[Ue.jsx("span",{className:"font-medium",children:s.user}),"님이"," ",Ue.jsx("span",{className:"font-medium",children:s.property}),"을(를)"," ",Ue.jsx("span",{className:"font-medium",children:s.change})]}),Ue.jsx("p",{className:"text-xs text-gray-500 mt-0.5 sm:mt-1",children:s.time})]})]},e.id||t)}):Ue.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"최근 활동이 없습니다"})})]})}),Ue.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:Ue.jsxs("div",{className:"p-4 sm:p-6",children:[Ue.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-3 sm:mb-4",children:"주간 팀 활동"}),Ue.jsx("div",{className:"space-y-2 sm:space-y-3",children:q.length>0?q.map(e=>Ue.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-3 hover:bg-gray-50 rounded-lg",children:[Ue.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[Ue.jsx("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-gray-100 flex items-center justify-center",children:Ue.jsx("span",{className:"text-xs sm:text-sm font-medium text-gray-600",children:e.name.charAt(0)})}),Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:e.name}),Ue.jsxs("p",{className:"text-xs text-gray-500",children:[Ue.jsxs("span",{className:"sm:hidden",children:["신",e.newRegistrations," 변",e.statusChanges," 완",e.completed]}),Ue.jsxs("span",{className:"hidden sm:inline",children:["신규 ",e.newRegistrations," · 변경 ",e.statusChanges," · 완료 ",e.completed]})]})]})]}),Ue.jsxs("div",{className:"text-right",children:[Ue.jsxs("p",{className:"text-xs sm:text-sm font-medium text-gray-900",children:["총 ",e.total,"건"]}),e.completed>0&&Ue.jsxs("p",{className:"text-xs text-green-600",children:[Math.round(e.completed/e.total*100),"%"]})]})]},e.id)):Ue.jsx("p",{className:"text-sm text-gray-500 text-center py-8",children:"이번 주 활동 기록이 없습니다"})})]})})]})}),Ue.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-4 sm:pb-8",children:Ue.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",children:[Ue.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-3 sm:mb-4",children:"주간 활동 추이"}),Ue.jsx("div",{className:"h-48 sm:h-64",children:Ue.jsx(O,{width:"100%",height:"100%",children:Ue.jsxs(T,{data:U,margin:{top:5,right:5,left:-20,bottom:5},children:[Ue.jsx(A,{strokeDasharray:"3 3",stroke:"#f3f4f6"}),Ue.jsx(D,{dataKey:"day",tick:{fontSize:10}}),Ue.jsx(F,{tick:{fontSize:10}}),Ue.jsx(P,{contentStyle:{fontSize:"12px",padding:"8px"},labelStyle:{fontSize:"12px"}}),Ue.jsx(I,{type:"monotone",dataKey:"신규",stroke:"#FF66B2",strokeWidth:2,dot:!1}),Ue.jsx(I,{type:"monotone",dataKey:"계약",stroke:"#10b981",strokeWidth:2,dot:!1}),Ue.jsx(I,{type:"monotone",dataKey:"완료",stroke:"#3b82f6",strokeWidth:2,dot:!1})]})})})]})})]})},ha=()=>{var e,s;const[r,a]=t.useState({search:"",status:"",type:"",transactionType:""}),[n,i]=t.useState({show:!1,property:null}),o=l(),{user:c,userProfile:d}=_s(),u=zt(),m=t.useRef(null),h=t.useRef(null),{data:p,isLoading:x,error:f,fetchNextPage:g,hasNextPage:y,isFetchingNextPage:b,refetch:w}=Yt(He(["properties-infinite",r,null==c?void 0:c.email],async({pageParam:e=0})=>{const t=JSON.parse(localStorage.getItem("temp-bypass-user")||"{}"),s=t.id?t:c,a={userId:null==s?void 0:s.id,userEmail:null==s?void 0:s.email,isAdmin:As(null==s?void 0:s.email)},n=await cr(r,a,{page:e,pageSize:30});if(n.error)throw new Error(n.error);return{properties:n.data,totalCount:n.totalCount,nextPage:30===n.data.length?e+1:void 0}},{getNextPageParam:e=>e.nextPage,refetchOnWindowFocus:!1}),Rt),N=(null==p?void 0:p.pages.flatMap(e=>e.properties))||[];null==(e=null==p?void 0:p.pages[0])||e.totalCount;const{data:_={}}=Ht("lookupTables",async()=>await or(),{staleTime:3e5});t.useEffect(()=>{if(!h.current)return;const e=new IntersectionObserver(e=>{e[0].isIntersecting&&y&&!b&&g()},{threshold:.1});return e.observe(h.current),m.current=e,()=>{m.current&&m.current.disconnect()}},[y,b,g]);const k=e=>{var t;const s=e.property_type_id||e.property_type,r=null==(t=_.propertyTypes)?void 0:t.find(e=>e.id===s);return(null==r?void 0:r.name)||s||"미지정"},S=e=>{var t;const s=e.transaction_type_id||e.transaction_type,r=null==(t=_.transactionTypes)?void 0:t.find(e=>e.id===s);return(null==r?void 0:r.name)||s||"미지정"},E=e=>{var t;const s=e.property_status_id||e.property_status,r=null==(t=_.propertyStatuses)?void 0:t.find(e=>e.id===s);return(null==r?void 0:r.name)||{available:"거래가능",completed:"거래완료",hold:"거래보류",cancelled:"거래철회",inspection_available:"임장가능"}[s]||s||"미지정"},C=e=>{var t,s;if(null==(t=e.manager)?void 0:t.name)return e.manager.name;if(null==(s=e.manager_id)?void 0:s.includes("@")){const t=e.manager_id.replace("hardcoded-","");return hr(t)}return"미지정"},O=Gt(async e=>{const{error:t}=await ur(e,c);if(t)throw new Error(t);return e},{onSuccess:e=>{u.invalidateQueries(["properties-infinite"]),i({show:!1,property:null}),alert("매물이 성공적으로 삭제되었습니다.")},onError:e=>{alert(`매물 삭제 중 오류가 발생했습니다: ${e.message}`)}}),T=N.filter(e=>{const t=!r.search||e.property_name.toLowerCase().includes(r.search.toLowerCase())||e.location.toLowerCase().includes(r.search.toLowerCase()),s=E(e),a=k(e),n=S(e),i=!r.status||s===r.status,l=!r.type||a===r.type,o=!r.transactionType||n===r.transactionType;return t&&i&&l&&o}),A=e=>e&&0!==e?Math.floor(e/1e4).toLocaleString():"-",D=e=>{const t=S(e);return"매매"===t?A(e.price||0):"전세"===t?A(e.lease_price||0):"월세"===t?`${A(e.lease_price||0)}/${A(e.monthly_rent||0)}`:A(e.price||0)||"-"},F=e=>e?(.3025*e).toFixed(2):"-",P=e=>`A${parseInt(e.replace(/-/g,"").substring(0,7),16).toString().padStart(7,"0")}`;return Ue.jsxs("div",{className:"space-y-6",children:[Ue.jsx("div",{className:"bg-white border-b border-gray-200 px-4 sm:px-6 py-4",children:Ue.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[Ue.jsxs("div",{children:[Ue.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"매물장"}),Ue.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"*매물장의 정보를 간편하게 관리하세요."})]}),Ue.jsxs("button",{className:"w-full sm:w-auto px-4 sm:px-6 py-2 bg-pink-500 hover:bg-pink-600 text-white font-medium rounded-lg transition-colors text-sm sm:text-base",onClick:()=>o("/properties/new"),children:[Ue.jsx(v,{className:"w-4 h-4 inline mr-2"}),"매물 등록"]})]})}),x&&Ue.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-pink-500 border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-2 text-gray-600",children:"매물 목록을 불러오는 중..."})]}),f&&Ue.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsxs("span",{className:"text-red-600",children:["매물 목록을 불러오는데 실패했습니다: ",f.message]}),Ue.jsx("button",{onClick:()=>w(),className:"ml-4 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"다시 시도"})]})}),!x&&!f&&Ue.jsxs(Ue.Fragment,{children:[Ue.jsxs("div",{className:"bg-gray-50 p-4 sm:p-6 rounded-lg mb-6",children:[Ue.jsxs("div",{className:"mb-4",children:[Ue.jsx("h3",{className:"text-lg font-semibold mb-2",children:"매물 검색"}),Ue.jsx("p",{className:"text-sm text-gray-600",children:"매물 종류를 선택하시면 상세 검색이 가능합니다."})]}),Ue.jsxs("div",{className:"mb-6",children:[Ue.jsx("h4",{className:"text-sm font-medium mb-3",children:"지역조회"}),Ue.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[Ue.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm",children:Ue.jsx("option",{children:"매물종류"})}),Ue.jsx("input",{type:"text",placeholder:"시/도",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm"}),Ue.jsx("input",{type:"text",placeholder:"구/군",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm"}),Ue.jsx("input",{type:"text",placeholder:"읍/면/동",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm"})]})]}),Ue.jsxs("div",{children:[Ue.jsx("h4",{className:"text-sm font-medium mb-3",children:"조건조회"}),Ue.jsxs("div",{className:"space-y-3",children:[Ue.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[Ue.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm",children:Ue.jsx("option",{children:"거래유형"})}),Ue.jsx("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm",children:Ue.jsx("option",{children:"상태"})}),Ue.jsx("input",{type:"text",placeholder:"매물번호",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm col-span-1 sm:col-span-2 lg:col-span-1"})]}),Ue.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"최소 가격 (만원)"}),Ue.jsx("input",{type:"text",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm"})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"최대 가격 (만원)"}),Ue.jsx("input",{type:"text",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm"})]})]})]})]}),Ue.jsxs("div",{className:"flex flex-col sm:flex-row justify-center mt-6 gap-3",children:[Ue.jsxs("button",{className:"w-full sm:w-auto px-6 py-2.5 border border-gray-300 rounded-lg text-sm hover:bg-gray-100 transition-colors",children:[Ue.jsx(R,{className:"w-4 h-4 inline mr-2"}),"초기화"]}),Ue.jsxs("button",{className:"w-full sm:w-auto px-8 py-2.5 bg-pink-500 hover:bg-pink-600 text-white rounded-lg text-sm font-medium transition-colors",children:[Ue.jsx(M,{className:"w-4 h-4 inline mr-2"}),"검색"]})]})]}),Ue.jsxs("div",{className:"bg-white",children:[Ue.jsx("div",{className:"px-3 sm:px-4 py-3 border-b border-gray-200",children:Ue.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[Ue.jsx("div",{className:"flex items-center justify-between sm:justify-start w-full sm:w-auto",children:Ue.jsx("div",{className:"flex items-center space-x-2 sm:hidden",children:Ue.jsxs("select",{className:"px-2 py-1 border border-gray-300 rounded text-xs focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500",children:[Ue.jsx("option",{children:"50개"}),Ue.jsx("option",{children:"100개"})]})})}),Ue.jsxs("div",{className:"hidden sm:flex items-center space-x-2",children:[Ue.jsx("span",{className:"text-sm text-gray-600",children:"최신순"}),Ue.jsxs("select",{className:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500",children:[Ue.jsx("option",{children:"50개씩 보기"}),Ue.jsx("option",{children:"100개씩 보기"})]})]})]})}),0===T.length?Ue.jsxs("div",{className:"p-8 text-center text-gray-500",children:[Ue.jsx(j,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),Ue.jsx("p",{className:"text-lg font-medium mb-2",children:"매물이 없습니다"}),Ue.jsx("p",{className:"text-sm",children:"새로운 매물을 등록해보세요."})]}):Ue.jsxs(Ue.Fragment,{children:[Ue.jsx("div",{className:"hidden",children:Ue.jsx("div",{className:"divide-y divide-gray-200",children:T.map(e=>Ue.jsxs("div",{className:"bg-white p-4 hover:bg-gray-50 transition-colors",children:[Ue.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Ue.jsxs("div",{className:"flex-1",children:[Ue.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Ue.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-semibold text-white bg-pink-500 rounded-full",children:P(e.id)}),Ue.jsx("span",{className:"거래가능"===E(e)?"inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-green-100 text-green-800":"거래완료"===E(e)?"inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-blue-100 text-blue-800":"inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:E(e)})]}),Ue.jsx("div",{className:"text-sm font-medium text-gray-900 break-words",children:e.property_name})]}),Ue.jsx("button",{className:"text-gray-400 hover:text-yellow-400 text-xl",children:"☆"})]}),Ue.jsxs("div",{className:"space-y-1.5",children:[Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-xs text-gray-500",children:"종류"}),Ue.jsx("span",{className:"text-xs font-medium text-gray-900",children:k(e)})]}),Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-xs text-gray-500",children:"지역"}),Ue.jsx("span",{className:"text-xs font-medium text-gray-900 text-right",children:e.location})]}),Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-xs text-gray-500",children:"면적"}),Ue.jsxs("span",{className:"text-xs font-medium text-gray-900",children:[F(e.supply_area_sqm),"평"]})]}),Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-xs text-gray-500",children:"거래"}),Ue.jsxs("div",{className:"flex items-center gap-1",children:[Ue.jsx("span",{className:"매매"===S(e)?"inline-block px-1.5 py-0.5 text-xs font-medium rounded bg-yellow-100 text-yellow-800":"전세"===S(e)?"inline-block px-1.5 py-0.5 text-xs font-medium rounded bg-blue-100 text-blue-800":"inline-block px-1.5 py-0.5 text-xs font-medium rounded bg-purple-100 text-purple-800",children:S(e)}),Ue.jsx("span",{className:"text-xs font-semibold text-gray-900",children:D(e)})]})]}),Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-xs text-gray-500",children:"담당자"}),Ue.jsx("span",{className:"text-xs font-medium text-gray-900",children:C(e)})]})]}),Ue.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100 flex justify-between items-center",children:[Ue.jsxs("span",{className:"text-xs text-gray-500",children:[new Date(e.created_at).toLocaleDateString("ko-KR")," 등록"]}),Ue.jsxs("div",{className:"flex items-center space-x-2",children:[Ue.jsx("button",{className:"px-3 py-1.5 text-xs font-medium text-pink-600 hover:text-pink-700 transition-colors",onClick:()=>o(`/properties/${e.id}`),children:"상세보기"}),Ue.jsx("span",{className:"text-gray-300",children:"|"}),Ue.jsx("button",{className:"px-3 py-1.5 text-xs font-medium text-gray-600 hover:text-gray-700 transition-colors",onClick:()=>o(`/properties/${e.id}/edit`),children:"수정"})]})]})]},e.id))})}),Ue.jsx("div",{className:"hidden sm:block overflow-hidden",children:Ue.jsx("div",{className:"overflow-x-auto",children:Ue.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ue.jsx("thead",{className:"bg-gray-50",children:Ue.jsxs("tr",{children:[Ue.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"체크박스"}),Ue.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"즐겨찾기"}),Ue.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"매물번호"}),Ue.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"매물종류"}),Ue.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"지역명/상세주소"}),Ue.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"면적"}),Ue.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"가격유형/가격"}),Ue.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"담당자"}),Ue.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"상태"}),Ue.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"등록일"}),Ue.jsx("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"작업"})]})}),Ue.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(e=>Ue.jsxs("tr",{className:"hover:bg-gray-50",children:[Ue.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:Ue.jsx("input",{type:"checkbox",className:"rounded border-gray-300 w-4 h-4"})}),Ue.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:Ue.jsx("button",{className:"text-gray-400 hover:text-yellow-400 text-lg",children:"☆"})}),Ue.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:Ue.jsx("span",{className:"inline-block px-2 py-0.5 text-xs font-semibold text-white bg-pink-500 rounded-full cursor-pointer hover:bg-pink-600 transition-colors",onClick:()=>o(`/properties/${e.id}`),children:P(e.id)})}),Ue.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:Ue.jsx("div",{className:"text-xs text-gray-900",children:k(e)})}),Ue.jsx("td",{className:"px-2 py-2",children:Ue.jsxs("div",{className:"text-xs",children:[Ue.jsx("div",{className:"font-medium text-gray-900",children:e.location}),Ue.jsx("div",{className:"text-gray-500 text-xs",children:e.property_name})]})}),Ue.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:Ue.jsxs("div",{className:"text-xs text-gray-900",children:[e.supply_area_sqm,"㎡",Ue.jsx("br",{}),"(",F(e.supply_area_sqm),"평)"]})}),Ue.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:Ue.jsxs("div",{className:"text-xs",children:[Ue.jsx("span",{className:"매매"===S(e)?"inline-block px-1.5 py-0.5 text-xs font-medium rounded bg-yellow-100 text-yellow-800":"전세"===S(e)?"inline-block px-1.5 py-0.5 text-xs font-medium rounded bg-blue-100 text-blue-800":"inline-block px-1.5 py-0.5 text-xs font-medium rounded bg-purple-100 text-purple-800",children:S(e)}),Ue.jsx("div",{className:"font-medium text-gray-900 mt-0.5",children:D(e)})]})}),Ue.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:Ue.jsx("div",{className:"text-xs text-gray-900",children:C(e)})}),Ue.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:Ue.jsx("span",{className:"거래가능"===E(e)?"inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-green-100 text-green-800":"거래완료"===E(e)?"inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-blue-100 text-blue-800":"inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:E(e)})}),Ue.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:Ue.jsx("div",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("ko-KR").replace(/\. /g,".")})}),Ue.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-center",children:Ue.jsxs("div",{className:"flex justify-center space-x-1",children:[Ue.jsx("button",{className:"px-2 py-0.5 text-xs bg-pink-100 text-pink-700 rounded hover:bg-pink-200 transition-colors",onClick:()=>o(`/properties/${e.id}`),children:"보기"}),Ue.jsx("button",{className:"px-2 py-0.5 text-xs bg-pink-50 text-pink-700 border border-pink-200 rounded hover:bg-pink-100 transition-colors",onClick:()=>o(`/properties/${e.id}/edit`),children:"수정"})]})})]},e.id))})]})})})]}),Ue.jsxs("div",{ref:h,className:"h-20 flex items-center justify-center",children:[b&&Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("div",{className:"w-8 h-8 border-4 border-pink-500 border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-2 text-gray-600",children:"더 불러오는 중..."})]}),!y&&N.length>0&&Ue.jsx("p",{className:"text-gray-500",children:"모든 매물을 불러왔습니다"})]})]})]}),n.show&&Ue.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:Ue.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:Ue.jsxs("div",{className:"mt-3 text-center",children:[Ue.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:Ue.jsx($,{className:"h-6 w-6 text-red-600"})}),Ue.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"매물 삭제 확인"}),Ue.jsxs("div",{className:"mt-2 px-7 py-3",children:[Ue.jsxs("p",{className:"text-sm text-gray-500",children:["'",null==(s=n.property)?void 0:s.property_name,"' 매물을 정말로 삭제하시겠습니까?"]}),Ue.jsx("p",{className:"text-sm text-red-600 mt-2",children:"삭제된 매물은 복구할 수 없습니다."})]}),Ue.jsx("div",{className:"items-center px-4 py-3",children:Ue.jsxs("div",{className:"flex space-x-3",children:[Ue.jsx("button",{onClick:()=>{i({show:!1,property:null})},className:"flex-1 px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300",disabled:O.isLoading,children:"취소"}),Ue.jsx("button",{onClick:()=>{n.property&&O.mutate(n.property.id)},className:"flex-1 px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",disabled:O.isLoading,children:O.isLoading?"삭제 중...":"삭제"})]})})]})})})]})},pa=({property:e,onEdit:t,onDelete:s,onView:r,showCustomerInfo:a=!1})=>{const{user:n}=_s(),i=e=>({sale:"매매",lease:"전세",rent:"월세"}[e]||e),l=e=>{if(!e||0===e)return"-";if(e>=1e8){const t=Math.floor(e/1e8),s=Math.floor(e%1e8/1e4);return s>0?`${t}억 ${s.toLocaleString()}만원`:`${t}억원`}return e>=1e4?`${(e/1e4).toLocaleString()}만원`:`${e.toLocaleString()}원`};return Ue.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 hover:shadow-md transition-shadow duration-200 cursor-pointer",onClick:()=>r&&r(e),children:Ue.jsxs("div",{className:"p-3 sm:p-4",children:[Ue.jsxs("div",{className:"flex justify-between items-start mb-2 sm:mb-3",children:[Ue.jsxs("div",{className:"flex-1 min-w-0",children:[Ue.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 truncate",children:e.property_name}),Ue.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-600 mt-0.5 sm:mt-1",children:[Ue.jsx(L,{className:"w-3.5 sm:w-4 h-3.5 sm:h-4 mr-1 flex-shrink-0"}),Ue.jsx("span",{className:"truncate",children:e.location})]})]}),Ue.jsx("span",{className:`ml-2 px-1.5 sm:px-2 py-0.5 sm:py-1 text-xs font-medium rounded-full border ${d=e.property_status,{available:"bg-green-100 text-green-800 border-green-200",reserved:"bg-yellow-100 text-yellow-800 border-yellow-200",completed:"bg-pink-100 text-pink-800 border-pink-200"}[d]||"bg-gray-100 text-gray-800 border-gray-200"}`,children:(e=>({available:"거래가능",reserved:"거래보류",completed:"거래완료"}[e]||e))(e.property_status)})]}),Ue.jsxs("div",{className:"space-y-2 mb-4",children:[Ue.jsx("div",{className:"flex items-center justify-between",children:Ue.jsxs("div",{className:"flex items-center space-x-2",children:[Ue.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded",children:(c=e.property_type,{apt:"아파트",officetel:"오피스텔",villa:"빌라/연립",house:"단독주택",commercial:"상가"}[c]||c)}),Ue.jsx("span",{className:"text-xs px-2 py-1 rounded "+("매매"===i(e.transaction_type)?"bg-yellow-100 text-yellow-800":"전세"===i(e.transaction_type)?"bg-pink-100 text-pink-800":"bg-purple-100 text-purple-800"),children:i(e.transaction_type)})]})}),Ue.jsx("div",{className:"text-base sm:text-lg font-bold text-gray-900",children:(()=>{const t=e.transaction_type;return"sale"===t?l(e.sale_price):"lease"===t?l(e.lease_price):"rent"===t?`${l(e.lease_price)} / ${l(e.price)}`:"-"})()}),e.supply_area_sqm&&Ue.jsxs("div",{className:"flex items-center text-xs sm:text-sm text-gray-600",children:[Ue.jsx(q,{className:"w-3.5 sm:w-4 h-3.5 sm:h-4 mr-1"}),Ue.jsxs("span",{children:["공급: ",(o=e.supply_area_sqm,o?`${o}㎡ (${(.3025*o).toFixed(1)}평)`:"-")]})]}),Ue.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4 text-xs sm:text-sm text-gray-600",children:[e.floor_info&&Ue.jsx("span",{children:e.floor_info}),e.direction&&Ue.jsx("span",{children:e.direction}),e.rooms_bathrooms&&Ue.jsx("span",{children:e.rooms_bathrooms})]}),Ue.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[Ue.jsx(U,{className:"w-3 h-3 mr-1"}),Ue.jsxs("span",{children:["등록: ",new Date(e.created_at).toLocaleDateString()]})]})]}),a&&Ue.jsxs("div",{className:"mb-4 p-3 bg-pink-50 border border-pink-200 rounded",children:[Ue.jsxs("div",{className:"flex items-center mb-2",children:[Ue.jsx(B,{className:"w-4 h-4 mr-2 text-pink-600"}),Ue.jsx("span",{className:"text-sm font-medium text-pink-800",children:"고객정보"})]}),(()=>{const t=(e=>{if(!e)return null;try{return JSON.parse(e)}catch{return null}})(e.resident);return t?Ue.jsxs("div",{className:"text-sm text-pink-700",children:[Ue.jsxs("div",{children:[Ue.jsx("span",{className:"font-medium",children:"이름:"})," ",t.name||"-"]}),Ue.jsxs("div",{children:[Ue.jsx("span",{className:"font-medium",children:"연락처:"})," ",t.phone||"-"]}),t.notes&&Ue.jsxs("div",{children:[Ue.jsx("span",{className:"font-medium",children:"메모:"})," ",t.notes]})]}):Ue.jsx("div",{className:"text-sm text-pink-600",children:"고객정보가 없습니다."})})()]}),e.special_notes&&Ue.jsxs("div",{className:"mb-4 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:[Ue.jsx("span",{className:"font-medium",children:"특이사항: "}),Ue.jsx("span",{className:"line-clamp-2",children:e.special_notes})]}),Ue.jsxs("div",{className:"flex justify-between items-center pt-2 sm:pt-3 border-t border-gray-100",children:[Ue.jsxs("div",{className:"flex space-x-1.5 sm:space-x-2",children:[Ue.jsxs("button",{onClick:t=>{t.stopPropagation(),r&&r(e)},className:"inline-flex items-center px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium text-gray-600 bg-gray-100 rounded hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[Ue.jsx(N,{className:"w-3.5 sm:w-4 h-3.5 sm:h-4 mr-0.5 sm:mr-1"}),"보기"]}),Zs(n,e,"edit")&&Ue.jsxs("button",{onClick:s=>{s.stopPropagation(),t&&t(e)},className:"inline-flex items-center px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium text-pink-600 bg-pink-100 rounded hover:bg-pink-200 focus:outline-none focus:ring-2 focus:ring-pink-500",children:[Ue.jsx(V,{className:"w-3.5 sm:w-4 h-3.5 sm:h-4 mr-0.5 sm:mr-1"}),"수정"]})]}),s&&Zs(n,e,"delete")&&Ue.jsxs("button",{onClick:t=>{t.stopPropagation(),s(e)},className:"inline-flex items-center px-2 sm:px-3 py-1 sm:py-1.5 text-xs sm:text-sm font-medium text-red-600 bg-red-100 rounded hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-500",children:[Ue.jsx($,{className:"w-3.5 sm:w-4 h-3.5 sm:h-4 mr-0.5 sm:mr-1"}),"삭제"]})]})]})});var o,c,d};pa.propTypes={property:y.shape({id:y.string.isRequired,property_name:y.string.isRequired,location:y.string.isRequired,property_status:y.string,property_type:y.string,transaction_type:y.string,sale_price:y.number,lease_price:y.number,price:y.number,supply_area_sqm:y.number,floor_info:y.string,direction:y.string,rooms_bathrooms:y.string,created_at:y.string.isRequired,updated_at:y.string,resident:y.string,special_notes:y.string,manager_id:y.string}).isRequired,onEdit:y.func,onDelete:y.func,onView:y.func,showCustomerInfo:y.bool};const xa=a.memo(pa,(e,t)=>e.property.id===t.property.id&&e.property.updated_at===t.property.updated_at&&e.showCustomerInfo===t.showCustomerInfo),fa=()=>{var e,s,r,a;const[n,i]=t.useState({search:"",status:"",type:"",transactionType:""}),[c,d]=t.useState("table"),[u,m]=t.useState({show:!1,property:null}),h=l(),{user:p,userProfile:x}=_s(),f=zt(),{data:g={},isLoading:y}=Ht("lookupTables",async()=>await or(),{staleTime:3e5}),{data:b=[],isLoading:w,error:N,refetch:_}=Ht(["my-properties",n,null==p?void 0:p.id],async()=>{var e,t,s;if(!(null==p?void 0:p.id))return[];let r=hs.from("properties").select("*").eq("manager_id",p.id);if(n.search&&(r=r.or(`property_name.ilike.%${n.search}%,location.ilike.%${n.search}%`)),n.status){const t=null==(e=g.propertyStatuses)?void 0:e.find(e=>e.name===n.status);t&&(r=r.eq("property_status_id",t.id))}if(n.type){const e=null==(t=g.propertyTypes)?void 0:t.find(e=>e.name===n.type);e&&(r=r.eq("property_type_id",e.id))}if(n.transactionType){const e=null==(s=g.transactionTypes)?void 0:s.find(e=>e.name===n.transactionType);e&&(r=r.eq("transaction_type_id",e.id))}r=r.order("created_at",{ascending:!1});const{data:a,error:i}=await r;if(i)throw i;return a||[]},{refetchOnWindowFocus:!1,enabled:!!(null==p?void 0:p.id)&&!!g.propertyStatuses}),k=t.useCallback(e=>{var t;const s=null==(t=g.propertyTypes)?void 0:t.find(t=>t.id===e.property_type_id);return(null==s?void 0:s.name)||"미지정"},[g.propertyTypes]),S=t.useCallback(e=>{var t;const s=null==(t=g.transactionTypes)?void 0:t.find(t=>t.id===e.transaction_type_id);return(null==s?void 0:s.name)||"미지정"},[g.transactionTypes]),E=t.useCallback(e=>{var t;const s=null==(t=g.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);return(null==s?void 0:s.name)||"미지정"},[g.propertyStatuses]);t.useCallback(e=>{var t,s,r;return(null==(t=e.manager_id)?void 0:t.includes("@"))?e.manager_id.replace("hardcoded-","").split("@")[0].toUpperCase():(null==(s=e.users)?void 0:s.name)||(null==(r=e.users)?void 0:r.email)||"미지정"},[]);const C=Gt(async e=>{const{error:t}=await ur(e,p);if(t)throw new Error(t);return e},{onSuccess:e=>{f.invalidateQueries(["my-properties"]),m({show:!1,property:null}),alert("매물이 성공적으로 삭제되었습니다.")},onError:e=>{alert(`매물 삭제 중 오류가 발생했습니다: ${e.message}`)}}),O=t.useCallback(e=>{m({show:!0,property:e})},[]),T=t.useCallback(()=>{u.property&&C.mutate(u.property.id)},[u.property,C]),A=t.useCallback(()=>{m({show:!1,property:null})},[]),D=t.useMemo(()=>b.filter(e=>{const t=!n.search||e.property_name.toLowerCase().includes(n.search.toLowerCase())||e.location.toLowerCase().includes(n.search.toLowerCase()),s=E(e),r=k(e),a=S(e),i=!n.status||s===n.status,l=!n.type||r===n.type,o=!n.transactionType||a===n.transactionType;return t&&i&&l&&o}),[b,n,E,k,S]),F=t.useCallback(e=>{if(e>=1e8){const t=Math.floor(e/1e8),s=Math.floor(e%1e8/1e4);return s>0?`${t}억 ${s.toLocaleString()}만원`:`${t}억원`}return e>=1e4?`${(e/1e4).toLocaleString()}만원`:`${e.toLocaleString()}원`},[]),P=t.useCallback(e=>{const t=S(e);return"매매"===t?F(e.price||0):"전세"===t?F(e.lease_price||0):"월세"===t?`${F(e.lease_price||0)} / ${F(e.monthly_rent||0)}`:F(e.price||0)||"-"},[S,F]),I=t.useCallback(e=>e?`${e}㎡ (${(.3025*e).toFixed(1)}평)`:"-",[]),q=t.useCallback(e=>{if(!e)return null;try{return JSON.parse(e)}catch{return null}},[]);return Ue.jsxs("div",{className:"space-y-6",children:[Ue.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[Ue.jsxs("div",{children:[Ue.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"내 매물 관리"}),Ue.jsx("p",{className:"text-gray-600",children:"본인이 담당하는 매물을 관리하고 고객정보를 확인할 수 있습니다."})]}),Ue.jsxs("div",{className:"flex items-center space-x-3",children:[Ue.jsxs("div",{className:"hidden sm:flex border border-gray-300 rounded-md",children:[Ue.jsx("button",{onClick:()=>d("table"),className:"px-3 py-2 text-sm font-medium rounded-l-md "+("table"===c?"bg-pink-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:Ue.jsx(z,{className:"w-4 h-4"})}),Ue.jsx("button",{onClick:()=>d("card"),className:"px-3 py-2 text-sm font-medium rounded-r-md "+("card"===c?"bg-pink-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:Ue.jsx(Q,{className:"w-4 h-4"})})]}),Ue.jsxs(o,{to:"/properties/new",className:"inline-flex items-center px-4 py-2 bg-pink-500 text-white font-medium rounded-md hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-pink-500",children:[Ue.jsx(v,{className:"w-5 h-5 mr-2"}),"새 매물 등록"]})]})]}),(y||w)&&Ue.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-pink-500 border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-2 text-gray-600",children:"매물 목록을 불러오는 중..."})]}),N&&Ue.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsxs("span",{className:"text-red-600",children:["매물 목록을 불러오는데 실패했습니다: ",N.message]}),Ue.jsx("button",{onClick:()=>_(),className:"ml-4 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"다시 시도"})]})}),!y&&!w&&!N&&Ue.jsxs(Ue.Fragment,{children:[Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[Ue.jsxs("div",{className:"flex items-center justify-between mb-4",children:[Ue.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"매물 필터"}),Ue.jsxs("div",{className:"flex items-center space-x-3",children:[Ue.jsxs("span",{className:"text-sm text-gray-500",children:["총 ",D.length,"건"]}),Ue.jsxs("button",{onClick:()=>i({search:"",status:"",type:"",transactionType:""}),className:"flex items-center px-3 py-1.5 text-xs text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[Ue.jsx(R,{className:"w-3 h-3 mr-1"}),"초기화"]})]})]}),Ue.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-3",children:[Ue.jsxs("div",{className:"lg:col-span-2",children:[Ue.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"검색"}),Ue.jsxs("div",{className:"relative",children:[Ue.jsx(M,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),Ue.jsx("input",{type:"text",placeholder:"매물명, 지역으로 검색...",value:n.search,onChange:e=>i({...n,search:e.target.value}),className:"pl-9 w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"진행상태"}),Ue.jsxs("select",{value:n.status,onChange:e=>i({...n,status:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500",children:[Ue.jsx("option",{value:"",children:"전체 상태"}),null==(e=g.propertyStatuses)?void 0:e.map(e=>Ue.jsx("option",{value:e.name,children:e.name},e.id))]})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"매물종류"}),Ue.jsxs("select",{value:n.type,onChange:e=>i({...n,type:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500",children:[Ue.jsx("option",{value:"",children:"전체 종류"}),null==(s=g.propertyTypes)?void 0:s.map(e=>Ue.jsx("option",{value:e.name,children:e.name},e.id))]})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"거래유형"}),Ue.jsxs("select",{value:n.transactionType,onChange:e=>i({...n,transactionType:e.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500",children:[Ue.jsx("option",{value:"",children:"전체 거래"}),null==(r=g.transactionTypes)?void 0:r.map(e=>Ue.jsx("option",{value:e.name,children:e.name},e.id))]})]})]})]}),0===D.length?Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-8 text-center text-gray-500",children:[Ue.jsx(j,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),Ue.jsx("p",{className:"text-lg font-medium mb-2",children:"담당 매물이 없습니다"}),Ue.jsx("p",{className:"text-sm",children:"새로운 매물을 등록해보세요."})]}):Ue.jsxs(Ue.Fragment,{children:["table"===c&&Ue.jsx("div",{className:"hidden md:block bg-white shadow rounded-lg overflow-hidden",children:Ue.jsx("div",{className:"overflow-x-auto",children:Ue.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ue.jsx("thead",{className:"bg-gray-50",children:Ue.jsxs("tr",{children:[Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"매물ID"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"매물정보"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"위치"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"매물유형"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"고객정보"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등록일"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),Ue.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(e=>{const t=q(e.resident);return Ue.jsxs("tr",{className:"hover:bg-gray-50",children:[Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[Ue.jsx(K,{className:"w-4 h-4 mr-1"}),Ue.jsx("span",{className:"font-mono text-xs",children:e.id.slice(0,8)})]})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsxs("div",{children:[Ue.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.property_name}),Ue.jsxs("div",{className:"text-sm text-gray-500",children:[k(e)," • ",I(e.supply_area_sqm)]})]})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[Ue.jsx(L,{className:"w-4 h-4 mr-1 text-gray-400"}),e.location]})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsx("div",{className:"text-sm text-gray-900",children:S(e)})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsx("div",{className:"flex items-center text-sm font-medium text-gray-900",children:P(e)})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsx("div",{className:"text-sm text-gray-900",children:t?Ue.jsxs("div",{children:[Ue.jsx("div",{className:"font-medium",children:t.name||"-"}),Ue.jsx("div",{className:"text-xs text-gray-500",children:t.phone||"-"})]}):Ue.jsx("span",{className:"text-gray-400",children:"정보 없음"})})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("매물확보"===E(e)||"광고진행"===E(e)?"bg-green-100 text-green-800":"거래완료"===E(e)?"bg-pink-100 text-pink-800":"bg-yellow-100 text-yellow-800"),children:E(e)})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[Ue.jsx(U,{className:"w-4 h-4 mr-1"}),new Date(e.created_at).toLocaleDateString()]})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ue.jsxs("div",{className:"flex space-x-2",children:[Ue.jsx(o,{to:`/properties/${e.id}`,className:"text-pink-600 hover:text-pink-800 font-medium",children:"상세"}),Ue.jsx(o,{to:`/properties/${e.id}/edit`,className:"text-green-600 hover:text-green-800 font-medium",children:"수정"}),Ue.jsx("button",{onClick:()=>O(e),className:"text-red-600 hover:text-red-800 font-medium",disabled:C.isLoading,children:"삭제"})]})})]},e.id)})})]})})}),("card"===c||window.innerWidth<768)&&Ue.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(e=>Ue.jsx(xa,{property:e,showCustomerInfo:!0,onView:e=>h(`/properties/${e.id}`),onEdit:e=>h(`/properties/${e.id}/edit`),onDelete:e=>O(e)},e.id))})]})]}),u.show&&Ue.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:Ue.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:Ue.jsxs("div",{className:"mt-3 text-center",children:[Ue.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:Ue.jsx($,{className:"h-6 w-6 text-red-600"})}),Ue.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"매물 삭제 확인"}),Ue.jsxs("div",{className:"mt-2 px-7 py-3",children:[Ue.jsxs("p",{className:"text-sm text-gray-500",children:["'",null==(a=u.property)?void 0:a.property_name,"' 매물을 정말로 삭제하시겠습니까?"]}),Ue.jsx("p",{className:"text-sm text-red-600 mt-2",children:"삭제된 매물은 복구할 수 없습니다."})]}),Ue.jsx("div",{className:"items-center px-4 py-3",children:Ue.jsxs("div",{className:"flex space-x-3",children:[Ue.jsx("button",{onClick:A,className:"flex-1 px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300",disabled:C.isLoading,children:"취소"}),Ue.jsx("button",{onClick:T,className:"flex-1 px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",disabled:C.isLoading,children:C.isLoading?"삭제 중...":"삭제"})]})})]})})})]})},ga={primary:"bg-primary hover:bg-pink-600 text-white",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800",success:"bg-green-600 hover:bg-green-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",warning:"bg-yellow-500 hover:bg-yellow-600 text-white",outline:"bg-transparent border border-current hover:bg-gray-50"},ya={sm:"px-2 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"},ba=({children:e,type:t="button",variant:s="primary",size:r="md",className:a="",disabled:n=!1,onClick:i,...l})=>Ue.jsx("button",{type:t,className:`\n        ${ga[s]||ga.primary}\n        ${ya[r]||ya.md}\n        rounded-md font-medium transition-colors\n        focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50\n        ${n?"opacity-50 cursor-not-allowed":""}\n        ${a}\n      `,disabled:n,onClick:i,...l,children:e}),va=({propertyId:e,currentManagerId:s})=>{var r,a;const[n,i]=t.useState(""),[l,o]=t.useState(""),[c,d]=t.useState(!1),[u,m]=t.useState(null),h=zt();t.useEffect(()=>{s&&i(s)},[s]);const{data:p,isLoading:x}=Ht("users",async()=>{const{data:e,error:t}=await hs.from("users").select("id, name, email").eq("status","active").order("name");if(t)throw t;return e}),{data:f,isLoading:g}=Ht(["manager-history",e],async()=>{const{data:t,error:s}=await hs.from("manager_history").select("\n          id,\n          changed_at,\n          reason,\n          previous_manager_id,\n          new_manager_id,\n          changed_by,\n          previous_manager:previous_manager_id(name),\n          new_manager:new_manager_id(name),\n          changer:changed_by(name)\n        ").eq("property_id",e).order("changed_at",{ascending:!1});if(s)throw s;return t},{enabled:!!e}),y=Gt(async({propertyId:e,managerId:t,reason:s})=>{const{data:r,error:a}=await hs.from("properties").update({manager_id:t}).eq("id",e);if(a)throw a;return r},{onSuccess:()=>{h.invalidateQueries(["property",e]),h.invalidateQueries(["manager-history",e]),d(!1),o("")},onError:e=>{m(`담당자 변경 중 오류가 발생했습니다: ${e.message}`)}}),b=e=>e?new Date(e).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-";return e?Ue.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4",children:[Ue.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ue.jsx(W,{className:"w-5 h-5 mr-2 text-blue-600"}),"담당자 관리"]}),u&&Ue.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-md flex items-center",children:[Ue.jsx(G,{className:"w-5 h-5 mr-2"}),u]}),Ue.jsxs("div",{className:"mb-4",children:[Ue.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"담당자 선택"}),Ue.jsxs("div",{className:"flex space-x-2",children:[Ue.jsxs("select",{value:n,onChange:e=>{i(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x,children:[Ue.jsx("option",{value:"",children:"담당자 선택"}),!x&&(null==p?void 0:p.map(e=>Ue.jsxs("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id)))]}),Ue.jsx(ba,{onClick:()=>{n!==s?d(!0):m("현재 담당자와 동일한 담당자를 선택했습니다.")},disabled:!n||n===s,children:"변경"})]})]}),Ue.jsxs("div",{children:[Ue.jsx("h4",{className:"text-md font-medium mb-2",children:"담당자 변경 이력"}),g?Ue.jsx("div",{className:"text-gray-500",children:"로딩 중..."}):f&&0!==f.length?Ue.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-md",children:Ue.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ue.jsx("thead",{className:"bg-gray-50",children:Ue.jsxs("tr",{children:[Ue.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"변경일시"}),Ue.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"이전 담당자"}),Ue.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"새 담당자"}),Ue.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"변경자"})]})}),Ue.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>{var t,s,r;return Ue.jsxs("tr",{className:"hover:bg-gray-50",children:[Ue.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:b(e.changed_at)}),Ue.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(null==(t=e.previous_manager)?void 0:t.name)||"-"}),Ue.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(null==(s=e.new_manager)?void 0:s.name)||"-"}),Ue.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(null==(r=e.changer)?void 0:r.name)||"-"})]},e.id)})})]})}):Ue.jsx("div",{className:"text-gray-500",children:"변경 이력이 없습니다."})]}),c&&Ue.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:Ue.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Ue.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:Ue.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),Ue.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:Ue.jsxs("form",{onSubmit:t=>{t.preventDefault(),y.mutate({propertyId:e,managerId:n,reason:l})},children:[Ue.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Ue.jsx("div",{className:"sm:flex sm:items-start",children:Ue.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[Ue.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"담당자 변경"}),Ue.jsxs("div",{className:"mt-4",children:[Ue.jsxs("div",{className:"mb-4",children:[Ue.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"현재 담당자"}),Ue.jsx("div",{className:"bg-gray-100 p-2 rounded-md",children:(null==(r=null==p?void 0:p.find(e=>e.id===s))?void 0:r.name)||"담당자 없음"})]}),Ue.jsxs("div",{className:"mb-4",children:[Ue.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"새 담당자"}),Ue.jsx("div",{className:"bg-blue-50 p-2 rounded-md text-blue-700",children:(null==(a=null==p?void 0:p.find(e=>e.id===n))?void 0:a.name)||"선택된 담당자 없음"})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"변경 사유"}),Ue.jsx("textarea",{value:l,onChange:e=>{o(e.target.value)},rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"담당자 변경 사유를 입력하세요"})]})]})]})})}),Ue.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Ue.jsx(ba,{type:"submit",variant:"primary",className:"w-full sm:w-auto sm:ml-3",disabled:y.isLoading,children:y.isLoading?"처리 중...":Ue.jsxs(Ue.Fragment,{children:[Ue.jsx(Y,{className:"w-4 h-4 mr-1"}),"확인"]})}),Ue.jsx(ba,{type:"button",variant:"secondary",className:"mt-3 w-full sm:w-auto sm:mt-0",onClick:()=>{d(!1),m(null)},disabled:y.isLoading,children:"취소"})]})]})})]})})]}):Ue.jsx("div",{className:"text-gray-500",children:"매물 ID가 필요합니다."})},ja=({property:e})=>{var t,s,r,a,n;const{user:i}=_s(),l=i&&(i.id===e.manager_id||i.email===e.manager_id||e.manager_id===`hardcoded-${i.email}`),o=i&&As(i.email),c=!o&&l;return Ue.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[Ue.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[Ue.jsx(B,{className:"w-5 h-5 mr-2 text-blue-600"}),"연락처 정보"]}),!c&&Ue.jsxs("div",{className:"bg-yellow-50 p-4 mb-4 rounded-md flex items-start",children:[Ue.jsx(G,{className:"w-5 h-5 text-yellow-500 mt-0.5 mr-2 flex-shrink-0"}),Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"고객정보 제한"}),Ue.jsx("p",{className:"text-sm text-yellow-700",children:o?"매물 관리 모드에서는 고객정보가 표시되지 않습니다. 본인 매물 관리에서 고객정보를 확인하세요.":"이 매물의 고객정보는 담당자만 볼 수 있습니다. 고객정보가 필요하시면 담당자에게 문의하세요."})]})]}),Ue.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ue.jsxs("div",{children:[Ue.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-3 flex items-center",children:[Ue.jsx(H,{className:"w-4 h-4 mr-2 text-gray-500"}),"담당자 정보"]}),Ue.jsxs("div",{className:"space-y-2",children:[Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"담당자"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:(null==(t=e.manager)?void 0:t.name)||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"이메일"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:(null==(s=e.manager)?void 0:s.email)||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"연락처"}),c?Ue.jsx("p",{className:"text-sm text-gray-900",children:e.manager_contact||"-"}):Ue.jsxs("p",{className:"text-sm flex items-center text-gray-400",children:[Ue.jsx(J,{className:"w-3 h-3 mr-1"})," 권한 없음"]})]})]})]}),Ue.jsxs("div",{children:[Ue.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-3 flex items-center",children:[Ue.jsx(X,{className:"w-4 h-4 mr-2 text-gray-500"}),"소유주 정보"]}),Ue.jsxs("div",{className:"space-y-2",children:[Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"소유주"}),c?Ue.jsx("p",{className:"text-sm text-gray-900",children:(null==(r=e.owner)?void 0:r.name)||"-"}):Ue.jsxs("p",{className:"text-sm flex items-center text-gray-400",children:[Ue.jsx(J,{className:"w-3 h-3 mr-1"})," 권한 없음"]})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"연락처"}),c?Ue.jsx("p",{className:"text-sm text-gray-900",children:(null==(a=e.owner)?void 0:a.phone)||"-"}):Ue.jsxs("p",{className:"text-sm flex items-center text-gray-400",children:[Ue.jsx(J,{className:"w-3 h-3 mr-1"})," 권한 없음"]})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"관계"}),c?Ue.jsx("p",{className:"text-sm text-gray-900",children:(null==(n=e.owner)?void 0:n.contact_relation)||"-"}):Ue.jsxs("p",{className:"text-sm flex items-center text-gray-400",children:[Ue.jsx(J,{className:"w-3 h-3 mr-1"})," 권한 없음"]})]})]})]})]})]})},wa={"auth/invalid-credentials":"이메일 또는 비밀번호가 올바르지 않습니다.","auth/user-not-found":"등록되지 않은 사용자입니다.","auth/unauthorized":"권한이 없습니다.",PGRST116:"요청한 데이터를 찾을 수 없습니다.",PGRST204:"요청한 리소스를 찾을 수 없습니다.",23505:"이미 존재하는 데이터입니다.",23503:"참조하는 데이터가 존재하지 않습니다.","42P01":"요청한 테이블을 찾을 수 없습니다.","network-error":"네트워크 연결을 확인해주세요.",timeout:"요청 시간이 초과되었습니다.",default:"처리 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요."},Na=(e,t,s={})=>{t.message,t.stack,t.code,(new Date).toISOString(),s.user&&s.user.id},_a=async e=>{try{const{data:t,error:s}=await hs.from("property_comments").select("*").eq("property_id",e).order("created_at",{ascending:!1});if(s)throw s;return{success:!0,data:t}}catch(t){return Na("코멘트 조회 실패",t,{propertyId:e}),((e,t={})=>{var s,r,a;Na("Error occurred",e,t);let n=wa.default;return e.code&&(n=wa[e.code]||wa.default),(null==(s=e.details)?void 0:s.includes("duplicate key"))&&(n=wa[23505]),((null==(r=e.message)?void 0:r.includes("fetch failed"))||(null==(a=e.message)?void 0:a.includes("network")))&&(n=wa["network-error"]),{success:!1,error:n}})(t,{action:"getPropertyComments",propertyId:e})}},ka=({propertyId:e})=>{const{user:s}=t.useContext(ws),[r,a]=t.useState([]),[n,i]=t.useState(!0),[l,o]=t.useState(""),[c,d]=t.useState(null),[u,m]=t.useState(""),[h,p]=t.useState(!1);t.useEffect(()=>{x()},[e]),t.useEffect(()=>{const t=((e,t)=>hs.channel(`property-comments-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"property_comments",filter:`property_id=eq.${e}`},e=>{t(e)}).subscribe())(e,e=>{"INSERT"===e.eventType?a(t=>[e.new,...t]):"UPDATE"===e.eventType?a(t=>t.map(t=>t.id===e.new.id?e.new:t)):"DELETE"===e.eventType&&a(t=>t.filter(t=>t.id!==e.old.id))});return()=>{t.unsubscribe()}},[e]);const x=async()=>{i(!0);const t=await _a(e);t.success&&a(t.data),i(!1)},f=async e=>{if(!u.trim())return;const t=await(async(e,t)=>{try{const{data:s,error:r}=await hs.from("property_comments").update({comment_text:t}).eq("id",e).select().single();if(r)throw r;return{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}})(e,u.trim());t.success?(d(null),m("")):alert("코멘트 수정에 실패했습니다.")},g=async e=>{if(!confirm("코멘트를 삭제하시겠습니까?"))return;const t=await(async e=>{try{const{error:t}=await hs.from("property_comments").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:t.message}}})(e);t.success||alert("코멘트 삭제에 실패했습니다.")},y=()=>{d(null),m("")};return n?Ue.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ue.jsxs("div",{className:"animate-pulse",children:[Ue.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),Ue.jsxs("div",{className:"space-y-3",children:[Ue.jsx("div",{className:"h-20 bg-gray-200 rounded"}),Ue.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})]})}):Ue.jsx("div",{className:"bg-white rounded-lg shadow",children:Ue.jsxs("div",{className:"p-6",children:[Ue.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ue.jsx(Z,{className:"w-5 h-5 mr-2"}),"코멘트 (",r.length,")"]}),s?Ue.jsx("form",{onSubmit:async t=>{if(t.preventDefault(),!l.trim()||!s)return;p(!0);const r=await(async(e,t,s)=>{try{const{data:r,error:a}=await hs.from("property_comments").insert([{property_id:e,user_id:s.id||s.email,user_name:s.name||s.email.split("@")[0],comment_text:t}]).select().single();if(a)throw a;return{success:!0,data:r}}catch(r){return{success:!1,error:r.message}}})(e,l.trim(),s);r.success?o(""):alert("코멘트 등록에 실패했습니다."),p(!1)},className:"mb-6",children:Ue.jsxs("div",{className:"flex space-x-2",children:[Ue.jsx("input",{type:"text",value:l,onChange:e=>o(e.target.value),placeholder:"코멘트를 입력하세요...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-500",disabled:h}),Ue.jsx("button",{type:"submit",disabled:!l.trim()||h,className:"px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:Ue.jsx(ee,{className:"w-4 h-4"})})]})}):Ue.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg text-gray-600 text-sm",children:"로그인 후 코멘트를 작성할 수 있습니다."}),Ue.jsx("div",{className:"space-y-4",children:0===r.length?Ue.jsx("p",{className:"text-gray-500 text-center py-8",children:"아직 코멘트가 없습니다."}):r.map(e=>Ue.jsxs("div",{className:"border-b border-gray-200 pb-4 last:border-0",children:[Ue.jsxs("div",{className:"flex justify-between items-start mb-2",children:[Ue.jsxs("div",{children:[Ue.jsx("span",{className:"font-medium",children:e.user_name}),Ue.jsx("span",{className:"text-gray-500 text-sm ml-2",children:ia(new Date(e.created_at),"yyyy.MM.dd HH:mm",{locale:ua})})]}),s&&(s.id===e.user_id||s.email===e.user_id)&&Ue.jsx("div",{className:"flex space-x-1",children:c===e.id?Ue.jsxs(Ue.Fragment,{children:[Ue.jsx("button",{onClick:()=>f(e.id),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:Ue.jsx(Y,{className:"w-4 h-4"})}),Ue.jsx("button",{onClick:y,className:"p-1 text-gray-600 hover:bg-gray-50 rounded",children:Ue.jsx(te,{className:"w-4 h-4"})})]}):Ue.jsxs(Ue.Fragment,{children:[Ue.jsx("button",{onClick:()=>(e=>{d(e.id),m(e.comment_text)})(e),className:"p-1 text-gray-600 hover:bg-gray-50 rounded",children:Ue.jsx(se,{className:"w-4 h-4"})}),Ue.jsx("button",{onClick:()=>g(e.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:Ue.jsx($,{className:"w-4 h-4"})})]})})]}),c===e.id?Ue.jsx("input",{type:"text",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-pink-500",autoFocus:!0}):Ue.jsx("p",{className:"text-gray-700",children:e.comment_text})]},e.id))})]})})},Sa=()=>{var e,s;const{id:r}=c(),a=l(),n=zt(),{user:i}=_s(),[d,u]=t.useState(!1),[m,h]=t.useState(!1),{data:p,isLoading:x,error:f}=Ht(["property",r],async()=>{const{data:e,error:t}=await dr(r);if(t)throw new Error(t);return e}),{data:g={}}=Ht("lookupTables",async()=>await or(),{staleTime:3e5}),y=Gt(async()=>{u(!0);const{error:e}=await ur(r);if(e)throw new Error(e)},{onSuccess:()=>{n.invalidateQueries("properties"),a("/properties")},onError:()=>{u(!1)}});if(x)return Ue.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-2 text-gray-600",children:"매물 정보를 불러오는 중..."})]});if(f)return Ue.jsxs("div",{className:"bg-red-50 p-4 rounded-md text-red-600",children:[Ue.jsx(G,{className:"w-6 h-6 inline-block mr-2"}),"매물 정보를 불러오는데 실패했습니다: ",f.message]});if(!p)return Ue.jsxs("div",{className:"bg-yellow-50 p-4 rounded-md text-yellow-700",children:[Ue.jsx(G,{className:"w-6 h-6 inline-block mr-2"}),"해당 매물을 찾을 수 없습니다."]});const b=()=>{var e,t;const s={apt:"아파트",officetel:"오피스텔",villa:"빌라/연립",house:"단독주택",commercial:"상가"};return s[p.property_type_id]?s[p.property_type_id]:(null==(t=null==(e=g.propertyTypes)?void 0:e.find(e=>e.id===p.property_type_id))?void 0:t.name)||p.property_type_id||"-"},v=()=>{var e,t;const s={presale:"분양",developer:"시행사매물",sale:"매매",lease:"전세",rent:"월세/렌트",short:"단기"};return s[p.transaction_type_id]?s[p.transaction_type_id]:(null==(t=null==(e=g.transactionTypes)?void 0:e.find(e=>e.id===p.transaction_type_id))?void 0:t.name)||p.transaction_type_id||"-"},j=()=>{var e,t;const s={available:"거래가능",completed:"거래완료",hold:"거래보류",cancelled:"거래철회",inspection_available:"임장가능"};return s[p.property_status_id]?s[p.property_status_id]:(null==(t=null==(e=g.propertyStatuses)?void 0:e.find(e=>e.id===p.property_status_id))?void 0:t.name)||p.property_status_id||"-"},w=e=>{if(!e||0===e)return"-";if(e>=1e8){const t=Math.floor(e/1e8),s=Math.floor(e%1e8/1e4);return s>0?`${t}억 ${s.toLocaleString()}만원`:`${t}억원`}return e>=1e4?`${(e/1e4).toLocaleString()}만원`:`${e.toLocaleString()}원`},N=()=>{const e=v();return"매매"===e?w(p.price||0):"전세"===e?w(p.lease_price||0):"월세/렌트"===e||"월세"===e?`${w(p.lease_price||0)} / ${w(p.monthly_rent||p.price||0)}`:w(p.price||0)||"-"},_=e=>e?`${(.3025*e).toFixed(1)}평`:"-",k=i&&(i.id===p.manager_id||i.email===p.manager_id||"admin"===i.role);return Ue.jsxs("div",{children:[Ue.jsxs("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[Ue.jsx("div",{children:Ue.jsxs(ba,{variant:"secondary",size:"sm",onClick:()=>a("/properties"),className:"text-xs sm:text-sm",children:[Ue.jsx(re,{className:"w-3.5 sm:w-4 h-3.5 sm:h-4 mr-0.5 sm:mr-1"})," 목록으로"]})}),k&&Ue.jsxs("div",{className:"flex space-x-1.5 sm:space-x-2",children:[Ue.jsx(o,{to:`/properties/${r}/edit`,children:Ue.jsxs(ba,{variant:"secondary",size:"sm",className:"text-xs sm:text-sm border-primary text-primary hover:bg-pink-50",children:[Ue.jsx(V,{className:"w-3.5 sm:w-4 h-3.5 sm:h-4 mr-0.5 sm:mr-1"})," 수정"]})}),Ue.jsxs(ba,{variant:"danger",size:"sm",onClick:()=>{h(!0)},disabled:d,className:"text-xs sm:text-sm bg-red-500 hover:bg-red-600 text-white",children:[Ue.jsx($,{className:"w-3.5 sm:w-4 h-3.5 sm:h-4 mr-0.5 sm:mr-1"})," 삭제"]})]})]}),Ue.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6 mb-4 sm:mb-6",children:[Ue.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[Ue.jsxs("div",{children:[Ue.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:p.property_name}),Ue.jsxs("p",{className:"text-sm sm:text-base text-gray-600 mt-0.5 sm:mt-1",children:[p.location," ",p.building," ",p.unit]})]}),Ue.jsx("div",{className:"mt-3 md:mt-0",children:Ue.jsx("span",{className:"px-2 sm:px-3 py-0.5 sm:py-1 inline-flex text-xs sm:text-sm leading-5 font-semibold rounded-full \n              "+("거래가능"===j()?"bg-green-100 text-green-800":"거래완료"===j()?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:j()})})]}),Ue.jsxs("div",{className:"mt-4 sm:mt-6 grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"매물종류"}),Ue.jsx("p",{className:"mt-0.5 sm:mt-1 text-sm sm:text-lg font-semibold text-gray-900",children:b()})]}),Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"거래유형"}),Ue.jsx("p",{className:"mt-0.5 sm:mt-1 text-sm sm:text-lg font-semibold text-gray-900",children:v()})]}),Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"금액"}),Ue.jsx("p",{className:"mt-0.5 sm:mt-1 text-sm sm:text-lg font-semibold text-gray-900",children:N()})]}),Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"담당자"}),Ue.jsx("p",{className:"mt-0.5 sm:mt-1 text-sm sm:text-lg font-semibold text-gray-900",children:(null==(e=p.manager)?void 0:e.name)||((null==(s=p.manager_id)?void 0:s.includes("@"))?hr(p.manager_id.replace("hardcoded-","")):p.manager_id)||"-"})]})]})]}),Ue.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6 mb-4 sm:mb-6",children:[Ue.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"매물 상세 정보"}),Ue.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[Ue.jsxs("div",{children:[Ue.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-800 mb-2 sm:mb-3",children:"기본 정보"}),Ue.jsxs("div",{className:"space-y-2",children:[Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-1.5 sm:py-2",children:[Ue.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"소재지"}),Ue.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:p.location||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"건물명"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.property_name||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"동/호수"}),Ue.jsxs("p",{className:"text-sm text-gray-900",children:[p.building?p.building:"",p.unit?`${p.building?"/":""} ${p.unit}`:"",!p.building&&!p.unit&&"-"]})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"매물종류"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:b()})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"상가여부"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.is_commercial?"상가":"비상가"})]})]})]}),Ue.jsxs("div",{children:[Ue.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-800 mb-2 sm:mb-3",children:"거래 정보"}),Ue.jsxs("div",{className:"space-y-2",children:[Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-1.5 sm:py-2",children:[Ue.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-500",children:"진행상태"}),Ue.jsx("p",{className:"text-xs sm:text-sm text-gray-900",children:j()})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"거래유형"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:v()})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"금액"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:N()})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"거래완료날짜"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.transaction_completed_date||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"등록일"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.created_at?new Date(p.created_at).toLocaleDateString("ko-KR"):"-"})]})]})]}),Ue.jsxs("div",{children:[Ue.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"물건 정보"}),Ue.jsxs("div",{className:"space-y-2",children:[Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"공급/전용(㎡)"}),Ue.jsxs("p",{className:"text-sm text-gray-900",children:[p.supply_area_sqm?`${p.supply_area_sqm}㎡`:"-"," /",p.private_area_sqm?` ${p.private_area_sqm}㎡`:" -"]})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"공급/전용(평)"}),Ue.jsxs("p",{className:"text-sm text-gray-900",children:[p.supply_area_sqm?_(p.supply_area_sqm):"-"," /",p.private_area_sqm?` ${_(p.private_area_sqm)}`:" -"]})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"해당층/총층"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.floor_info||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"방/욕실"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.rooms_bathrooms||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"방향"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.direction||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"관리비"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.maintenance_fee||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"주차"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.parking||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"입주가능일"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.move_in_date||"-"})]}),Ue.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500",children:"사용승인"}),Ue.jsx("p",{className:"text-sm text-gray-900",children:p.approval_date||"-"})]})]})]}),Ue.jsxs("div",{children:[Ue.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"추가 정보"}),Ue.jsxs("div",{className:"space-y-4",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"특이사항"}),Ue.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:Ue.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-line",children:p.special_notes||"특이사항이 없습니다."})})]}),k&&Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"담당자 메모 (내부용)"}),Ue.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:Ue.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-line",children:p.manager_memo||"메모가 없습니다."})})]})]})]})]})]}),Ue.jsx(ja,{property:p}),i&&As(i.email)&&Ue.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 sm:p-6 mb-4 sm:mb-6",children:[Ue.jsx("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"매칭 관리"}),Ue.jsx(va,{propertyId:r,currentManagerId:null==p?void 0:p.manager_id})]}),Ue.jsx(ka,{propertyId:r}),m&&Ue.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:Ue.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Ue.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:Ue.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),Ue.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Ue.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Ue.jsxs("div",{className:"sm:flex sm:items-start",children:[Ue.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:Ue.jsx(G,{className:"h-6 w-6 text-red-600"})}),Ue.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[Ue.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"매물 삭제"}),Ue.jsx("div",{className:"mt-2",children:Ue.jsx("p",{className:"text-sm text-gray-500",children:"정말로 이 매물을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."})})]})]})}),Ue.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Ue.jsx(ba,{type:"button",variant:"danger",className:"w-full sm:w-auto sm:ml-3 bg-red-500 hover:bg-red-600 text-white",onClick:()=>{y.mutate()},disabled:d,children:d?"삭제 중...":"삭제"}),Ue.jsx(ba,{type:"button",variant:"secondary",className:"mt-3 w-full sm:w-auto sm:mt-0 border-primary text-primary hover:bg-pink-50",onClick:()=>{h(!1)},disabled:d,children:"취소"})]})]})]})})]})};var Ea=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===Ca}(e)}(e)},Ca="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Oa(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Aa((s=e,Array.isArray(s)?[]:{}),e,t):e;var s}function Ta(e,t,s){return e.concat(t).map(function(e){return Oa(e,s)})}function Aa(e,t,s){(s=s||{}).arrayMerge=s.arrayMerge||Ta,s.isMergeableObject=s.isMergeableObject||Ea;var r=Array.isArray(t);return r===Array.isArray(e)?r?s.arrayMerge(e,t,s):function(e,t,s){var r={};return s.isMergeableObject(e)&&Object.keys(e).forEach(function(t){r[t]=Oa(e[t],s)}),Object.keys(t).forEach(function(a){s.isMergeableObject(t[a])&&e[a]?r[a]=Aa(e[a],t[a],s):r[a]=Oa(t[a],s)}),r}(e,t,s):Oa(t,s)}Aa.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,s){return Aa(e,s,t)},{})};var Da=Aa,Fa="object"==typeof global&&global&&global.Object===Object&&global,Pa="object"==typeof self&&self&&self.Object===Object&&self,Ia=Fa||Pa||Function("return this")(),Ra=Ia.Symbol,Ma=Object.prototype,$a=Ma.hasOwnProperty,La=Ma.toString,qa=Ra?Ra.toStringTag:void 0,Ua=Object.prototype.toString,Ba=Ra?Ra.toStringTag:void 0;function Va(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Ba&&Ba in Object(e)?function(e){var t=$a.call(e,qa),s=e[qa];try{e[qa]=void 0;var r=!0}catch(Ed){}var a=La.call(e);return r&&(t?e[qa]=s:delete e[qa]),a}(e):function(e){return Ua.call(e)}(e)}function za(e,t){return function(s){return e(t(s))}}var Qa=za(Object.getPrototypeOf,Object);function Ka(e){return null!=e&&"object"==typeof e}var Wa=Function.prototype,Ga=Object.prototype,Ya=Wa.toString,Ha=Ga.hasOwnProperty,Ja=Ya.call(Object);function Xa(e){if(!Ka(e)||"[object Object]"!=Va(e))return!1;var t=Qa(e);if(null===t)return!0;var s=Ha.call(t,"constructor")&&t.constructor;return"function"==typeof s&&s instanceof s&&Ya.call(s)==Ja}function Za(e,t){return e===t||e!=e&&t!=t}function en(e,t){for(var s=e.length;s--;)if(Za(e[s][0],t))return s;return-1}var tn=Array.prototype.splice;function sn(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}function rn(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function an(e){if(!rn(e))return!1;var t=Va(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}sn.prototype.clear=function(){this.__data__=[],this.size=0},sn.prototype.delete=function(e){var t=this.__data__,s=en(t,e);return!(s<0||(s==t.length-1?t.pop():tn.call(t,s,1),--this.size,0))},sn.prototype.get=function(e){var t=this.__data__,s=en(t,e);return s<0?void 0:t[s][1]},sn.prototype.has=function(e){return en(this.__data__,e)>-1},sn.prototype.set=function(e,t){var s=this.__data__,r=en(s,e);return r<0?(++this.size,s.push([e,t])):s[r][1]=t,this};var nn,ln=Ia["__core-js_shared__"],on=(nn=/[^.]+$/.exec(ln&&ln.keys&&ln.keys.IE_PROTO||""))?"Symbol(src)_1."+nn:"",cn=Function.prototype.toString;function dn(e){if(null!=e){try{return cn.call(e)}catch(Ed){}try{return e+""}catch(Ed){}}return""}var un=/^\[object .+?Constructor\]$/,mn=Function.prototype,hn=Object.prototype,pn=mn.toString,xn=hn.hasOwnProperty,fn=RegExp("^"+pn.call(xn).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gn(e){return!(!rn(e)||(t=e,on&&on in t))&&(an(e)?fn:un).test(dn(e));var t}function yn(e,t){var s=function(e,t){return null==e?void 0:e[t]}(e,t);return gn(s)?s:void 0}var bn=yn(Ia,"Map"),vn=yn(Object,"create"),jn=Object.prototype.hasOwnProperty,wn=Object.prototype.hasOwnProperty;function Nn(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}function _n(e,t){var s,r,a=e.__data__;return("string"==(r=typeof(s=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==s:null===s)?a["string"==typeof t?"string":"hash"]:a.map}function kn(e){var t=-1,s=null==e?0:e.length;for(this.clear();++t<s;){var r=e[t];this.set(r[0],r[1])}}function Sn(e){var t=this.__data__=new sn(e);this.size=t.size}Nn.prototype.clear=function(){this.__data__=vn?vn(null):{},this.size=0},Nn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Nn.prototype.get=function(e){var t=this.__data__;if(vn){var s=t[e];return"__lodash_hash_undefined__"===s?void 0:s}return jn.call(t,e)?t[e]:void 0},Nn.prototype.has=function(e){var t=this.__data__;return vn?void 0!==t[e]:wn.call(t,e)},Nn.prototype.set=function(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=vn&&void 0===t?"__lodash_hash_undefined__":t,this},kn.prototype.clear=function(){this.size=0,this.__data__={hash:new Nn,map:new(bn||sn),string:new Nn}},kn.prototype.delete=function(e){var t=_n(this,e).delete(e);return this.size-=t?1:0,t},kn.prototype.get=function(e){return _n(this,e).get(e)},kn.prototype.has=function(e){return _n(this,e).has(e)},kn.prototype.set=function(e,t){var s=_n(this,e),r=s.size;return s.set(e,t),this.size+=s.size==r?0:1,this},Sn.prototype.clear=function(){this.__data__=new sn,this.size=0},Sn.prototype.delete=function(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s},Sn.prototype.get=function(e){return this.__data__.get(e)},Sn.prototype.has=function(e){return this.__data__.has(e)},Sn.prototype.set=function(e,t){var s=this.__data__;if(s instanceof sn){var r=s.__data__;if(!bn||r.length<199)return r.push([e,t]),this.size=++s.size,this;s=this.__data__=new kn(r)}return s.set(e,t),this.size=s.size,this};var En=function(){try{var e=yn(Object,"defineProperty");return e({},"",{}),e}catch(Ed){}}();function Cn(e,t,s){"__proto__"==t&&En?En(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}var On=Object.prototype.hasOwnProperty;function Tn(e,t,s){var r=e[t];On.call(e,t)&&Za(r,s)&&(void 0!==s||t in e)||Cn(e,t,s)}function An(e,t,s,r){var a=!s;s||(s={});for(var n=-1,i=t.length;++n<i;){var l=t[n],o=void 0;void 0===o&&(o=e[l]),a?Cn(s,l,o):Tn(s,l,o)}return s}function Dn(e){return Ka(e)&&"[object Arguments]"==Va(e)}var Fn=Object.prototype,Pn=Fn.hasOwnProperty,In=Fn.propertyIsEnumerable,Rn=Dn(function(){return arguments}())?Dn:function(e){return Ka(e)&&Pn.call(e,"callee")&&!In.call(e,"callee")},Mn=Array.isArray,$n="object"==typeof e&&e&&!e.nodeType&&e,Ln=$n&&"object"==typeof Ae&&Ae&&!Ae.nodeType&&Ae,qn=Ln&&Ln.exports===$n?Ia.Buffer:void 0,Un=(qn?qn.isBuffer:void 0)||function(){return!1},Bn=/^(?:0|[1-9]\d*)$/;function Vn(e,t){var s=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==s||"symbol"!=s&&Bn.test(e))&&e>-1&&e%1==0&&e<t}function zn(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var Qn={};function Kn(e){return function(t){return e(t)}}Qn["[object Float32Array]"]=Qn["[object Float64Array]"]=Qn["[object Int8Array]"]=Qn["[object Int16Array]"]=Qn["[object Int32Array]"]=Qn["[object Uint8Array]"]=Qn["[object Uint8ClampedArray]"]=Qn["[object Uint16Array]"]=Qn["[object Uint32Array]"]=!0,Qn["[object Arguments]"]=Qn["[object Array]"]=Qn["[object ArrayBuffer]"]=Qn["[object Boolean]"]=Qn["[object DataView]"]=Qn["[object Date]"]=Qn["[object Error]"]=Qn["[object Function]"]=Qn["[object Map]"]=Qn["[object Number]"]=Qn["[object Object]"]=Qn["[object RegExp]"]=Qn["[object Set]"]=Qn["[object String]"]=Qn["[object WeakMap]"]=!1;var Wn="object"==typeof e&&e&&!e.nodeType&&e,Gn=Wn&&"object"==typeof Ae&&Ae&&!Ae.nodeType&&Ae,Yn=Gn&&Gn.exports===Wn&&Fa.process,Hn=function(){try{var e=Gn&&Gn.require&&Gn.require("util").types;return e||Yn&&Yn.binding&&Yn.binding("util")}catch(Ed){}}(),Jn=Hn&&Hn.isTypedArray,Xn=Jn?Kn(Jn):function(e){return Ka(e)&&zn(e.length)&&!!Qn[Va(e)]},Zn=Object.prototype.hasOwnProperty;function ei(e,t){var s=Mn(e),r=!s&&Rn(e),a=!s&&!r&&Un(e),n=!s&&!r&&!a&&Xn(e),i=s||r||a||n,l=i?function(e,t){for(var s=-1,r=Array(e);++s<e;)r[s]=t(s);return r}(e.length,String):[],o=l.length;for(var c in e)!t&&!Zn.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||n&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Vn(c,o))||l.push(c);return l}var ti=Object.prototype;function si(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ti)}var ri=za(Object.keys,Object),ai=Object.prototype.hasOwnProperty;function ni(e){return null!=e&&zn(e.length)&&!an(e)}function ii(e){return ni(e)?ei(e):function(e){if(!si(e))return ri(e);var t=[];for(var s in Object(e))ai.call(e,s)&&"constructor"!=s&&t.push(s);return t}(e)}var li=Object.prototype.hasOwnProperty;function oi(e){if(!rn(e))return function(e){var t=[];if(null!=e)for(var s in Object(e))t.push(s);return t}(e);var t=si(e),s=[];for(var r in e)("constructor"!=r||!t&&li.call(e,r))&&s.push(r);return s}function ci(e){return ni(e)?ei(e,!0):oi(e)}var di="object"==typeof e&&e&&!e.nodeType&&e,ui=di&&"object"==typeof Ae&&Ae&&!Ae.nodeType&&Ae,mi=ui&&ui.exports===di?Ia.Buffer:void 0,hi=mi?mi.allocUnsafe:void 0;function pi(e,t){var s=-1,r=e.length;for(t||(t=Array(r));++s<r;)t[s]=e[s];return t}function xi(){return[]}var fi=Object.prototype.propertyIsEnumerable,gi=Object.getOwnPropertySymbols,yi=gi?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var s=-1,r=null==e?0:e.length,a=0,n=[];++s<r;){var i=e[s];t(i,s,e)&&(n[a++]=i)}return n}(gi(e),function(t){return fi.call(e,t)}))}:xi;function bi(e,t){for(var s=-1,r=t.length,a=e.length;++s<r;)e[a+s]=t[s];return e}var vi=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)bi(t,yi(e)),e=Qa(e);return t}:xi;function ji(e,t,s){var r=t(e);return Mn(e)?r:bi(r,s(e))}function wi(e){return ji(e,ii,yi)}function Ni(e){return ji(e,ci,vi)}var _i=yn(Ia,"DataView"),ki=yn(Ia,"Promise"),Si=yn(Ia,"Set"),Ei=yn(Ia,"WeakMap"),Ci="[object Map]",Oi="[object Promise]",Ti="[object Set]",Ai="[object WeakMap]",Di="[object DataView]",Fi=dn(_i),Pi=dn(bn),Ii=dn(ki),Ri=dn(Si),Mi=dn(Ei),$i=Va;(_i&&$i(new _i(new ArrayBuffer(1)))!=Di||bn&&$i(new bn)!=Ci||ki&&$i(ki.resolve())!=Oi||Si&&$i(new Si)!=Ti||Ei&&$i(new Ei)!=Ai)&&($i=function(e){var t=Va(e),s="[object Object]"==t?e.constructor:void 0,r=s?dn(s):"";if(r)switch(r){case Fi:return Di;case Pi:return Ci;case Ii:return Oi;case Ri:return Ti;case Mi:return Ai}return t});var Li=Object.prototype.hasOwnProperty,qi=Ia.Uint8Array;function Ui(e){var t=new e.constructor(e.byteLength);return new qi(t).set(new qi(e)),t}var Bi=/\w*$/,Vi=Ra?Ra.prototype:void 0,zi=Vi?Vi.valueOf:void 0;function Qi(e,t,s){var r,a,n,i=e.constructor;switch(t){case"[object ArrayBuffer]":return Ui(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var s=t?Ui(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}(e,s);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var s=t?Ui(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}(e,s);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(n=new(a=e).constructor(a.source,Bi.exec(a))).lastIndex=a.lastIndex,n;case"[object Symbol]":return r=e,zi?Object(zi.call(r)):{}}}var Ki=Object.create,Wi=function(){function e(){}return function(t){if(!rn(t))return{};if(Ki)return Ki(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}}(),Gi=Hn&&Hn.isMap,Yi=Gi?Kn(Gi):function(e){return Ka(e)&&"[object Map]"==$i(e)},Hi=Hn&&Hn.isSet,Ji=Hi?Kn(Hi):function(e){return Ka(e)&&"[object Set]"==$i(e)},Xi="[object Arguments]",Zi="[object Function]",el="[object Object]",tl={};function sl(e,t,s,r,a,n){var i,l=1&t,o=2&t,c=4&t;if(void 0!==i)return i;if(!rn(e))return e;var d=Mn(e);if(d){if(i=function(e){var t=e.length,s=new e.constructor(t);return t&&"string"==typeof e[0]&&Li.call(e,"index")&&(s.index=e.index,s.input=e.input),s}(e),!l)return pi(e,i)}else{var u=$i(e),m=u==Zi||"[object GeneratorFunction]"==u;if(Un(e))return function(e,t){if(t)return e.slice();var s=e.length,r=hi?hi(s):new e.constructor(s);return e.copy(r),r}(e,l);if(u==el||u==Xi||m&&!a){if(i=o||m?{}:function(e){return"function"!=typeof e.constructor||si(e)?{}:Wi(Qa(e))}(e),!l)return o?function(e,t){return An(e,vi(e),t)}(e,function(e,t){return e&&An(t,ci(t),e)}(i,e)):function(e,t){return An(e,yi(e),t)}(e,function(e,t){return e&&An(t,ii(t),e)}(i,e))}else{if(!tl[u])return a?e:{};i=Qi(e,u,l)}}n||(n=new Sn);var h=n.get(e);if(h)return h;n.set(e,i),Ji(e)?e.forEach(function(r){i.add(sl(r,t,s,0,e,n))}):Yi(e)&&e.forEach(function(r,a){i.set(a,sl(r,t,s,0,e,n))});var p=d?void 0:(c?o?Ni:wi:o?ci:ii)(e);return function(e,t){for(var s=-1,r=null==e?0:e.length;++s<r&&!1!==t(e[s],s,e););}(p||e,function(r,a){p&&(r=e[a=r]),Tn(i,a,sl(r,t,s,0,e,n))}),i}function rl(e){return sl(e,5)}tl[Xi]=tl["[object Array]"]=tl["[object ArrayBuffer]"]=tl["[object DataView]"]=tl["[object Boolean]"]=tl["[object Date]"]=tl["[object Float32Array]"]=tl["[object Float64Array]"]=tl["[object Int8Array]"]=tl["[object Int16Array]"]=tl["[object Int32Array]"]=tl["[object Map]"]=tl["[object Number]"]=tl[el]=tl["[object RegExp]"]=tl["[object Set]"]=tl["[object String]"]=tl["[object Symbol]"]=tl["[object Uint8Array]"]=tl["[object Uint8ClampedArray]"]=tl["[object Uint16Array]"]=tl["[object Uint32Array]"]=!0,tl["[object Error]"]=tl[Zi]=tl["[object WeakMap]"]=!1;var al=Array.isArray,nl=Object.keys,il=Object.prototype.hasOwnProperty,ll="undefined"!=typeof Element;function ol(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var s,r,a,n=al(e),i=al(t);if(n&&i){if((r=e.length)!=t.length)return!1;for(s=r;0!==s--;)if(!ol(e[s],t[s]))return!1;return!0}if(n!=i)return!1;var l=e instanceof Date,o=t instanceof Date;if(l!=o)return!1;if(l&&o)return e.getTime()==t.getTime();var c=e instanceof RegExp,d=t instanceof RegExp;if(c!=d)return!1;if(c&&d)return e.toString()==t.toString();var u=nl(e);if((r=u.length)!==nl(t).length)return!1;for(s=r;0!==s--;)if(!il.call(t,u[s]))return!1;if(ll&&e instanceof Element&&t instanceof Element)return e===t;for(s=r;0!==s--;)if(!("_owner"===(a=u[s])&&e.$$typeof||ol(e[a],t[a])))return!1;return!0}return e!=e&&t!=t}const cl=d(function(e,t){try{return ol(e,t)}catch(s){if(s.message&&s.message.match(/stack|recursion/i)||-2146828260===s.number)return!1;throw s}});function dl(e){return sl(e,4)}function ul(e,t){for(var s=-1,r=null==e?0:e.length,a=Array(r);++s<r;)a[s]=t(e[s],s,e);return a}function ml(e){return"symbol"==typeof e||Ka(e)&&"[object Symbol]"==Va(e)}function hl(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var s=function(){var r=arguments,a=t?t.apply(this,r):r[0],n=s.cache;if(n.has(a))return n.get(a);var i=e.apply(this,r);return s.cache=n.set(a,i)||n,i};return s.cache=new(hl.Cache||kn),s}hl.Cache=kn;var pl,xl,fl,gl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yl=/\\(\\)?/g,bl=(pl=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(gl,function(e,s,r,a){t.push(r?a.replace(yl,"$1"):s||e)}),t},xl=hl(pl,function(e){return 500===fl.size&&fl.clear(),e}),fl=xl.cache,xl);function vl(e){if("string"==typeof e||ml(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var jl=Ra?Ra.prototype:void 0,wl=jl?jl.toString:void 0;function Nl(e){if("string"==typeof e)return e;if(Mn(e))return ul(e,Nl)+"";if(ml(e))return wl?wl.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function _l(e){return Mn(e)?ul(e,vl):ml(e)?[e]:pi(bl(function(e){return null==e?"":Nl(e)}(e)))}var kl={exports:{}},Sl={},El="function"==typeof Symbol&&Symbol.for,Cl=El?Symbol.for("react.element"):60103,Ol=El?Symbol.for("react.portal"):60106,Tl=El?Symbol.for("react.fragment"):60107,Al=El?Symbol.for("react.strict_mode"):60108,Dl=El?Symbol.for("react.profiler"):60114,Fl=El?Symbol.for("react.provider"):60109,Pl=El?Symbol.for("react.context"):60110,Il=El?Symbol.for("react.async_mode"):60111,Rl=El?Symbol.for("react.concurrent_mode"):60111,Ml=El?Symbol.for("react.forward_ref"):60112,$l=El?Symbol.for("react.suspense"):60113,Ll=El?Symbol.for("react.suspense_list"):60120,ql=El?Symbol.for("react.memo"):60115,Ul=El?Symbol.for("react.lazy"):60116,Bl=El?Symbol.for("react.block"):60121,Vl=El?Symbol.for("react.fundamental"):60117,zl=El?Symbol.for("react.responder"):60118,Ql=El?Symbol.for("react.scope"):60119;function Kl(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Cl:switch(e=e.type){case Il:case Rl:case Tl:case Dl:case Al:case $l:return e;default:switch(e=e&&e.$$typeof){case Pl:case Ml:case Ul:case ql:case Fl:return e;default:return t}}case Ol:return t}}}function Wl(e){return Kl(e)===Rl}Sl.AsyncMode=Il,Sl.ConcurrentMode=Rl,Sl.ContextConsumer=Pl,Sl.ContextProvider=Fl,Sl.Element=Cl,Sl.ForwardRef=Ml,Sl.Fragment=Tl,Sl.Lazy=Ul,Sl.Memo=ql,Sl.Portal=Ol,Sl.Profiler=Dl,Sl.StrictMode=Al,Sl.Suspense=$l,Sl.isAsyncMode=function(e){return Wl(e)||Kl(e)===Il},Sl.isConcurrentMode=Wl,Sl.isContextConsumer=function(e){return Kl(e)===Pl},Sl.isContextProvider=function(e){return Kl(e)===Fl},Sl.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Cl},Sl.isForwardRef=function(e){return Kl(e)===Ml},Sl.isFragment=function(e){return Kl(e)===Tl},Sl.isLazy=function(e){return Kl(e)===Ul},Sl.isMemo=function(e){return Kl(e)===ql},Sl.isPortal=function(e){return Kl(e)===Ol},Sl.isProfiler=function(e){return Kl(e)===Dl},Sl.isStrictMode=function(e){return Kl(e)===Al},Sl.isSuspense=function(e){return Kl(e)===$l},Sl.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Tl||e===Rl||e===Dl||e===Al||e===$l||e===Ll||"object"==typeof e&&null!==e&&(e.$$typeof===Ul||e.$$typeof===ql||e.$$typeof===Fl||e.$$typeof===Pl||e.$$typeof===Ml||e.$$typeof===Vl||e.$$typeof===zl||e.$$typeof===Ql||e.$$typeof===Bl)},Sl.typeOf=Kl,kl.exports=Sl;var Gl=kl.exports,Yl={};function Hl(){return Hl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Hl.apply(this,arguments)}function Jl(e,t){if(null==e)return{};var s,r,a={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],t.indexOf(s)>=0||(a[s]=e[s]);return a}Yl[Gl.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Yl[Gl.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var Xl=t.createContext(void 0);Xl.displayName="FormikContext",Xl.Provider,Xl.Consumer;var Zl=function(e){return"function"==typeof e},eo=function(e){return null!==e&&"object"==typeof e},to=function(e){return String(Math.floor(Number(e)))===e},so=function(e){return"[object String]"===Object.prototype.toString.call(e)},ro=function(e){return eo(e)&&Zl(e.then)};function ao(e,t,s,r){void 0===r&&(r=0);for(var a=_l(t);e&&r<a.length;)e=e[a[r++]];return r===a.length||e?void 0===e?s:e:s}function no(e,t,s){for(var r=dl(e),a=r,n=0,i=_l(t);n<i.length-1;n++){var l=i[n],o=ao(e,i.slice(0,n+1));if(o&&(eo(o)||Array.isArray(o)))a=a[l]=dl(o);else{var c=i[n+1];a=a[l]=to(c)&&Number(c)>=0?[]:{}}}return(0===n?e:a)[i[n]]===s?e:(void 0===s?delete a[i[n]]:a[i[n]]=s,0===n&&void 0===s&&delete r[i[n]],r)}function io(e,t,s,r){void 0===s&&(s=new WeakMap),void 0===r&&(r={});for(var a=0,n=Object.keys(e);a<n.length;a++){var i=n[a],l=e[i];eo(l)?s.get(l)||(s.set(l,!0),r[i]=Array.isArray(l)?[]:{},io(l,t,s,r[i])):r[i]=t}return r}var lo={},oo={};function co(e){var s=e.validateOnChange,r=void 0===s||s,a=e.validateOnBlur,n=void 0===a||a,i=e.validateOnMount,l=void 0!==i&&i,o=e.isInitialValid,c=e.enableReinitialize,d=void 0!==c&&c,u=e.onSubmit,m=Jl(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),h=Hl({validateOnChange:r,validateOnBlur:n,validateOnMount:l,onSubmit:u},m),p=t.useRef(h.initialValues),x=t.useRef(h.initialErrors||lo),f=t.useRef(h.initialTouched||oo),g=t.useRef(h.initialStatus),y=t.useRef(!1),b=t.useRef({});t.useEffect(function(){return y.current=!0,function(){y.current=!1}},[]);var v=t.useState(0)[1],j=t.useRef({values:rl(h.initialValues),errors:rl(h.initialErrors)||lo,touched:rl(h.initialTouched)||oo,status:rl(h.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),w=j.current,N=t.useCallback(function(e){var t=j.current;j.current=function(e,t){switch(t.type){case"SET_VALUES":return Hl({},e,{values:t.payload});case"SET_TOUCHED":return Hl({},e,{touched:t.payload});case"SET_ERRORS":return cl(e.errors,t.payload)?e:Hl({},e,{errors:t.payload});case"SET_STATUS":return Hl({},e,{status:t.payload});case"SET_ISSUBMITTING":return Hl({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Hl({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Hl({},e,{values:no(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Hl({},e,{touched:no(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Hl({},e,{errors:no(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Hl({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Hl({},e,{touched:io(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return Hl({},e,{isSubmitting:!1});default:return e}}(t,e),t!==j.current&&v(function(e){return e+1})},[]),_=t.useCallback(function(e,t){return new Promise(function(s,r){var a=h.validate(e,t);null==a?s(lo):ro(a)?a.then(function(e){s(e||lo)},function(e){r(e)}):s(a)})},[h.validate]),k=t.useCallback(function(e,t){var s=h.validationSchema,r=Zl(s)?s(t):s,a=t&&r.validateAt?r.validateAt(t,e):function(e,t,s){void 0===s&&(s=!1);var r=uo(e);return t[s?"validateSync":"validate"](r,{abortEarly:!1,context:r})}(e,r);return new Promise(function(e,t){a.then(function(){e(lo)},function(s){"ValidationError"===s.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return no(t,e.path,e.message);var s=e.inner,r=Array.isArray(s),a=0;for(s=r?s:s[Symbol.iterator]();;){var n;if(r){if(a>=s.length)break;n=s[a++]}else{if((a=s.next()).done)break;n=a.value}var i=n;ao(t,i.path)||(t=no(t,i.path,i.message))}}return t}(s)):t(s)})})},[h.validationSchema]),S=t.useCallback(function(e,t){return new Promise(function(s){return s(b.current[e].validate(t))})},[]),E=t.useCallback(function(e){var t=Object.keys(b.current).filter(function(e){return Zl(b.current[e].validate)}),s=t.length>0?t.map(function(t){return S(t,ao(e,t))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(s).then(function(e){return e.reduce(function(e,s,r){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===s||s&&(e=no(e,t[r],s)),e},{})})},[S]),C=t.useCallback(function(e){return Promise.all([E(e),h.validationSchema?k(e):{},h.validate?_(e):{}]).then(function(e){var t=e[0],s=e[1],r=e[2];return Da.all([t,s,r],{arrayMerge:mo})})},[h.validate,h.validationSchema,E,_,k]),O=po(function(e){return void 0===e&&(e=w.values),N({type:"SET_ISVALIDATING",payload:!0}),C(e).then(function(e){return y.current&&(N({type:"SET_ISVALIDATING",payload:!1}),N({type:"SET_ERRORS",payload:e})),e})});t.useEffect(function(){l&&!0===y.current&&cl(p.current,h.initialValues)&&O(p.current)},[l,O]);var T=t.useCallback(function(e){var t=e&&e.values?e.values:p.current,s=e&&e.errors?e.errors:x.current?x.current:h.initialErrors||{},r=e&&e.touched?e.touched:f.current?f.current:h.initialTouched||{},a=e&&e.status?e.status:g.current?g.current:h.initialStatus;p.current=t,x.current=s,f.current=r,g.current=a;var n=function(){N({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:s,touched:r,status:a,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"==typeof e.submitCount?e.submitCount:0}})};if(h.onReset){var i=h.onReset(w.values,Y);ro(i)?i.then(n):n()}else n()},[h.initialErrors,h.initialStatus,h.initialTouched,h.onReset]);t.useEffect(function(){!0!==y.current||cl(p.current,h.initialValues)||d&&(p.current=h.initialValues,T(),l&&O(p.current))},[d,h.initialValues,T,l,O]),t.useEffect(function(){d&&!0===y.current&&!cl(x.current,h.initialErrors)&&(x.current=h.initialErrors||lo,N({type:"SET_ERRORS",payload:h.initialErrors||lo}))},[d,h.initialErrors]),t.useEffect(function(){d&&!0===y.current&&!cl(f.current,h.initialTouched)&&(f.current=h.initialTouched||oo,N({type:"SET_TOUCHED",payload:h.initialTouched||oo}))},[d,h.initialTouched]),t.useEffect(function(){d&&!0===y.current&&!cl(g.current,h.initialStatus)&&(g.current=h.initialStatus,N({type:"SET_STATUS",payload:h.initialStatus}))},[d,h.initialStatus,h.initialTouched]);var A=po(function(e){if(b.current[e]&&Zl(b.current[e].validate)){var t=ao(w.values,e),s=b.current[e].validate(t);return ro(s)?(N({type:"SET_ISVALIDATING",payload:!0}),s.then(function(e){return e}).then(function(t){N({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),N({type:"SET_ISVALIDATING",payload:!1})})):(N({type:"SET_FIELD_ERROR",payload:{field:e,value:s}}),Promise.resolve(s))}return h.validationSchema?(N({type:"SET_ISVALIDATING",payload:!0}),k(w.values,e).then(function(e){return e}).then(function(t){N({type:"SET_FIELD_ERROR",payload:{field:e,value:ao(t,e)}}),N({type:"SET_ISVALIDATING",payload:!1})})):Promise.resolve()}),D=t.useCallback(function(e,t){var s=t.validate;b.current[e]={validate:s}},[]),F=t.useCallback(function(e){delete b.current[e]},[]),P=po(function(e,t){return N({type:"SET_TOUCHED",payload:e}),(void 0===t?n:t)?O(w.values):Promise.resolve()}),I=t.useCallback(function(e){N({type:"SET_ERRORS",payload:e})},[]),R=po(function(e,t){var s=Zl(e)?e(w.values):e;return N({type:"SET_VALUES",payload:s}),(void 0===t?r:t)?O(s):Promise.resolve()}),M=t.useCallback(function(e,t){N({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})},[]),$=po(function(e,t,s){return N({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===s?r:s)?O(no(w.values,e,t)):Promise.resolve()}),L=t.useCallback(function(e,t){var s,r=t,a=e;if(!so(e)){e.persist&&e.persist();var n=e.target?e.target:e.currentTarget,i=n.type,l=n.name,o=n.id,c=n.value,d=n.checked;n.outerHTML;var u=n.options,m=n.multiple;r=t||l||o,a=/number|range/.test(i)?(s=parseFloat(c),isNaN(s)?"":s):/checkbox/.test(i)?function(e,t,s){if("boolean"==typeof e)return Boolean(t);var r=[],a=!1,n=-1;if(Array.isArray(e))r=e,a=(n=e.indexOf(s))>=0;else if(!s||"true"==s||"false"==s)return Boolean(t);return t&&s&&!a?r.concat(s):a?r.slice(0,n).concat(r.slice(n+1)):r}(ao(w.values,r),d,c):u&&m?function(e){return Array.from(e).filter(function(e){return e.selected}).map(function(e){return e.value})}(u):c}r&&$(r,a)},[$,w.values]),q=po(function(e){if(so(e))return function(t){return L(t,e)};L(e)}),U=po(function(e,t,s){return void 0===t&&(t=!0),N({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===s?n:s)?O(w.values):Promise.resolve()}),B=t.useCallback(function(e,t){e.persist&&e.persist();var s=e.target,r=s.name,a=s.id;s.outerHTML,U(t||r||a,!0)},[U]),V=po(function(e){if(so(e))return function(t){return B(t,e)};B(e)}),z=t.useCallback(function(e){Zl(e)?N({type:"SET_FORMIK_STATE",payload:e}):N({type:"SET_FORMIK_STATE",payload:function(){return e}})},[]),Q=t.useCallback(function(e){N({type:"SET_STATUS",payload:e})},[]),K=t.useCallback(function(e){N({type:"SET_ISSUBMITTING",payload:e})},[]),W=po(function(){return N({type:"SUBMIT_ATTEMPT"}),O().then(function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var s;try{if(void 0===(s=H()))return}catch(r){throw r}return Promise.resolve(s).then(function(e){return y.current&&N({type:"SUBMIT_SUCCESS"}),e}).catch(function(e){if(y.current)throw N({type:"SUBMIT_FAILURE"}),e})}if(y.current&&(N({type:"SUBMIT_FAILURE"}),t))throw e})}),G=po(function(e){e&&e.preventDefault&&Zl(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&Zl(e.stopPropagation)&&e.stopPropagation(),W().catch(function(e){})}),Y={resetForm:T,validateForm:O,validateField:A,setErrors:I,setFieldError:M,setFieldTouched:U,setFieldValue:$,setStatus:Q,setSubmitting:K,setTouched:P,setValues:R,setFormikState:z,submitForm:W},H=po(function(){return u(w.values,Y)}),J=po(function(e){e&&e.preventDefault&&Zl(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&Zl(e.stopPropagation)&&e.stopPropagation(),T()}),X=t.useCallback(function(e){return{value:ao(w.values,e),error:ao(w.errors,e),touched:!!ao(w.touched,e),initialValue:ao(p.current,e),initialTouched:!!ao(f.current,e),initialError:ao(x.current,e)}},[w.errors,w.touched,w.values]),Z=t.useCallback(function(e){return{setValue:function(t,s){return $(e,t,s)},setTouched:function(t,s){return U(e,t,s)},setError:function(t){return M(e,t)}}},[$,U,M]),ee=t.useCallback(function(e){var t=eo(e),s=t?e.name:e,r=ao(w.values,s),a={name:s,value:r,onChange:q,onBlur:V};if(t){var n=e.type,i=e.value,l=e.as,o=e.multiple;"checkbox"===n?void 0===i?a.checked=!!r:(a.checked=!(!Array.isArray(r)||!~r.indexOf(i)),a.value=i):"radio"===n?(a.checked=r===i,a.value=i):"select"===l&&o&&(a.value=a.value||[],a.multiple=!0)}return a},[V,q,w.values]),te=t.useMemo(function(){return!cl(p.current,w.values)},[p.current,w.values]),se=t.useMemo(function(){return void 0!==o?te?w.errors&&0===Object.keys(w.errors).length:!1!==o&&Zl(o)?o(h):o:w.errors&&0===Object.keys(w.errors).length},[o,te,w.errors,h]);return Hl({},w,{initialValues:p.current,initialErrors:x.current,initialTouched:f.current,initialStatus:g.current,handleBlur:V,handleChange:q,handleReset:J,handleSubmit:G,resetForm:T,setErrors:I,setFormikState:z,setFieldTouched:U,setFieldValue:$,setFieldError:M,setStatus:Q,setSubmitting:K,setTouched:P,setValues:R,submitForm:W,validateForm:O,validateField:A,isValid:se,dirty:te,unregisterField:F,registerField:D,getFieldProps:ee,getFieldMeta:X,getFieldHelpers:Z,validateOnBlur:n,validateOnChange:r,validateOnMount:l})}function uo(e){var t=Array.isArray(e)?[]:{};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=String(s);!0===Array.isArray(e[r])?t[r]=e[r].map(function(e){return!0===Array.isArray(e)||Xa(e)?uo(e):""!==e?e:void 0}):Xa(e[r])?t[r]=uo(e[r]):t[r]=""!==e[r]?e[r]:void 0}return t}function mo(e,t,s){var r=e.slice();return t.forEach(function(t,a){if(void 0===r[a]){var n=!1!==s.clone&&s.isMergeableObject(t);r[a]=n?Da(Array.isArray(t)?[]:{},t,s):t}else s.isMergeableObject(t)?r[a]=Da(e[a],t,s):-1===e.indexOf(t)&&r.push(t)}),r}var ho="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t.useLayoutEffect:t.useEffect;function po(e){var s=t.useRef(e);return ho(function(){s.current=e}),t.useCallback(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s.current.apply(void 0,t)},[])}function xo(e){this._maxSize=e,this.clear()}t.forwardRef(function(e,s){var r=e.action,a=Jl(e,["action"]),n=null!=r?r:"#",i=t.useContext(Xl),l=i.handleReset,o=i.handleSubmit;return t.createElement("form",Hl({onSubmit:o,ref:s,onReset:l,action:n},a))}).displayName="Form",xo.prototype.clear=function(){this._size=0,this._values=Object.create(null)},xo.prototype.get=function(e){return this._values[e]},xo.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var fo=/[^.^\]^[]+|(?=\[\]|\.\.)/g,go=/^\d+$/,yo=/^\d/,bo=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,vo=/^\s*(['"]?)(.*?)(\1)\s*$/,jo=new xo(512),wo=new xo(512),No=new xo(512),_o={Cache:xo,split:So,normalizePath:ko,setter:function(e){var t=ko(e);return wo.get(e)||wo.set(e,function(e,s){for(var r=0,a=t.length,n=e;r<a-1;){var i=t[r];if("__proto__"===i||"constructor"===i||"prototype"===i)return e;n=n[t[r++]]}n[t[r]]=s})},getter:function(e,t){var s=ko(e);return No.get(e)||No.set(e,function(e){for(var r=0,a=s.length;r<a;){if(null==e&&t)return;e=e[s[r++]]}return e})},join:function(e){return e.reduce(function(e,t){return e+(Eo(t)||go.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(e,t,s){!function(e,t,s){var r,a,n,i,l=e.length;for(a=0;a<l;a++)(r=e[a])&&(Co(r)&&(r='"'+r+'"'),n=!(i=Eo(r))&&/^\d+$/.test(r),t.call(s,r,i,n,a,e))}(Array.isArray(e)?e:So(e),t,s)}};function ko(e){return jo.get(e)||jo.set(e,So(e).map(function(e){return e.replace(vo,"$2")}))}function So(e){return e.match(fo)||[""]}function Eo(e){return"string"==typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function Co(e){return!Eo(e)&&(function(e){return e.match(yo)&&!e.match(go)}(e)||function(e){return bo.test(e)}(e))}const Oo=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,To=e=>e.match(Oo)||[],Ao=(e,t)=>To(e).join(t).toLowerCase(),Do=e=>To(e).reduce((e,t)=>`${e}${e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}`,"");var Fo=Do,Po=e=>Ao(e,"_"),Io={exports:{}};function Ro(e,t){var s=e.length,r=new Array(s),a={},n=s,i=function(e){for(var t=new Map,s=0,r=e.length;s<r;s++){var a=e[s];t.has(a[0])||t.set(a[0],new Set),t.has(a[1])||t.set(a[1],new Set),t.get(a[0]).add(a[1])}return t}(t),l=function(e){for(var t=new Map,s=0,r=e.length;s<r;s++)t.set(e[s],s);return t}(e);for(t.forEach(function(e){if(!l.has(e[0])||!l.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});n--;)a[n]||o(e[n],n,new Set);return r;function o(e,t,n){if(n.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(Ed){c=""}throw new Error("Cyclic dependency"+c)}if(!l.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!a[t]){a[t]=!0;var d=i.get(e)||new Set;if(t=(d=Array.from(d)).length){n.add(e);do{var u=d[--t];o(u,l.get(u),n)}while(t);n.delete(e)}r[--s]=e}}}Io.exports=function(e){return Ro(function(e){for(var t=new Set,s=0,r=e.length;s<r;s++){var a=e[s];t.add(a[0]),t.add(a[1])}return Array.from(t)}(e),e)},Io.exports.array=Ro;var Mo=Io.exports;const $o=d(Mo),Lo=Object.prototype.toString,qo=Error.prototype.toString,Uo=RegExp.prototype.toString,Bo="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",Vo=/^Symbol\((.*)\)(.*)$/;function zo(e,t=!1){if(null==e||!0===e||!1===e)return""+e;const s=typeof e;if("number"===s)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===s)return t?`"${e}"`:e;if("function"===s)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===s)return Bo.call(e).replace(Vo,"Symbol($1)");const r=Lo.call(e).slice(8,-1);return"Date"===r?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===r||e instanceof Error?"["+qo.call(e)+"]":"RegExp"===r?Uo.call(e):null}function Qo(e,t){let s=zo(e,t);return null!==s?s:JSON.stringify(e,function(e,s){let r=zo(this[e],t);return null!==r?r:s},2)}function Ko(e){return null==e?[]:[].concat(e)}let Wo,Go,Yo,Ho=/\$\{\s*(\w+)\s*\}/g;Wo=Symbol.toStringTag;class Jo{constructor(e,t,s,r){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[Wo]="Error",this.name="ValidationError",this.value=t,this.path=s,this.type=r,this.errors=[],this.inner=[],Ko(e).forEach(e=>{if(Xo.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}Go=Symbol.hasInstance,Yo=Symbol.toStringTag;class Xo extends Error{static formatError(e,t){const s=t.label||t.path||"this";return t=Object.assign({},t,{path:s,originalPath:t.path}),"string"==typeof e?e.replace(Ho,(e,s)=>Qo(t[s])):"function"==typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,s,r,a){const n=new Jo(e,t,s,r);if(a)return n;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[Yo]="Error",this.name=n.name,this.message=n.message,this.type=n.type,this.value=n.value,this.path=n.path,this.errors=n.errors,this.inner=n.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Xo)}static[Go](e){return Jo[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Zo={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:s,originalValue:r})=>{const a=null!=r&&r!==s?` (cast from the value \`${Qo(r,!0)}\`).`:".";return"mixed"!==t?`${e} must be a \`${t}\` type, but the final value was: \`${Qo(s,!0)}\``+a:`${e} must match the configured type. The validated value was: \`${Qo(s,!0)}\``+a}},ec={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},tc={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},sc={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},rc={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},ac={notType:e=>{const{path:t,value:s,spec:r}=e,a=r.types.length;if(Array.isArray(s)){if(s.length<a)return`${t} tuple value has too few items, expected a length of ${a} but got ${s.length} for value: \`${Qo(s,!0)}\``;if(s.length>a)return`${t} tuple value has too many items, expected a length of ${a} but got ${s.length} for value: \`${Qo(s,!0)}\``}return Xo.formatError(Zo.notType,e)}};Object.assign(Object.create(null),{mixed:Zo,string:ec,number:tc,date:sc,object:rc,array:{min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},boolean:{isValue:"${path} field must be ${value}"},tuple:ac});const nc=e=>e&&e.__isYupSchema__;class ic{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:s,then:r,otherwise:a}=t,n="function"==typeof s?s:(...e)=>e.every(e=>e===s);return new ic(e,(e,t)=>{var s;let i=n(...e)?r:a;return null!=(s=null==i?void 0:i(t))?s:t})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let s=this.refs.map(e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)),r=this.fn(s,e,t);if(void 0===r||r===e)return e;if(!nc(r))throw new TypeError("conditions must return a schema object");return r.resolve(t)}}const lc="$",oc=".";class cc{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!=typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===lc,this.isValue=this.key[0]===oc,this.isSibling=!this.isContext&&!this.isValue;let s=this.isContext?lc:this.isValue?oc:"";this.path=this.key.slice(s.length),this.getter=this.path&&_o.getter(this.path,!0),this.map=t.map}getValue(e,t,s){let r=this.isContext?s:this.isValue?e:t;return this.getter&&(r=this.getter(r||{})),this.map&&(r=this.map(r)),r}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}cc.prototype.__isYupRef=!0;const dc=e=>null==e;function uc(e){function t({value:t,path:s="",options:r,originalValue:a,schema:n},i,l){const{name:o,test:c,params:d,message:u,skipAbsent:m}=e;let{parent:h,context:p,abortEarly:x=n.spec.abortEarly,disableStackTrace:f=n.spec.disableStackTrace}=r;const g={value:t,parent:h,context:p};function y(e={}){const r=mc(Object.assign({value:t,originalValue:a,label:n.spec.label,path:e.path||s,spec:n.spec,disableStackTrace:e.disableStackTrace||f},d,e.params),g),i=new Xo(Xo.formatError(e.message||u,r),t,r.path,e.type||o,r.disableStackTrace);return i.params=r,i}const b=x?i:l;let v={path:s,parent:h,type:o,from:r.from,createError:y,resolve:e=>hc(e,g),options:r,originalValue:a,schema:n};const j=e=>{Xo.isError(e)?b(e):e?l(null):b(y())},w=e=>{Xo.isError(e)?b(e):i(e)};if(m&&dc(t))return j(!0);let N;try{var _;if(N=c.call(v,t,v),"function"==typeof(null==(_=N)?void 0:_.then)){if(r.sync)throw new Error(`Validation test of type: "${v.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(N).then(j,w)}}catch(k){return void w(k)}j(N)}return t.OPTIONS=e,t}function mc(e,t){if(!e)return e;for(const s of Object.keys(e))e[s]=hc(e[s],t);return e}function hc(e,t){return cc.isRef(e)?e.getValue(t.value,t.parent,t.context):e}function pc(e,t,s,r=s){let a,n,i;return t?(_o.forEach(t,(l,o,c)=>{let d=o?l.slice(1,l.length-1):l,u="tuple"===(e=e.resolve({context:r,parent:a,value:s})).type,m=c?parseInt(d,10):0;if(e.innerType||u){if(u&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${i}" must contain an index to the tuple element, e.g. "${i}[0]"`);if(s&&m>=s.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);a=s,s=s&&s[m],e=u?e.spec.types[m]:e.innerType}if(!c){if(!e.fields||!e.fields[d])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${i} which is a type: "${e.type}")`);a=s,s=s&&s[d],e=e.fields[d]}n=d,i=o?"["+l+"]":"."+l}),{schema:e,parent:a,parentPath:n}):{parent:a,parentPath:t,schema:e}}class xc extends Set{describe(){const e=[];for(const t of this.values())e.push(cc.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const s of this.values())t.push(e(s));return t}clone(){return new xc(this.values())}merge(e,t){const s=this.clone();return e.forEach(e=>s.add(e)),t.forEach(e=>s.delete(e)),s}}function fc(e,t=new Map){if(nc(e)||!e||"object"!=typeof e)return e;if(t.has(e))return t.get(e);let s;if(e instanceof Date)s=new Date(e.getTime()),t.set(e,s);else if(e instanceof RegExp)s=new RegExp(e),t.set(e,s);else if(Array.isArray(e)){s=new Array(e.length),t.set(e,s);for(let r=0;r<e.length;r++)s[r]=fc(e[r],t)}else if(e instanceof Map){s=new Map,t.set(e,s);for(const[r,a]of e.entries())s.set(r,fc(a,t))}else if(e instanceof Set){s=new Set,t.set(e,s);for(const r of e)s.add(fc(r,t))}else{if(!(e instanceof Object))throw Error(`Unable to clone ${e}`);s={},t.set(e,s);for(const[r,a]of Object.entries(e))s[r]=fc(a,t)}return s}function gc(e){if(null==e||!e.length)return;const t=[];let s="",r=!1,a=!1;for(let n=0;n<e.length;n++){const i=e[n];"["!==i||a?"]"!==i||a?'"'!==i?"."!==i||r||a?s+=i:s&&(t.push(s),s=""):a=!a:(s&&(/^\d+$/.test(s)?t.push(s):t.push(s.replace(/^"|"$/g,"")),s=""),r=!1):(s&&(t.push(...s.split(".").filter(Boolean)),s=""),r=!0)}return s&&t.push(...s.split(".").filter(Boolean)),t}function yc(e,t){var s;if((null==(s=e.inner)||!s.length)&&e.errors.length)return function(e,t){const s=t?`${t}.${e.path}`:e.path;return e.errors.map(e=>({message:e,path:gc(s)}))}(e,t);const r=t?`${t}.${e.path}`:e.path;return e.inner.flatMap(e=>yc(e,r))}class bc{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new xc,this._blacklist=new xc,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Zo.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation(e=>{e.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=fc(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(0===e.length)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let s=e(this);return this._mutate=t,s}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,s=e.clone();const r=Object.assign({},t.spec,s.spec);return s.spec=r,s.internalTests=Object.assign({},t.internalTests,s.internalTests),s._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),s._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),s.tests=t.tests,s.exclusiveTests=t.exclusiveTests,s.withMutation(t=>{e.tests.forEach(e=>{t.test(e.OPTIONS)})}),s.transforms=[...t.transforms,...s.transforms],s}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let s=t.conditions;t=t.clone(),t.conditions=[],t=s.reduce((t,s)=>s.resolve(t,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,s,r,a;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(s=e.abortEarly)?s:this.spec.abortEarly,recursive:null!=(r=e.recursive)?r:this.spec.recursive,disableStackTrace:null!=(a=e.disableStackTrace)?a:this.spec.disableStackTrace})}cast(e,t={}){let s=this.resolve(Object.assign({value:e},t)),r="ignore-optionality"===t.assert,a=s._cast(e,t);if(!1!==t.assert&&!s.isType(a)){if(r&&dc(a))return a;let n=Qo(e),i=Qo(a);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${s.type}". \n\nattempted value: ${n} \n`+(i!==n?`result of cast: ${i}`:""))}return a}_cast(e,t){let s=void 0===e?e:this.transforms.reduce((t,s)=>s.call(this,t,e,this),e);return void 0===s&&(s=this.getDefault(t)),s}_validate(e,t={},s,r){let{path:a,originalValue:n=e,strict:i=this.spec.strict}=t,l=e;i||(l=this._cast(l,Object.assign({assert:!1},t)));let o=[];for(let c of Object.values(this.internalTests))c&&o.push(c);this.runTests({path:a,value:l,originalValue:n,options:t,tests:o},s,e=>{if(e.length)return r(e,l);this.runTests({path:a,value:l,originalValue:n,options:t,tests:this.tests},s,r)})}runTests(e,t,s){let r=!1,{tests:a,value:n,originalValue:i,path:l,options:o}=e,c=e=>{r||(r=!0,t(e,n))},d=e=>{r||(r=!0,s(e,n))},u=a.length,m=[];if(!u)return d([]);let h={value:n,originalValue:i,path:l,options:o,schema:this};for(let p=0;p<a.length;p++)(0,a[p])(h,c,function(e){e&&(Array.isArray(e)?m.push(...e):m.push(e)),--u<=0&&d(m)})}asNestedTest({key:e,index:t,parent:s,parentPath:r,originalParent:a,options:n}){const i=null!=e?e:t;if(null==i)throw TypeError("Must include `key` or `index` for nested validations");const l="number"==typeof i;let o=s[i];const c=Object.assign({},n,{strict:!0,parent:s,value:o,originalValue:a[i],key:void 0,[l?"index":"key"]:i,path:l||i.includes(".")?`${r||""}[${l?i:`"${i}"`}]`:(r?`${r}.`:"")+e});return(e,t,s)=>this.resolve(c)._validate(o,c,t,s)}validate(e,t){var s;let r=this.resolve(Object.assign({},t,{value:e})),a=null!=(s=null==t?void 0:t.disableStackTrace)?s:r.spec.disableStackTrace;return new Promise((s,n)=>r._validate(e,t,(e,t)=>{Xo.isError(e)&&(e.value=t),n(e)},(e,t)=>{e.length?n(new Xo(e,t,void 0,void 0,a)):s(t)}))}validateSync(e,t){var s;let r,a=this.resolve(Object.assign({},t,{value:e})),n=null!=(s=null==t?void 0:t.disableStackTrace)?s:a.spec.disableStackTrace;return a._validate(e,Object.assign({},t,{sync:!0}),(e,t)=>{throw Xo.isError(e)&&(e.value=t),e},(t,s)=>{if(t.length)throw new Xo(t,e,void 0,void 0,n);r=s}),r}isValid(e,t){return this.validate(e,t).then(()=>!0,e=>{if(Xo.isError(e))return!1;throw e})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(s){if(Xo.isError(s))return!1;throw s}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"==typeof t?t.call(this,e):fc(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return 0===arguments.length?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const s=this.clone({nullable:e});return s.internalTests.nullable=uc({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),s}optionality(e,t){const s=this.clone({optional:e});return s.internalTests.optionality=uc({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),s}optional(){return this.optionality(!0)}defined(e=Zo.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=Zo.notNull){return this.nullability(!1,e)}required(e=Zo.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(t=1===e.length?"function"==typeof e[0]?{test:e[0]}:e[0]:2===e.length?{name:e[0],test:e[1]}:{name:e[0],message:e[1],test:e[2]},void 0===t.message&&(t.message=Zo.default),"function"!=typeof t.test)throw new TypeError("`test` is a required parameters");let s=this.clone(),r=uc(t),a=t.exclusive||t.name&&!0===s.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(s.exclusiveTests[t.name]=!!t.exclusive),s.tests=s.tests.filter(e=>{if(e.OPTIONS.name===t.name){if(a)return!1;if(e.OPTIONS.test===r.OPTIONS.test)return!1}return!0}),s.tests.push(r),s}when(e,t){Array.isArray(e)||"string"==typeof e||(t=e,e=".");let s=this.clone(),r=Ko(e).map(e=>new cc(e));return r.forEach(e=>{e.isSibling&&s.deps.push(e.key)}),s.conditions.push("function"==typeof t?new ic(r,t):ic.fromOptions(r,t)),s}typeError(e){let t=this.clone();return t.internalTests.typeError=uc({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=Zo.oneOf){let s=this.clone();return e.forEach(e=>{s._whitelist.add(e),s._blacklist.delete(e)}),s.internalTests.whiteList=uc({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,s=t.resolveAll(this.resolve);return!!s.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:s}})}}),s}notOneOf(e,t=Zo.notOneOf){let s=this.clone();return e.forEach(e=>{s._blacklist.add(e),s._whitelist.delete(e)}),s.internalTests.blacklist=uc({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,s=t.resolveAll(this.resolve);return!s.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:s}})}}),s}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:s,meta:r,optional:a,nullable:n}=t.spec;return{meta:r,label:s,optional:a,nullable:n,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.filter((e,t,s)=>s.findIndex(t=>t.OPTIONS.name===e.OPTIONS.name)===t).map(t=>{const s=t.OPTIONS.params&&e?mc(Object.assign({},t.OPTIONS.params),e):t.OPTIONS.params;return{name:t.OPTIONS.name,params:s}})}}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(t){try{return{value:await e.validate(t,{abortEarly:!1})}}catch(s){if(s instanceof Xo)return{issues:yc(s)};throw s}}}}}bc.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])bc.prototype[`${t}At`]=function(e,s,r={}){const{parent:a,parentPath:n,schema:i}=pc(this,e,s,r.context);return i[t](a&&a[n],Object.assign({},r,{parent:a,path:e}))};for(const t of["equals","is"])bc.prototype[t]=bc.prototype.oneOf;for(const t of["not","nope"])bc.prototype[t]=bc.prototype.notOneOf;const vc=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function jc(e){var t,s;const r=vc.exec(e);return r?{year:wc(r[1]),month:wc(r[2],1)-1,day:wc(r[3],1),hour:wc(r[4]),minute:wc(r[5]),second:wc(r[6]),millisecond:r[7]?wc(r[7].substring(0,3)):0,precision:null!=(t=null==(s=r[7])?void 0:s.length)?t:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:wc(r[10]),minuteOffset:wc(r[11])}:null}function wc(e,t=0){return Number(e)||t}let Nc=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,_c=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,kc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Sc=new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"),Ec=e=>dc(e)||e===e.trim(),Cc={}.toString();function Oc(){return new Tc}class Tc extends bc{constructor(){super({type:"string",check:e=>(e instanceof String&&(e=e.valueOf()),"string"==typeof e)}),this.withMutation(()=>{this.transform((e,t,s)=>{if(!s.spec.coerce||s.isType(e))return e;if(Array.isArray(e))return e;const r=null!=e&&e.toString?e.toString():e;return r===Cc?e:r})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||Zo.required,name:"required",skipAbsent:!0,test:e=>!!e.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(e=>"required"!==e.OPTIONS.name),e))}length(e,t=ec.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e,t=ec.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e,t=ec.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let s,r,a=!1;return t&&("object"==typeof t?({excludeEmptyString:a=!1,message:s,name:r}=t):s=t),this.test({name:r||"matches",message:s||ec.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&a||-1!==t.search(e)})}email(e=ec.email){return this.matches(Nc,{name:"email",message:e,excludeEmptyString:!0})}url(e=ec.url){return this.matches(_c,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=ec.uuid){return this.matches(kc,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t,s,r="";return e&&("object"==typeof e?({message:r="",allowOffset:t=!1,precision:s}=e):r=e),this.matches(Sc,{name:"datetime",message:r||ec.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:r||ec.datetime_offset,params:{allowOffset:t},skipAbsent:!0,test:e=>{if(!e||t)return!0;const s=jc(e);return!!s&&!!s.z}}).test({name:"datetime_precision",message:r||ec.datetime_precision,params:{precision:s},skipAbsent:!0,test:e=>{if(!e||null==s)return!0;const t=jc(e);return!!t&&t.precision===s}})}ensure(){return this.default("").transform(e=>null===e?"":e)}trim(e=ec.trim){return this.transform(e=>null!=e?e.trim():e).test({message:e,name:"trim",test:Ec})}lowercase(e=ec.lowercase){return this.transform(e=>dc(e)?e:e.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>dc(e)||e===e.toLowerCase()})}uppercase(e=ec.uppercase){return this.transform(e=>dc(e)?e:e.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>dc(e)||e===e.toUpperCase()})}}function Ac(){return new Dc}Oc.prototype=Tc.prototype;class Dc extends bc{constructor(){super({type:"number",check:e=>(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&!(e=>e!=+e)(e))}),this.withMutation(()=>{this.transform((e,t,s)=>{if(!s.spec.coerce)return e;let r=e;if("string"==typeof r){if(r=r.replace(/\s/g,""),""===r)return NaN;r=+r}return s.isType(r)||null===r?r:parseFloat(r)})})}min(e,t=tc.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t>=this.resolve(e)}})}max(e,t=tc.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t<=this.resolve(e)}})}lessThan(e,t=tc.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(t){return t<this.resolve(e)}})}moreThan(e,t=tc.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(t){return t>this.resolve(e)}})}positive(e=tc.positive){return this.moreThan(0,e)}negative(e=tc.negative){return this.lessThan(0,e)}integer(e=tc.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:e=>Number.isInteger(e)})}truncate(){return this.transform(e=>dc(e)?e:0|e)}round(e){var t;let s=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===s.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+s.join(", "));return this.transform(t=>dc(t)?t:Math[e](t))}}Ac.prototype=Dc.prototype;let Fc=new Date("");class Pc extends bc{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation(()=>{this.transform((e,t,s)=>!s.spec.coerce||s.isType(e)||null===e?e:(e=function(e){const t=jc(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(void 0===t.z&&void 0===t.plusMinus)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let s=0;return"Z"!==t.z&&void 0!==t.plusMinus&&(s=60*t.hourOffset+t.minuteOffset,"+"===t.plusMinus&&(s=0-s)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+s,t.second,t.millisecond)}(e),isNaN(e)?Pc.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let s;if(cc.isRef(e))s=e;else{let r=this.cast(e);if(!this._typeCheck(r))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);s=r}return s}min(e,t=sc.min){let s=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(s)}})}max(e,t=sc.max){let s=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(s)}})}}function Ic(e,t){let s=1/0;return e.some((e,r)=>{var a;if(null!=(a=t.path)&&a.includes(e))return s=r,!0}),s}function Rc(e){return(t,s)=>Ic(e,t)-Ic(e,s)}Pc.INVALID_DATE=Fc;const Mc=(e,t,s)=>{if("string"!=typeof e)return e;let r=e;try{r=JSON.parse(e)}catch(a){}return s.isType(r)?r:e};function $c(e){if("fields"in e){const t={};for(const[s,r]of Object.entries(e.fields))t[s]=$c(r);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=$c(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map($c)}):"optional"in e?e.optional():e}let Lc=e=>"[object Object]"===Object.prototype.toString.call(e);function qc(e,t){let s=Object.keys(e.fields);return Object.keys(t).filter(e=>-1===s.indexOf(e))}const Uc=Rc([]);function Bc(e){return new Vc(e)}class Vc extends bc{constructor(e){super({type:"object",check:e=>Lc(e)||"function"==typeof e}),this.fields=Object.create(null),this._sortErrors=Uc,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var s;let r=super._cast(e,t);if(void 0===r)return this.getDefault(t);if(!this._typeCheck(r))return r;let a=this.fields,n=null!=(s=t.stripUnknown)?s:this.spec.noUnknown,i=[].concat(this._nodes,Object.keys(r).filter(e=>!this._nodes.includes(e))),l={},o=Object.assign({},t,{parent:l,__validating:t.__validating||!1}),c=!1;for(const d of i){let e=a[d],s=d in r;if(e){let s,a=r[d];o.path=(t.path?`${t.path}.`:"")+d,e=e.resolve({value:a,context:t.context,parent:l});let n=e instanceof bc?e.spec:void 0,i=null==n?void 0:n.strict;if(null!=n&&n.strip){c=c||d in r;continue}s=t.__validating&&i?r[d]:e.cast(r[d],o),void 0!==s&&(l[d]=s)}else s&&!n&&(l[d]=r[d]);s===d in l&&l[d]===r[d]||(c=!0)}return c?l:r}_validate(e,t={},s,r){let{from:a=[],originalValue:n=e,recursive:i=this.spec.recursive}=t;t.from=[{schema:this,value:n},...a],t.__validating=!0,t.originalValue=n,super._validate(e,t,s,(e,a)=>{if(!i||!Lc(a))return void r(e,a);n=n||a;let l=[];for(let s of this._nodes){let e=this.fields[s];e&&!cc.isRef(e)&&l.push(e.asNestedTest({options:t,key:s,parent:a,parentPath:t.path,originalParent:n}))}this.runTests({tests:l,value:a,originalValue:n,options:t},s,t=>{r(t.sort(this._sortErrors).concat(e),a)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),s=t.fields;for(let[r,a]of Object.entries(this.fields)){const e=s[r];s[r]=void 0===e?a:e}return t.withMutation(t=>t.setFields(s,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(s=>{var r;const a=this.fields[s];let n=e;null!=(r=n)&&r.value&&(n=Object.assign({},n,{parent:n.value,value:n.value[s]})),t[s]=a&&"getDefault"in a?a.getDefault(n):void 0}),t}setFields(e,t){let s=this.clone();return s.fields=e,s._nodes=function(e,t=[]){let s=[],r=new Set,a=new Set(t.map(([e,t])=>`${e}-${t}`));function n(e,t){let n=_o.split(e)[0];r.add(n),a.has(`${t}-${n}`)||s.push([t,n])}for(const i of Object.keys(e)){let t=e[i];r.add(i),cc.isRef(t)&&t.isSibling?n(t.path,i):nc(t)&&"deps"in t&&t.deps.forEach(e=>n(e,i))}return $o.array(Array.from(r),s).reverse()}(e,t),s._sortErrors=Rc(Object.keys(e)),t&&(s._excludedEdges=t),s}shape(e,t=[]){return this.clone().withMutation(s=>{let r=s._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),r=[...s._excludedEdges,...t]),s.setFields(Object.assign(s.fields,e),r)})}partial(){const e={};for(const[t,s]of Object.entries(this.fields))e[t]="optional"in s&&s.optional instanceof Function?s.optional():s;return this.setFields(e)}deepPartial(){return $c(this)}pick(e){const t={};for(const s of e)this.fields[s]&&(t[s]=this.fields[s]);return this.setFields(t,this._excludedEdges.filter(([t,s])=>e.includes(t)&&e.includes(s)))}omit(e){const t=[];for(const s of Object.keys(this.fields))e.includes(s)||t.push(s);return this.pick(t)}from(e,t,s){let r=_o.getter(e,!0);return this.transform(a=>{if(!a)return a;let n=a;return((e,t)=>{const s=[..._o.normalizePath(t)];if(1===s.length)return s[0]in e;let r=s.pop(),a=_o.getter(_o.join(s),!0)(e);return!(!a||!(r in a))})(a,e)&&(n=Object.assign({},a),s||delete n[e],n[t]=r(a)),n})}json(){return this.transform(Mc)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||rc.exact,test(e){if(null==e)return!0;const t=qc(this.schema,e);return 0===t.length||this.createError({params:{properties:t.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,t=rc.noUnknown){"boolean"!=typeof e&&(t=e,e=!0);let s=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const s=qc(this.schema,t);return!e||0===s.length||this.createError({params:{unknown:s.join(", ")}})}});return s.spec.noUnknown=e,s}unknown(e=!0,t=rc.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const s={};for(const r of Object.keys(t))s[e(r)]=t[r];return s})}camelCase(){return this.transformKeys(Fo)}snakeCase(){return this.transformKeys(Po)}constantCase(){return this.transformKeys(e=>Po(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),s=super.describe(e);s.fields={};for(const[a,n]of Object.entries(t.fields)){var r;let t=e;null!=(r=t)&&r.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[a]})),s.fields[a]=n.describe(t)}return s}}Bc.prototype=Vc.prototype;const zc=({isEditing:e=!1})=>{const{id:s}=c(),r=l(),a=zt(),{user:n}=_s(),[i,o]=t.useState(!1),[d,u]=t.useState(null),[m,h]=t.useState(!1),{data:p,isLoading:x}=Ht(["lookupTables"],ar,{staleTime:3e5,onError:e=>{u(`룩업 테이블 조회에 실패했습니다: ${e.message}`)}}),f=(null==p?void 0:p.propertyTypes)||[],g=(null==p?void 0:p.propertyStatuses)||[],y=(null==p?void 0:p.transactionTypes)||[],{data:b,isLoading:v}=Ht(["property",s],async()=>{if(!s)return null;const{data:e,error:t}=await hs.from("properties").select("*").eq("id",s).single();if(t)throw t;return e},{enabled:e&&!!s,onError:e=>{u(`매물 정보를 불러오는데 실패했습니다: ${e.message}`)}}),j=Gt(async t=>{const r=(e=>{const t={...e};return["price","lease_price","supply_area_sqm","private_area_sqm","supply_area_pyeong","private_area_pyeong","maintenance_fee"].forEach(e=>{if(""===t[e]||void 0===t[e])t[e]=null;else if(null!==t[e]){const s=parseFloat(t[e]);t[e]=isNaN(s)?null:s}}),["move_in_date","available_date"].forEach(e=>{""!==t[e]&&void 0!==t[e]||(t[e]=null)}),t})(t),a={property_name:r.property_name,location:r.location,building_name:r.dong||"",room_number:r.ho||"",property_type:r.property_type_id,transaction_type:r.transaction_type_id,property_status:r.property_status_id,price:r.price,lease_price:r.lease_price,area_m2:r.supply_area_sqm,area_pyeong:r.supply_area_sqm?Math.round(.3025*r.supply_area_sqm*10)/10:null,floor_current:r.floor_current,floor_total:r.floor_total,room_count:r.rooms,bath_count:r.bathrooms,monthly_fee:r.maintenance_fee,description:r.special_notes,special_notes:r.manager_memo,available_date:r.move_in_date||null,customer_name:r.customer_name,customer_phone:r.customer_phone,customer_request:r.customer_notes,owner_name:r.owner||"",owner_phone:r.owner_contact||""};if(e){const{data:e,error:t}=await hs.from("properties").update(a).eq("id",s).select();if(t)throw t;return e}{const{data:e,error:t}=await hs.from("properties").insert([{...a,manager_id:n.id}]).select();if(t)throw t;return e}},{onSuccess:()=>{a.invalidateQueries(["properties"]),a.invalidateQueries(["property",s]),h(!0),setTimeout(()=>{r("/properties")},2e3)},onError:t=>{u(`매물 ${e?"수정":"등록"}에 실패했습니다: ${t.message}`)},onSettled:()=>{o(!1)}}),w=(()=>{if(null==b?void 0:b.resident)try{return JSON.parse(b.resident)}catch(Ed){return{}}return{}})(),N=co({initialValues:{property_type_id:(null==b?void 0:b.property_type_id)||"",property_status_id:(null==b?void 0:b.property_status_id)||"",transaction_type_id:(null==b?void 0:b.transaction_type_id)||"",property_name:(null==b?void 0:b.property_name)||"",location:(null==b?void 0:b.location)||"",dong:(null==b?void 0:b.dong)||"",ho:(null==b?void 0:b.ho)||"",lease_price:(null==b?void 0:b.lease_price)||"",price:(null==b?void 0:b.price)||"",supply_area_sqm:(null==b?void 0:b.supply_area_sqm)||"",private_area_sqm:(null==b?void 0:b.private_area_sqm)||"",floor_info:(null==b?void 0:b.floor_info)||"",rooms_bathrooms:(null==b?void 0:b.rooms_bathrooms)||"",direction:(null==b?void 0:b.direction)||"",maintenance_fee:(null==b?void 0:b.maintenance_fee)||"",parking:(null==b?void 0:b.parking)||"",move_in_date:(null==b?void 0:b.move_in_date)||"",approval_date:(null==b?void 0:b.approval_date)||"",special_notes:(null==b?void 0:b.special_notes)||"",manager_memo:(null==b?void 0:b.manager_memo)||"",customer_name:w.name||"",customer_phone:w.phone||"",customer_email:w.email||"",customer_address:w.address||"",customer_notes:w.notes||""},validationSchema:Bc({property_name:Oc().required("매물명은 필수 입력사항입니다"),location:Oc().required("소재지는 필수 입력사항입니다"),property_type_id:Oc().required("매물종류는 필수 선택사항입니다"),property_status_id:Oc().required("진행상태는 필수 선택사항입니다"),transaction_type_id:Oc().required("거래유형은 필수 선택사항입니다"),supply_area_sqm:Ac().positive("유효한 면적을 입력하세요"),private_area_sqm:Ac().positive("유효한 면적을 입력하세요"),customer_name:Oc().required("고객 이름은 필수 입력사항입니다"),customer_phone:Oc().matches(/^010\d{8}$/,"올바른 전화번호 형식을 입력하세요 (예: 01012345678)").required("고객 전화번호는 필수 입력사항입니다"),customer_email:Oc().email("올바른 이메일 형식을 입력하세요")}),onSubmit:async e=>{o(!0),u(null),j.mutate(e)},enableReinitialize:!0}),_=e=>e?(.3025*e).toFixed(2):"",k=e=>{const t=y.find(t=>t.id===e);return t?t.name:""};return e&&v||x?Ue.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-2 text-gray-600",children:e?"매물 정보를 불러오는 중...":"시스템 데이터를 불러오는 중..."})]}):Ue.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-4 sm:p-6 lg:p-8 border border-slate-200",children:[Ue.jsxs("div",{className:"mb-6 sm:mb-8",children:[Ue.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900 mb-2",children:e?"매물 정보 수정":"새 매물 등록"}),Ue.jsx("p",{className:"text-sm sm:text-base text-slate-600",children:e?"매물 정보를 수정하세요":"새로운 매물을 등록해주세요"})]}),d&&Ue.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-400 rounded-xl text-red-700 shadow-sm",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("svg",{className:"w-5 h-5 mr-3 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:Ue.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),Ue.jsx("span",{className:"font-medium",children:d})]})}),m&&Ue.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-400 rounded-xl text-green-700 shadow-sm",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("svg",{className:"w-5 h-5 mr-3 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:Ue.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),Ue.jsxs("span",{className:"font-medium",children:["매물이 성공적으로 ",e?"수정":"등록","되었습니다! 매물 목록으로 이동합니다..."]})]})}),Ue.jsx("form",{onSubmit:N.handleSubmit,children:Ue.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:gap-8 mb-6 sm:mb-8",children:[Ue.jsxs("div",{children:[Ue.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-900 mb-3 sm:mb-4 pb-2 border-b border-slate-200",children:"기본 정보"}),Ue.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["매물명 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsx("input",{type:"text",name:"property_name",value:N.values.property_name,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 래미안 아파트 106동"}),N.touched.property_name&&N.errors.property_name&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.property_name})]}),Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["소재지 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsx("input",{type:"text",name:"location",value:N.values.location,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 서울시 강남구 삼성동"}),N.touched.location&&N.errors.location&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.location})]}),Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["매물종류 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsxs("select",{name:"property_type_id",value:N.values.property_type_id,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",children:[Ue.jsx("option",{value:"",children:"매물종류 선택"}),f.map(e=>Ue.jsx("option",{value:e.id,children:e.name},e.id))]}),N.touched.property_type_id&&N.errors.property_type_id&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.property_type_id})]}),Ue.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"동"}),Ue.jsx("input",{type:"text",name:"dong",value:N.values.dong,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 106동"})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"호"}),Ue.jsx("input",{type:"text",name:"ho",value:N.values.ho,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 1503호"})]})]})]})]}),Ue.jsxs("div",{className:"md:col-span-2",children:[Ue.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 pb-2 border-b border-gray-100",children:"거래 정보"}),Ue.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["진행상태 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsxs("select",{name:"property_status_id",value:N.values.property_status_id,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",children:[Ue.jsx("option",{value:"",children:"진행상태 선택"}),g.map(e=>Ue.jsx("option",{value:e.id,children:e.name},e.id))]}),N.touched.property_status_id&&N.errors.property_status_id&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.property_status_id})]}),Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["거래유형 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsxs("select",{name:"transaction_type_id",value:N.values.transaction_type_id,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",children:[Ue.jsx("option",{value:"",children:"거래유형 선택"}),y.map(e=>Ue.jsx("option",{value:e.id,children:e.name},e.id))]}),N.touched.transaction_type_id&&N.errors.transaction_type_id&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.transaction_type_id})]}),Ue.jsxs("div",{className:"space-y-4",children:[Ue.jsx("h4",{className:"text-sm font-medium text-gray-800",children:"가격 정보"}),"매매"===k(N.values.transaction_type_id)&&Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["매매가 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsxs("div",{className:"relative",children:[Ue.jsx("input",{type:"number",name:"price",value:N.values.price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 2500000000"}),Ue.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원"})]}),N.touched.price&&N.errors.price&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.price})]}),"분양"===k(N.values.transaction_type_id)&&Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["분양가 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsxs("div",{className:"relative",children:[Ue.jsx("input",{type:"number",name:"price",value:N.values.price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 3000000000"}),Ue.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원"})]}),N.touched.price&&N.errors.price&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.price})]}),"전세"===k(N.values.transaction_type_id)&&Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["전세 보증금 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsxs("div",{className:"relative",children:[Ue.jsx("input",{type:"number",name:"lease_price",value:N.values.lease_price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 200000000"}),Ue.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원"})]}),N.touched.lease_price&&N.errors.lease_price&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.lease_price})]}),("월세"===k(N.values.transaction_type_id)||"월세/렌트"===k(N.values.transaction_type_id))&&Ue.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["보증금 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsxs("div",{className:"relative",children:[Ue.jsx("input",{type:"number",name:"lease_price",value:N.values.lease_price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 50000000"}),Ue.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원"})]}),N.touched.lease_price&&N.errors.lease_price&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.lease_price})]}),Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["월세 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsxs("div",{className:"relative",children:[Ue.jsx("input",{type:"number",name:"price",value:N.values.price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 500000"}),Ue.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원"})]}),N.touched.price&&N.errors.price&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.price})]})]}),("단기"===k(N.values.transaction_type_id)||"단기임대"===k(N.values.transaction_type_id))&&Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["일일요금 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsxs("div",{className:"relative",children:[Ue.jsx("input",{type:"number",name:"price",value:N.values.price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 150000"}),Ue.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원/일"})]}),N.touched.price&&N.errors.price&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.price})]}),!k(N.values.transaction_type_id)&&Ue.jsx("div",{className:"text-sm text-gray-500 bg-gray-50 p-3 rounded-md",children:"거래유형을 먼저 선택하시면 해당 유형에 맞는 가격 입력 필드가 나타납니다."})]})]})]}),Ue.jsxs("div",{className:"md:col-span-2",children:[Ue.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 pb-2 border-b border-gray-100",children:"물건 정보"}),Ue.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ue.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"공급면적(㎡)"}),Ue.jsx("input",{type:"number",name:"supply_area_sqm",value:N.values.supply_area_sqm,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 84.56"}),Ue.jsx("div",{className:"text-sm text-gray-500 mt-1",children:N.values.supply_area_sqm?`${_(N.values.supply_area_sqm)}평`:""}),N.touched.supply_area_sqm&&N.errors.supply_area_sqm&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.supply_area_sqm})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"전용면적(㎡)"}),Ue.jsx("input",{type:"number",name:"private_area_sqm",value:N.values.private_area_sqm,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 59.82"}),Ue.jsx("div",{className:"text-sm text-gray-500 mt-1",children:N.values.private_area_sqm?`${_(N.values.private_area_sqm)}평`:""}),N.touched.private_area_sqm&&N.errors.private_area_sqm&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.private_area_sqm})]})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"층/총층"}),Ue.jsx("input",{type:"text",name:"floor_info",value:N.values.floor_info,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 15층/25층"})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"방/욕실"}),Ue.jsx("input",{type:"text",name:"rooms_bathrooms",value:N.values.rooms_bathrooms,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 3개/2개"})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"방향"}),Ue.jsx("input",{type:"text",name:"direction",value:N.values.direction,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 남향"})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"관리비"}),Ue.jsx("input",{type:"text",name:"maintenance_fee",value:N.values.maintenance_fee,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 15만원"})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"주차"}),Ue.jsx("input",{type:"text",name:"parking",value:N.values.parking,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 2대"})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"입주가능일"}),Ue.jsx("input",{type:"text",name:"move_in_date",value:N.values.move_in_date,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 즉시입주"})]}),As(null==n?void 0:n.email)&&Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"사용승인일"}),Ue.jsx("input",{type:"text",name:"approval_date",value:N.values.approval_date,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 2022.05.20"})]})]})]}),Ue.jsxs("div",{className:"md:col-span-2",children:[Ue.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 pb-2 border-b border-gray-100",children:"추가 정보"}),Ue.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"특이사항"}),Ue.jsx("textarea",{name:"special_notes",value:N.values.special_notes,onChange:N.handleChange,rows:"3",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"매물의 특이사항을 입력하세요"})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"담당자 메모"}),Ue.jsx("textarea",{name:"manager_memo",value:N.values.manager_memo,onChange:N.handleChange,rows:"3",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"담당자만 볼 수 있는 내부 메모"})]})]})]}),Ue.jsxs("div",{className:"md:col-span-2",children:[Ue.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 pb-2 border-b border-gray-100",children:"고객 정보"}),Ue.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["고객 이름 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsx("input",{type:"text",name:"customer_name",value:N.values.customer_name,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"고객 이름을 입력하세요"}),N.touched.customer_name&&N.errors.customer_name&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.customer_name})]}),Ue.jsxs("div",{children:[Ue.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["전화번호 ",Ue.jsx("span",{className:"text-primary",children:"*"})]}),Ue.jsx("input",{type:"tel",name:"customer_phone",value:N.values.customer_phone,onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");N.setFieldValue("customer_phone",t)},onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"01012345678",maxLength:"11",inputMode:"numeric"}),N.touched.customer_phone&&N.errors.customer_phone&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.customer_phone}),Ue.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"숫자만 입력하세요 (하이픈 없이)"})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"이메일"}),Ue.jsx("input",{type:"email",name:"customer_email",value:N.values.customer_email,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"customer@example.com"}),N.touched.customer_email&&N.errors.customer_email&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.customer_email})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"주소"}),Ue.jsx("input",{type:"text",name:"customer_address",value:N.values.customer_address,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"고객 주소를 입력하세요"})]}),Ue.jsxs("div",{className:"md:col-span-2",children:[Ue.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"고객 메모"}),Ue.jsx("textarea",{name:"customer_notes",value:N.values.customer_notes,onChange:N.handleChange,rows:"3",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"고객 관련 메모사항을 입력하세요"})]})]})]}),Ue.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-4 mt-8",children:[Ue.jsx("button",{type:"button",onClick:()=>r("/properties"),disabled:i,className:"px-6 py-3 border border-primary text-primary bg-white hover:bg-pink-50 focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 transition-all duration-200 font-medium shadow-sm hover:shadow-md",children:"취소"}),Ue.jsx("button",{type:"submit",disabled:i,className:"px-8 py-3 bg-primary text-white rounded-xl hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-primary disabled:opacity-50 transition-all duration-200 font-medium shadow-md hover:shadow-lg transform hover:scale-105",children:i?Ue.jsxs("span",{className:"flex items-center",children:[Ue.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Ue.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Ue.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"처리 중..."]}):e?"수정 완료":"등록 완료"})]})]})})]})},Qc=()=>{const{id:e}=c(),t=!!e;return Ue.jsxs("div",{children:[Ue.jsx("div",{className:"bg-pink-500 text-white p-4 rounded-lg mb-6",children:Ue.jsx("h1",{className:"text-2xl font-bold",children:t?"매물 정보 수정":"새 매물 등록"})}),Ue.jsx(zc,{isEditing:t})]})},Kc=async e=>{try{const{data:t,error:s}=await hs.from("properties").select("property_status_id, transaction_type_id, price, lease_price, monthly_rent").eq("manager_id",e);if(s)throw s;const r=t.length,a=t.filter(e=>"available"===e.property_status_id).length,n=t.filter(e=>"completed"===e.property_status_id).length;return{totalProperties:r,activeProperties:a,completedProperties:n,totalValue:t.reduce((e,t)=>e+(t.price||t.lease_price||t.monthly_rent||0),0),successRate:r>0?(n/r*100).toFixed(1):0}}catch(t){return{totalProperties:0,activeProperties:0,completedProperties:0,totalValue:0,successRate:0}}},Wc=async()=>{try{const{data:e,error:t}=await hs.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return{data:e||[],error:null}}catch(e){return{data:[],error:e.message}}},Gc=async e=>{try{const{data:t,error:s}=await hs.from("users").select("*").eq("id",e).single();if(s)throw s;const r=await Kc(e);return{data:{...t,stats:r},error:null}}catch(t){return{data:null,error:t.message}}},Yc=async e=>{try{const{data:t,error:s}=await hs.auth.signUp({email:e.email,password:e.password});if(s)throw s;const{data:r,error:a}=await hs.from("users").insert([{...e,id:t.user.id,password:void 0}]).select().single();if(a)throw a;return{data:r,error:null}}catch(t){return{data:null,error:t.message}}},Hc=async(e,t)=>{try{const{data:s,error:r}=await hs.from("users").update(t).eq("id",e).select().single();if(r)throw r;return{data:s,error:null}}catch(s){return{data:null,error:s.message}}},Jc=async(e,t)=>{try{const{error:s}=await hs.auth.admin.updateUserById(e,{password:t});if(s)throw s;return{error:null}}catch(s){return{error:s.message}}},Xc=({type:e="text",label:t,name:s,value:r,onChange:a,placeholder:n,error:i,required:l=!1,className:o="",...c})=>Ue.jsxs("div",{className:"mb-4",children:[t&&Ue.jsxs("label",{htmlFor:s,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,l&&Ue.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),Ue.jsx("input",{type:e,id:s,name:s,value:r,onChange:a,placeholder:n,className:`\n          w-full px-3 py-2 border rounded-md\n          ${i?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-pink-500 focus:border-pink-500"}\n          focus:outline-none focus:ring-2 focus:ring-opacity-50\n          disabled:bg-gray-100 disabled:cursor-not-allowed\n          ${o}\n        `,...c}),i&&Ue.jsx("p",{className:"mt-1 text-sm text-red-500",children:i})]}),Zc=()=>{const{user:e}=_s(),s=zt(),[r,a]=t.useState("list"),[n,i]=t.useState(!1),[l,c]=t.useState(null),[d,u]=t.useState(null),[m,h]=t.useState(null),[p,x]=t.useState({email:"",name:"",phone:"",role:"user"}),f=As(null==e?void 0:e.email),{data:g=[],isLoading:y}=Ht("users",async()=>{const{data:e,error:t}=await Wc();if(t)throw t;return e},{enabled:!!f}),b=Gt(async e=>{const{data:t,error:s}=await Yc(e);if(s)throw new Error(s);return t},{onSuccess:()=>{s.invalidateQueries("users"),N(),h("사용자가 성공적으로 추가되었습니다."),setTimeout(()=>h(null),5e3)},onError:e=>{u(`사용자 추가 중 오류가 발생했습니다: ${e.message}`)}}),v=Gt(async({id:e,...t})=>{const{data:s,error:r}=await Hc(e,t);if(r)throw new Error(r);return s},{onSuccess:()=>{s.invalidateQueries("users"),N(),h("사용자 정보가 성공적으로 업데이트되었습니다."),setTimeout(()=>h(null),3e3)},onError:e=>{u(`사용자 수정 중 오류가 발생했습니다: ${e.message}`)}}),j=Gt(async({id:e,status:t})=>{const{error:s}=await Hc(e,{status:t});if(s)throw new Error(s);return!0},{onSuccess:()=>{s.invalidateQueries("users"),h("사용자 상태가 변경되었습니다."),setTimeout(()=>h(null),3e3)},onError:e=>{u(`사용자 상태 변경 중 오류가 발생했습니다: ${e.message}`)}}),w=e=>{const{name:t,value:s}=e.target;x({...p,[t]:s})},N=()=>{x({email:"",name:"",phone:"",role:"user"}),i(!1),c(null),u(null)},k=e=>{x({email:e.email||"",name:e.name||"",phone:e.phone||"",role:e.role||"user"}),c(e.id),i(!0)},S=async e=>{const t="admin"===e.role?"user":"admin",r=`${e.name}님의 권한을 ${"admin"===t?"관리자":"일반"}로 변경하시겠습니까?`;if(window.confirm(r))try{const{error:r}=await Hc(e.id,{role:t});if(r)throw new Error(r);h(`${e.name}님의 권한이 변경되었습니다.`),s.invalidateQueries("users"),setTimeout(()=>h(null),3e3)}catch(a){u(`권한 변경 실패: ${a.message}`),setTimeout(()=>u(null),5e3)}},E=t=>{if(t.id===(null==e?void 0:e.id))return void u("자신의 계정 상태는 변경할 수 없습니다.");const s="active"===t.status?"inactive":"active";window.confirm(`${t.name} 사용자의 상태를 ${"inactive"===s?"비활성화":"활성화"} 하시겠습니까?`)&&j.mutate({id:t.id,status:s})},C=async e=>{if(window.confirm(`${e.name}님의 비밀번호를 재설정하시겠습니까?\n새로운 임시 비밀번호가 해당 이메일로 전송됩니다.`))try{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%";let s="";for(let e=0;e<12;e++)s+=t.charAt(Math.floor(Math.random()*t.length));const{error:r}=await Jc(e.id,s);if(r)throw new Error(r);h(`${e.name}님의 비밀번호가 재설정되었습니다.\n임시 비밀번호: ${s}\n\n이 정보를 안전하게 전달해주세요.`),navigator.clipboard.writeText(`${e.email}의 임시 비밀번호: ${s}`),setTimeout(()=>h(null),1e4)}catch(t){u(`비밀번호 재설정 실패: ${t.message}`),setTimeout(()=>u(null),5e3)}},{data:O=[]}=Ht(["properties-count"],async()=>{const{data:e,error:t}=await cr({},{isAdmin:!0});if(t)throw t;return e||[]}),T=e=>O.filter(t=>t.manager_id===e||t.manager_id===e).length;return f?Ue.jsxs("div",{className:"space-y-6",children:[Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center",children:[Ue.jsx(H,{className:"w-8 h-8 mr-2 text-pink-600"}),"직원 관리"]}),Ue.jsx("div",{className:"border-b border-gray-200 mb-6",children:Ue.jsxs("nav",{className:"-mb-px flex space-x-8",children:[Ue.jsxs("button",{onClick:()=>a("list"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("list"===r?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[Ue.jsx(ae,{className:"w-4 h-4 inline-block mr-2"}),"직원 목록"]}),Ue.jsxs("button",{onClick:()=>a("performance"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("performance"===r?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[Ue.jsx(ne,{className:"w-4 h-4 inline-block mr-2"}),"직원별 성과"]})]})}),d&&Ue.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-md flex items-center",children:[Ue.jsx(G,{className:"w-5 h-5 mr-2"}),d]}),m&&Ue.jsxs("div",{className:"mb-4 p-3 bg-green-50 text-green-700 rounded-md flex items-center",children:[Ue.jsx(_,{className:"w-5 h-5 mr-2"}),m]})]}),"list"===r?Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n?Ue.jsxs("form",{onSubmit:e=>{e.preventDefault(),p.email||l?p.name?l?v.mutate({id:l,...p}):b.mutate(p):u("이름은 필수 입력사항입니다."):u("이메일은 필수 입력사항입니다.")},className:"mb-6 p-4 border rounded-md bg-gray-50",children:[Ue.jsx("h3",{className:"text-lg font-medium mb-4",children:l?"사용자 정보 수정":"새 사용자 추가"}),Ue.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[Ue.jsx(Xc,{label:"이메일",name:"email",type:"email",value:p.email,onChange:w,required:!l,placeholder:"예: user@example.com",disabled:!!l}),Ue.jsx(Xc,{label:"이름",name:"name",value:p.name,onChange:w,required:!0,placeholder:"예: 홍길동"}),Ue.jsx(Xc,{label:"연락처",name:"phone",value:p.phone,onChange:w,placeholder:"예: 010-1234-5678"}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"권한"}),Ue.jsxs("select",{name:"role",value:p.role,onChange:w,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-pink-500 focus:border-pink-500 sm:text-sm",children:[Ue.jsx("option",{value:"user",children:"일반 사용자"}),Ue.jsx("option",{value:"admin",children:"관리자"})]})]})]}),Ue.jsxs("div",{className:"flex justify-end space-x-2",children:[Ue.jsxs(ba,{type:"button",variant:"secondary",onClick:N,children:[Ue.jsx(te,{className:"w-4 h-4 mr-1"}),"취소"]}),Ue.jsxs(ba,{type:"submit",variant:"primary",disabled:b.isLoading||v.isLoading,children:[Ue.jsx(Y,{className:"w-4 h-4 mr-1"}),l?"수정":"추가"]})]})]}):Ue.jsx("div",{className:"mb-4",children:Ue.jsxs(ba,{onClick:()=>i(!0),variant:"primary",children:[Ue.jsx(ie,{className:"w-4 h-4 mr-2"}),"새 사용자 추가"]})}),Ue.jsx("h3",{className:"text-lg font-medium mb-2",children:"사용자 목록"}),y?Ue.jsxs("div",{className:"text-gray-500 flex justify-center p-4",children:[Ue.jsx("div",{className:"w-6 h-6 border-2 border-t-pink-600 border-pink-200 rounded-full animate-spin mr-2"}),"로딩 중..."]}):g&&0!==g.length?Ue.jsxs(Ue.Fragment,{children:[Ue.jsx("div",{className:"block sm:hidden space-y-3 mb-4",children:g.map(e=>Ue.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[Ue.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Ue.jsxs("div",{children:[Ue.jsx("h4",{className:"font-semibold text-gray-900",children:e.name||"-"}),Ue.jsx("p",{className:"text-sm text-gray-600",children:e.email})]}),Ue.jsxs("div",{className:"flex items-center space-x-2",children:[Ue.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("admin"===e.role?"bg-purple-100 text-purple-800":"bg-pink-100 text-pink-800"),children:"admin"===e.role?"관리자":"일반"}),Ue.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"active"===e.status?"활성":"비활성"})]})]}),Ue.jsxs("div",{className:"space-y-1 text-sm text-gray-600 mb-3",children:[Ue.jsxs("div",{className:"flex justify-between",children:[Ue.jsx("span",{children:"연락처:"}),Ue.jsx("span",{className:"font-medium text-gray-900",children:e.phone||"-"})]}),Ue.jsxs("div",{className:"flex justify-between",children:[Ue.jsx("span",{children:"담당 매물:"}),Ue.jsxs("span",{className:"font-medium text-gray-900",children:[T(e.id),"건"]})]}),Ue.jsxs("div",{className:"flex justify-between",children:[Ue.jsx("span",{children:"최근 로그인:"}),Ue.jsx("span",{className:"font-medium text-gray-900",children:e.last_login?new Date(e.last_login).toLocaleDateString():"-"})]})]}),Ue.jsxs("div",{className:"flex justify-end space-x-2 pt-3 border-t border-gray-100",children:[Ue.jsx("button",{onClick:()=>S(e),className:"text-xs text-gray-600 hover:text-gray-800 underline",children:"권한변경"}),Ue.jsx("button",{onClick:()=>k(e),className:"text-xs text-pink-600 hover:text-pink-800",children:"수정"}),Ue.jsx("button",{onClick:()=>C(e),className:"text-xs text-yellow-600 hover:text-yellow-800",children:"비밀번호"}),Ue.jsx("button",{onClick:()=>E(e),className:"text-xs "+("active"===e.status?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800"),disabled:e.id===(null==e?void 0:e.id),children:"active"===e.status?"비활성화":"활성화"})]})]},e.id))}),Ue.jsx("div",{className:"hidden sm:block overflow-x-auto",children:Ue.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ue.jsx("thead",{className:"bg-gray-50",children:Ue.jsxs("tr",{children:[Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"이름"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"이메일"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"연락처"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"권한"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"담당 매물"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"최근 로그인"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),Ue.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(e=>Ue.jsxs("tr",{className:"hover:bg-gray-50 "+("inactive"===e.status?"bg-gray-50 text-gray-400":""),children:[Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:e.name||"-"}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:e.email}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:e.phone||"-"}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Ue.jsxs("div",{className:"flex items-center space-x-2",children:[Ue.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("admin"===e.role?"bg-purple-100 text-purple-800":"bg-pink-100 text-pink-800"),children:"admin"===e.role?"관리자":"일반"}),Ue.jsx("button",{onClick:()=>S(e),className:"text-xs text-gray-600 hover:text-gray-800 underline",title:"권한 변경",children:"변경"})]})}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Ue.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"active"===e.status?"활성":"비활성"})}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx(le,{className:"w-4 h-4 mr-1 text-gray-400"}),Ue.jsxs("span",{children:[T(e.id),"건"]})]})}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:e.last_login?new Date(e.last_login).toLocaleDateString():"-"}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Ue.jsxs("div",{className:"flex space-x-2",children:[Ue.jsx(o,{to:`/performance/${e.id}`,className:"text-purple-600 hover:text-purple-800",title:"성과 보기",children:Ue.jsx(oe,{className:"w-4 h-4"})}),Ue.jsx("button",{onClick:()=>k(e),className:"text-pink-600 hover:text-pink-800",title:"수정",children:Ue.jsx(V,{className:"w-4 h-4"})}),Ue.jsx("button",{onClick:()=>C(e),className:"text-yellow-600 hover:text-yellow-800",title:"비밀번호 재설정",children:Ue.jsx(ce,{className:"w-4 h-4"})}),Ue.jsx("button",{onClick:()=>E(e),className:"active"===e.status?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800",title:"active"===e.status?"비활성화":"활성화",disabled:e.id===(null==e?void 0:e.id),children:"active"===e.status?Ue.jsx(de,{className:"w-4 h-4"}):Ue.jsx(_,{className:"w-4 h-4"})})]})})]},e.id))})]})})]}):Ue.jsx("div",{className:"text-gray-500 p-4 border rounded-md text-center",children:"등록된 사용자가 없습니다."})]}):Ue.jsx(ed,{})]}):Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsx("h2",{className:"text-xl font-semibold mb-4",children:"사용자 관리"}),Ue.jsx("div",{className:"bg-yellow-50 p-4 rounded-md text-yellow-800",children:"관리자 권한이 필요합니다. 관리자에게 문의하세요."})]})},ed=()=>{const{data:e=[]}=Ht("users",async()=>{const{data:e,error:t}=await Wc();if(t)throw t;return e}),{data:t=[]}=Ht("all-properties",async()=>{const{data:e,error:t}=await cr({},{isAdmin:!0});if(t)throw t;return e||[]}),{data:s={}}=Ht("lookupTables",async()=>await or(),{staleTime:3e5});return Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsx("h3",{className:"text-lg font-semibold mb-6",children:"직원별 성과 현황"}),Ue.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{const r=(e=>{const r=t.filter(t=>t.manager_id===e),a={totalProperties:r.length,completedDeals:0,activeDeals:0,monthlyDeals:0};return r.forEach(e=>{var t;const r=null==(t=s.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);"거래완료"===(null==r?void 0:r.name)?a.completedDeals++:"거래가능"===(null==r?void 0:r.name)&&a.activeDeals++;const n=new Date(e.created_at),i=new Date;n.getMonth()===i.getMonth()&&n.getFullYear()===i.getFullYear()&&a.monthlyDeals++}),a})(e.id),a=r.totalProperties>0?Math.round(r.completedDeals/r.totalProperties*100):0;return Ue.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[Ue.jsxs("div",{className:"flex justify-between items-start mb-4",children:[Ue.jsxs("div",{children:[Ue.jsx("h4",{className:"font-semibold text-lg",children:e.name}),Ue.jsx("p",{className:"text-sm text-gray-600",children:e.email})]}),Ue.jsx(o,{to:`/performance/${e.id}`,className:"text-pink-600 hover:text-pink-800",title:"상세 성과 보기",children:Ue.jsx(oe,{className:"w-5 h-5"})})]}),Ue.jsxs("div",{className:"space-y-2",children:[Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-sm text-gray-600",children:"총 매물"}),Ue.jsxs("span",{className:"font-semibold",children:[r.totalProperties,"건"]})]}),Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-sm text-gray-600",children:"거래완료"}),Ue.jsxs("span",{className:"font-semibold text-green-600",children:[r.completedDeals,"건"]})]}),Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-sm text-gray-600",children:"진행중"}),Ue.jsxs("span",{className:"font-semibold text-pink-600",children:[r.activeDeals,"건"]})]}),Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-sm text-gray-600",children:"이번달 등록"}),Ue.jsxs("span",{className:"font-semibold",children:[r.monthlyDeals,"건"]})]})]}),Ue.jsx("div",{className:"mt-4 pt-4 border-t",children:Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-sm font-medium text-gray-700",children:"성과율"}),Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-2",children:Ue.jsx("div",{className:"bg-pink-600 h-2 rounded-full",style:{width:`${a}%`}})}),Ue.jsxs("span",{className:"text-sm font-semibold",children:[a,"%"]})]})]})})]},e.id)})})]})},td=()=>{const{userId:e}=c(),s=l(),{user:r}=_s(),[a,n]=t.useState("month");if(!Js(r))return Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsx("h2",{className:"text-xl font-semibold mb-4",children:"접근 권한 없음"}),Ue.jsx("div",{className:"bg-yellow-50 p-4 rounded-md text-yellow-800",children:"관리자 권한이 필요합니다. 관리자에게 문의하세요."})]});const{data:i,isLoading:d}=Ht(["user",e],async()=>{const{data:t,error:s}=await Gc(e);if(s)throw new Error(s);return t}),{data:u=[],isLoading:m}=Ht(["staff-properties",e],async()=>{const{data:t,error:s}=await cr();if(s)throw new Error(s);return t.filter(t=>{const s=t.manager_id;return s===e||s===`hardcoded-${null==i?void 0:i.email}`||(null==i?void 0:i.email)&&(null==s?void 0:s.includes(i.email))})},{enabled:!!i}),{data:h={}}=Ht("lookupTables",async()=>await or()),p=(()=>{const e=new Date,t=e.getFullYear(),s=e.getMonth(),r=Math.floor(s/3),n=u.filter(e=>{const n=new Date(e.created_at),i=n.getFullYear(),l=n.getMonth(),o=Math.floor(l/3);switch(a){case"month":return i===t&&l===s;case"quarter":return i===t&&o===r;case"year":return i===t;default:return!0}}),i={total:n.length,available:0,completed:0,pending:0},l={sale:0,lease:0,rent:0},o={};return n.forEach(e=>{var t,s,r;const a=null==(t=h.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);"거래가능"===(null==a?void 0:a.name)?i.available++:"거래완료"===(null==a?void 0:a.name)?i.completed++:"거래보류"===(null==a?void 0:a.name)&&i.pending++;const n=null==(s=h.transactionTypes)?void 0:s.find(t=>t.id===e.transaction_type_id);"매매"===(null==n?void 0:n.name)?l.sale++:"전세"===(null==n?void 0:n.name)?l.lease++:"월세"===(null==n?void 0:n.name)&&l.rent++;const c=null==(r=h.propertyTypes)?void 0:r.find(t=>t.id===e.property_type_id);(null==c?void 0:c.name)&&(o[c.name]=(o[c.name]||0)+1)}),{statusStats:i,transactionStats:l,propertyTypeStats:o,filteredProperties:n}})();return d||m?Ue.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-2 text-gray-600",children:"성과 데이터를 불러오는 중..."})]}):i?Ue.jsxs("div",{className:"space-y-6",children:[Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("div",{className:"flex justify-between items-start mb-6",children:[Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("button",{onClick:()=>s("/users"),className:"mr-4 p-2 hover:bg-gray-100 rounded-full",children:Ue.jsx(re,{className:"w-5 h-5"})}),Ue.jsxs("div",{children:[Ue.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[Ue.jsx(H,{className:"w-8 h-8 mr-2 text-blue-600"}),i.name," 님의 성과"]}),Ue.jsx("p",{className:"text-gray-600 mt-1",children:i.email})]})]}),Ue.jsxs("div",{className:"flex items-center space-x-2",children:[Ue.jsx("label",{className:"text-sm font-medium text-gray-700",children:"기간:"}),Ue.jsxs("select",{value:a,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ue.jsx("option",{value:"month",children:"이번 달"}),Ue.jsx("option",{value:"quarter",children:"이번 분기"}),Ue.jsx("option",{value:"year",children:"올해"}),Ue.jsx("option",{value:"all",children:"전체"})]})]})]}),Ue.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ue.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-blue-600",children:"총 매물"}),Ue.jsx("p",{className:"text-2xl font-bold text-blue-900",children:p.statusStats.total})]}),Ue.jsx(j,{className:"w-8 h-8 text-blue-400"})]})}),Ue.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-green-600",children:"거래완료"}),Ue.jsx("p",{className:"text-2xl font-bold text-green-900",children:p.statusStats.completed})]}),Ue.jsx(_,{className:"w-8 h-8 text-green-400"})]})}),Ue.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"진행중"}),Ue.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:p.statusStats.available})]}),Ue.jsx(ue,{className:"w-8 h-8 text-yellow-400"})]})}),Ue.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-purple-600",children:"성과율"}),Ue.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[p.statusStats.total>0?Math.round(p.statusStats.completed/p.statusStats.total*100):0,"%"]})]}),Ue.jsx(ne,{className:"w-8 h-8 text-purple-400"})]})})]})]}),Ue.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ue.jsx(oe,{className:"w-5 h-5 mr-2 text-blue-600"}),"거래 유형별 분석"]}),Ue.jsxs("div",{className:"space-y-3",children:[Ue.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Ue.jsx("span",{className:"font-medium",children:"매매"}),Ue.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[p.transactionStats.sale,"건"]})]}),Ue.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Ue.jsx("span",{className:"font-medium",children:"전세"}),Ue.jsxs("span",{className:"text-lg font-bold text-green-600",children:[p.transactionStats.lease,"건"]})]}),Ue.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Ue.jsx("span",{className:"font-medium",children:"월세"}),Ue.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[p.transactionStats.rent,"건"]})]})]})]}),Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ue.jsx(j,{className:"w-5 h-5 mr-2 text-blue-600"}),"매물 종류별 분석"]}),Ue.jsx("div",{className:"space-y-3",children:Object.entries(p.propertyTypeStats).map(([e,t])=>Ue.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Ue.jsx("span",{className:"font-medium",children:e}),Ue.jsxs("span",{className:"text-lg font-bold",children:[t,"건"]})]},e))})]})]}),Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ue.jsx(w,{className:"w-5 h-5 mr-2 text-blue-600"}),"최근 담당 매물"]}),Ue.jsx("div",{className:"overflow-x-auto",children:Ue.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ue.jsx("thead",{className:"bg-gray-50",children:Ue.jsxs("tr",{children:[Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"매물명"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"위치"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"거래유형"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등록일"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),Ue.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.filteredProperties.slice(0,10).map(e=>{var t,s;const r=null==(t=h.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id),a=null==(s=h.transactionTypes)?void 0:s.find(t=>t.id===e.transaction_type_id);return Ue.jsxs("tr",{className:"hover:bg-gray-50",children:[Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.property_name}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.location}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null==a?void 0:a.name)||"-"}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("거래완료"===(null==r?void 0:r.name)?"bg-blue-100 text-blue-800":"거래가능"===(null==r?void 0:r.name)?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:(null==r?void 0:r.name)||"-"})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:Ue.jsx(o,{to:`/properties/${e.id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:"상세보기"})})]},e.id)})})]})})]})]}):Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsx("h2",{className:"text-xl font-semibold mb-4",children:"사용자를 찾을 수 없습니다"}),Ue.jsx(o,{to:"/users",className:"text-blue-600 hover:text-blue-800",children:"사용자 목록으로 돌아가기"})]})},sd=()=>{const{user:e}=_s();if(!Js(e))return Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsx("h2",{className:"text-xl font-semibold mb-4",children:"접근 권한 없음"}),Ue.jsx("div",{className:"bg-yellow-50 p-4 rounded-md text-yellow-800",children:"관리자 권한이 필요합니다. 관리자에게 문의하세요."})]});const{data:t=[],isLoading:s}=Ht("users",async()=>{const{data:e,error:t}=await Wc();if(t)throw t;return e}),{data:r=[],isLoading:a}=Ht("all-properties",async()=>{const{data:e,error:t}=await cr({},{isAdmin:!0});if(t)throw t;return e||[]}),{data:n={}}=Ht("lookupTables",async()=>await or(),{staleTime:3e5}),i=(e,t)=>{const s=r.filter(s=>{const r=s.manager_id;return r===e||r===t}),a={totalProperties:s.length,completedDeals:0,activeDeals:0,pendingDeals:0,monthlyDeals:0};return s.forEach(e=>{var t;const s=null==(t=n.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);"거래완료"===(null==s?void 0:s.name)?a.completedDeals++:"거래가능"===(null==s?void 0:s.name)?a.activeDeals++:"거래보류"===(null==s?void 0:s.name)&&a.pendingDeals++;const r=new Date(e.created_at),i=new Date,l=i.getDay(),o=new Date(i);o.setDate(i.getDate()-(0===l?6:l-1)),o.setHours(0,0,0,0);const c=new Date(o);c.setDate(o.getDate()+6),c.setHours(23,59,59,999),r>=o&&r<=c&&a.monthlyDeals++}),a},l=(()=>{const e=r.length,s=r.filter(e=>{var t;const s=null==(t=n.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);return"거래완료"===(null==s?void 0:s.name)}).length;return{totalProperties:e,completedDeals:s,activeDeals:r.filter(e=>{var t;const s=null==(t=n.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);return"거래가능"===(null==s?void 0:s.name)}).length,performanceRate:e>0?Math.round(s/e*100):0,totalStaff:t.length}})();if(s||a)return Ue.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-2 text-gray-600",children:"성과 데이터를 불러오는 중..."})]});const c=t.map(e=>({...e,stats:i(e.id,e.email)})).sort((e,t)=>t.stats.totalProperties-e.stats.totalProperties);return Ue.jsxs("div",{className:"space-y-6",children:[Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center mb-6",children:[Ue.jsx(oe,{className:"w-8 h-8 mr-2 text-blue-600"}),"직원 성과 현황"]}),Ue.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[Ue.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-blue-600",children:"총 직원"}),Ue.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[l.totalStaff,"명"]})]}),Ue.jsx(ae,{className:"w-8 h-8 text-blue-400"})]})}),Ue.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-purple-600",children:"총 매물"}),Ue.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[l.totalProperties,"건"]})]}),Ue.jsx(j,{className:"w-8 h-8 text-purple-400"})]})}),Ue.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-green-600",children:"거래완료"}),Ue.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[l.completedDeals,"건"]})]}),Ue.jsx(me,{className:"w-8 h-8 text-green-400"})]})}),Ue.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"진행중"}),Ue.jsxs("p",{className:"text-2xl font-bold text-yellow-900",children:[l.activeDeals,"건"]})]}),Ue.jsx(le,{className:"w-8 h-8 text-yellow-400"})]})}),Ue.jsx("div",{className:"bg-red-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-red-600",children:"평균 성과율"}),Ue.jsxs("p",{className:"text-2xl font-bold text-red-900",children:[l.performanceRate,"%"]})]}),Ue.jsx(ne,{className:"w-8 h-8 text-red-400"})]})})]})]}),Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsx("h2",{className:"text-lg font-semibold mb-6",children:"직원별 성과 순위"}),Ue.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map((e,t)=>{const s=e.stats,r=s.totalProperties>0?Math.round(s.completedDeals/s.totalProperties*100):0;return Ue.jsxs(o,{to:`/performance/${e.id}`,className:"block border rounded-lg p-4 hover:shadow-md transition-shadow hover:border-blue-300",children:[Ue.jsxs("div",{className:"flex justify-between items-start mb-4",children:[Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold "+(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-500":"bg-blue-500"),children:t+1}),Ue.jsxs("div",{className:"ml-3",children:[Ue.jsx("h3",{className:"font-semibold text-lg",children:e.name}),Ue.jsx("p",{className:"text-sm text-gray-600",children:e.email})]})]}),Ue.jsx(he,{className:"w-5 h-5 text-gray-400"})]}),Ue.jsxs("div",{className:"space-y-2",children:[Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-sm text-gray-600",children:"총 매물"}),Ue.jsxs("span",{className:"font-semibold",children:[s.totalProperties,"건"]})]}),Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-sm text-gray-600",children:"거래완료"}),Ue.jsxs("span",{className:"font-semibold text-green-600",children:[s.completedDeals,"건"]})]}),Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-sm text-gray-600",children:"진행중"}),Ue.jsxs("span",{className:"font-semibold text-blue-600",children:[s.activeDeals,"건"]})]}),Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-sm text-gray-600",children:"이번주 등록"}),Ue.jsxs("span",{className:"font-semibold",children:[s.monthlyDeals,"건"]})]})]}),Ue.jsx("div",{className:"mt-4 pt-4 border-t",children:Ue.jsxs("div",{className:"flex justify-between items-center",children:[Ue.jsx("span",{className:"text-sm font-medium text-gray-700",children:"성과율"}),Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:Ue.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${r}%`}})}),Ue.jsxs("span",{className:"text-sm font-semibold",children:[r,"%"]})]})]})})]},e.id)})})]})]})},rd=()=>{const{id:e}=c(),[s,r]=t.useState("thisMonth"),{data:a,isLoading:n}=Ht(["user",e],async()=>{const{data:t,error:s}=await Gc(e);if(s)throw s;return t}),{data:i=[],isLoading:l}=Ht(["user-properties",e],async()=>{const{data:t,error:s}=await cr({},{isAdmin:!0});if(s)throw s;return(t||[]).filter(t=>t.manager_id===e)}),{data:d={}}=Ht("lookupTables",async()=>await or()),u=t.useMemo(()=>{const e=new Date;let t=new Date;switch(s){case"thisMonth":default:t.setDate(1);break;case"lastMonth":t.setMonth(e.getMonth()-1);break;case"last3Months":t.setMonth(e.getMonth()-3);break;case"last6Months":t.setMonth(e.getMonth()-6);break;case"thisYear":t.setMonth(0),t.setDate(1)}return i.filter(e=>new Date(e.created_at)>=t)},[i,s]),m=t.useMemo(()=>{const e=u.length,t=u.filter(e=>{var t;const s=null==(t=d.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);return"거래완료"===(null==s?void 0:s.name)}).length;return{total:e,completed:t,available:u.filter(e=>{var t;const s=null==(t=d.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);return"거래가능"===(null==s?void 0:s.name)}).length,hold:u.filter(e=>{var t;const s=null==(t=d.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);return"거래보류"===(null==s?void 0:s.name)}).length,totalValue:u.reduce((e,t)=>{var s;const r=null==(s=d.propertyStatuses)?void 0:s.find(e=>e.id===p.property_status_id);return"거래완료"===(null==r?void 0:r.name)?e+(t.price||t.lease_price||0):e},0),successRate:e>0?(t/e*100).toFixed(1):0}},[u,d]),h=t.useMemo(()=>{const e={};return i.forEach(t=>{var s;const r=new Date(t.created_at),a=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;e[a]||(e[a]={month:a,total:0,completed:0}),e[a].total++;const n=null==(s=d.propertyStatuses)?void 0:s.find(e=>e.id===t.property_status_id);"거래완료"===(null==n?void 0:n.name)&&e[a].completed++}),Object.keys(e).sort().slice(-6).map(t=>e[t])},[i,d]),x=t.useMemo(()=>{const e={};u.forEach(t=>{var s;const r=null==(s=d.propertyTypes)?void 0:s.find(e=>e.id===t.property_type_id),a=(null==r?void 0:r.name)||"기타";e[a]=(e[a]||0)+1});const t=["#3B82F6","#10B981","#F59E0B","#8B5CF6","#EF4444"];return Object.entries(e).map(([e,s],r)=>({name:e,count:s,color:t[r%t.length]}))},[u,d]),f=e=>{if(!e||0===e)return"-";if(e>=1e8){const t=Math.floor(e/1e8),s=Math.floor(e%1e8/1e4);return s>0?`${t}억 ${s.toLocaleString()}만원`:`${t}억원`}return e>=1e4?`${(e/1e4).toLocaleString()}만원`:`${e.toLocaleString()}원`};return n||l?Ue.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-2 text-gray-600",children:"성과 데이터를 불러오는 중..."})]}):Ue.jsxs("div",{children:[Ue.jsxs("div",{className:"mb-6",children:[Ue.jsxs(o,{to:"/users",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4",children:[Ue.jsx(re,{className:"w-4 h-4 mr-1"}),"직원 관리로 돌아가기"]}),Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("div",{className:"flex items-center justify-between mb-6",children:[Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-blue-100",children:Ue.jsx(H,{className:"h-6 w-6 text-blue-600"})}),Ue.jsxs("div",{className:"ml-4",children:[Ue.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[null==a?void 0:a.name," 님의 성과"]}),Ue.jsx("p",{className:"text-gray-600",children:null==a?void 0:a.email})]})]}),Ue.jsxs("div",{className:"flex items-center space-x-2",children:[Ue.jsx("label",{className:"text-sm font-medium text-gray-700",children:"기간:"}),Ue.jsxs("select",{value:s,onChange:e=>r(e.target.value),className:"block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[Ue.jsx("option",{value:"thisMonth",children:"이번 달"}),Ue.jsx("option",{value:"lastMonth",children:"지난 달"}),Ue.jsx("option",{value:"last3Months",children:"최근 3개월"}),Ue.jsx("option",{value:"last6Months",children:"최근 6개월"}),Ue.jsx("option",{value:"thisYear",children:"올해"})]})]})]}),Ue.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[Ue.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-600",children:"총 매물"}),Ue.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[m.total,"건"]})]}),Ue.jsx(j,{className:"h-8 w-8 text-gray-400"})]})}),Ue.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-green-600",children:"거래완료"}),Ue.jsxs("p",{className:"text-2xl font-bold text-green-900 mt-1",children:[m.completed,"건"]})]}),Ue.jsx(_,{className:"h-8 w-8 text-green-400"})]})}),Ue.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-blue-600",children:"거래가능"}),Ue.jsxs("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:[m.available,"건"]})]}),Ue.jsx(le,{className:"h-8 w-8 text-blue-400"})]})}),Ue.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"성과율"}),Ue.jsxs("p",{className:"text-2xl font-bold text-yellow-900 mt-1",children:[m.successRate,"%"]})]}),Ue.jsx(pe,{className:"h-8 w-8 text-yellow-400"})]})}),Ue.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("p",{className:"text-sm font-medium text-purple-600",children:"총 거래금액"}),Ue.jsx("p",{className:"text-lg font-bold text-purple-900 mt-1",children:f(m.totalValue)})]}),Ue.jsx(xe,{className:"h-8 w-8 text-purple-400"})]})})]})]})]}),Ue.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ue.jsx(ne,{className:"w-5 h-5 mr-2 text-blue-600"}),"월별 성과 추이"]}),Ue.jsx("div",{className:"h-64",children:Ue.jsx(O,{width:"100%",height:"100%",children:Ue.jsxs(T,{data:h,children:[Ue.jsx(A,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),Ue.jsx(D,{dataKey:"month",fontSize:12,tick:{fill:"#6b7280"}}),Ue.jsx(F,{fontSize:12,tick:{fill:"#6b7280"}}),Ue.jsx(P,{}),Ue.jsx(I,{type:"monotone",dataKey:"total",stroke:"#3b82f6",strokeWidth:2,name:"총 매물"}),Ue.jsx(I,{type:"monotone",dataKey:"completed",stroke:"#10b981",strokeWidth:2,name:"거래완료"})]})})})]}),Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ue.jsx(oe,{className:"w-5 h-5 mr-2 text-blue-600"}),"매물 유형별 분포"]}),Ue.jsx("div",{className:"h-64",children:Ue.jsx(O,{width:"100%",height:"100%",children:Ue.jsxs(fe,{children:[Ue.jsx(ge,{data:x,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,dataKey:"count",label:({name:e,count:t})=>`${e}: ${t}건`,fontSize:12,children:x.map((e,t)=>Ue.jsx(ye,{fill:e.color},`cell-${t}`))}),Ue.jsx(P,{})]})})})]})]}),Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ue.jsx(j,{className:"w-5 h-5 mr-2 text-blue-600"}),"최근 담당 매물"]}),Ue.jsx("div",{className:"overflow-x-auto",children:Ue.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ue.jsx("thead",{className:"bg-gray-50",children:Ue.jsxs("tr",{children:[Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"매물명"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"유형"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"거래유형"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"금액"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등록일"}),Ue.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),Ue.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.slice(0,10).map(e=>{var t,s,r;const a=null==(t=d.propertyTypes)?void 0:t.find(t=>t.id===e.property_type_id),n=null==(s=d.transactionTypes)?void 0:s.find(t=>t.id===e.transaction_type_id),i=null==(r=d.propertyStatuses)?void 0:r.find(t=>t.id===e.property_status_id);return Ue.jsxs("tr",{className:"hover:bg-gray-50",children:[Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:e.property_name}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:(null==a?void 0:a.name)||"-"}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:(null==n?void 0:n.name)||"-"}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:f(e.price||e.lease_price||0)}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:Ue.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full "+("거래완료"===(null==i?void 0:i.name)?"bg-green-100 text-green-800":"거래가능"===(null==i?void 0:i.name)?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:(null==i?void 0:i.name)||"-"})}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("ko-KR")}),Ue.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Ue.jsx(o,{to:`/properties/${e.id}`,className:"text-blue-600 hover:text-blue-800",children:"상세보기"})})]},e.id)})})]})}),u.length>10&&Ue.jsx("div",{className:"mt-4 text-center",children:Ue.jsxs(o,{to:`/properties?manager=${e}`,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:["전체 매물 보기 (",u.length,"건)"]})})]})]})},ad=()=>{const{user:e}=_s(),s=zt(),[r,a]=t.useState(null),[n,i]=t.useState(!1),[l,o]=t.useState(null),[c,d]=t.useState(null);if(!e||"admin"!==e.email&&"admin"!==e.role)return Ue.jsxs("div",{className:"p-6 text-center",children:[Ue.jsx(b,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),Ue.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"접근 권한이 없습니다"}),Ue.jsx("p",{className:"text-gray-600",children:"관리자만 CSV 파일을 업로드할 수 있습니다."})]});const u=e=>({"아파트":"apt","오피스텔":"officetel","빌라":"villa","연립":"villa","빌라/연립":"villa","단독주택":"house","상가":"commercial","사무실":"commercial","점포":"commercial"}[e]||"apt");return Ue.jsxs("div",{className:"space-y-6",children:[Ue.jsxs("div",{children:[Ue.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CSV 매물 데이터 가져오기"}),Ue.jsx("p",{className:"text-gray-600",children:"CSV 파일을 업로드하여 매물 데이터를 일괄 등록할 수 있습니다."})]}),Ue.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ue.jsxs("div",{className:"flex items-center justify-between",children:[Ue.jsxs("div",{children:[Ue.jsx("h3",{className:"font-medium text-blue-900",children:"CSV 템플릿 다운로드"}),Ue.jsx("p",{className:"text-sm text-blue-700",children:"올바른 형식의 CSV 파일을 작성하기 위한 템플릿을 다운로드하세요."})]}),Ue.jsxs("button",{onClick:()=>{const e=["매물명,소재지,매물종류,거래유형,가격,상태,동,호,공급면적,전용면적,층수,방수,향,관리비,주차,입주일,사용승인일,특이사항,메모,상가여부","래미안 아파트 101동 1503호,서울시 강남구 삼성동,아파트,매매,2500000000,거래가능,101동,1503호,84.56,59.82,15층/25층,3개/2개,남향,15만원,2대,즉시입주,2020.05.15,신축,관리자 확인 필요,아니오","힐스테이트 오피스텔 A동 205호,서울시 서초구 서초동,오피스텔,전세,800000000,거래가능,A동,205호,32.15,25.48,2층/15층,1개/1개,동향,8만원,1대,즉시입주,2019.03.10,,투자용,아니오","신축 빌라 3층,서울시 마포구 합정동,빌라/연립,월세,50000000/500000,거래완료,,3층,65.23,52.31,3층/3층,2개/1개,남서향,5만원,1대,즉시입주,2021.08.20,신축 빌라,계약 완료,아니오"].join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),r=URL.createObjectURL(t);s.setAttribute("href",r),s.setAttribute("download","property_sample.csv"),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[Ue.jsx(be,{className:"w-4 h-4 mr-2"}),"템플릿 다운로드"]})]})}),Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"CSV 파일 업로드"}),Ue.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[Ue.jsx(ve,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),Ue.jsxs("div",{className:"space-y-2",children:[Ue.jsxs("label",{className:"block",children:[Ue.jsx("span",{className:"sr-only",children:"Choose file"}),Ue.jsx("input",{type:"file",accept:".csv",onChange:e=>{const t=e.target.files[0];t&&"text/csv"===t.type?(a(t),d(null)):(d("CSV 파일을 선택해주세요."),a(null))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),Ue.jsx("p",{className:"text-sm text-gray-500",children:"CSV 파일을 선택하세요"})]})]}),r&&Ue.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx(w,{className:"w-5 h-5 text-blue-500 mr-2"}),Ue.jsx("span",{className:"font-medium",children:r.name}),Ue.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",(r.size/1024).toFixed(1)," KB)"]})]})}),c&&Ue.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx(b,{className:"w-5 h-5 mr-2"}),c]})}),Ue.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[Ue.jsx("button",{onClick:async()=>{i(!0),d(null);try{const t=await fetch("/processed_properties.json");if(!t.ok)throw new Error("처리된 데이터 파일을 찾을 수 없습니다. CSV 처리를 먼저 실행해주세요.");const r=await t.json(),a=await lr(r,(null==e?void 0:e.id)||"admin");if(s.invalidateQueries(["properties"]),o({total:a.totalCount,processed:a.uploadedCount,errors:a.errors,properties:r.slice(0,5)}),a.success&&a.uploadedCount>0);else if(!a.success)throw new Error(`업로드 실패: ${a.errors.join(", ")}`)}catch(t){d(`데이터 업로드 중 오류가 발생했습니다: ${t.message}`)}finally{i(!1)}},disabled:n,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"업로드 중...":"처리된 데이터 업로드"}),Ue.jsx("button",{onClick:async()=>{if(r){i(!0),d(null);try{const t=(await r.text()).split("\n").filter(e=>e.trim());if(0===t.length)throw new Error("CSV 파일이 비어있습니다.");const s=t[0].split(",").map(e=>e.trim()),a=t.slice(1),n=[],i=[];a.forEach((t,r)=>{try{const l=t.split(",").map(e=>e.trim()),o={};if(s.forEach((e,t)=>{o[e]=l[t]||""}),!o["매물명"]||!o["소재지"]||!o["거래유형"])return void i.push(`${r+2}행: 필수 필드가 누락되었습니다`);const c={"매매":"sale","전세":"lease","월세":"rent","매매/전세":"sale","전세/월세":"lease"}[o["거래유형"]]||"sale",d=((e,t)=>{if(!e)return{sale_price:0,lease_price:0,price:0};const s=e.replace(/[,\s]/g,"");if("sale"===t)return{sale_price:parseInt(s)||0,lease_price:0,price:0};if("lease"===t)return{sale_price:0,lease_price:parseInt(s)||0,price:0};if("rent"===t){if(s.includes("/")){const[e,t]=s.split("/");return{sale_price:0,lease_price:parseInt(e)||0,price:parseInt(t)||0}}return{sale_price:0,lease_price:0,price:parseInt(s)||0}}return{sale_price:0,lease_price:0,price:0}})(o["가격"]||o["금액"],c),m={property_name:o["매물명"],location:o["소재지"],property_type:u(o["매물종류"]||o["종류"]),transaction_type:c,property_status:(a=o["상태"]||o["진행상태"],{"거래가능":"available","거래중":"available","판매중":"available","임대가능":"available","거래완료":"completed","계약완료":"completed","판매완료":"completed","임대완료":"completed","거래보류":"reserved","보류":"reserved","일시정지":"reserved"}[a]||"available"),...d,building:o["동"]||"",unit:o["호"]||"",supply_area_sqm:parseFloat(o["공급면적"])||0,private_area_sqm:parseFloat(o["전용면적"])||0,floor_info:o["층수"]||"",rooms_bathrooms:o["방수"]||"",direction:o["향"]||"",maintenance_fee:o["관리비"]||"",parking:o["주차"]||"",move_in_date:o["입주일"]||"",approval_date:o["사용승인일"]||"",special_notes:o["특이사항"]||"",manager_memo:o["메모"]||"",is_commercial:"예"===o["상가여부"]||"Y"===o["상가여부"],manager_id:e.id||"admin-hardcoded"};n.push(m)}catch(l){i.push(`${r+2}행: ${l.message}`)}var a}),o({total:a.length,processed:n.length,errors:i,properties:n})}catch(t){d(`CSV 처리 중 오류가 발생했습니다: ${t.message}`)}finally{i(!1)}}},disabled:!r||n,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"처리 중...":"CSV 처리하기"})]})]}),l&&Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"처리 결과"}),Ue.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[Ue.jsxs("div",{className:"text-center",children:[Ue.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.total}),Ue.jsx("div",{className:"text-sm text-gray-600",children:"총 라인 수"})]}),Ue.jsxs("div",{className:"text-center",children:[Ue.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.processed}),Ue.jsx("div",{className:"text-sm text-gray-600",children:"처리 성공"})]}),Ue.jsxs("div",{className:"text-center",children:[Ue.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.errors.length}),Ue.jsx("div",{className:"text-sm text-gray-600",children:"처리 실패"})]})]}),l.errors.length>0&&Ue.jsxs("div",{className:"mb-6",children:[Ue.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"오류 목록"}),Ue.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-40 overflow-y-auto",children:l.errors.map((e,t)=>Ue.jsx("div",{className:"text-sm text-red-600 mb-1",children:e},t))})]}),l.processed>0&&Ue.jsxs("div",{children:[Ue.jsxs("div",{className:"flex items-center mb-4",children:[Ue.jsx(_,{className:"w-5 h-5 text-green-500 mr-2"}),Ue.jsxs("span",{className:"font-medium text-green-600",children:[l.processed,"개의 매물이 성공적으로 처리되었습니다!"]})]}),Ue.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"처리된 데이터는 Mock 환경에서 확인용으로만 표시됩니다. 실제 운영 환경에서는 데이터베이스에 저장됩니다."}),Ue.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:[Ue.jsx("h4",{className:"font-medium mb-2",children:"처리된 매물 미리보기 (처음 5개)"}),l.properties.slice(0,5).map((e,t)=>Ue.jsxs("div",{className:"border-b border-gray-200 py-2 last:border-b-0",children:[Ue.jsx("div",{className:"font-medium",children:e.property_name}),Ue.jsxs("div",{className:"text-sm text-gray-600",children:[e.location," | ",e.transaction_type," |","sale"===e.transaction_type&&e.sale_price>0&&` ${e.sale_price.toLocaleString()}원`,"lease"===e.transaction_type&&e.lease_price>0&&` ${e.lease_price.toLocaleString()}원`,"rent"===e.transaction_type&&` ${e.lease_price.toLocaleString()}/${e.price.toLocaleString()}원`]})]},t)),l.properties.length>5&&Ue.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["... 그 외 ",l.properties.length-5,"개 매물"]})]})]})]})]})},nd=async()=>{try{const{data:{user:t},error:s}=await hs.auth.getUser();if(s||!t)throw new Error("로그인이 필요합니다");const r=[],a=[{name:"원룸"},{name:"투룸"},{name:"쓰리룸"},{name:"오피스텔"},{name:"아파트"},{name:"빌라"},{name:"단독주택"},{name:"상가"}];try{const{data:e,error:t}=await hs.from("property_types").upsert(a,{onConflict:"name"}).select();if(t)throw t;r.push({table:"property_types",success:!0,count:e.length})}catch(e){r.push({table:"property_types",success:!1,error:e.message})}const n=[{name:"매물확보"},{name:"광고진행"},{name:"계약진행"},{name:"거래완료"},{name:"매물취소"}];try{const{data:e,error:t}=await hs.from("property_statuses").upsert(n,{onConflict:"name"}).select();if(t)throw t;r.push({table:"property_statuses",success:!0,count:e.length})}catch(e){r.push({table:"property_statuses",success:!1,error:e.message})}const i=[{name:"매매"},{name:"전세"},{name:"월세"},{name:"단기임대"}];try{const{data:e,error:t}=await hs.from("transaction_types").upsert(i,{onConflict:"name"}).select();if(t)throw t;r.push({table:"transaction_types",success:!0,count:e.length})}catch(e){r.push({table:"transaction_types",success:!1,error:e.message})}const l=[{name:"김소유자",phone:"010-1234-5678",contact_relation:"본인"},{name:"박소유자",phone:"010-2345-6789",contact_relation:"본인"},{name:"이소유자",phone:"010-3456-7890",contact_relation:"대리인"}];let o=0;for(const d of l)try{const{data:e}=await hs.from("owners").select("id").eq("phone",d.phone).single();if(!e){const{data:e,error:t}=await hs.from("owners").insert([d]).select();if(t)throw t;o++}}catch(e){}o>0?r.push({table:"owners",success:!0,count:o}):r.push({table:"owners",success:!1,error:"소유주 데이터 삽입 실패"});const c=r.filter(e=>e.success);return r.filter(e=>!e.success).length,{success:c.length>0,results:r,canTestPropertyInsert:c.length>=3}}catch(e){return{success:!1,error:e.message}}},id=async()=>{var e,t,s,r;try{const[a,n,i,l]=await Promise.all([hs.from("property_types").select("*").limit(1),hs.from("property_statuses").select("*").limit(1),hs.from("transaction_types").select("*").limit(1),hs.from("owners").select("*").limit(1)]),o=null==(e=a.data)?void 0:e[0],c=null==(t=n.data)?void 0:t[0],d=null==(s=i.data)?void 0:s[0],u=null==(r=l.data)?void 0:r[0];if(!o||!c||!d)throw new Error("필수 룩업 데이터가 없습니다. 먼저 setupDatabase()를 실행하세요.");const m={property_name:`테스트 매물 ${(new Date).getTime()}`,location:"서울시 강남구 삼성동",property_type_id:o.id,property_status_id:c.id,transaction_type_id:d.id,owner_id:(null==u?void 0:u.id)||null,price:5e8,supply_area_sqm:84.5,private_area_sqm:59.8,floor_info:"15층/25층",rooms_bathrooms:"3개/2개",direction:"남향",maintenance_fee:"15만원",parking:"2대",move_in_date:"즉시입주",special_notes:"클라이언트 테스트용 매물입니다"},{data:h,error:p}=await hs.from("properties").insert([m]).select();if(p)throw p;return{success:!0,property:h[0]}}catch(a){return{success:!1,error:a.message}}},ld=()=>{const{user:e}=_s(),[s,r]=t.useState(!1),[a,n]=t.useState(null),[i,l]=t.useState([]),o=(e,t="info")=>{const s=(new Date).toLocaleTimeString();l(r=>[...r,{timestamp:s,message:e,type:t}])},c=()=>{l([]),n(null)};return"admin"!==(null==e?void 0:e.role)&&"admin@the-realty.co.kr"!==(null==e?void 0:e.email)?Ue.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[Ue.jsx("h2",{className:"text-xl font-semibold mb-4",children:"설정"}),Ue.jsx("p",{className:"text-gray-600",children:"관리자만 접근할 수 있습니다."})]}):Ue.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[Ue.jsx("h2",{className:"text-xl font-semibold mb-6",children:"시스템 설정"}),Ue.jsxs("div",{className:"mb-6",children:[Ue.jsx("h3",{className:"text-lg font-medium mb-4",children:"데이터베이스 설정"}),Ue.jsx("p",{className:"text-gray-600 mb-4",children:"시스템 사용에 필요한 기본 데이터를 설정합니다. (매물종류, 진행상태, 거래유형, 테스트 소유주)"}),Ue.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[Ue.jsx("button",{onClick:async()=>{if(!s){r(!0),c(),o("데이터베이스 셋업 시작...","info");try{const e=console.log;console.log=(...t)=>{o(t.join(" "),"info"),e(...t)};const t=await nd();console.log=e,n(t),t.success?o("✅ 데이터베이스 셋업 완료!","success"):o("❌ 데이터베이스 셋업 실패: "+t.error,"error")}catch(e){o("❌ 오류 발생: "+e.message,"error"),n({success:!1,error:e.message})}finally{r(!1)}}},disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:s?"처리 중...":"기본 데이터 설정"}),Ue.jsx("button",{onClick:async()=>{var e;if(!s){r(!0),o("매물 등록 테스트 시작...","info");try{const t=console.log;console.log=(...e)=>{o(e.join(" "),"info"),t(...e)};const s=await id();console.log=t,s.success?(o("✅ 매물 등록 테스트 성공!","success"),o(`등록된 매물 ID: ${null==(e=s.property)?void 0:e.id}`,"info")):o("❌ 매물 등록 테스트 실패: "+s.error,"error")}catch(t){o("❌ 오류 발생: "+t.message,"error")}finally{r(!1)}}},disabled:s,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",children:s?"처리 중...":"매물 등록 테스트"}),Ue.jsx("button",{onClick:async()=>{var e,t;if(!s){r(!0),c(),o("전체 셋업 및 테스트 시작...","info");try{const s=console.log;console.log=(...e)=>{o(e.join(" "),"info"),s(...e)};const r=await(async()=>{const e=await nd();return e.canTestPropertyInsert?{setupResult:e,testResult:await id()}:{setupResult:e,testResult:{success:!1,error:"셋업 불완전"}}})();console.log=s,n(r),(null==(e=r.setupResult)?void 0:e.success)&&(null==(t=r.testResult)?void 0:t.success)?o("✅ 전체 셋업 및 테스트 완료!","success"):o("⚠️ 일부 작업이 실패했습니다. 로그를 확인하세요.","warning")}catch(a){o("❌ 오류 발생: "+a.message,"error")}finally{r(!1)}}},disabled:s,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50",children:s?"처리 중...":"전체 셋업 & 테스트"}),Ue.jsx("button",{onClick:c,disabled:s,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50",children:"로그 지우기"})]})]}),a&&Ue.jsxs("div",{className:"mb-6",children:[Ue.jsx("h4",{className:"text-md font-medium mb-2",children:"결과 요약"}),Ue.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[a.setupResult&&Ue.jsxs("div",{className:"mb-2",children:[Ue.jsx("span",{className:"font-medium",children:"데이터베이스 셋업: "}),Ue.jsx("span",{className:a.setupResult.success?"text-green-600":"text-red-600",children:a.setupResult.success?"성공":"실패"}),a.setupResult.results&&Ue.jsxs("div",{className:"ml-4 mt-1 text-sm",children:["성공: ",a.setupResult.results.filter(e=>e.success).length,"개 테이블, 실패: ",a.setupResult.results.filter(e=>!e.success).length,"개 테이블"]})]}),a.testResult&&Ue.jsxs("div",{children:[Ue.jsx("span",{className:"font-medium",children:"매물 등록 테스트: "}),Ue.jsx("span",{className:a.testResult.success?"text-green-600":"text-red-600",children:a.testResult.success?"성공":"실패"}),a.testResult.property&&Ue.jsxs("div",{className:"ml-4 mt-1 text-sm",children:["등록된 매물: ",a.testResult.property.property_name," (ID: ",a.testResult.property.id,")"]})]})]})]}),i.length>0&&Ue.jsxs("div",{children:[Ue.jsx("h4",{className:"text-md font-medium mb-2",children:"실행 로그"}),Ue.jsx("div",{className:"bg-black text-green-400 p-4 rounded-md font-mono text-sm max-h-96 overflow-y-auto",children:i.map((e,t)=>Ue.jsxs("div",{className:"mb-1",children:[Ue.jsxs("span",{className:"text-gray-400",children:["[",e.timestamp,"]"]})," ",Ue.jsx("span",{className:"error"===e.type?"text-red-400":"success"===e.type?"text-green-400":"warning"===e.type?"text-yellow-400":"text-green-400",children:e.message})]},t))})]}),Ue.jsxs("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[Ue.jsx("h4",{className:"text-md font-medium text-yellow-800 mb-2",children:"💡 참고사항"}),Ue.jsxs("ul",{className:"text-sm text-yellow-700 list-disc list-inside space-y-1",children:[Ue.jsx("li",{children:"RLS(Row Level Security) 정책으로 인해 데이터 삽입이 실패할 수 있습니다."}),Ue.jsx("li",{children:"실패 시 Supabase 대시보드에서 수동으로 SQL을 실행하거나 서비스 역할 키를 설정하세요."}),Ue.jsx("li",{children:"SQL 파일들이 scripts/ 폴더에 준비되어 있습니다."})]})]})]})},od=()=>{const e=e=>{switch(e){case"완료":return Ue.jsx(_,{className:"w-5 h-5 text-green-500"});case"진행중":return Ue.jsx(ue,{className:"w-5 h-5 text-blue-500"});case"보류":return Ue.jsx(G,{className:"w-5 h-5 text-yellow-500"});default:return Ue.jsx(je,{className:"w-5 h-5 text-gray-500"})}},t=e=>{switch(e){case"feature":return Ue.jsx(_e,{className:"w-4 h-4 text-blue-500"});case"fix":return Ue.jsx(Ne,{className:"w-4 h-4 text-red-500"});case"database":return Ue.jsx(we,{className:"w-4 h-4 text-purple-500"});case"user":return Ue.jsx(ae,{className:"w-4 h-4 text-green-500"});default:return Ue.jsx(je,{className:"w-4 h-4 text-gray-500"})}},s=e=>{switch(e){case"feature":return"기능";case"fix":return"수정";case"database":return"DB";case"user":return"사용자";default:return"기타"}},r=e=>{switch(e){case"feature":return"bg-blue-100 text-blue-800";case"fix":return"bg-red-100 text-red-800";case"database":return"bg-purple-100 text-purple-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return Ue.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ue.jsxs("div",{className:"mb-6",children:[Ue.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"업데이트 내역"}),Ue.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx(G,{className:"w-5 h-5 text-yellow-400 mr-2"}),Ue.jsxs("p",{className:"text-yellow-800 text-sm",children:[Ue.jsx("strong",{children:"개발 진행 중:"})," 현재 시스템을 지속적으로 개선하고 있습니다. 일부 기능이 변경되거나 임시적으로 동작하지 않을 수 있습니다."]})]})})]}),Ue.jsx("div",{className:"space-y-6",children:[{version:"v1.4.0",date:"2025-07-31 15:30",status:"완료",type:"feature",title:"매물 관리 시스템 완전 구축",description:"매물-담당자-고객 연결 시스템 및 권한별 접근 제한 구현",changes:["매물 목록에 담당자 정보 표시 (users 테이블 JOIN)","권한별 매물 접근 제한 (일반 사용자: 본인 매물만, 관리자: 모든 매물)","매물 등록 시 로그인한 사용자를 담당자로 자동 설정","고객 정보 입력 기능 추가 (이름, 전화번호, 이메일, 주소, 메모)","거래유형별 맞춤 금액 필드 (매매가, 분양가, 보증금, 월세, 일일요금)","전화번호 형식 검증 및 필수 항목 설정","고객 정보를 properties.resident 컬럼에 JSON 형태로 저장"],impact:"완전한 매물 관리 시스템 구축 - 매물, 담당자, 고객 정보 통합 관리 가능"},{version:"v1.3.4",date:"2025-07-31 14:20",status:"완료",type:"feature",title:"구글 로그인 대비 사용자 관리 시스템 개선",description:"Google 로그인 연동을 위한 사용자 추가 프로세스 최적화",changes:["관리자 전용 서비스(adminService.js) 구현으로 RLS 정책 우회","임시 Auth 사용자 생성 후 Google 로그인 시 연결하는 구조","Service Role Key 활용한 관리자 권한 사용자 CRUD 작업","Google 로그인 전까지 임시 비밀번호로 Auth 시스템 연동 유지"],impact:"'User not allowed' 오류 완전 해결 및 Google 로그인 준비 완료"},{version:"v1.3.3",date:"2025-07-31 13:45",status:"완료",type:"fix",title:"매물 등록 시 숫자 필드 빈 값 처리 개선",description:"숫자 필드에 빈 문자열 입력 시 발생하는 데이터베이스 오류 해결",changes:["빈 문자열을 null로 변환하는 processNumericFields 함수 추가","price, lease_price, area 등 숫자 필드 전처리 로직 구현","숫자 변환 실패 시 null로 처리하여 데이터베이스 호환성 확보","매물 등록/수정 시 데이터 검증 및 변환 과정 표준화"],impact:"'invalid input syntax for type numeric' 오류 해결"},{version:"v1.3.2",date:"2025-07-31 12:15",status:"완료",type:"fix",title:"사용자 추가 시 ID NULL 오류 해결",description:"Auth 시스템과 Public 사용자 테이블 연동 구조 정상화",changes:["auth.users에 먼저 사용자 생성 후 public.users에 연결하는 방식으로 변경","외래키 제약조건(users_id_fkey) 준수하도록 수정","사용자 생성 실패 시 롤백 로직 추가","기본 비밀번호 설정 및 이메일 자동 확인 처리"],impact:"'null value in column id violates not-null constraint' 오류 해결"},{version:"v1.3.1",date:"2025-07-31 11:30",status:"완료",type:"fix",title:"사용자 관리 기능 단순화",description:"인증 시스템 대신 users 테이블 직접 관리 방식으로 변경",changes:["비밀번호 필드 및 검증 로직 제거","supabase.auth.signUp 대신 직접 테이블 삽입","사용자 추가 프로세스 단순화","양방향 데이터 동기화 완성"],impact:"사용자 추가 시 'User not allowed' 오류 해결"},{version:"v1.3.0",date:"2025-07-31 10:45",status:"완료",type:"fix",title:"로그인 인증 문제 해결",description:"관리자 계정 재생성 및 인증 플로우 수정",changes:["기존 admin 계정 삭제 후 재생성","이메일 확인 자동 처리","로그인 테스트 스크립트 추가","public.users 테이블 동기화"],impact:"'Invalid login credentials' 오류 해결"},{version:"v1.2.0",date:"2025-07-31 09:20",status:"완료",type:"feature",title:"데이터베이스 스키마 통합",description:"UUID 기반 외래키 구조로 전면 변경",changes:["property_type, property_status, transaction_type을 별도 테이블로 분리","UUID 기반 외래키 관계 설정","JOIN 쿼리를 사용한 데이터 조회 방식 적용","PropertyForm 및 PropertyList 컴포넌트 업데이트"],impact:"매물 등록 시 'property_status column not found' 오류 해결"},{version:"v1.1.0",date:"2025-07-30 16:30",status:"완료",type:"feature",title:"Supabase 데이터베이스 연동",description:"PostgreSQL 기반 데이터베이스 구축 및 연동",changes:["Supabase 프로젝트 설정","테이블 스키마 설계 (properties, users, contacts)","RLS 정책 설정","더미 데이터 생성 스크립트 추가"],impact:"실제 데이터 저장 및 조회 기능 구현"},{version:"v1.0.0",date:"2025-07-29 14:00",status:"완료",type:"feature",title:"초기 프로젝트 구축",description:"React 기반 부동산 관리 대시보드 기본 구조 구현",changes:["React + Vite 프로젝트 초기화","Tailwind CSS 스타일링 적용","기본 컴포넌트 구조 설계","라우팅 시스템 구축"],impact:"프로젝트 기반 구조 완성"}].map((a,n)=>Ue.jsxs("div",{className:"border rounded-lg p-6 hover:shadow-md transition-shadow",children:[Ue.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ue.jsxs("div",{className:"flex items-center space-x-3",children:[Ue.jsxs("div",{className:"flex items-center space-x-2",children:[e(a.status),Ue.jsx("span",{className:"text-lg font-semibold text-gray-900",children:a.version})]}),Ue.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r(a.type)}`,children:[t(a.type),Ue.jsx("span",{className:"ml-1",children:s(a.type)})]})]}),Ue.jsx("span",{className:"text-sm text-gray-500",children:a.date})]}),Ue.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a.title}),Ue.jsx("p",{className:"text-gray-600 mb-4",children:a.description}),Ue.jsxs("div",{className:"mb-4",children:[Ue.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"주요 변경사항:"}),Ue.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:a.changes.map((e,t)=>Ue.jsx("li",{children:e},t))})]}),a.impact&&Ue.jsxs("div",{className:"bg-gray-50 rounded-md p-3",children:[Ue.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"해결된 문제:"}),Ue.jsx("p",{className:"text-sm text-gray-600",children:a.impact})]})]},n))}),Ue.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[Ue.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"다음 계획"}),Ue.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-blue-800",children:[Ue.jsx("li",{children:"Google 로그인 연동 (최종 단계)"}),Ue.jsx("li",{children:"UI/UX 최적화"}),Ue.jsx("li",{children:"모바일 반응형 개선"}),Ue.jsx("li",{children:"성능 최적화"}),Ue.jsx("li",{children:"보안 강화"})]})]})]})},cd={},dd=new class{constructor(){this.serviceName="the-realty-dashboard"}async storeSecret(e,t){try{return localStorage.setItem(`${this.serviceName}_${e}`,t),!0}catch(s){return!1}}async getSecret(e){try{return localStorage.getItem(`${this.serviceName}_${e}`)||null}catch(t){return null}}async deleteSecret(e){try{return localStorage.removeItem(`${this.serviceName}_${e}`),!0}catch(t){return!1}}async hasSecret(e){try{return null!==await this.getSecret(e)}catch(t){return!1}}async initializeGoogleDriveKeys(){const e={GOOGLE_CLIENT_EMAIL:(null==cd?void 0:cd.VITE_GOOGLE_CLIENT_EMAIL)||"",GOOGLE_PRIVATE_KEY:(null==cd?void 0:cd.VITE_GOOGLE_PRIVATE_KEY)||"",GOOGLE_PROJECT_ID:(null==cd?void 0:cd.VITE_GOOGLE_PROJECT_ID)||"",GOOGLE_DRIVE_ROOT_FOLDER_ID:(null==cd?void 0:cd.VITE_GOOGLE_DRIVE_ROOT_FOLDER_ID)||"",GOOGLE_DRIVE_SHARE_FOLDER_ID:(null==cd?void 0:cd.VITE_GOOGLE_DRIVE_SHARE_FOLDER_ID)||""},t={};for(const[s,r]of Object.entries(e))if(r&&"your-service-account@project.iam.gserviceaccount.com"!==r){const e=await this.storeSecret(s,r);t[s]=e}return t}async getGoogleDriveConfig(){try{const e={client_email:await this.getSecret("GOOGLE_CLIENT_EMAIL"),private_key:await this.getSecret("GOOGLE_PRIVATE_KEY"),project_id:await this.getSecret("GOOGLE_PROJECT_ID"),root_folder_id:await this.getSecret("GOOGLE_DRIVE_ROOT_FOLDER_ID"),share_folder_id:await this.getSecret("GOOGLE_DRIVE_SHARE_FOLDER_ID")},t=["client_email","private_key","project_id"].filter(t=>!e[t]);if(t.length>0)throw new Error(`Missing required Google Drive configuration: ${t.join(", ")}`);return e}catch(e){throw e}}async getPublicDataApiKey(){try{const e=await this.getSecret("PUBLIC_DATA_API_KEY");if(!e)throw new Error("공공데이터포털 API 키가 설정되지 않았습니다.");return e}catch(e){throw e}}async setPublicDataApiKey(e){try{return await this.storeSecret("PUBLIC_DATA_API_KEY",e)}catch(t){throw t}}async setupInitialKeys(){return{}}async listStoredKeys(){const e=["GOOGLE_CLIENT_EMAIL","GOOGLE_PRIVATE_KEY","GOOGLE_PROJECT_ID","GOOGLE_DRIVE_ROOT_FOLDER_ID","GOOGLE_DRIVE_SHARE_FOLDER_ID","PUBLIC_DATA_API_KEY"],t={};for(const s of e)t[s]=await this.hasSecret(s);return t}async clearAllKeys(){const e=["GOOGLE_CLIENT_EMAIL","GOOGLE_PRIVATE_KEY","GOOGLE_PROJECT_ID","GOOGLE_DRIVE_ROOT_FOLDER_ID","GOOGLE_DRIVE_SHARE_FOLDER_ID","PUBLIC_DATA_API_KEY"],t={};for(const s of e)t[s]=await this.deleteSecret(s);return t}};class ud{constructor(){this.supabaseUrl="https://qwxghpwasmvottahchky.supabase.co",this.supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF3eGdocHdhc212b3R0YWhjaGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU0ODI2MTQsImV4cCI6MjA1MTA1ODYxNH0.gCsX7a7s17MwSQvlFpOcjVo6p49Y8QgwQNa52LZ9ZL4",this.supabase=Te(this.supabaseUrl,this.supabaseKey),this.apiKey=null,this.baseUrl="https://openapi.molit.go.kr/OpenAPI_ToolInstallPackage/service/rest/RTMSOBJSvc",this.loadApiKeyFromKeychain(),this.intervalTime=108e5,this.isRunning=!1,this.lastCollectionTime=null,this.targetAreas=[{name:"강남구 역삼동",code:"11680"},{name:"강남구 삼성동",code:"11680"},{name:"서초구 서초동",code:"11650"},{name:"송파구 잠실동",code:"11710"},{name:"영등포구 여의도동",code:"11560"},{name:"마포구 상암동",code:"11440"},{name:"용산구 한남동",code:"11170"},{name:"종로구 청운동",code:"11110"}]}async loadApiKeyFromKeychain(){try{const e=await dd.getPublicDataApiKey();e&&(this.apiKey=e)}catch(e){}}setApiKey(e){this.apiKey=e}getCurrentYearMonth(){const e=new Date;return`${e.getFullYear()}${(e.getMonth()+1).toString().padStart(2,"0")}`}getLastMonth(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1);return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}`}async fetchApartmentData(e,t){if(!this.apiKey)throw new Error("공공데이터포털 API 키가 설정되지 않았습니다.");const s=`${this.baseUrl}/getRTMSDataSvcAptTradeDev`,r=new URLSearchParams({serviceKey:this.apiKey,pageNo:"1",numOfRows:"1000",LAWD_CD:e,DEAL_YMD:t});try{const e=await fetch(`${s}?${r}`);if(!e.ok)throw new Error(`API 호출 실패: ${e.status}`);const t=await e.text();return this.parseXmlResponse(t)}catch(a){throw a}}parseXmlResponse(e){const t=[],s=/<item>([\s\S]*?)<\/item>/g;let r;for(;null!==(r=s.exec(e));){const e=r[1],s={};["거래금액","건축년도","년","법정동","아파트","월","일","전용면적","지번","지역코드","층"].forEach(t=>{const r=new RegExp(`<${t}>(.*?)</${t}>`).exec(e);r&&(s[t]=r[1].trim())}),Object.keys(s).length>0&&t.push(s)}return t}async saveToDatabase(e,t){try{const s=e.map(e=>({area_name:t.name,area_code:t.code,apartment_name:e["아파트"]||"",transaction_amount:this.parseAmount(e["거래금액"]||"0"),build_year:parseInt(e["건축년도"]||"0"),transaction_year:parseInt(e["년"]||"0"),transaction_month:parseInt(e["월"]||"0"),transaction_day:parseInt(e["일"]||"0"),exclusive_area:parseFloat(e["전용면적"]||"0"),legal_dong:e["법정동"]||"",jibun:e["지번"]||"",floor:parseInt(e["층"]||"0"),collected_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})),{data:r,error:a}=await this.supabase.from("real_estate_transactions").upsert(s,{onConflict:"area_code,apartment_name,transaction_year,transaction_month,transaction_day,jibun"});if(a)throw a;return s.length}catch(s){throw s}}parseAmount(e){return parseInt(e.replace(/,/g,""))||0}async collectAreaData(e){try{const s=this.getCurrentYearMonth(),r=this.getLastMonth();let a=0;for(const n of[s,r])try{const t=await this.fetchApartmentData(e.code,n);t&&t.length>0&&(a+=await this.saveToDatabase(t,e)),await this.sleep(200)}catch(t){}return a}catch(t){return 0}}async collectAllData(){if(!this.apiKey)return;const e=new Date;let t=0;try{for(const e of this.targetAreas)t+=await this.collectAreaData(e),await this.sleep(1e3);this.lastCollectionTime=new Date;const s=this.lastCollectionTime-e;await this.saveCollectionLog(t,s)}catch(s){}}async saveCollectionLog(e,t){try{await this.supabase.from("collection_logs").insert({collected_count:e,duration_ms:t,collected_at:(new Date).toISOString(),status:"success"})}catch(s){}}sleep(e){return new Promise(t=>setTimeout(t,e))}startAutoCollection(){this.isRunning||(this.isRunning=!0,this.collectAllData(),this.intervalId=setInterval(()=>{this.collectAllData()},this.intervalTime))}stopAutoCollection(){this.isRunning&&(this.isRunning=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null))}getStatus(){return{isRunning:this.isRunning,lastCollectionTime:this.lastCollectionTime,nextCollectionTime:this.isRunning?new Date(Date.now()+this.intervalTime):null,targetAreas:this.targetAreas.length,apiKeyConfigured:!!this.apiKey}}}const md=()=>{const{collectorStatus:e,isLoading:s,error:r,collectionLogs:a,setApiKey:n,collectDataManually:i,startAutoCollection:l,stopAutoCollection:o,refreshCollectionLogs:c,formatLastCollectionTime:d,getTimeUntilNext:u}=(()=>{const[e,s]=t.useState({isRunning:!1,lastCollectionTime:null,nextCollectionTime:null,targetAreas:0,apiKeyConfigured:!1}),[r,a]=t.useState(!1),[n,i]=t.useState(null),[l,o]=t.useState([]),c=t.useRef(null);t.useEffect(()=>(c.current||(c.current=new ud,d()),()=>{var e;(null==(e=c.current)?void 0:e.isRunning)&&c.current.stopAutoCollection()}),[]);const d=()=>{c.current&&s(c.current.getStatus())},u=async()=>{try{const{data:e,error:t}=await c.current.supabase.from("collection_logs").select("*").order("collected_at",{ascending:!1}).limit(10);if(t)throw t;o(e||[])}catch(e){}};return t.useEffect(()=>{const e=setInterval(()=>{d()},3e4);return()=>clearInterval(e)},[]),t.useEffect(()=>{u()},[]),{collectorStatus:e,isLoading:r,error:n,collectionLogs:l,setApiKey:e=>{try{if(!e||""===e.trim())throw new Error("API 키를 입력해주세요.");return c.current.setApiKey(e.trim()),d(),i(null),!0}catch(t){return i(t.message),!1}},collectDataManually:async()=>{if(!c.current)return!1;try{return a(!0),i(null),await c.current.collectAllData(),d(),await u(),!0}catch(e){return i(e.message),!1}finally{a(!1)}},startAutoCollection:()=>{if(!c.current)return!1;try{return c.current.startAutoCollection(),d(),setTimeout(d,3e3),i(null),!0}catch(e){return i(e.message),!1}},stopAutoCollection:()=>{if(!c.current)return!1;try{return c.current.stopAutoCollection(),d(),i(null),!0}catch(e){return i(e.message),!1}},refreshCollectionLogs:u,updateStatus:d,formatNextCollectionTime:e=>e?new Date(e).toLocaleString("ko-KR"):"예정 없음",formatLastCollectionTime:e=>e?new Date(e).toLocaleString("ko-KR"):"수집 기록 없음",getTimeUntilNext:()=>{if(!e.nextCollectionTime)return null;const t=new Date,s=new Date(e.nextCollectionTime)-t;return s<=0?"곧 실행":`${Math.floor(s/36e5)}시간 ${Math.floor(s%36e5/6e4)}분 후`}}})(),[m,h]=t.useState(""),[p,x]=t.useState(!1);return Ue.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[Ue.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"🏢 부동산 실거래가 자동 수집"}),Ue.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[Ue.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"공공데이터포털 API 키 설정"}),Ue.jsx("div",{className:"mb-3",children:Ue.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📋 ",Ue.jsx("a",{href:"https://www.data.go.kr/data/15057511/openapi.do",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"공공데이터포털"}),'에서 "국토교통부_아파트매매 실거래 상세 자료" API 키를 발급받으세요.']})}),Ue.jsxs("div",{className:"flex gap-2 mb-2",children:[Ue.jsx("input",{type:p?"text":"password",value:m,onChange:e=>h(e.target.value),placeholder:"API 키를 입력하세요...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),Ue.jsx("button",{onClick:()=>x(!p),className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:p?"🙈":"👁️"}),Ue.jsx("button",{onClick:()=>{n(m)&&(h(""),alert("API 키가 설정되었습니다!"))},disabled:!m.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"설정"})]}),Ue.jsxs("div",{className:"text-sm",children:["상태: ",e.apiKeyConfigured?Ue.jsx("span",{className:"text-green-600 font-semibold",children:"✅ 설정됨"}):Ue.jsx("span",{className:"text-red-600 font-semibold",children:"❌ 미설정"})]})]}),Ue.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[Ue.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"📊 수집 상태"}),Ue.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[Ue.jsxs("div",{children:[Ue.jsx("span",{className:"font-medium",children:"자동 수집 상태:"}),Ue.jsx("span",{className:"ml-2 font-semibold "+(e.isRunning?"text-green-600":"text-gray-600"),children:e.isRunning?"🟢 실행 중":"⚪ 중지됨"})]}),Ue.jsxs("div",{children:[Ue.jsx("span",{className:"font-medium",children:"대상 지역:"}),Ue.jsxs("span",{className:"ml-2",children:[e.targetAreas,"개 지역"]})]}),Ue.jsxs("div",{children:[Ue.jsx("span",{className:"font-medium",children:"마지막 수집:"}),Ue.jsx("span",{className:"ml-2",children:d(e.lastCollectionTime)})]}),Ue.jsxs("div",{children:[Ue.jsx("span",{className:"font-medium",children:"다음 수집:"}),Ue.jsx("span",{className:"ml-2",children:e.isRunning?u()||"계산 중...":"자동 수집 중지됨"})]})]})]}),r&&Ue.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md",children:["❌ ",r]}),Ue.jsxs("div",{className:"mb-6",children:[Ue.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"🎮 수집 제어"}),Ue.jsxs("div",{className:"flex flex-wrap gap-3",children:[Ue.jsxs("button",{onClick:async()=>{e.apiKeyConfigured?await i()&&alert("데이터 수집이 완료되었습니다!"):alert("먼저 공공데이터포털 API 키를 설정해주세요.")},disabled:s||!e.apiKeyConfigured,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-2",children:[s?"🔄":"▶️",s?"수집 중...":"수동 수집"]}),e.isRunning?Ue.jsx("button",{onClick:()=>{o()&&alert("자동 데이터 수집을 중지했습니다.")},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"⏹️ 자동 수집 중지"}):Ue.jsx("button",{onClick:()=>{e.apiKeyConfigured?l()&&alert("자동 데이터 수집을 시작했습니다!"):alert("먼저 공공데이터포털 API 키를 설정해주세요.")},disabled:!e.apiKeyConfigured,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"🚀 자동 수집 시작"}),Ue.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"🔄 로그 새로고침"})]})]}),Ue.jsxs("div",{children:[Ue.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"📋 최근 수집 로그"}),a.length>0?Ue.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.map((e,t)=>Ue.jsx("div",{className:"p-3 bg-gray-50 rounded-md border-l-4 border-blue-500",children:Ue.jsxs("div",{className:"flex justify-between items-start",children:[Ue.jsxs("div",{children:[Ue.jsxs("span",{className:"font-medium text-green-600",children:["✅ ",e.collected_count,"건 수집 완료"]}),Ue.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["소요시간: ",Math.round(e.duration_ms/1e3),"초"]})]}),Ue.jsx("div",{className:"text-sm text-gray-500",children:new Date(e.collected_at).toLocaleString("ko-KR")})]})},t))}):Ue.jsx("div",{className:"p-4 bg-gray-50 rounded-md text-center text-gray-600",children:"아직 수집 기록이 없습니다."})]}),Ue.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ue.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"💡 사용 안내"}),Ue.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[Ue.jsx("li",{children:"• 3시간마다 자동으로 서울시 주요 8개 지역의 아파트 실거래가 데이터를 수집합니다."}),Ue.jsx("li",{children:"• API 호출 제한을 준수하여 서버에 부하를 주지 않도록 설계되었습니다."}),Ue.jsx("li",{children:"• 중복 데이터는 자동으로 필터링되어 최신 데이터만 유지됩니다."}),Ue.jsx("li",{children:"• 공공데이터포털의 무료 API를 사용하므로 추가 비용이 발생하지 않습니다."})]})]})]})},hd=()=>{const[e,s]=t.useState(""),[r,a]=t.useState(!1),[n,i]=t.useState(null),[l,o]=t.useState(null),[c,d]=t.useState("11680"),[u,m]=t.useState("202407");return Ue.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[Ue.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"📈 실시간 아파트 실거래가 조회"}),Ue.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[Ue.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"공공데이터포털 API 키"}),Ue.jsx("input",{type:"password",value:e,onChange:e=>s(e.target.value),placeholder:"API 키를 입력하세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),Ue.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"지역 선택"}),Ue.jsx("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{code:"11680",name:"강남구"},{code:"11650",name:"서초구"},{code:"11710",name:"송파구"},{code:"11560",name:"영등포구"},{code:"11440",name:"마포구"},{code:"11170",name:"용산구"},{code:"11110",name:"종로구"},{code:"11140",name:"중구"}].map(e=>Ue.jsx("option",{value:e.code,children:e.name},e.code))})]}),Ue.jsxs("div",{children:[Ue.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"조회 년월"}),Ue.jsx("input",{type:"month",value:`${u.slice(0,4)}-${u.slice(4,6)}`,onChange:e=>{const[t,s]=e.target.value.split("-");m(t+s)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),Ue.jsx("div",{className:"flex items-end",children:Ue.jsx("button",{onClick:async()=>{if(e){a(!0),o(null);try{const t="https://openapi.molit.go.kr/OpenAPI_ToolInstallPackage/service/rest/RTMSOBJSvc/getRTMSDataSvcAptTradeDev",s=new URLSearchParams({serviceKey:e,pageNo:"1",numOfRows:"100",LAWD_CD:c,DEAL_YMD:u}),r=await fetch(`${t}?${s}`);if(!r.ok)throw new Error(`HTTP 오류: ${r.status}`);const a=(e=>{var t,s;const r=(new DOMParser).parseFromString(e,"text/xml");if(r.querySelector("cmmMsgHeader")){const e=null==(t=r.querySelector("returnReasonCode"))?void 0:t.textContent,a=null==(s=r.querySelector("returnAuthMsg"))?void 0:s.textContent;throw new Error(`API 오류 ${e}: ${a}`)}const a=r.querySelectorAll("item");return Array.from(a).map(e=>{const t={};for(const s of e.children)t[s.tagName]=s.textContent;return t})})(await r.text());i(a)}catch(t){o(t.message),i(null)}finally{a(!1)}}else o("API 키를 입력해주세요.")},disabled:r||!e,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:r?"조회 중...":"실시간 조회"})})]}),l&&Ue.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md",children:["❌ ",l]}),n&&Ue.jsxs("div",{children:[Ue.jsxs("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-md",children:["✅ ",n.length,"건의 실거래 데이터를 조회했습니다."]}),n.length>0&&Ue.jsx("div",{className:"overflow-x-auto",children:Ue.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ue.jsx("thead",{className:"bg-gray-50",children:Ue.jsxs("tr",{children:[Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"아파트명"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"거래금액"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"전용면적"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"층"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"거래일"}),Ue.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"법정동"})]})}),Ue.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>{return Ue.jsxs("tr",{className:"hover:bg-gray-50",children:[Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.아파트||"-"}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(s=e.거래금액,s?parseInt(s.replace(/,/g,"")).toLocaleString()+"만원":"0")}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.전용면적?`${e.전용면적}㎡`:"-"}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.층?`${e.층}층`:"-"}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.년&&e.월&&e.일?`${e.년}.${e.월}.${e.일}`:"-"}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.법정동||"-"})]},t);var s})})]})})]}),Ue.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ue.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"💡 사용 안내"}),Ue.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[Ue.jsx("li",{children:"• 공공데이터포털에서 발급받은 API 키를 입력하세요."}),Ue.jsx("li",{children:"• 실시간으로 최신 실거래 데이터를 조회합니다."}),Ue.jsx("li",{children:"• 데이터는 저장되지 않고 조회할 때마다 새로 가져옵니다."}),Ue.jsx("li",{children:"• 최신 데이터는 보통 1-2개월 후에 업데이트됩니다."})]})]})]})},pd=()=>Ue.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:Ue.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ue.jsxs("div",{className:"mb-8",children:[Ue.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"📊 부동산 실거래가 데이터 수집"}),Ue.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"공공데이터포털 API를 활용한 자동 데이터 수집 시스템"})]}),Ue.jsx(hd,{}),Ue.jsx("div",{className:"mt-8",children:Ue.jsx(md,{})}),Ue.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ue.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[Ue.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"🔄 자동 수집 시스템"}),Ue.jsx("p",{className:"text-gray-600 text-sm",children:"3시간마다 자동으로 서울시 주요 8개 지역의 아파트 실거래가 데이터를 수집합니다. API 호출 제한을 준수하여 안정적으로 운영됩니다."})]}),Ue.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[Ue.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"📊 데이터 분석"}),Ue.jsx("p",{className:"text-gray-600 text-sm",children:"수집된 데이터는 실시간으로 분석되어 거래 트렌드, 평균 가격, 지역별 분포 등의 인사이트를 제공합니다."})]}),Ue.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[Ue.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"🔒 데이터 보안"}),Ue.jsx("p",{className:"text-gray-600 text-sm",children:"모든 데이터는 Supabase에 안전하게 저장되며, API 키는 암호화되어 관리됩니다."})]})]})]})}),xd=({isMobileOpen:e,setIsMobileOpen:s})=>{var r;const{user:a,signOut:i}=_s(),l=n(),[c,d]=t.useState(null),u={"📊":q,"🏠":H,"🏢":j,"👤":ke,"👥":ae,"📈":oe,"📁":ve,"🔄":w,"⚙️":Ne},m=er(a).map(e=>({...e,icon:u[e.icon]||q}));return Ue.jsxs(Ue.Fragment,{children:[e&&Ue.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>{s(!e)}}),Ue.jsxs("div",{className:"sidebar "+(e?"open":""),children:[Ue.jsx("div",{className:"sidebar-header",children:Ue.jsx("div",{className:"flex items-center justify-center",children:Ue.jsx("img",{src:"/logo_white.svg",alt:"Logo",className:"h-10 w-auto"})})}),Ue.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-50 flex items-center justify-center",children:Ue.jsx(ke,{className:"w-6 h-6 text-primary"})}),Ue.jsxs("div",{className:"ml-3 flex-1",children:[Ue.jsx("p",{className:"text-sm font-medium text-gray-900",children:(null==a?void 0:a.name)||(null==(r=null==a?void 0:a.email)?void 0:r.split("@")[0])}),Ue.jsx("div",{className:"flex items-center gap-2 mt-1",children:Ue.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${sr(a)}`,children:tr(a)})})]})]})}),Ue.jsx("nav",{className:"sidebar-nav",children:m.filter(e=>"Settings"!==e.name).map(e=>{const t=e.icon,r=(a=e.path,l.pathname===a||l.pathname.startsWith(a+"/"));var a;return Ue.jsxs(o,{to:e.path,className:"sidebar-nav-item "+(r?"active":""),onClick:()=>s(!1),children:[Ue.jsx(t,{className:"sidebar-nav-icon"}),Ue.jsx("span",{children:e.name})]},e.name)})}),Ue.jsx("div",{className:"absolute bottom-0 w-full p-4 border-t border-gray-200",children:Ue.jsxs("button",{onClick:i,className:"sidebar-nav-item w-full text-left hover:bg-red-50 hover:text-red-600",children:[Ue.jsx(Se,{className:"sidebar-nav-icon"}),Ue.jsx("span",{children:"로그아웃"})]})})]})]})},fd=({children:e})=>{const{user:t,loading:s}=_s();return s?Ue.jsx("div",{className:"flex items-center justify-center min-h-screen",children:Ue.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t?e:Ue.jsx(i,{to:"/login",replace:!0})},gd=()=>{const{user:e}=_s(),t=cs.ENABLE_DEMO_BANNER,s=e&&e.id&&e.id.toString().startsWith("hardcoded-");return t&&s?Ue.jsxs("div",{className:"bg-yellow-100 border-b border-yellow-200 p-2 text-center text-sm",children:[Ue.jsx("span",{className:"font-medium text-yellow-800",children:"데모 관리자 모드"}),Ue.jsx("span",{className:"mx-2 text-yellow-700",children:"|"}),Ue.jsxs("span",{className:"text-yellow-700",children:["로그인 계정: ",e.email||e.name]})]}):null},yd=()=>{const[e,s]=t.useState(""),[r,a]=t.useState(!1),[n,i]=t.useState(-1),o=t.useRef(null),c=t.useRef(null),d=l(),[u,m]=t.useState("");t.useEffect(()=>{const t=setTimeout(()=>{m(e)},300);return()=>clearTimeout(t)},[e]);const{data:h=[],isLoading:p}=Ht(["globalSearch",u],async()=>{if(!u.trim())return[];const{data:e,error:t}=await hs.from("properties").select("id, property_name, location, property_type, property_status, transaction_type").or(`property_name.ilike.%${u}%,location.ilike.%${u}%`).order("created_at",{ascending:!1}).limit(8);if(t)throw t;return e},{enabled:!!u.trim(),staleTime:12e4});t.useEffect(()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&(a(!1),i(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const x=e=>{d(`/properties/${e.id}`),s(""),a(!1),i(-1)},f=e=>({available:"거래가능",reserved:"거래보류",completed:"거래완료"}[e]||e);return Ue.jsxs("div",{className:"relative w-full max-w-lg",ref:o,children:[Ue.jsxs("div",{className:"relative",children:[Ue.jsx(M,{className:"absolute left-2.5 sm:left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4 sm:w-5 sm:h-5"}),Ue.jsx("input",{type:"text",value:e,onChange:e=>{const t=e.target.value;s(t),a(t.trim().length>0),i(-1)},onKeyDown:e=>{var t;if(r&&0!==h.length)switch(e.key){case"ArrowDown":e.preventDefault(),i(e=>e<h.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),i(e=>e>0?e-1:h.length-1);break;case"Enter":e.preventDefault(),n>=0&&h[n]?x(h[n]):h.length>0&&x(h[0]);break;case"Escape":a(!1),i(-1),null==(t=o.current)||t.blur()}},placeholder:"매물명, 지역 검색...",className:"w-full pl-8 sm:pl-10 pr-8 sm:pr-10 py-2 sm:py-2.5 bg-white border border-slate-200 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200 hover:border-slate-300 text-sm"}),e&&Ue.jsx("button",{onClick:()=>{var e;s(""),a(!1),i(-1),null==(e=o.current)||e.focus()},className:"absolute right-2.5 sm:right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-600",children:Ue.jsx(te,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),r&&Ue.jsx("div",{ref:c,className:"absolute top-full left-0 right-0 mt-1 sm:mt-2 bg-white border border-slate-100 rounded-lg shadow-xl z-50 max-h-80 sm:max-h-96 overflow-y-auto",children:p?Ue.jsxs("div",{className:"p-3 sm:p-4 text-center text-slate-500",children:[Ue.jsx("div",{className:"inline-block w-4 h-4 sm:w-5 sm:h-5 border-2 border-slate-200 border-t-slate-500 rounded-full animate-spin mr-2"}),Ue.jsx("span",{className:"text-xs sm:text-sm font-medium",children:"검색 중..."})]}):h.length>0?Ue.jsxs(Ue.Fragment,{children:[h.map((e,t)=>{return Ue.jsx("div",{className:"p-3 sm:p-4 cursor-pointer border-b border-slate-50 last:border-b-0 hover:bg-slate-50 transition-all duration-200 "+(t===n?"bg-slate-50 border-l-2 border-l-slate-500":""),onClick:()=>x(e),children:Ue.jsx("div",{className:"flex justify-between items-start",children:Ue.jsxs("div",{className:"flex-1 min-w-0",children:[Ue.jsx("h4",{className:"font-semibold text-slate-900 truncate mb-1 text-sm",children:e.property_name}),Ue.jsx("p",{className:"text-xs sm:text-sm text-slate-500 truncate mb-2",children:e.location}),Ue.jsxs("div",{className:"flex items-center space-x-1.5 sm:space-x-2",children:[Ue.jsx("span",{className:"text-xs px-2 py-0.5 bg-slate-100 text-slate-700 rounded-md font-medium",children:(r=e.property_type,{apt:"아파트",officetel:"오피스텔",villa:"빌라/연립",house:"단독주택",commercial:"상가"}[r]||r)}),Ue.jsx("span",{className:`text-xs px-2 py-0.5 rounded-md font-medium ${s=e.property_status,{available:"text-green-600",reserved:"text-yellow-600",completed:"text-pink-600"}[s]||"text-gray-600"} bg-opacity-10`,children:f(e.property_status)})]})]})})},e.id);var s,r}),Ue.jsx("div",{className:"p-2 sm:p-3 text-center border-t border-slate-50 bg-slate-50",children:Ue.jsx("button",{onClick:()=>{d(`/properties?search=${encodeURIComponent(e)}`),a(!1),s("")},className:"text-xs sm:text-sm text-slate-600 hover:text-slate-700 font-semibold transition-colors duration-200",children:"모든 검색 결과 보기 →"})})]}):u.trim()?Ue.jsxs("div",{className:"p-4 sm:p-6 text-center text-slate-400",children:[Ue.jsx("div",{className:"text-2xl sm:text-3xl mb-2",children:"🔍"}),Ue.jsx("p",{className:"font-medium text-sm",children:"검색 결과가 없습니다"}),Ue.jsx("p",{className:"text-xs mt-1",children:"다른 키워드로 검색해보세요"})]}):null})]})},bd=()=>{const e=cs.CHANNEL_TALK_PLUGIN_KEY;return t.useEffect(()=>{if(!e)return;if(window.ChannelIO)return;const t=document.createElement("script");return t.src="https://cdn.channel.io/plugin/ch-plugin-web.js",t.async=!0,t.onload=()=>{window.ChannelIO&&e&&window.ChannelIO("boot",{pluginKey:e,hideDefaultLauncher:!0,profile:{name:"더부동산 고객",mobileNumber:"",email:""},appearance:"system",language:"ko",zIndex:999999})},t.onerror=()=>{},document.head.appendChild(t),()=>{if(window.ChannelIO)try{window.ChannelIO("shutdown")}catch(e){}}},[e]),e?Ue.jsxs(Ue.Fragment,{children:[Ue.jsxs("button",{onClick:()=>{window.ChannelIO&&window.ChannelIO("show")},className:"fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-50 p-3 sm:p-4 bg-gradient-to-r from-pink-500 to-pink-600 text-white rounded-full shadow-lg hover:shadow-xl hover:from-pink-600 hover:to-pink-700 transition-all duration-300 group active:scale-95",style:{width:"56px",height:"56px","@media (min-width: 640px)":{width:"60px",height:"60px"}},"aria-label":"고객 지원 채팅",children:[Ue.jsx(Z,{className:"w-5 h-5 sm:w-6 sm:h-6 mx-auto group-hover:scale-110 transition-transform duration-200"}),Ue.jsxs("span",{className:"absolute -top-1 -right-1 h-3 w-3 sm:h-4 sm:w-4 bg-red-500 rounded-full flex items-center justify-center",children:[Ue.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75 animate-ping"}),Ue.jsx("span",{className:"relative inline-flex rounded-full h-1.5 w-1.5 sm:h-2 sm:w-2 bg-red-500"})]})]}),Ue.jsx("div",{className:"fixed bottom-6 right-20 z-40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none",children:Ue.jsxs("div",{className:"bg-gray-800 text-white px-3 py-2 rounded-lg text-sm whitespace-nowrap",children:["문의하기",Ue.jsx("div",{className:"absolute top-1/2 right-0 transform translate-x-full -translate-y-1/2",children:Ue.jsx("div",{className:"w-0 h-0 border-l-4 border-l-gray-800 border-y-4 border-y-transparent"})})]})})]}):null},vd=()=>{var e;const{user:s}=_s(),r=n(),[a,i]=t.useState(!1),l=["/properties"].some(e=>r.pathname.startsWith(e))&&!r.pathname.startsWith("/my-properties");return Ue.jsx(fd,{children:Ue.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ue.jsx(gd,{}),Ue.jsx(xd,{isMobileOpen:a,setIsMobileOpen:i}),Ue.jsxs("div",{className:"main-layout",children:[Ue.jsx("header",{className:"main-header",children:Ue.jsxs("div",{className:"flex items-center justify-between w-full",children:[Ue.jsxs("div",{className:"flex items-center flex-1",children:[Ue.jsx("button",{onClick:()=>{i(!a)},className:"lg:hidden mr-4 p-2.5 rounded-xl bg-white shadow-lg text-gray-700 border border-gray-200 hover:bg-pink-50 hover:border-pink-300 transition-all duration-200",style:{width:"44px",height:"44px"},children:a?Ue.jsx(te,{className:"w-5 h-5 text-pink-600 mx-auto"}):Ue.jsxs("div",{className:"flex flex-col space-y-1 items-center",children:[Ue.jsx("div",{className:"w-5 h-0.5 bg-pink-600 rounded-full"}),Ue.jsx("div",{className:"w-5 h-0.5 bg-pink-600 rounded-full"}),Ue.jsx("div",{className:"w-5 h-0.5 bg-pink-600 rounded-full"})]})}),l&&Ue.jsx("div",{className:"hidden lg:flex items-center flex-1",children:Ue.jsx(yd,{})})]}),Ue.jsxs("div",{className:"flex items-center space-x-3",children:[Ue.jsxs("button",{className:"relative p-2.5 text-gray-600 hover:text-pink-600 hover:bg-pink-50 rounded-lg transition-all duration-200 border border-transparent hover:border-pink-200",children:[Ue.jsx(C,{className:"w-5 h-5"}),Ue.jsxs("span",{className:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full flex items-center justify-center",children:[Ue.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75 animate-ping"}),Ue.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]})]}),Ue.jsxs("div",{className:"flex items-center bg-white rounded-lg border border-gray-200 p-2 hover:bg-pink-50 hover:border-pink-200 transition-all duration-200",children:[Ue.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-r from-pink-500 to-pink-600 flex items-center justify-center text-white font-semibold text-sm shadow-sm",children:((null==s?void 0:s.name)||(null==s?void 0:s.email)||"U")[0].toUpperCase()}),Ue.jsx("span",{className:"hidden sm:inline text-sm font-medium text-gray-700 ml-2 mr-1",children:(null==s?void 0:s.name)||(null==(e=null==s?void 0:s.email)?void 0:e.split("@")[0])})]})]})]})}),l&&Ue.jsx("div",{className:"lg:hidden px-4 py-2 bg-white border-b border-gray-200",children:Ue.jsx(yd,{})}),Ue.jsx("main",{className:"main-content",children:Ue.jsx(u,{})})]}),Ue.jsx(bd,{})]})})},jd=()=>{const e=l(),[s,r]=t.useState(""),[a,n]=t.useState("");t.useEffect(()=>{const e=setTimeout(()=>{n(s)},300);return()=>clearTimeout(e)},[s]);const{data:i=[],isLoading:o,error:c}=Ht(["customers",a],async()=>{let e=hs.from("customers").select("\n          *,\n          user:user_id (\n            name,\n            email\n          )\n        ").order("created_at",{ascending:!1});a&&(e=e.or(`\n          name.ilike.%${a}%,\n          phone.ilike.%${a}%,\n          email.ilike.%${a}%\n        `));const{data:t,error:s}=await e;if(s)throw s;return t||[]},{staleTime:3e5,refetchOnWindowFocus:!1});return Ue.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[Ue.jsxs("div",{className:"sm:flex sm:items-center",children:[Ue.jsxs("div",{className:"sm:flex-auto",children:[Ue.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"고객 관리"}),Ue.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"고객 정보 조회, 등록 및 관리"})]}),Ue.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:Ue.jsxs("button",{type:"button",onClick:()=>{e("/customers/new")},className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[Ue.jsx(Ee,{className:"w-4 h-4 mr-2"}),"고객 등록"]})})]}),Ue.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[Ue.jsxs("div",{className:"relative flex-1 max-w-lg",children:[Ue.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Ue.jsx(M,{className:"h-5 w-5 text-gray-400"})}),Ue.jsx("input",{type:"text",value:s,onChange:e=>{r(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"이름, 전화번호 또는 이메일 검색"})]}),Ue.jsxs("div",{className:"ml-3 text-sm text-gray-500",children:["총 ",i.length,"명의 고객"]})]}),Ue.jsx("div",{className:"mt-6 flex flex-col",children:Ue.jsx("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Ue.jsx("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Ue.jsx("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Ue.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ue.jsx("thead",{className:"bg-gray-50",children:Ue.jsxs("tr",{children:[Ue.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"고객명"}),Ue.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"연락처"}),Ue.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"담당자"}),Ue.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등록일"})]})}),Ue.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o?Ue.jsx("tr",{children:Ue.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:Ue.jsxs("div",{className:"flex justify-center",children:[Ue.jsx("div",{className:"w-5 h-5 border-2 border-t-blue-600 border-blue-200 rounded-full animate-spin"}),Ue.jsx("span",{className:"ml-2",children:"로딩 중..."})]})})}):c?Ue.jsx("tr",{children:Ue.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-red-500",children:"데이터를 불러오는 중 오류가 발생했습니다."})}):0===i.length?Ue.jsx("tr",{children:Ue.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:a?"검색 결과가 없습니다.":"등록된 고객이 없습니다."})}):i.map(t=>{var s,r;return Ue.jsxs("tr",{onClick:()=>{return s=t.id,void e(`/customers/${s}`);var s},className:"cursor-pointer hover:bg-gray-50",children:[Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-gray-100 rounded-full",children:Ue.jsx(H,{className:"h-5 w-5 text-gray-500"})}),Ue.jsxs("div",{className:"ml-4",children:[Ue.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.email&&Ue.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})]})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx(B,{className:"h-4 w-4 text-gray-400 mr-2"}),Ue.jsx("span",{className:"text-sm text-gray-900",children:t.phone||"-"})]})}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null==(s=t.user)?void 0:s.name)||"-"}),Ue.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(r=t.created_at,r?new Date(r).toLocaleDateString():"-")})]},t.id)})})]})})})})})]})},wd=()=>{var e;const{id:s}=c(),r=l(),[a,n]=t.useState("info"),{data:i,isLoading:o,error:d}=Ht(["customer",s],async()=>{const{data:e,error:t}=await hs.from("customers").select("\n          *,\n          user:user_id (\n            name,\n            email\n          )\n        ").eq("id",s).single();if(t)throw t;return e},{enabled:!!s,staleTime:3e5,refetchOnWindowFocus:!1}),{data:u=[]}=Ht(["customerInterests",s],async()=>{const{data:e,error:t}=await hs.from("customer_interests").select("\n          *,\n          property_type:property_type_id (name),\n          transaction_type:transaction_type_id (name)\n        ").eq("customer_id",s).order("created_at",{ascending:!1});if(t)throw t;return e||[]},{enabled:!!s,staleTime:3e5}),{data:m=[]}=Ht(["customerFunnelEvents",s],async()=>{const{data:e,error:t}=await hs.from("funnel_events").select("\n          *,\n          property:property_id (\n            property_name,\n            location\n          ),\n          stage:stage_id (\n            name,\n            color\n          ),\n          previous_stage:previous_stage_id (\n            name\n          ),\n          user:user_id (\n            name\n          )\n        ").eq("customer_id",s).order("event_date",{ascending:!1});if(t)throw t;return e||[]},{enabled:!!s&&"history"===a,staleTime:3e5}),{data:h=[]}=Ht(["customerProperties",s],async()=>{const{data:e,error:t}=await hs.from("properties").select("\n          id,\n          property_name,\n          location,\n          property_type,\n          property_status,\n          transaction_type,\n          price,\n          created_at\n        ").eq("customer_id",s).order("created_at",{ascending:!1});if(t)throw t;return e||[]},{enabled:!!s&&"properties"===a,staleTime:3e5}),p=e=>e?new Date(e).toLocaleDateString():"-",x=()=>{r("/customers")},f=e=>{n(e)};if(o)return Ue.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8 flex justify-center",children:[Ue.jsx("div",{className:"w-6 h-6 border-2 border-t-blue-600 border-blue-200 rounded-full animate-spin"}),Ue.jsx("span",{className:"ml-2",children:"고객 정보 로딩 중..."})]});if(d)return Ue.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[Ue.jsx("div",{className:"bg-red-50 p-4 rounded-md",children:Ue.jsxs("div",{className:"flex",children:[Ue.jsx("div",{className:"flex-shrink-0",children:Ue.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ue.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Ue.jsxs("div",{className:"ml-3",children:[Ue.jsx("h3",{className:"text-sm font-medium text-red-800",children:"고객 정보를 불러오는 중 오류가 발생했습니다."}),Ue.jsx("div",{className:"mt-2 text-sm text-red-700",children:Ue.jsx("p",{children:d.message})})]})]})}),Ue.jsx("div",{className:"mt-4",children:Ue.jsxs("button",{type:"button",onClick:x,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[Ue.jsx(re,{className:"w-4 h-4 mr-2"}),"돌아가기"]})})]});if(!i)return Ue.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[Ue.jsx("div",{className:"bg-yellow-50 p-4 rounded-md",children:Ue.jsxs("div",{className:"flex",children:[Ue.jsx("div",{className:"flex-shrink-0",children:Ue.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ue.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),Ue.jsx("div",{className:"ml-3",children:Ue.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"고객 정보를 찾을 수 없습니다."})})]})}),Ue.jsx("div",{className:"mt-4",children:Ue.jsxs("button",{type:"button",onClick:x,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[Ue.jsx(re,{className:"w-4 h-4 mr-2"}),"돌아가기"]})})]});const g=e=>({available:"거래가능",reserved:"거래보류",completed:"거래완료"}[e]||e);return Ue.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[Ue.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ue.jsxs("div",{className:"flex items-center",children:[Ue.jsx("button",{type:"button",onClick:x,className:"mr-4 text-gray-400 hover:text-gray-500",children:Ue.jsx(re,{className:"w-5 h-5"})}),Ue.jsxs("h1",{className:"text-2xl font-semibold text-gray-900",children:[i.name," 님 상세 정보"]})]}),Ue.jsxs("button",{type:"button",onClick:()=>{r(`/customers/${s}/edit`)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[Ue.jsx(V,{className:"w-4 h-4 mr-2"}),"정보 수정"]})]}),Ue.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-6",children:[Ue.jsxs("div",{className:"px-4 py-5 sm:px-6 bg-gray-50",children:[Ue.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"고객 기본 정보"}),Ue.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"개인 정보 및 연락처"})]}),Ue.jsx("div",{className:"border-t border-gray-200",children:Ue.jsxs("dl",{children:[Ue.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ue.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ue.jsx(H,{className:"w-4 h-4 mr-2"}),"이름"]}),Ue.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:i.name})]}),Ue.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ue.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ue.jsx(B,{className:"w-4 h-4 mr-2"}),"연락처"]}),Ue.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:i.phone||"-"})]}),Ue.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ue.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ue.jsx(Ce,{className:"w-4 h-4 mr-2"}),"이메일"]}),Ue.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:i.email||"-"})]}),Ue.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ue.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ue.jsx(H,{className:"w-4 h-4 mr-2"}),"담당자"]}),Ue.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(null==(e=i.user)?void 0:e.name)||"-"})]}),Ue.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ue.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ue.jsx(U,{className:"w-4 h-4 mr-2"}),"등록일"]}),Ue.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:p(i.created_at)})]}),i.notes&&Ue.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ue.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ue.jsx(w,{className:"w-4 h-4 mr-2"}),"메모"]}),Ue.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 whitespace-pre-line",children:i.notes})]})]})})]}),Ue.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[Ue.jsx("div",{className:"border-b border-gray-200",children:Ue.jsxs("nav",{className:"-mb-px flex",children:[Ue.jsx("button",{onClick:()=>f("info"),className:("info"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm",children:"관심 정보"}),Ue.jsx("button",{onClick:()=>f("properties"),className:("properties"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm",children:"연결 매물"}),Ue.jsx("button",{onClick:()=>f("history"),className:("history"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm",children:"상담 이력"})]})}),Ue.jsxs("div",{className:"px-4 py-5 sm:px-6",children:["info"===a&&Ue.jsxs("div",{children:[Ue.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"관심 매물 정보"}),0===u.length?Ue.jsx("div",{className:"text-center py-6 text-gray-500",children:"등록된 관심 정보가 없습니다."}):Ue.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:Ue.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[Ue.jsx("thead",{className:"bg-gray-50",children:Ue.jsxs("tr",{children:[Ue.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"매물종류"}),Ue.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"지역"}),Ue.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"거래유형"}),Ue.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"가격대"}),Ue.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"등록일"})]})}),Ue.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:u.map(e=>{var t,s;return Ue.jsxs("tr",{children:[Ue.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:(null==(t=e.property_type)?void 0:t.name)||"-"}),Ue.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.location||"-"}),Ue.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(null==(s=e.transaction_type)?void 0:s.name)||"-"}),Ue.jsxs("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:[e.min_price||"0"," ~ ",e.max_price||"무제한"]}),Ue.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:p(e.created_at)})]},e.id)})})]})})]}),"properties"===a&&Ue.jsxs("div",{children:[Ue.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"연결된 매물"}),0===h.length?Ue.jsx("div",{className:"text-center py-6 text-gray-500",children:"연결된 매물이 없습니다."}):Ue.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:h.map(e=>{return Ue.jsx("div",{onClick:()=>r(`/properties/${e.id}`),className:"bg-white overflow-hidden shadow rounded-lg border border-gray-200 cursor-pointer hover:shadow-md transition-shadow duration-200",children:Ue.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[Ue.jsx("h4",{className:"text-lg font-semibold text-gray-900 truncate",children:e.property_name}),Ue.jsxs("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[Ue.jsx(q,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),Ue.jsx("span",{className:"truncate",children:e.location})]}),Ue.jsxs("div",{className:"mt-3 flex items-center space-x-2",children:[Ue.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:(s=e.property_type,{apt:"아파트",officetel:"오피스텔",villa:"빌라/연립",house:"단독주택",commercial:"상가"}[s]||s)}),Ue.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t=e.property_status,{available:"text-green-600",reserved:"text-yellow-600",completed:"text-blue-600"}[t]||"text-gray-600"}`,children:g(e.property_status)})]})]})},e.id);var t,s})})]}),"history"===a&&Ue.jsxs("div",{children:[Ue.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"상담 및 진행 이력"}),0===m.length?Ue.jsx("div",{className:"text-center py-6 text-gray-500",children:"상담 이력이 없습니다."}):Ue.jsx("div",{className:"flow-root",children:Ue.jsx("ul",{className:"-mb-8",children:m.map((e,t)=>{var s,r,a,n;return Ue.jsx("li",{children:Ue.jsxs("div",{className:"relative pb-8",children:[t!==m.length-1?Ue.jsx("span",{className:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,Ue.jsxs("div",{className:"relative flex items-start space-x-3",children:[Ue.jsx("div",{children:Ue.jsx("div",{className:"relative px-1",children:Ue.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full ring-8 ring-white flex items-center justify-center",children:Ue.jsx(ue,{className:"h-5 w-5 text-blue-500"})})})}),Ue.jsxs("div",{className:"min-w-0 flex-1 py-1.5",children:[Ue.jsxs("div",{className:"text-sm text-gray-500",children:[Ue.jsxs("div",{className:"font-medium text-gray-900",children:[(null==(s=e.stage)?void 0:s.name)||"상태 변경",(null==(r=e.previous_stage)?void 0:r.name)&&` (이전: ${e.previous_stage.name})`]}),Ue.jsx("span",{className:"whitespace-nowrap",children:(n=e.event_date,n?new Date(n).toLocaleString():"-")}),(null==(a=e.user)?void 0:a.name)&&Ue.jsxs("span",{children:[" · 담당자: ",e.user.name]})]}),e.property&&Ue.jsxs("div",{className:"mt-2 text-sm text-gray-700",children:[Ue.jsx("span",{className:"font-medium",children:e.property.property_name}),e.property.location&&Ue.jsxs("span",{children:[" · ",e.property.location]})]}),e.notes&&Ue.jsx("div",{className:"mt-2 text-sm text-gray-700 bg-gray-50 p-2 rounded",children:e.notes})]})]})]})},e.id)})})})]})]})]})]})},Nd=({isEditing:e=!1})=>{const{id:s}=c(),r=l(),a=zt(),{user:n}=_s(),[i,o]=t.useState(!1),[d,u]=t.useState(null),[m,h]=t.useState(!1),[p,x]=t.useState(!1),{data:f,isLoading:g}=Ht(["customer",s],async()=>{if(!s)return null;const{data:e,error:t}=await hs.from("customers").select("*").eq("id",s).single();if(t)throw t;return e},{enabled:e&&!!s,onError:e=>{u(`고객 정보를 불러오는데 실패했습니다: ${e.message}`)}}),y=async t=>{if(!t||""===t.trim())return!1;try{let r=hs.from("customers").select("id, phone").eq("phone",t);e&&s&&(r=r.neq("id",s));const{data:a,error:n}=await r;if(n)throw n;return a&&a.length>0}catch(r){return!1}},b=Gt(async t=>{if(e){const{data:e,error:r}=await hs.from("customers").update(t).eq("id",s).select();if(r)throw r;return e}{const{data:e,error:s}=await hs.from("customers").insert([{...t,user_id:n.id}]).select();if(s)throw s;return e}},{onSuccess:()=>{a.invalidateQueries(["customers"]),e&&a.invalidateQueries(["customer",s]),h(!0),setTimeout(()=>{r("/customers")},2e3)},onError:t=>{u(`고객 ${e?"수정":"등록"}에 실패했습니다: ${t.message}`)},onSettled:()=>{o(!1)}}),v=co({initialValues:{name:(null==f?void 0:f.name)||"",phone:(null==f?void 0:f.phone)||"",email:(null==f?void 0:f.email)||"",source:(null==f?void 0:f.source)||"",notes:(null==f?void 0:f.notes)||""},validationSchema:Bc({name:Oc().required("고객명은 필수 입력사항입니다"),phone:Oc().test("phone-exists","이미 등록된 전화번호입니다",function(e){return!e||!p}),email:Oc().email("유효한 이메일 주소를 입력해주세요")}),onSubmit:async function(e){if(o(!0),u(null),e.phone&&""!==e.phone.trim()&&await y(e.phone))return x(!0),void o(!1);b.mutate(e)},enableReinitialize:!0});return t.useEffect(()=>{const e=setTimeout(()=>{(async()=>{if(v.values.phone&&""!==v.values.phone.trim()){const e=await y(v.values.phone);x(e)}else x(!1)})()},500);return()=>clearTimeout(e)},[v.values.phone]),e&&g?Ue.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ue.jsx("div",{className:"w-12 h-12 border-4 border-pink-500 border-t-transparent rounded-full animate-spin"}),Ue.jsx("p",{className:"ml-2 text-gray-600",children:"고객 정보를 불러오는 중..."})]}):Ue.jsx("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:Ue.jsxs("div",{className:"max-w-3xl mx-auto",children:[Ue.jsx("div",{className:"md:flex md:items-center md:justify-between mb-6",children:Ue.jsxs("div",{className:"flex-1 min-w-0 flex items-center",children:[Ue.jsx("button",{type:"button",onClick:()=>r("/customers"),className:"mr-4 text-gray-400 hover:text-gray-500",children:Ue.jsx(re,{className:"w-5 h-5"})}),Ue.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:e?"고객 정보 수정":"신규 고객 등록"})]})}),d&&Ue.jsx("div",{className:"mb-4 p-4 bg-red-50 rounded-md",children:Ue.jsxs("div",{className:"flex",children:[Ue.jsx("div",{className:"flex-shrink-0",children:Ue.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ue.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Ue.jsxs("div",{className:"ml-3",children:[Ue.jsx("h3",{className:"text-sm font-medium text-red-800",children:"오류가 발생했습니다"}),Ue.jsx("div",{className:"mt-2 text-sm text-red-700",children:Ue.jsx("p",{children:d})})]})]})}),m&&Ue.jsx("div",{className:"mb-4 p-4 bg-green-50 rounded-md",children:Ue.jsxs("div",{className:"flex",children:[Ue.jsx("div",{className:"flex-shrink-0",children:Ue.jsx("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ue.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),Ue.jsxs("div",{className:"ml-3",children:[Ue.jsxs("h3",{className:"text-sm font-medium text-green-800",children:["고객 정보가 성공적으로 ",e?"수정":"등록","되었습니다"]}),Ue.jsx("div",{className:"mt-2 text-sm text-green-700",children:Ue.jsx("p",{children:"고객 목록 페이지로 이동합니다..."})})]})]})}),Ue.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:Ue.jsx("div",{className:"px-4 py-5 sm:p-6",children:Ue.jsxs("form",{onSubmit:v.handleSubmit,children:[Ue.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[Ue.jsxs("div",{className:"sm:col-span-3",children:[Ue.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["고객명 ",Ue.jsx("span",{className:"text-red-500",children:"*"})]}),Ue.jsxs("div",{className:"mt-1",children:[Ue.jsx("input",{type:"text",name:"name",id:"name",value:v.values.name,onChange:v.handleChange,onBlur:v.handleBlur,className:"shadow-sm focus:ring-pink-500 focus:border-pink-500 block w-full sm:text-sm border-gray-300 rounded-md "+(v.touched.name&&v.errors.name?"border-red-300":""),placeholder:"고객 이름"}),v.touched.name&&v.errors.name&&Ue.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.errors.name})]})]}),Ue.jsxs("div",{className:"sm:col-span-3",children:[Ue.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"전화번호"}),Ue.jsxs("div",{className:"mt-1",children:[Ue.jsx("input",{type:"tel",name:"phone",id:"phone",value:v.values.phone,onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");v.setFieldValue("phone",t)},onBlur:v.handleBlur,className:"shadow-sm focus:ring-pink-500 focus:border-pink-500 block w-full sm:text-sm border-gray-300 rounded-md "+(v.touched.phone&&v.errors.phone||p?"border-red-300":""),placeholder:"01012345678",maxLength:"11",inputMode:"numeric"}),v.touched.phone&&v.errors.phone&&Ue.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.errors.phone}),p&&Ue.jsx("p",{className:"mt-2 text-sm text-red-600",children:"이미 등록된 전화번호입니다"}),Ue.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"숫자만 입력하세요 (하이픈 없이)"})]})]}),Ue.jsxs("div",{className:"sm:col-span-3",children:[Ue.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"이메일"}),Ue.jsxs("div",{className:"mt-1",children:[Ue.jsx("input",{type:"text",name:"email",id:"email",value:v.values.email,onChange:v.handleChange,onBlur:v.handleBlur,className:"shadow-sm focus:ring-pink-500 focus:border-pink-500 block w-full sm:text-sm border-gray-300 rounded-md "+(v.touched.email&&v.errors.email?"border-red-300":""),placeholder:"example@email.com"}),v.touched.email&&v.errors.email&&Ue.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.errors.email})]})]}),Ue.jsxs("div",{className:"sm:col-span-3",children:[Ue.jsx("label",{htmlFor:"source",className:"block text-sm font-medium text-gray-700",children:"유입 경로"}),Ue.jsx("div",{className:"mt-1",children:Ue.jsxs("select",{id:"source",name:"source",value:v.values.source,onChange:v.handleChange,className:"shadow-sm focus:ring-pink-500 focus:border-pink-500 block w-full sm:text-sm border-gray-300 rounded-md",children:[Ue.jsx("option",{value:"",children:"선택하세요"}),Ue.jsx("option",{value:"direct",children:"직접 방문"}),Ue.jsx("option",{value:"referral",children:"지인 소개"}),Ue.jsx("option",{value:"phone",children:"전화 문의"}),Ue.jsx("option",{value:"portal",children:"부동산 포털"}),Ue.jsx("option",{value:"chat",children:"채팅/메시지"}),Ue.jsx("option",{value:"other",children:"기타"})]})})]}),Ue.jsxs("div",{className:"sm:col-span-6",children:[Ue.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"메모"}),Ue.jsx("div",{className:"mt-1",children:Ue.jsx("textarea",{id:"notes",name:"notes",rows:"4",value:v.values.notes,onChange:v.handleChange,className:"shadow-sm focus:ring-pink-500 focus:border-pink-500 block w-full sm:text-sm border border-gray-300 rounded-md",placeholder:"고객 관련 메모사항을 입력하세요"})})]})]}),Ue.jsxs("div",{className:"mt-8 flex justify-end",children:[Ue.jsx("button",{type:"button",onClick:()=>r("/customers"),className:"mr-3 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500",children:"취소"}),Ue.jsxs("button",{type:"submit",disabled:i||p,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-pink-500 hover:bg-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500 disabled:bg-pink-300",children:[Ue.jsx(Oe,{className:"w-4 h-4 mr-2"}),i?Ue.jsx(Ue.Fragment,{children:"처리 중..."}):e?Ue.jsx(Ue.Fragment,{children:"수정 완료"}):Ue.jsx(Ue.Fragment,{children:"등록 완료"})]})]})]})})})]})})},_d=()=>{const{id:e}=c(),t=!!e;return Ue.jsx(Nd,{isEditing:t})},kd=new Tt({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:(e,t)=>{var s;return!!((null==t?void 0:t.status)>=500||(null==(s=null==t?void 0:t.message)?void 0:s.includes("fetch")))&&e<2},staleTime:3e5,cacheTime:6e5},mutations:{retry:!1}}});function Sd(){return Ue.jsx(ks,{children:Ue.jsx(Qt,{client:kd,children:Ue.jsx(Ns,{children:Ue.jsx(m,{basename:"/the-realty-itemlist-dashboard",children:Ue.jsx(Ss,{children:Ue.jsxs(h,{children:[Ue.jsx(x,{path:"/login",element:Ue.jsx(Cs,{})}),Ue.jsx(x,{path:"/auth/callback",element:Ue.jsx(Os,{})}),Ue.jsx(x,{path:"/auth/process",element:Ue.jsx(Ts,{})}),Ue.jsxs(x,{element:Ue.jsx(vd,{}),children:[Ue.jsx(x,{path:"/",element:Ue.jsx(ma,{})}),Ue.jsx(x,{path:"/properties",element:Ue.jsx(ha,{})}),Ue.jsx(x,{path:"/my-properties",element:Ue.jsx(fa,{})}),Ue.jsx(x,{path:"/properties/new",element:Ue.jsx(Qc,{})}),Ue.jsx(x,{path:"/properties/:id",element:Ue.jsx(Sa,{})}),Ue.jsx(x,{path:"/properties/:id/edit",element:Ue.jsx(Qc,{})}),Ue.jsx(x,{path:"/users",element:Ue.jsx(Zc,{})}),Ue.jsx(x,{path:"/performance",element:Ue.jsx(sd,{})}),Ue.jsx(x,{path:"/performance/:id",element:Ue.jsx(rd,{})}),Ue.jsx(x,{path:"/users/:userId/performance",element:Ue.jsx(td,{})}),Ue.jsx(x,{path:"/csv-import",element:Ue.jsx(ad,{})}),Ue.jsx(x,{path:"/properties/upload",element:Ue.jsx(ad,{})}),Ue.jsx(x,{path:"/data-collection",element:Ue.jsx(pd,{})}),Ue.jsx(x,{path:"/settings",element:Ue.jsx(ld,{})}),Ue.jsx(x,{path:"/updates",element:Ue.jsx(od,{})}),Ue.jsx(x,{path:"/customers",element:Ue.jsx(jd,{})}),Ue.jsx(x,{path:"/customers/new",element:Ue.jsx(_d,{})}),Ue.jsx(x,{path:"/customers/:id",element:Ue.jsx(wd,{})}),Ue.jsx(x,{path:"/customers/:id/edit",element:Ue.jsx(_d,{})})]}),Ue.jsx(x,{path:"*",element:Ue.jsx(i,{to:"/",replace:!0})})]})})})})})})}window.addEventListener("error",e=>{}),window.addEventListener("unhandledrejection",e=>{});try{const e=document.getElementById("root");if(!e)throw new Error("Root element not found");Be.createRoot(e).render(Ue.jsx(a.StrictMode,{children:Ue.jsx(Sd,{})}))}catch(Cd){document.body.innerHTML='\n    <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">\n      <h1>팀 매물장 로딩 중...</h1>\n      <p>잠시만 기다려주세요.</p>\n      <p style="color: #666; font-size: 12px;">오류가 지속되면 페이지를 새로고침해주세요.</p>\n    </div>\n  '}}},function(){return De||(0,Ae[e(Ae)[0]])((De={exports:{}}).exports,De),De.exports});export default Fe();
