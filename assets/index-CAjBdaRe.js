var e=Object.getOwnPropertyNames;import{r as t,b as r,d as s,R as a,u as n,N as i,e as l,L as o,f as c,a as d,O as u,B as m,h,i as p}from"./react-vendor-DilD2z74.js";import{_ as x,a as f,A as g,B as y,P as b,C as v,b as j,c as w,R as N,d as _,e as S,X as k,Y as E,f as C,T as O,g as T,h as A,i as D,j as P,U as F,k as M,M as I,H as R,l as $,m as L,E as q,S as z,n as U,L as B,G as V,o as Q,p as G,q as W,r as K,s as Y,t as H,u as J,v as X,w as Z,x as ee,y as te,z as re,D as se,F as ae,I as ne,J as ie,K as le,N as oe,O as ce,Q as de,V as ue,W as me,Z as he,$ as pe,a0 as xe,a1 as fe,a2 as ge,a3 as ye,a4 as be,a5 as ve,a6 as je,a7 as we,a8 as Ne,a9 as _e}from"./ui-vendor-CJI54NKg.js";import{c as Se}from"./supabase-vendor-BoTMvlkA.js";var ke,Ee,Ce=(ke={"assets/index-CAjBdaRe.js"(e,ke){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ee={exports:{}},Ce={},Oe=t,Te=Symbol.for("react.element"),Ae=Symbol.for("react.fragment"),De=Object.prototype.hasOwnProperty,Pe=Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fe={key:!0,ref:!0,__self:!0,__source:!0};function Me(e,t,r){var s,a={},n=null,i=null;for(s in void 0!==r&&(n=""+r),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(i=t.ref),t)De.call(t,s)&&!Fe.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:Te,type:e,key:n,ref:i,props:a,_owner:Pe.current}}Ce.Fragment=Ae,Ce.jsx=Me,Ce.jsxs=Me,Ee.exports=Ce;var Ie=Ee.exports,Re={},$e=r;Re.createRoot=$e.createRoot,Re.hydrateRoot=$e.hydrateRoot;var Le=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(e){var t=this,r=e||function(){};return this.listeners.push(r),this.onSubscribe(),function(){t.listeners=t.listeners.filter(function(e){return e!==r}),t.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),qe="undefined"==typeof window;function ze(){}function Ue(e){return"number"==typeof e&&e>=0&&e!==1/0}function Be(e){return Array.isArray(e)?e:[e]}function Ve(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Qe(e,t,r){return rt(e)?"function"==typeof t?x({},r,{queryKey:e,queryFn:t}):x({},t,{queryKey:e}):e}function Ge(e,t,r){return rt(e)?[x({},t,{queryKey:e}),r]:[e||{},t]}function We(e,t){var r=e.active,s=e.exact,a=e.fetching,n=e.inactive,i=e.predicate,l=e.queryKey,o=e.stale;if(rt(l))if(s){if(t.queryHash!==Ye(l,t.options))return!1}else if(!Je(t.queryKey,l))return!1;var c=function(e,t){return!0===e&&!0===t||null==e&&null==t?"all":!1===e&&!1===t?"none":(null!=e?e:!t)?"active":"inactive"}(r,n);if("none"===c)return!1;if("all"!==c){var d=t.isActive();if("active"===c&&!d)return!1;if("inactive"===c&&d)return!1}return!("boolean"==typeof o&&t.isStale()!==o||"boolean"==typeof a&&t.isFetching()!==a||i&&!i(t))}function Ke(e,t){var r=e.exact,s=e.fetching,a=e.predicate,n=e.mutationKey;if(rt(n)){if(!t.options.mutationKey)return!1;if(r){if(He(t.options.mutationKey)!==He(n))return!1}else if(!Je(t.options.mutationKey,n))return!1}return!("boolean"==typeof s&&"loading"===t.state.status!==s||a&&!a(t))}function Ye(e,t){return((null==t?void 0:t.queryKeyHashFn)||He)(e)}function He(e){var t,r=Be(e);return t=r,JSON.stringify(t,function(e,t){return et(t)?Object.keys(t).sort().reduce(function(e,r){return e[r]=t[r],e},{}):t})}function Je(e,t){return Xe(Be(e),Be(t))}function Xe(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&!Object.keys(t).some(function(r){return!Xe(e[r],t[r])})}function Ze(e,t){if(e===t)return e;var r=Array.isArray(e)&&Array.isArray(t);if(r||et(e)&&et(t)){for(var s=r?e.length:Object.keys(e).length,a=r?t:Object.keys(t),n=a.length,i=r?[]:{},l=0,o=0;o<n;o++){var c=r?o:a[o];i[c]=Ze(e[c],t[c]),i[c]===e[c]&&l++}return s===n&&l===s?e:i}return t}function et(e){if(!tt(e))return!1;var t=e.constructor;if(void 0===t)return!0;var r=t.prototype;return!!tt(r)&&!!r.hasOwnProperty("isPrototypeOf")}function tt(e){return"[object Object]"===Object.prototype.toString.call(e)}function rt(e){return"string"==typeof e||Array.isArray(e)}function st(e){Promise.resolve().then(e).catch(function(e){return setTimeout(function(){throw e})})}function at(){if("function"==typeof AbortController)return new AbortController}var nt=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!qe&&(null==(t=window)?void 0:t.addEventListener)){var r=function(){return e()};return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),function(){window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}},t}f(t,e);var r=t.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},r.setEventListener=function(e){var t,r=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"==typeof e?r.setFocused(e):r.onFocus()})},r.setFocused=function(e){this.focused=e,e&&this.onFocus()},r.onFocus=function(){this.listeners.forEach(function(e){e()})},r.isFocused=function(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(Le)),it=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!qe&&(null==(t=window)?void 0:t.addEventListener)){var r=function(){return e()};return window.addEventListener("online",r,!1),window.addEventListener("offline",r,!1),function(){window.removeEventListener("online",r),window.removeEventListener("offline",r)}}},t}f(t,e);var r=t.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},r.setEventListener=function(e){var t,r=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"==typeof e?r.setOnline(e):r.onOnline()})},r.setOnline=function(e){this.online=e,e&&this.onOnline()},r.onOnline=function(){this.listeners.forEach(function(e){e()})},r.isOnline=function(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine},t}(Le));function lt(e){return Math.min(1e3*Math.pow(2,e),3e4)}function ot(e){return"function"==typeof(null==e?void 0:e.cancel)}var ct=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};function dt(e){return e instanceof ct}var ut=function(e){var t,r,s,a,n=this,i=!1;this.abort=e.abort,this.cancel=function(e){return null==t?void 0:t(e)},this.cancelRetry=function(){i=!0},this.continueRetry=function(){i=!1},this.continue=function(){return null==r?void 0:r()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(e,t){s=e,a=t});var l=function(t){n.isResolved||(n.isResolved=!0,null==e.onSuccess||e.onSuccess(t),null==r||r(),s(t))},o=function(t){n.isResolved||(n.isResolved=!0,null==e.onError||e.onError(t),null==r||r(),a(t))};!function s(){if(!n.isResolved){var a;try{a=e.fn()}catch(c){a=Promise.reject(c)}t=function(e){if(!n.isResolved&&(o(new ct(e)),null==n.abort||n.abort(),ot(a)))try{a.cancel()}catch(t){}},n.isTransportCancelable=ot(a),Promise.resolve(a).then(l).catch(function(t){var a,l;if(!n.isResolved){var c,d=null!=(a=e.retry)?a:3,u=null!=(l=e.retryDelay)?l:lt,m="function"==typeof u?u(n.failureCount,t):u,h=!0===d||"number"==typeof d&&n.failureCount<d||"function"==typeof d&&d(n.failureCount,t);!i&&h?(n.failureCount++,null==e.onFail||e.onFail(n.failureCount,t),(c=m,new Promise(function(e){setTimeout(e,c)})).then(function(){if(!nt.isFocused()||!it.isOnline())return new Promise(function(t){r=t,n.isPaused=!0,null==e.onPause||e.onPause()}).then(function(){r=void 0,n.isPaused=!1,null==e.onContinue||e.onContinue()})}).then(function(){i?o(t):s()})):o(t)}})}}()},mt=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var t=e.prototype;return t.batch=function(e){var t;this.transactions++;try{t=e()}finally{this.transactions--,this.transactions||this.flush()}return t},t.schedule=function(e){var t=this;this.transactions?this.queue.push(e):st(function(){t.notifyFn(e)})},t.batchCalls=function(e){var t=this;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];t.schedule(function(){e.apply(void 0,s)})}},t.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&st(function(){e.batchNotifyFn(function(){t.forEach(function(t){e.notifyFn(t)})})})},t.setNotifyFunction=function(e){this.notifyFn=e},t.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}(),ht=new mt,pt=console;function xt(){return pt}var ft=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(e){var t;this.options=x({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},t.setDefaultOptions=function(e){this.defaultOptions=e},t.scheduleGc=function(){var e=this;this.clearGcTimeout(),Ue(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){e.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(e,t){var r,s,a=this.state.data,n=function(e,t){return"function"==typeof e?e(t):e}(e,a);return(null==(r=(s=this.options).isDataEqual)?void 0:r.call(s,a,n))?n=a:!1!==this.options.structuralSharing&&(n=Ze(a,n)),this.dispatch({data:n,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt}),n},t.setState=function(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})},t.cancel=function(e){var t,r=this.promise;return null==(t=this.retryer)||t.cancel(e),r?r.then(ze).catch(ze):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(e){return!1!==e.options.enabled})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(e){return e.getCurrentResult().isStale})},t.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Ve(this.state.dataUpdatedAt,e)},t.onFocus=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnWindowFocus()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.onOnline=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnReconnect()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},t.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter(function(t){return t!==e}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(e,t){var r,s,a,n=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var i;return null==(i=this.retryer)||i.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var l=this.observers.find(function(e){return e.options.queryFn});l&&this.setOptions(l.options)}var o=Be(this.queryKey),c=at(),d={queryKey:o,pageParam:void 0,meta:this.meta};Object.defineProperty(d,"signal",{enumerable:!0,get:function(){if(c)return n.abortSignalConsumed=!0,c.signal}});var u,m,h={fetchOptions:t,options:this.options,queryKey:o,state:this.state,fetchFn:function(){return n.options.queryFn?(n.abortSignalConsumed=!1,n.options.queryFn(d)):Promise.reject("Missing queryFn")},meta:this.meta};return(null==(r=this.options.behavior)?void 0:r.onFetch)&&(null==(u=this.options.behavior)||u.onFetch(h)),this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(s=h.fetchOptions)?void 0:s.meta)||this.dispatch({type:"fetch",meta:null==(m=h.fetchOptions)?void 0:m.meta}),this.retryer=new ut({fn:h.fetchFn,abort:null==c||null==(a=c.abort)?void 0:a.bind(c),onSuccess:function(e){n.setData(e),null==n.cache.config.onSuccess||n.cache.config.onSuccess(e,n),0===n.cacheTime&&n.optionalRemove()},onError:function(e){dt(e)&&e.silent||n.dispatch({type:"error",error:e}),dt(e)||(null==n.cache.config.onError||n.cache.config.onError(e,n),xt().error(e)),0===n.cacheTime&&n.optionalRemove()},onFail:function(){n.dispatch({type:"failed"})},onPause:function(){n.dispatch({type:"pause"})},onContinue:function(){n.dispatch({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),ht.batch(function(){t.observers.forEach(function(t){t.onQueryUpdate(e)}),t.cache.notify({query:t,type:"queryUpdated",action:e})})},t.getDefaultState=function(e){var t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==e.initialData?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,s=void 0!==t;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:s?"success":"idle"}},t.reducer=function(e,t){var r,s;switch(t.type){case"failed":return x({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return x({},e,{isPaused:!0});case"continue":return x({},e,{isPaused:!1});case"fetch":return x({},e,{fetchFailureCount:0,fetchMeta:null!=(r=t.meta)?r:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return x({},e,{data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(s=t.dataUpdatedAt)?s:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var a=t.error;return dt(a)&&a.revert&&this.revertState?x({},this.revertState):x({},e,{error:a,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return x({},e,{isInvalidated:!0});case"setState":return x({},e,t.state);default:return e}},e}(),gt=function(e){function t(t){var r;return(r=e.call(this)||this).config=t||{},r.queries=[],r.queriesMap={},r}f(t,e);var r=t.prototype;return r.build=function(e,t,r){var s,a=t.queryKey,n=null!=(s=t.queryHash)?s:Ye(a,t),i=this.get(n);return i||(i=new ft({cache:this,queryKey:a,queryHash:n,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a),meta:t.meta}),this.add(i)),i},r.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},r.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(function(t){return t!==e}),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},r.clear=function(){var e=this;ht.batch(function(){e.queries.forEach(function(t){e.remove(t)})})},r.get=function(e){return this.queriesMap[e]},r.getAll=function(){return this.queries},r.find=function(e,t){var r=Ge(e,t)[0];return void 0===r.exact&&(r.exact=!0),this.queries.find(function(e){return We(r,e)})},r.findAll=function(e,t){var r=Ge(e,t)[0];return Object.keys(r).length>0?this.queries.filter(function(e){return We(r,e)}):this.queries},r.notify=function(e){var t=this;ht.batch(function(){t.listeners.forEach(function(t){t(e)})})},r.onFocus=function(){var e=this;ht.batch(function(){e.queries.forEach(function(e){e.onFocus()})})},r.onOnline=function(){var e=this;ht.batch(function(){e.queries.forEach(function(e){e.onOnline()})})},t}(Le),yt=function(){function e(e){this.options=x({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0},this.meta=e.meta}var t=e.prototype;return t.setState=function(e){this.dispatch({type:"setState",state:e})},t.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},t.removeObserver=function(e){this.observers=this.observers.filter(function(t){return t!==e})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(ze).catch(ze)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var e,t=this,r="loading"===this.state.status,s=Promise.resolve();return r||(this.dispatch({type:"loading",variables:this.options.variables}),s=s.then(function(){null==t.mutationCache.config.onMutate||t.mutationCache.config.onMutate(t.state.variables,t)}).then(function(){return null==t.options.onMutate?void 0:t.options.onMutate(t.state.variables)}).then(function(e){e!==t.state.context&&t.dispatch({type:"loading",context:e,variables:t.state.variables})})),s.then(function(){return t.executeMutation()}).then(function(r){e=r,null==t.mutationCache.config.onSuccess||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)}).then(function(){return null==t.options.onSuccess?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)}).then(function(){return t.dispatch({type:"success",data:e}),e}).catch(function(e){return null==t.mutationCache.config.onError||t.mutationCache.config.onError(e,t.state.variables,t.state.context,t),xt().error(e),Promise.resolve().then(function(){return null==t.options.onError?void 0:t.options.onError(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(void 0,e,t.state.variables,t.state.context)}).then(function(){throw t.dispatch({type:"error",error:e}),e})})},t.executeMutation=function(){var e,t=this;return this.retryer=new ut({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(e){var t=this;this.state=function(e,t){switch(t.type){case"failed":return x({},e,{failureCount:e.failureCount+1});case"pause":return x({},e,{isPaused:!0});case"continue":return x({},e,{isPaused:!1});case"loading":return x({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return x({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return x({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return x({},e,t.state);default:return e}}(this.state,e),ht.batch(function(){t.observers.forEach(function(t){t.onMutationUpdate(e)}),t.mutationCache.notify(t)})},e}(),bt=function(e){function t(t){var r;return(r=e.call(this)||this).config=t||{},r.mutations=[],r.mutationId=0,r}f(t,e);var r=t.prototype;return r.build=function(e,t,r){var s=new yt({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:r,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(s),s},r.add=function(e){this.mutations.push(e),this.notify(e)},r.remove=function(e){this.mutations=this.mutations.filter(function(t){return t!==e}),e.cancel(),this.notify(e)},r.clear=function(){var e=this;ht.batch(function(){e.mutations.forEach(function(t){e.remove(t)})})},r.getAll=function(){return this.mutations},r.find=function(e){return void 0===e.exact&&(e.exact=!0),this.mutations.find(function(t){return Ke(e,t)})},r.findAll=function(e){return this.mutations.filter(function(t){return Ke(e,t)})},r.notify=function(e){var t=this;ht.batch(function(){t.listeners.forEach(function(t){t(e)})})},r.onFocus=function(){this.resumePausedMutations()},r.onOnline=function(){this.resumePausedMutations()},r.resumePausedMutations=function(){var e=this.mutations.filter(function(e){return e.state.isPaused});return ht.batch(function(){return e.reduce(function(e,t){return e.then(function(){return t.continue().catch(ze)})},Promise.resolve())})},t}(Le);function vt(){return{onFetch:function(e){e.fetchFn=function(){var t,r,s,a,n,i,l,o=null==(t=e.fetchOptions)||null==(r=t.meta)?void 0:r.refetchPage,c=null==(s=e.fetchOptions)||null==(a=s.meta)?void 0:a.fetchMore,d=null==c?void 0:c.pageParam,u="forward"===(null==c?void 0:c.direction),m="backward"===(null==c?void 0:c.direction),h=(null==(n=e.state.data)?void 0:n.pages)||[],p=(null==(i=e.state.data)?void 0:i.pageParams)||[],x=at(),f=null==x?void 0:x.signal,g=p,y=!1,b=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},v=function(e,t,r,s){return g=s?[t].concat(g):[].concat(g,[t]),s?[r].concat(e):[].concat(e,[r])},j=function(t,r,s,a){if(y)return Promise.reject("Cancelled");if(void 0===s&&!r&&t.length)return Promise.resolve(t);var n={queryKey:e.queryKey,signal:f,pageParam:s,meta:e.meta},i=b(n),l=Promise.resolve(i).then(function(e){return v(t,s,e,a)});return ot(i)&&(l.cancel=i.cancel),l};if(h.length)if(u){var w=void 0!==d,N=w?d:jt(e.options,h);l=j(h,w,N)}else if(m){var _=void 0!==d,S=_?d:wt(e.options,h);l=j(h,_,S,!0)}else!function(){g=[];var t=void 0===e.options.getNextPageParam,r=!o||!h[0]||o(h[0],0,h);l=r?j([],t,p[0]):Promise.resolve(v([],p[0],h[0]));for(var s=function(r){l=l.then(function(s){if(!o||!h[r]||o(h[r],r,h)){var a=t?p[r]:jt(e.options,s);return j(s,t,a)}return Promise.resolve(v(s,p[r],h[r]))})},a=1;a<h.length;a++)s(a)}();else l=j([]);var k=l.then(function(e){return{pages:e,pageParams:g}});return k.cancel=function(){y=!0,null==x||x.abort(),ot(l)&&l.cancel()},k}}}}function jt(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function wt(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}function Nt(e,t){if(e.getNextPageParam&&Array.isArray(t)){var r=jt(e,t);return null!=r&&!1!==r}}function _t(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){var r=wt(e,t);return null!=r&&!1!==r}}var St=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new gt,this.mutationCache=e.mutationCache||new bt,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var e=this;this.unsubscribeFocus=nt.subscribe(function(){nt.isFocused()&&it.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())}),this.unsubscribeOnline=it.subscribe(function(){nt.isFocused()&&it.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())})},t.unmount=function(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)},t.isFetching=function(e,t){var r=Ge(e,t)[0];return r.fetching=!0,this.queryCache.findAll(r).length},t.isMutating=function(e){return this.mutationCache.findAll(x({},e,{fetching:!0})).length},t.getQueryData=function(e,t){var r;return null==(r=this.queryCache.find(e,t))?void 0:r.state.data},t.getQueriesData=function(e){return this.getQueryCache().findAll(e).map(function(e){return[e.queryKey,e.state.data]})},t.setQueryData=function(e,t,r){var s=Qe(e),a=this.defaultQueryOptions(s);return this.queryCache.build(this,a).setData(t,r)},t.setQueriesData=function(e,t,r){var s=this;return ht.batch(function(){return s.getQueryCache().findAll(e).map(function(e){var a=e.queryKey;return[a,s.setQueryData(a,t,r)]})})},t.getQueryState=function(e,t){var r;return null==(r=this.queryCache.find(e,t))?void 0:r.state},t.removeQueries=function(e,t){var r=Ge(e,t)[0],s=this.queryCache;ht.batch(function(){s.findAll(r).forEach(function(e){s.remove(e)})})},t.resetQueries=function(e,t,r){var s=this,a=Ge(e,t,r),n=a[0],i=a[1],l=this.queryCache,o=x({},n,{active:!0});return ht.batch(function(){return l.findAll(n).forEach(function(e){e.reset()}),s.refetchQueries(o,i)})},t.cancelQueries=function(e,t,r){var s=this,a=Ge(e,t,r),n=a[0],i=a[1],l=void 0===i?{}:i;void 0===l.revert&&(l.revert=!0);var o=ht.batch(function(){return s.queryCache.findAll(n).map(function(e){return e.cancel(l)})});return Promise.all(o).then(ze).catch(ze)},t.invalidateQueries=function(e,t,r){var s,a,n,i=this,l=Ge(e,t,r),o=l[0],c=l[1],d=x({},o,{active:null==(s=null!=(a=o.refetchActive)?a:o.active)||s,inactive:null!=(n=o.refetchInactive)&&n});return ht.batch(function(){return i.queryCache.findAll(o).forEach(function(e){e.invalidate()}),i.refetchQueries(d,c)})},t.refetchQueries=function(e,t,r){var s=this,a=Ge(e,t,r),n=a[0],i=a[1],l=ht.batch(function(){return s.queryCache.findAll(n).map(function(e){return e.fetch(void 0,x({},i,{meta:{refetchPage:null==n?void 0:n.refetchPage}}))})}),o=Promise.all(l).then(ze);return(null==i?void 0:i.throwOnError)||(o=o.catch(ze)),o},t.fetchQuery=function(e,t,r){var s=Qe(e,t,r),a=this.defaultQueryOptions(s);void 0===a.retry&&(a.retry=!1);var n=this.queryCache.build(this,a);return n.isStaleByTime(a.staleTime)?n.fetch(a):Promise.resolve(n.state.data)},t.prefetchQuery=function(e,t,r){return this.fetchQuery(e,t,r).then(ze).catch(ze)},t.fetchInfiniteQuery=function(e,t,r){var s=Qe(e,t,r);return s.behavior=vt(),this.fetchQuery(s)},t.prefetchInfiniteQuery=function(e,t,r){return this.fetchInfiniteQuery(e,t,r).then(ze).catch(ze)},t.cancelMutations=function(){var e=this,t=ht.batch(function(){return e.mutationCache.getAll().map(function(e){return e.cancel()})});return Promise.all(t).then(ze).catch(ze)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(e){this.defaultOptions=e},t.setQueryDefaults=function(e,t){var r=this.queryDefaults.find(function(t){return He(e)===He(t.queryKey)});r?r.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},t.getQueryDefaults=function(e){var t;return e?null==(t=this.queryDefaults.find(function(t){return Je(e,t.queryKey)}))?void 0:t.defaultOptions:void 0},t.setMutationDefaults=function(e,t){var r=this.mutationDefaults.find(function(t){return He(e)===He(t.mutationKey)});r?r.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},t.getMutationDefaults=function(e){var t;return e?null==(t=this.mutationDefaults.find(function(t){return Je(e,t.mutationKey)}))?void 0:t.defaultOptions:void 0},t.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var t=x({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=Ye(t.queryKey,t)),t},t.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},t.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:x({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}(),kt=function(e){function t(t,r){var s;return(s=e.call(this)||this).client=t,s.options=r,s.trackedProps=[],s.selectError=null,s.bindMethods(),s.setOptions(r),s}f(t,e);var r=t.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),Et(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return Ct(this.currentQuery,this.options,this.options.refetchOnReconnect)},r.shouldFetchOnWindowFocus=function(){return Ct(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(e,t){var r=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();var a=this.hasListeners();a&&Ot(this.currentQuery,s,this.options,r)&&this.executeFetch(),this.updateResult(t),!a||this.currentQuery===s&&this.options.enabled===r.enabled&&this.options.staleTime===r.staleTime||this.updateStaleTimeout();var n=this.computeRefetchInterval();!a||this.currentQuery===s&&this.options.enabled===r.enabled&&n===this.currentRefetchInterval||this.updateRefetchInterval(n)},r.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,t);return this.createResult(r,t)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(e,t){var r=this,s={},a=function(e){r.trackedProps.includes(e)||r.trackedProps.push(e)};return Object.keys(e).forEach(function(t){Object.defineProperty(s,t,{configurable:!1,enumerable:!0,get:function(){return a(t),e[t]}})}),(t.useErrorBoundary||t.suspense)&&a("error"),s},r.getNextResult=function(e){var t=this;return new Promise(function(r,s){var a=t.subscribe(function(t){t.isFetching||(a(),t.isError&&(null==e?void 0:e.throwOnError)?s(t.error):r(t))})})},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(e){return this.fetch(x({},e,{meta:{refetchPage:null==e?void 0:e.refetchPage}}))},r.fetchOptimistic=function(e){var t=this,r=this.client.defaultQueryObserverOptions(e),s=this.client.getQueryCache().build(this.client,r);return s.fetch().then(function(){return t.createResult(s,r)})},r.fetch=function(e){var t=this;return this.executeFetch(e).then(function(){return t.updateResult(),t.currentResult})},r.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(ze)),t},r.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!qe&&!this.currentResult.isStale&&Ue(this.options.staleTime)){var t=Ve(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(function(){e.currentResult.isStale||e.updateResult()},t)}},r.computeRefetchInterval=function(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e},r.updateRefetchInterval=function(e){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=e,!qe&&!1!==this.options.enabled&&Ue(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(function(){(t.options.refetchIntervalInBackground||nt.isFocused())&&t.executeFetch()},this.currentRefetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},r.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},r.createResult=function(e,t){var r,s=this.currentQuery,a=this.options,n=this.currentResult,i=this.currentResultState,l=this.currentResultOptions,o=e!==s,c=o?e.state:this.currentQueryInitialState,d=o?this.currentResult:this.previousQueryResult,u=e.state,m=u.dataUpdatedAt,h=u.error,p=u.errorUpdatedAt,x=u.isFetching,f=u.status,g=!1,y=!1;if(t.optimisticResults){var b=this.hasListeners(),v=!b&&Et(e,t),j=b&&Ot(e,s,t,a);(v||j)&&(x=!0,m||(f="loading"))}if(t.keepPreviousData&&!u.dataUpdateCount&&(null==d?void 0:d.isSuccess)&&"error"!==f)r=d.data,m=d.dataUpdatedAt,f=d.status,g=!0;else if(t.select&&void 0!==u.data)if(n&&u.data===(null==i?void 0:i.data)&&t.select===this.selectFn)r=this.selectResult;else try{this.selectFn=t.select,r=t.select(u.data),!1!==t.structuralSharing&&(r=Ze(null==n?void 0:n.data,r)),this.selectResult=r,this.selectError=null}catch(N){xt().error(N),this.selectError=N}else r=u.data;if(void 0!==t.placeholderData&&void 0===r&&("loading"===f||"idle"===f)){var w;if((null==n?void 0:n.isPlaceholderData)&&t.placeholderData===(null==l?void 0:l.placeholderData))w=n.data;else if(w="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==w)try{w=t.select(w),!1!==t.structuralSharing&&(w=Ze(null==n?void 0:n.data,w)),this.selectError=null}catch(N){xt().error(N),this.selectError=N}void 0!==w&&(f="success",r=w,y=!0)}return this.selectError&&(h=this.selectError,r=this.selectResult,p=Date.now(),f="error"),{status:f,isLoading:"loading"===f,isSuccess:"success"===f,isError:"error"===f,isIdle:"idle"===f,data:r,dataUpdatedAt:m,error:h,errorUpdatedAt:p,failureCount:u.fetchFailureCount,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&"loading"!==f,isLoadingError:"error"===f&&0===u.dataUpdatedAt,isPlaceholderData:y,isPreviousData:g,isRefetchError:"error"===f&&0!==u.dataUpdatedAt,isStale:Tt(e,t),refetch:this.refetch,remove:this.remove}},r.shouldNotifyListeners=function(e,t){if(!t)return!0;var r=this.options,s=r.notifyOnChangeProps,a=r.notifyOnChangePropsExclusions;if(!s&&!a)return!0;if("tracked"===s&&!this.trackedProps.length)return!0;var n="tracked"===s?this.trackedProps:s;return Object.keys(e).some(function(r){var s=r,i=e[s]!==t[s],l=null==n?void 0:n.some(function(e){return e===r}),o=null==a?void 0:a.some(function(e){return e===r});return i&&!o&&(!n||l)})},r.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!function(e,t){if(e&&!t||t&&!e)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}(this.currentResult,t)){var r={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(r.listeners=!0),this.notify(x({},r,e))}},r.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},r.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||dt(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},r.notify=function(e){var t=this;ht.batch(function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach(function(e){e(t.currentResult)}),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})})},t}(Le);function Et(e,t){return function(e,t){return!(!1===t.enabled||e.state.dataUpdatedAt||"error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&Ct(e,t,t.refetchOnMount)}function Ct(e,t,r){if(!1!==t.enabled){var s="function"==typeof r?r(e):r;return"always"===s||!1!==s&&Tt(e,t)}return!1}function Ot(e,t,r,s){return!1!==r.enabled&&(e!==t||!1===s.enabled)&&(!r.suspense||"error"!==e.state.status)&&Tt(e,r)}function Tt(e,t){return e.isStaleByTime(t.staleTime)}var At=function(e){function t(t,r){return e.call(this,t,r)||this}f(t,e);var r=t.prototype;return r.bindMethods=function(){e.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},r.setOptions=function(t,r){e.prototype.setOptions.call(this,x({},t,{behavior:vt()}),r)},r.getOptimisticResult=function(t){return t.behavior=vt(),e.prototype.getOptimisticResult.call(this,t)},r.fetchNextPage=function(e){var t;return this.fetch({cancelRefetch:null==(t=null==e?void 0:e.cancelRefetch)||t,throwOnError:null==e?void 0:e.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:null==e?void 0:e.pageParam}}})},r.fetchPreviousPage=function(e){var t;return this.fetch({cancelRefetch:null==(t=null==e?void 0:e.cancelRefetch)||t,throwOnError:null==e?void 0:e.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:null==e?void 0:e.pageParam}}})},r.createResult=function(t,r){var s,a,n,i,l,o,c=t.state,d=e.prototype.createResult.call(this,t,r);return x({},d,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Nt(r,null==(s=c.data)?void 0:s.pages),hasPreviousPage:_t(r,null==(a=c.data)?void 0:a.pages),isFetchingNextPage:c.isFetching&&"forward"===(null==(n=c.fetchMeta)||null==(i=n.fetchMore)?void 0:i.direction),isFetchingPreviousPage:c.isFetching&&"backward"===(null==(l=c.fetchMeta)||null==(o=l.fetchMore)?void 0:o.direction)})},t}(kt),Dt=function(e){function t(t,r){var s;return(s=e.call(this)||this).client=t,s.setOptions(r),s.bindMethods(),s.updateResult(),s}f(t,e);var r=t.prototype;return r.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},r.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},r.onUnsubscribe=function(){var e;this.listeners.length||null==(e=this.currentMutation)||e.removeObserver(this)},r.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},r.getCurrentResult=function(){return this.currentResult},r.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},r.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,x({},this.options,{variables:void 0!==e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},r.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0},t=x({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset});this.currentResult=t},r.notify=function(e){var t=this;ht.batch(function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach(function(e){e(t.currentResult)})})},t}(Le),Pt=s.unstable_batchedUpdates;ht.setBatchNotifyFunction(Pt);var Ft=console;pt=Ft;var Mt=a.createContext(void 0),It=a.createContext(!1);function Rt(e){return e&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=Mt),window.ReactQueryClientContext):Mt}var $t,Lt=function(){var e=a.useContext(Rt(a.useContext(It)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},qt=function(e){var t=e.client,r=e.contextSharing,s=void 0!==r&&r,n=e.children;a.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var i=Rt(s);return a.createElement(It.Provider,{value:s},a.createElement(i.Provider,{value:t},n))},zt=a.createContext(($t=!1,{clearReset:function(){$t=!1},reset:function(){$t=!0},isReset:function(){return $t}}));function Ut(e,t,r){return"function"==typeof t?t.apply(void 0,r):"boolean"==typeof t?t:!!e}function Bt(e,t,r){var s=a.useRef(!1),n=a.useState(0)[1],i=function(e,t,r){return rt(e)?"function"==typeof t?x({},r,{mutationKey:e,mutationFn:t}):x({},t,{mutationKey:e}):"function"==typeof e?x({},t,{mutationFn:e}):x({},e)}(e,t,r),l=Lt(),o=a.useRef();o.current?o.current.setOptions(i):o.current=new Dt(l,i);var c=o.current.getCurrentResult();a.useEffect(function(){s.current=!0;var e=o.current.subscribe(ht.batchCalls(function(){s.current&&n(function(e){return e+1})}));return function(){s.current=!1,e()}},[]);var d=a.useCallback(function(e,t){o.current.mutate(e,t).catch(ze)},[]);if(c.error&&Ut(void 0,o.current.options.useErrorBoundary,[c.error]))throw c.error;return x({},c,{mutate:d,mutateAsync:c.mutate})}function Vt(e,t){var r=a.useRef(!1),s=a.useState(0)[1],n=Lt(),i=a.useContext(zt),l=n.defaultQueryObserverOptions(e);l.optimisticResults=!0,l.onError&&(l.onError=ht.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=ht.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=ht.batchCalls(l.onSettled)),l.suspense&&("number"!=typeof l.staleTime&&(l.staleTime=1e3),0===l.cacheTime&&(l.cacheTime=1)),(l.suspense||l.useErrorBoundary)&&(i.isReset()||(l.retryOnMount=!1));var o=a.useState(function(){return new t(n,l)})[0],c=o.getOptimisticResult(l);if(a.useEffect(function(){r.current=!0,i.clearReset();var e=o.subscribe(ht.batchCalls(function(){r.current&&s(function(e){return e+1})}));return o.updateResult(),function(){r.current=!1,e()}},[i,o]),a.useEffect(function(){o.setOptions(l,{listeners:!1})},[l,o]),l.suspense&&c.isLoading)throw o.fetchOptimistic(l).then(function(e){var t=e.data;null==l.onSuccess||l.onSuccess(t),null==l.onSettled||l.onSettled(t,null)}).catch(function(e){i.clearReset(),null==l.onError||l.onError(e),null==l.onSettled||l.onSettled(void 0,e)});if(c.isError&&!i.isReset()&&!c.isFetching&&Ut(l.suspense,l.useErrorBoundary,[c.error,o.getCurrentQuery()]))throw c.error;return"tracked"===l.notifyOnChangeProps&&(c=o.trackResult(c,l)),c}function Qt(e,t,r){return Vt(Qe(e,t,r),kt)}const Gt="https://qwxghpwasmvottahchky.supabase.co",Wt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF3eGdocHdhc212b3R0YWhjaGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI5MTI3NTksImV4cCI6MjA2ODQ4ODc1OX0.4a1Oc66k9mGmXLoHmrKyZiVeZISpyzgq1BERrb_-8n8",Kt="production",Yt="팀 매물장",Ht="2.0.0",Jt="jenny@the-realty.co.kr,lucas@the-realty.co.kr,hmlee@the-realty.co.kr",Xt=!0,Zt=!0,er={BASE_URL:"/the-realty-itemlist-dashboard/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAILS:"admin@the-realty.co.kr",VITE_APP_NAME:"팀 매물장",VITE_APP_VERSION:"2.0.0",VITE_DEBUG_MODE:"false",VITE_ENABLE_BYPASS:"false",VITE_ENABLE_DEMO_BANNER:"true",VITE_ENABLE_PWA:"true",VITE_ENVIRONMENT:"production",VITE_GOOGLE_CLIENT_ID:"your-production-google-client-id",VITE_SUPABASE_ANON_KEY:"your-production-anon-key",VITE_SUPABASE_URL:"https://your-production-project.supabase.co",VITE_USE_DUMMY_DATA:"false"},tr=(e,t="")=>{try{return er[e]||t}catch(r){return t}};let rr=!1;try{rr=window.location.hostname.includes("github.io")}catch(md){rr=!1}const sr={SUPABASE_URL:Gt,SUPABASE_ANON_KEY:Wt,ENVIRONMENT:rr?Kt:tr("VITE_ENVIRONMENT","development"),APP_NAME:rr?Yt:tr("VITE_APP_NAME","팀 매물장"),APP_VERSION:rr?Ht:tr("VITE_APP_VERSION","2.0.0"),ADMIN_EMAILS:rr?Jt:tr("VITE_ADMIN_EMAILS",Jt),ENABLE_DEMO_BANNER:rr?Xt:"false"!==tr("VITE_ENABLE_DEMO_BANNER","true"),ENABLE_PWA:rr?Zt:"false"!==tr("VITE_ENABLE_PWA","true"),USE_DUMMY_DATA:!1},ar=sr.SUPABASE_URL,nr=sr.SUPABASE_ANON_KEY,ir="undefined"!=typeof window&&"localhost"===window.location.hostname,lr=Se(ar,nr,{auth:{persistSession:!0,autoRefreshToken:!0,sessionRefreshMargin:60},global:{headers:{"X-Client-Info":"the-realty-dashboard/2.0.0"}},db:{schema:"public"}});ir&&lr&&lr.from("properties").select("count").limit(1).then(({data:e,error:t})=>{}).catch(e=>{});const or=()=>(window.location.hostname,!0),cr=()=>"gma3561.github.io"===window.location.hostname||(or(),!1),dr={admin:{id:"qa-admin-user-001",email:"qa-admin@test.local",name:"QA 관리자",role:"admin",isAdmin:!0,avatar_url:null,created_at:(new Date).toISOString(),last_sign_in_at:(new Date).toISOString(),isQAUser:!0,testUserType:"admin"},user:{id:"qa-user-001",email:"qa-user@test.local",name:"QA 일반사용자",role:"user",isAdmin:!1,avatar_url:null,created_at:(new Date).toISOString(),last_sign_in_at:(new Date).toISOString(),isQAUser:!0,testUserType:"user"},manager:{id:"qa-manager-001",email:"qa-manager@test.local",name:"QA 매니저",role:"user",isAdmin:!1,avatar_url:null,created_at:(new Date).toISOString(),last_sign_in_at:(new Date).toISOString(),isQAUser:!0,testUserType:"manager"}},ur=(e="admin")=>{if(!cr())return!1;const t=dr[e];if(!t)return!1;try{return localStorage.setItem("temp-bypass-user",JSON.stringify(t)),!0}catch(r){return!1}},mr=()=>{if(!cr())return null;try{const e=localStorage.getItem("temp-bypass-user");if(!e)return null;const t=JSON.parse(e);return t.isQAUser?t:(hr(),null)}catch(e){return hr(),null}},hr=()=>{try{return localStorage.removeItem("temp-bypass-user"),!0}catch(e){return!1}},pr=()=>({isEnabled:cr(),isProduction:or(),currentUser:mr(),availableUsers:Object.keys(dr),environment:{hostname:window.location.hostname,isProduction:!0,viteEnvironment:"production",enableBypass:"false"}}),xr=()=>{cr()&&pr().isEnabled};cr()&&"undefined"!=typeof window&&(window.QABypass={setUser:ur,clearUser:hr,getUser:mr,getStatus:pr,logInfo:xr,users:dr});const fr=t.createContext(),gr=({children:e})=>{const[r,s]=t.useState(null),[a,n]=t.useState(!0),[i,l]=t.useState(null),[o,c]=t.useState(!1),d=async(e=!1)=>{var t;try{if(e||n(!0),cr()){const e=mr();if(e)return s(e),l(null),void n(!1)}if(!lr)return s(null),l(null),void n(!1);const{data:{session:r},error:a}=await lr.auth.getSession();if(a)return s(null),l(null),void n(!1);if(null==r?void 0:r.user){const e=r.user,a=(sr.ADMIN_EMAILS?sr.ADMIN_EMAILS.split(",").map(e=>e.trim()):[]).includes(e.email);s({...e,role:a?"admin":"user",isAdmin:a,name:(null==(t=e.user_metadata)?void 0:t.full_name)||e.email,email:e.email}),l(null)}else s(null)}catch(r){l(null),s(null)}finally{e||(n(!1),setTimeout(()=>n(!1),0))}};t.useEffect(()=>{d();const e=setTimeout(()=>{n(!1)},1e4);if(!lr)return void clearTimeout(e);const{data:t}=lr.auth.onAuthStateChange(async(t,r)=>{"SIGNED_OUT"===t?(s(null),n(!1),clearTimeout(e)):"SIGNED_IN"!==t&&"TOKEN_REFRESHED"!==t||(await d(),clearTimeout(e))});return()=>{var r;null==(r=null==t?void 0:t.subscription)||r.unsubscribe(),clearTimeout(e)}},[]);const u={user:r,loading:a,error:i,signInWithGoogle:async()=>{try{if(n(!0),l(null),!lr)throw new Error("Supabase 클라이언트가 초기화되지 않았습니다.");const e="localhost"===window.location.hostname?`${window.location.origin}/auth/callback`:"https://gma3561.github.io/the-realty-itemlist-dashboard/auth/callback",{error:t}=await lr.auth.signInWithOAuth({provider:"google",options:{queryParams:{access_type:"offline",prompt:"consent"},redirectTo:e}});if(t)throw t}catch(e){l(e.message),n(!1)}},signInWithBypass:async(e="admin")=>{if(!cr())return l("QA 바이패스 기능이 비활성화되어 있습니다."),!1;try{return n(!0),l(null),ur(e)?(await d(!0),!0):(l("바이패스 로그인에 실패했습니다."),!1)}catch(t){return l(t.message),!1}finally{n(!1)}},signOut:async()=>{try{n(!0),cr()&&hr(),lr&&await lr.auth.signOut(),s(null)}catch(e){l(e.message)}finally{n(!1)}},isBypassEnabled:cr(),isQAUser:(null==r?void 0:r.isQAUser)||!1};return Ie.jsx(fr.Provider,{value:u,children:e})},yr=()=>{const e=t.useContext(fr);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e};class br extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?Ie.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:Ie.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:Ie.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Ie.jsxs("div",{className:"text-center",children:[Ie.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:Ie.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),Ie.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"앱 로딩 오류"}),Ie.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"페이지를 로드하는 중 오류가 발생했습니다."}),Ie.jsx("div",{className:"mt-4",children:Ie.jsx("button",{onClick:()=>window.location.reload(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"페이지 새로고침"})}),!1]})})})}):this.props.children}}const vr=({children:e})=>{const r=n(),{user:s,loading:a}=yr(),[l,o]=t.useState(!1),c=["/login","/auth/callback","/auth/process"].includes(r.pathname);return t.useEffect(()=>{const e=setTimeout(()=>{a&&o(!0)},3e3);return()=>clearTimeout(e)},[a]),t.useEffect(()=>{const e=setTimeout(()=>{o(!0)},2e3);return()=>clearTimeout(e)},[]),s||c?s&&"/login"===r.pathname?Ie.jsx(i,{to:"/",replace:!0}):e:Ie.jsx(i,{to:"/login",replace:!0})},jr=()=>{var e;const{user:r,loading:s,signInWithGoogle:a,signInWithBypass:n,isBypassEnabled:l,error:o}=yr(),[c,d]=t.useState(null),[u,m]=t.useState(!1),[h,p]=t.useState(!1),x=pr();if(r&&!s)return Ie.jsx(i,{to:"/",replace:!0});const f=async e=>{d(null),m(!0);try{await n(e)||d("QA 바이패스 로그인에 실패했습니다.")}catch(t){d(t.message)}finally{m(!1)}};return Ie.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[Ie.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[Ie.jsx("h2",{className:"text-center text-3xl font-extrabold text-gray-900",children:"더부동산 통합 관리 시스템"}),Ie.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"매물 관리 및 직원 성과 분석 플랫폼"})]}),Ie.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:Ie.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Ie.jsxs("div",{className:"space-y-6",children:[(c||o)&&Ie.jsx("div",{className:"rounded-md bg-red-50 p-4",children:Ie.jsx("div",{className:"flex",children:Ie.jsxs("div",{className:"ml-3",children:[Ie.jsx("h3",{className:"text-sm font-medium text-red-800",children:"로그인 오류"}),Ie.jsx("div",{className:"mt-2 text-sm text-red-700",children:Ie.jsx("p",{children:c||o})})]})})}),Ie.jsx("div",{children:Ie.jsx("button",{onClick:async()=>{d(null),m(!0);try{await a()}catch(e){d(e.message),m(!1)}},disabled:u||s,className:"w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-md shadow-sm text-base font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?Ie.jsxs(Ie.Fragment,{children:[Ie.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-700 mr-3"}),"로그인 중..."]}):Ie.jsxs(Ie.Fragment,{children:[Ie.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[Ie.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),Ie.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),Ie.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),Ie.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google로 로그인"]})})}),l&&Ie.jsxs("div",{className:"mt-6",children:[Ie.jsxs("div",{className:"relative",children:[Ie.jsx("div",{className:"absolute inset-0 flex items-center",children:Ie.jsx("div",{className:"w-full border-t border-orange-300"})}),Ie.jsx("div",{className:"relative flex justify-center text-sm",children:Ie.jsx("span",{className:"px-2 bg-white text-orange-600 font-medium",children:"QA 테스트 로그인"})})]}),Ie.jsxs("div",{className:"mt-4 bg-orange-50 border border-orange-200 rounded-md p-4",children:[Ie.jsxs("div",{className:"flex items-center mb-3",children:[Ie.jsx("div",{className:"flex-shrink-0",children:Ie.jsx("svg",{className:"h-5 w-5 text-orange-400",viewBox:"0 0 20 20",fill:"currentColor",children:Ie.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),Ie.jsx("div",{className:"ml-3",children:Ie.jsx("h3",{className:"text-sm font-medium text-orange-800",children:"개발/QA 환경 전용"})})]}),Ie.jsx("button",{onClick:()=>p(!h),className:"text-sm text-orange-700 hover:text-orange-900 underline",children:h?"바이패스 옵션 숨기기":"QA 바이패스 로그인 옵션 보기"}),h&&Ie.jsxs("div",{className:"mt-4 space-y-2",children:[Ie.jsxs("p",{className:"text-xs text-orange-700 mb-3",children:["환경: ",x.isProduction?"프로덕션":"개발/QA"," | 호스트: ",null==(e=x.environment)?void 0:e.hostname]}),Ie.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3",children:[Ie.jsxs("button",{onClick:()=>f("admin"),disabled:u,className:"px-3 py-2 text-xs font-medium text-white bg-red-600 rounded hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:["관리자로 로그인",Ie.jsx("div",{className:"text-xs opacity-75",children:"(모든 권한)"})]}),Ie.jsxs("button",{onClick:()=>f("user"),disabled:u,className:"px-3 py-2 text-xs font-medium text-white bg-blue-600 rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:["일반사용자로 로그인",Ie.jsx("div",{className:"text-xs opacity-75",children:"(제한된 권한)"})]}),Ie.jsxs("button",{onClick:()=>f("manager"),disabled:u,className:"px-3 py-2 text-xs font-medium text-white bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:["매니저로 로그인",Ie.jsx("div",{className:"text-xs opacity-75",children:"(매니저 권한)"})]})]}),Ie.jsxs("div",{className:"mt-3 text-xs text-orange-600",children:[Ie.jsx("p",{children:"• QA 바이패스는 테스트 목적으로만 사용됩니다"}),Ie.jsx("p",{children:"• 프로덕션 환경에서는 자동으로 비활성화됩니다"}),Ie.jsx("p",{children:"• 모든 QA 활동은 로깅됩니다"})]})]})]})]}),Ie.jsxs("div",{className:"mt-6",children:[Ie.jsxs("div",{className:"relative",children:[Ie.jsx("div",{className:"absolute inset-0 flex items-center",children:Ie.jsx("div",{className:"w-full border-t border-gray-300"})}),Ie.jsx("div",{className:"relative flex justify-center text-sm",children:Ie.jsx("span",{className:"px-2 bg-white text-gray-500",children:"안내사항"})})]}),Ie.jsxs("div",{className:"mt-6 text-sm text-gray-600 space-y-2",children:[Ie.jsx("p",{children:"• Google 계정으로만 로그인이 가능합니다"}),Ie.jsx("p",{children:"• 처음 로그인 시 자동으로 계정이 생성됩니다"}),Ie.jsx("p",{children:"• 관리자 권한은 별도로 부여됩니다"}),Ie.jsx("p",{children:"• 빠르고 안전한 Google OAuth 로그인을 사용합니다"}),l&&Ie.jsx("p",{className:"text-orange-600 font-medium",children:"• QA 환경: 바이패스 로그인 사용 가능"})]})]})]})})})]})},wr=()=>{const e=l();return t.useEffect(()=>{(async()=>{try{const t=window.location.hash,r=t.lastIndexOf("#access_token");if(-1===r)return void e("/login");const s=t.substring(r+1),a=new URLSearchParams(s),n=a.get("access_token"),i=a.get("refresh_token");if(!n)return void e("/login");const{data:l,error:o}=await lr.auth.setSession({access_token:n,refresh_token:i||""});if(o)return void e("/login");await new Promise(e=>setTimeout(e,500)),window.location.href="/#/"}catch(t){e("/login")}})()},[e]),Ie.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:Ie.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:Ie.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Ie.jsxs("div",{className:"flex justify-center items-center",children:[Ie.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ie.jsx("p",{className:"ml-4 text-gray-600",children:"로그인 처리 중..."})]})})})})},Nr=()=>{const e=l(),r=n();return t.useEffect(()=>{(async()=>{try{const s=new URLSearchParams(r.search),a=s.get("access_token"),n=s.get("refresh_token");if(!a)return void e("/login");try{const{data:t,error:r}=await lr.auth.setSession({access_token:a,refresh_token:n||""});if(r)return void e("/login");e("/",{replace:!0})}catch(t){e("/login")}}catch(s){e("/login")}})()},[e,r]),Ie.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:Ie.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:Ie.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:Ie.jsxs("div",{className:"flex justify-center items-center",children:[Ie.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ie.jsx("p",{className:"ml-4 text-gray-600",children:"로그인 완료 중..."})]})})})})},_r=e=>{if(!e)return!1;const t=(sr.ADMIN_EMAILS||"").split(",").map(e=>e.trim()).filter(Boolean);return t.some(t=>t.toLowerCase()===e.toLowerCase())},Sr="admin",kr="user",Er="view_all_properties",Cr="view_own_properties",Or="view_customer_info",Tr="create_property",Ar="edit_all_properties",Dr="edit_own_properties",Pr="delete_all_properties",Fr="delete_own_properties",Mr="comment_on_properties",Ir="view_users",Rr="manage_users",$r="view_all_performance",Lr="view_own_performance",qr="bulk_upload",zr={[Sr]:[Er,Cr,Or,Tr,Ar,Dr,Pr,Fr,Mr,Ir,Rr,$r,Lr,qr],[kr]:[Cr,Tr,Dr,Fr,Lr,Mr]},Ur=e=>e&&(e.role===Sr||!0===e.isAdmin),Br=e=>e&&e.role===kr&&!Ur(e),Vr=(e,t,r)=>{if(!e)return!1;if(Ur(e))return!0;if(Br(e)){if(!t)return"create"===r;const s=t.user_id===e.id||t.manager_id===e.id||t.manager_id===e.email||t.manager_id===`hardcoded-${e.email}`;return"view"===r||"comment"===r||s}return!1},Qr=e=>{const t=[{name:"대시보드",path:"/",permission:Cr,icon:"📊"},{name:"내 매물",path:"/my-properties",permission:Cr,icon:"🏠"},{name:"매물 목록",path:"/properties",permission:Cr,icon:"🏢"}];return Ur(e)&&t.push({name:"직원 관리",path:"/users",permission:Rr,icon:"👥"},{name:"직원 성과",path:"/performance",permission:$r,icon:"📈"},{name:"데이터 수집",path:"/data-collection",permission:qr,icon:"🔄"}),t.push({name:"설정",path:"/settings",permission:null,icon:"⚙️"}),t.filter(t=>!t.permission||((e,t)=>!(!e||!e.role)&&(zr[e.role]||[]).includes(t))(e,t.permission))},Gr=e=>Ur(e)?"관리자":Br(e)?"일반사용자":"게스트",Wr=e=>Ur(e)?"bg-red-100 text-red-800 border-red-200":Br(e)?"bg-blue-100 text-blue-800 border-blue-200":"bg-gray-100 text-gray-800 border-gray-200",Kr=async()=>{try{const e=[{id:"apt",name:"아파트",display_order:1},{id:"officetel",name:"오피스텔",display_order:2},{id:"villa",name:"빌라/연립",display_order:3},{id:"house",name:"단독주택",display_order:4},{id:"commercial",name:"상가",display_order:5}],t=[{id:"presale",name:"분양",display_order:1},{id:"developer",name:"시행사매물",display_order:2},{id:"sale",name:"매매",display_order:3},{id:"lease",name:"전세",display_order:4},{id:"rent",name:"월세/렌트",display_order:5},{id:"short",name:"단기",display_order:6}],r=[{id:"available",name:"거래가능",display_order:1},{id:"completed",name:"거래완료",display_order:2},{id:"hold",name:"거래보류",display_order:3},{id:"cancelled",name:"거래철회",display_order:4},{id:"inspection_available",name:"임장가능",display_order:5}];return{success:!0,results:await Promise.allSettled([lr.from("property_types").upsert(e,{onConflict:"id"}),lr.from("transaction_types").upsert(t,{onConflict:"id"}),lr.from("property_statuses").upsert(r,{onConflict:"id"})])}}catch(e){return{success:!1,error:e.message}}},Yr=async()=>{try{const[e,t,r]=await Promise.all([lr.from("property_types").select("*").order("display_order"),lr.from("transaction_types").select("*").order("display_order"),lr.from("property_statuses").select("*").order("display_order")]);if(e.error)throw e.error;if(t.error)throw t.error;if(r.error)throw r.error;return{propertyTypes:e.data||[],transactionTypes:t.data||[],propertyStatuses:r.data||[]}}catch(e){throw e}},Hr=async e=>{try{const{data:t,error:r}=await lr.from("properties").select("*").eq("id",e).single();if(r)throw r;return{data:t,error:null}}catch(t){return{data:null,error:t.message}}},Jr=e=>{const t=[];return e.property_name||t.push("매물명이 필요합니다"),e.location||t.push("소재지가 필요합니다"),e.property_type||t.push("매물종류가 필요합니다"),e.transaction_type||t.push("거래유형이 필요합니다"),e.property_status||t.push("진행상태가 필요합니다"),"sale"===e.transaction_type&&(!e.sale_price||e.sale_price<=0)&&t.push("매매 거래시 매매가가 필요합니다"),"lease"===e.transaction_type&&(!e.lease_price||e.lease_price<=0)&&t.push("전세 거래시 보증금이 필요합니다"),"rent"===e.transaction_type&&(!e.price||e.price<=0)&&t.push("월세 거래시 월세가 필요합니다"),t},Xr=async(e,t)=>{try{await Kr();const s=50;let a=0,n=0;const i=[];for(let l=0;l<e.length;l+=s){const o=e.slice(l,l+s),c=o.map(e=>({...e,manager_id:t||"admin"}));try{for(const e of c){const t=Jr(e);if(t.length>0)throw new Error(`데이터 검증 실패: ${t.join(", ")}`)}const{data:t,error:r}=await lr.from("properties").insert(c).select();if(r)throw r;a+=o.length,l+s<e.length&&await new Promise(e=>setTimeout(e,100))}catch(r){n+=o.length,i.push(`배치 ${Math.floor(l/s)+1}: ${r.message}`)}}return{success:a>0,totalCount:e.length,uploadedCount:a,failedCount:n,errors:i}}catch(s){return{success:!1,totalCount:e.length,uploadedCount:0,failedCount:e.length,errors:[s.message]}}},Zr=Yr,es=async(e={},t=null,r=null)=>{try{if(!lr)return{data:[],error:"Supabase not initialized",totalCount:0};let t=lr.from("properties").select("*",{count:"exact"});if(e.property_type_id&&(t=t.eq("property_type_id",e.property_type_id)),e.transaction_type_id&&(t=t.eq("transaction_type_id",e.transaction_type_id)),e.property_status_id&&(t=t.eq("property_status_id",e.property_status_id)),e.search&&(t=t.or(`property_name.ilike.%${e.search}%,location.ilike.%${e.search}%`)),t=t.order("created_at",{ascending:!1}),r){const{page:e=0,pageSize:s=30}=r,a=e*s,n=a+s-1;t=t.range(a,n)}const{data:s,error:a,count:n}=await t;if(a)throw a;return{data:s||[],error:null,totalCount:n||0}}catch(s){return{data:[],error:s.message,totalCount:0}}},ts=Hr,rs=async(e,t=null)=>{try{if(t){const{data:r}=await Hr(e);if(!Vr(t,r,"delete"))return{error:"이 매물을 삭제할 권한이 없습니다."}}const{error:r}=await lr.from("properties").delete().eq("id",e);if(r)throw r;return{error:null}}catch(r){return{error:r.message}}},ss=()=>{var e;const{user:r}=yr(),[s,a]=t.useState([{id:1,type:"success",message:"VIP 고객 홍길동님 계약 완료",time:"방금 전",read:!1},{id:2,type:"info",message:"신규 매물 1건 크루월드 등록됨",time:"5분 전",read:!1},{id:3,type:"warning",message:"오늘 상담 예정 3건 확인 필요",time:"1시간 전",read:!0}]),{data:n=[],isLoading:i,error:l}=Qt(["dashboard-properties",null==r?void 0:r.email],async()=>{const e={userId:null==r?void 0:r.id,userEmail:null==r?void 0:r.email,isAdmin:_r(null==r?void 0:r.email)},{data:t,error:s}=await es({},e);if(s)throw new Error(s);return t||[]},{retry:!1,refetchOnWindowFocus:!1}),{data:c={}}=Qt("lookupTables",async()=>await Zr(),{staleTime:3e5}),d={totalProperties:n.length,completedDeals:n.filter(e=>{var t;const r=e.property_status_id||e.property_status,s=null==(t=c.propertyStatuses)?void 0:t.find(e=>e.id===r);return"거래완료"===(null==s?void 0:s.name)||"completed"===r}).length,inProgress:n.filter(e=>{var t;const r=e.property_status_id||e.property_status,s=null==(t=c.propertyStatuses)?void 0:t.find(e=>e.id===r);return"거래가능"===(null==s?void 0:s.name)||"거래보류"===(null==s?void 0:s.name)||"available"===r||"hold"===r}).length,thisMonth:n.filter(e=>{const t=new Date(e.created_at),r=new Date;return t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}).length},u={total:d.totalProperties,available:n.filter(e=>{var t;const r=e.property_status_id||e.property_status,s=null==(t=c.propertyStatuses)?void 0:t.find(e=>e.id===r);return"거래가능"===(null==s?void 0:s.name)||"available"===r}).length,reserved:n.filter(e=>{var t;const r=e.property_status_id||e.property_status,s=null==(t=c.propertyStatuses)?void 0:t.find(e=>e.id===r);return"거래보류"===(null==s?void 0:s.name)||"hold"===r}).length,completed:d.completedDeals},m=new Date;m.setMonth(m.getMonth()-1);const h=n.filter(e=>{const t=new Date(e.created_at);return t.getMonth()===m.getMonth()&&t.getFullYear()===m.getFullYear()}).length;h>0&&((d.thisMonth-h)/h*100).toFixed(1);const p=[{name:"직접문의",count:Math.floor(.4*d.totalProperties),color:"#3B82F6"},{name:"온라인",count:Math.floor(.3*d.totalProperties),color:"#10B981"},{name:"소개",count:Math.floor(.2*d.totalProperties),color:"#F59E0B"},{name:"기타",count:Math.floor(.1*d.totalProperties),color:"#8B5CF6"}],x=t.useMemo(()=>{const e={"10억 이하":0,"10-20억":0,"20-30억":0,"30억 이상":0};return n.forEach(t=>{const r=(t.price||0)/1e8;r<=10?e["10억 이하"]++:r<=20?e["10-20억"]++:r<=30?e["20-30억"]++:e["30억 이상"]++}),[{range:"10억 이하",count:e["10억 이하"],color:"#3B82F6"},{range:"10-20억",count:e["10-20억"],color:"#10B981"},{range:"20-30억",count:e["20-30억"],color:"#F59E0B"},{range:"30억 이상",count:e["30억 이상"],color:"#8B5CF6"}]},[n]),f=t.useMemo(()=>{const e={};return n.forEach(t=>{var r,s;const a=t.manager_id||(null==(r=t.users)?void 0:r.email)||"unknown";e[a]||(e[a]={total:0,completed:0}),e[a].total++;const n=null==(s=c.propertyStatuses)?void 0:s.find(e=>e.id===t.property_status_id);"거래완료"===(null==n?void 0:n.name)&&e[a].completed++}),Object.entries(e).map(([e,t])=>{const r=t.total>0?(t.completed/t.total*100).toFixed(1):"0.0";return{name:e.includes("@")?e.split("@")[0]:e,total:t.total,consultation:Math.floor(.8*t.total),contract:t.completed,rate:`${r}%`,status:parseFloat(r)>15?"high":parseFloat(r)>5?"medium":"low"}}).slice(0,5)},[n,c]);return i?Ie.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ie.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ie.jsx("p",{className:"ml-2 text-gray-600",children:"대시보드를 불러오는 중..."})]}):l?Ie.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[Ie.jsx(g,{className:"w-16 h-16 text-red-500"}),Ie.jsxs("div",{className:"text-center",children:[Ie.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"데이터 조회 실패"}),Ie.jsx("p",{className:"text-gray-600 mb-4",children:"매물 데이터를 불러올 수 없습니다."}),Ie.jsxs("p",{className:"text-sm text-red-600 bg-red-50 p-3 rounded",children:["에러: ",l.message]}),Ie.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["현재 사용자: ",null==r?void 0:r.email," (",(null==r?void 0:r.testUserType)||"unknown",")"]})]})]}):Ie.jsxs("div",{className:"min-h-screen w-full bg-slate-50 dark:bg-slate-900",children:[Ie.jsx("div",{className:"mb-4 sm:mb-6 flex gap-3 sm:gap-5 flex-col xl:flex-row w-full px-3 sm:px-6 pt-4 sm:pt-6",children:Ie.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[Ie.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[Ie.jsx("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-lg border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800",children:Ie.jsx(y,{className:"h-5 w-5 sm:h-6 sm:w-6 text-slate-600 dark:text-slate-300"})}),Ie.jsxs("div",{children:[Ie.jsx("h1",{className:"text-lg sm:text-xl font-bold leading-6 text-slate-900 dark:text-white",children:"팀 매물장 관리"}),Ie.jsxs("p",{className:"mt-0.5 text-xs sm:text-sm font-medium leading-4 text-slate-500 dark:text-slate-400",children:[(null==r?void 0:r.name)||(null==(e=null==r?void 0:r.email)?void 0:e.split("@")[0]),"님 안녕하세요"]})]})]}),Ie.jsxs(o,{to:"/properties/new",className:"flex h-9 sm:h-10 items-center justify-center rounded-lg bg-slate-900 px-3 sm:px-4 text-xs sm:text-sm font-medium text-white transition-colors hover:bg-slate-800 dark:bg-white dark:text-slate-900 dark:hover:bg-slate-100",children:[Ie.jsx(b,{className:"mr-1.5 h-3.5 w-3.5 sm:h-4 sm:w-4"}),Ie.jsx("span",{className:"hidden sm:inline",children:"매물 "}),"등록"]})]})}),Ie.jsxs("div",{className:"grid grid-cols-2 gap-3 px-3 sm:gap-4 sm:px-6 md:grid-cols-2 lg:grid-cols-4",children:[Ie.jsx("div",{className:"border-slate-200 bg-white p-3 sm:p-4 dark:border-slate-700 dark:bg-slate-800 rounded-lg border shadow-sm",children:Ie.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[Ie.jsx("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-blue-50 dark:bg-blue-500/20",children:Ie.jsx(y,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 dark:text-blue-400"})}),Ie.jsxs("div",{className:"min-w-0 flex-1",children:[Ie.jsx("h5",{className:"text-xs sm:text-sm font-medium text-slate-600 dark:text-slate-400 truncate",children:"총 매물"}),Ie.jsxs("p",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-white",children:[u.total,"건"]})]})]})}),Ie.jsx("div",{className:"border-slate-200 bg-white p-3 sm:p-4 dark:border-slate-700 dark:bg-slate-800 rounded-lg border shadow-sm",children:Ie.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[Ie.jsx("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-emerald-50 dark:bg-emerald-500/20",children:Ie.jsx(v,{className:"h-4 w-4 sm:h-5 sm:w-5 text-emerald-600 dark:text-emerald-400"})}),Ie.jsxs("div",{className:"min-w-0 flex-1",children:[Ie.jsx("h5",{className:"text-xs sm:text-sm font-medium text-slate-600 dark:text-slate-400 truncate",children:"거래가능"}),Ie.jsxs("p",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-white",children:[u.available,"건"]}),Ie.jsxs("span",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400",children:[u.total>0?Math.round(u.available/u.total*100):0,"%"]})]})]})}),Ie.jsx("div",{className:"border-slate-200 bg-white p-3 sm:p-4 dark:border-slate-700 dark:bg-slate-800 rounded-lg border shadow-sm",children:Ie.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[Ie.jsx("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-amber-50 dark:bg-amber-500/20",children:Ie.jsx(j,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-400"})}),Ie.jsxs("div",{className:"min-w-0 flex-1",children:[Ie.jsx("h5",{className:"text-xs sm:text-sm font-medium text-slate-600 dark:text-slate-400 truncate",children:"거래보류"}),Ie.jsxs("p",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-white",children:[u.reserved,"건"]}),Ie.jsxs("span",{className:"text-xs font-medium text-amber-600 dark:text-amber-400",children:[u.total>0?Math.round(u.reserved/u.total*100):0,"%"]})]})]})}),Ie.jsx("div",{className:"border-slate-200 bg-white p-3 sm:p-4 dark:border-slate-700 dark:bg-slate-800 rounded-lg border shadow-sm",children:Ie.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[Ie.jsx("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-violet-50 dark:bg-violet-500/20",children:Ie.jsx(v,{className:"h-4 w-4 sm:h-5 sm:w-5 text-violet-600 dark:text-violet-400"})}),Ie.jsxs("div",{className:"min-w-0 flex-1",children:[Ie.jsx("h5",{className:"text-xs sm:text-sm font-medium text-slate-600 dark:text-slate-400 truncate",children:"거래완료"}),Ie.jsxs("p",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-white",children:[u.completed,"건"]}),Ie.jsxs("span",{className:"text-xs font-medium text-violet-600 dark:text-violet-400",children:[u.total>0?Math.round(u.completed/u.total*100):0,"%"]})]})]})})]}),Ie.jsx("div",{className:"mb-4 sm:mb-6 flex gap-4 sm:gap-5 flex-col xl:flex-row w-full px-3 sm:px-6",children:Ie.jsxs("div",{className:"border-slate-200 bg-white p-4 sm:p-6 dark:border-slate-700 dark:bg-slate-800 rounded-lg border shadow-sm w-full",children:[Ie.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6",children:[Ie.jsx("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-blue-50 dark:bg-blue-500/20",children:Ie.jsx(w,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 dark:text-blue-400"})}),Ie.jsxs("div",{children:[Ie.jsx("h5",{className:"text-xs sm:text-sm font-medium text-slate-600 dark:text-slate-400",children:"채널별 매물 문의량"}),Ie.jsxs("p",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-white",children:[p.reduce((e,t)=>e+t.count,0),"건"]})]})]}),Ie.jsx("div",{className:"h-[200px] sm:h-[250px] lg:h-[300px] w-full",children:Ie.jsx(N,{width:"100%",height:"100%",children:Ie.jsxs(_,{data:p,children:[Ie.jsx(S,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),Ie.jsx(k,{dataKey:"name",fontSize:10,tick:{fill:"#64748b"},axisLine:{stroke:"#e2e8f0"}}),Ie.jsx(E,{fontSize:10,tick:{fill:"#64748b"},axisLine:{stroke:"#e2e8f0"}}),Ie.jsx(C,{dataKey:"count",fill:"#3b82f6",radius:[4,4,0,0],className:"hover:opacity-80 transition-opacity"})]})})})]})}),Ie.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-5 px-3 sm:px-6 mb-4 sm:mb-5",children:[Ie.jsxs("div",{className:"border-slate-200 bg-white p-4 sm:p-6 dark:border-slate-700 dark:bg-slate-800 rounded-lg border shadow-sm lg:col-span-2",children:[Ie.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6",children:[Ie.jsx("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-emerald-50 dark:bg-emerald-500/20",children:Ie.jsx(O,{className:"h-4 w-4 sm:h-5 sm:w-5 text-emerald-600 dark:text-emerald-400"})}),Ie.jsxs("div",{children:[Ie.jsx("h5",{className:"text-xs sm:text-sm font-medium text-slate-600 dark:text-slate-400",children:"가격대별 매물 분포"}),Ie.jsx("p",{className:"text-sm sm:text-base font-bold text-slate-900 dark:text-white",children:"가격 분포 분석"})]})]}),Ie.jsx("div",{className:"h-48 sm:h-56 lg:h-64",children:Ie.jsx(N,{width:"100%",height:"100%",children:Ie.jsx(T,{children:Ie.jsx(A,{data:x,cx:"50%",cy:"50%",innerRadius:30,outerRadius:60,dataKey:"count",label:({range:e,count:t})=>`${e}: ${t}건`,fontSize:10,children:x.map((e,t)=>Ie.jsx(D,{fill:e.color},`cell-${t}`))})})})})]}),Ie.jsxs("div",{className:"border-slate-200 bg-white p-4 sm:p-6 dark:border-slate-700 dark:bg-slate-800 rounded-lg border shadow-sm",children:[Ie.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[Ie.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[Ie.jsx("div",{className:"flex h-8 w-8 sm:h-10 sm:w-10 items-center justify-center rounded-lg bg-amber-50 dark:bg-amber-500/20",children:Ie.jsx(P,{className:"h-4 w-4 sm:h-5 sm:w-5 text-amber-600 dark:text-amber-400"})}),Ie.jsxs("div",{children:[Ie.jsx("h5",{className:"text-xs sm:text-sm font-medium text-slate-600 dark:text-slate-400",children:"알림"}),Ie.jsx("p",{className:"text-sm sm:text-base font-bold text-slate-900 dark:text-white",children:"실시간 알림"})]})]}),Ie.jsx("div",{className:"w-2 h-2 sm:w-3 sm:h-3 bg-red-500 rounded-full animate-pulse"})]}),Ie.jsx("div",{className:"space-y-3",children:s.map(e=>Ie.jsx("div",{className:`p-4 rounded-xl border cursor-pointer transition-all hover:shadow-md ${"success"===e.type?"border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-900/20":"warning"===e.type?"border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-900/20":"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-900/20"} ${e.read?"opacity-60":""}`,onClick:()=>{return t=e.id,void a(e=>e.map(e=>e.id===t?{...e,read:!0}:e));var t},children:Ie.jsxs("div",{className:"flex items-start gap-3",children:[Ie.jsxs("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg "+("success"===e.type?"bg-green-500/10 dark:bg-green-500/20":"warning"===e.type?"bg-orange-500/10 dark:bg-orange-500/20":"bg-blue-500/10 dark:bg-blue-500/20"),children:["success"===e.type&&Ie.jsx(v,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"warning"===e.type&&Ie.jsx(g,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),"info"===e.type&&Ie.jsx(y,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})]}),Ie.jsxs("div",{className:"flex-1",children:[Ie.jsx("p",{className:"text-sm font-medium text-zinc-950 dark:text-white",children:e.message}),Ie.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:e.time})]}),!e.read&&Ie.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full"})]})},e.id))})]})]}),Ie.jsxs("div",{className:"border-zinc-200 bg-white dark:border-zinc-800 dark:bg-zinc-900 rounded-xl border shadow-sm mb-5 px-6",children:[Ie.jsxs("div",{className:"flex items-center gap-3 py-6 border-b border-zinc-200 dark:border-zinc-800",children:[Ie.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-xl border border-zinc-200 text-4xl dark:border-zinc-800 dark:text-white bg-blue-500/10 dark:bg-blue-500/20",children:Ie.jsx(F,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),Ie.jsxs("div",{children:[Ie.jsx("h5",{className:"text-sm font-medium leading-5 text-zinc-600 dark:text-zinc-400",children:"팀 성과 현황"}),Ie.jsx("p",{className:"mt-1 text-lg font-bold leading-6 text-zinc-950 dark:text-white",children:"팀 성과 현황"})]})]}),Ie.jsx("div",{className:"overflow-x-auto",children:Ie.jsxs("table",{className:"w-full",children:[Ie.jsx("thead",{children:Ie.jsxs("tr",{className:"border-b border-zinc-200 dark:border-zinc-800",children:[Ie.jsx("th",{className:"px-4 py-4 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"직원명"}),Ie.jsx("th",{className:"px-4 py-4 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"총담수"}),Ie.jsx("th",{className:"px-4 py-4 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"상담수"}),Ie.jsx("th",{className:"px-4 py-4 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"계약수"}),Ie.jsx("th",{className:"px-4 py-4 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"성약률"}),Ie.jsx("th",{className:"px-4 py-4 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:"상태"})]})}),Ie.jsx("tbody",{className:"divide-y divide-zinc-200 dark:divide-zinc-800",children:f.map((e,t)=>Ie.jsxs("tr",{className:"hover:bg-zinc-50 dark:hover:bg-zinc-800/50 transition-colors",children:[Ie.jsxs("td",{className:"px-4 py-4 text-sm font-medium text-zinc-950 dark:text-white flex items-center gap-3",children:[Ie.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-zinc-100 dark:bg-zinc-800",children:Ie.jsx(F,{className:"w-4 h-4 text-zinc-600 dark:text-zinc-400"})}),e.name]}),Ie.jsxs("td",{className:"px-4 py-4 text-sm text-zinc-600 dark:text-zinc-300",children:[e.total,"건"]}),Ie.jsxs("td",{className:"px-4 py-4 text-sm text-zinc-600 dark:text-zinc-300",children:[e.consultation,"건"]}),Ie.jsxs("td",{className:"px-4 py-4 text-sm text-zinc-600 dark:text-zinc-300",children:[e.contract,"건"]}),Ie.jsx("td",{className:"px-4 py-4 text-sm font-medium text-zinc-950 dark:text-white",children:e.rate}),Ie.jsx("td",{className:"px-4 py-4",children:Ie.jsx("div",{className:"w-3 h-3 rounded-full "+("high"===e.status?"bg-green-500":"medium"===e.status?"bg-yellow-500":"bg-red-500")})})]},t))})]})})]}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-5 px-6",children:[Ie.jsxs(o,{to:"/properties",className:"group border-zinc-200 bg-white p-6 dark:border-zinc-800 dark:bg-zinc-900 rounded-xl border shadow-sm hover:shadow-md transition-all duration-300 flex items-center gap-4",children:[Ie.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-blue-500/10 dark:bg-blue-500/20",children:Ie.jsx(y,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),Ie.jsxs("div",{className:"flex-1",children:[Ie.jsx("span",{className:"text-sm font-medium text-zinc-950 dark:text-white",children:"매물 관리"}),Ie.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:"전체 매물 조회 및 관리"})]}),Ie.jsx(M,{className:"w-4 h-4 text-zinc-400 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors"})]}),Ie.jsxs(o,{to:"/performance",className:"group border-zinc-200 bg-white p-6 dark:border-zinc-800 dark:bg-zinc-900 rounded-xl border shadow-sm hover:shadow-md transition-all duration-300 flex items-center gap-4",children:[Ie.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-green-500/10 dark:bg-green-500/20",children:Ie.jsx(w,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),Ie.jsxs("div",{className:"flex-1",children:[Ie.jsx("span",{className:"text-sm font-medium text-zinc-950 dark:text-white",children:"직원 성과"}),Ie.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:"개인별 실적 분석"})]}),Ie.jsx(M,{className:"w-4 h-4 text-zinc-400 group-hover:text-green-600 dark:group-hover:text-green-400 transition-colors"})]}),Ie.jsxs("button",{onClick:()=>((e,t)=>{const r={id:Date.now(),type:e,message:t,time:"방금 전",read:!1};a(e=>[r,...e.slice(0,4)])})("info","신규 매물 등록 완료"),className:"group border-zinc-200 bg-white p-6 dark:border-zinc-800 dark:bg-zinc-900 rounded-xl border shadow-sm hover:shadow-md transition-all duration-300 flex items-center gap-4",children:[Ie.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-orange-500/10 dark:bg-orange-500/20",children:Ie.jsx(P,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),Ie.jsxs("div",{className:"flex-1",children:[Ie.jsx("span",{className:"text-sm font-medium text-zinc-950 dark:text-white",children:"알림 테스트"}),Ie.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:"알림 기능 테스트"})]})]}),Ie.jsxs(o,{to:"/users",className:"group border-zinc-200 bg-white p-6 dark:border-zinc-800 dark:bg-zinc-900 rounded-xl border shadow-sm hover:shadow-md transition-all duration-300 flex items-center gap-4",children:[Ie.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-purple-500/10 dark:bg-purple-500/20",children:Ie.jsx(F,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),Ie.jsxs("div",{className:"flex-1",children:[Ie.jsx("span",{className:"text-sm font-medium text-zinc-950 dark:text-white",children:"직원 관리"}),Ie.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-1",children:"사용자 권한 설정"})]}),Ie.jsx(M,{className:"w-4 h-4 text-zinc-400 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors"})]})]})]})},as=({property:e,onEdit:t,onDelete:r,onView:s,showCustomerInfo:a=!1})=>{const{user:n}=yr(),i=e=>{if(!e||0===e)return"-";if(e>=1e8){const t=Math.floor(e/1e8),r=Math.floor(e%1e8/1e4);return r>0?`${t}억 ${r.toLocaleString()}만원`:`${t}억원`}return e>=1e4?`${(e/1e4).toLocaleString()}만원`:`${e.toLocaleString()}원`};return Ie.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 hover:shadow-md transition-shadow duration-200",children:Ie.jsxs("div",{className:"p-4",children:[Ie.jsxs("div",{className:"flex justify-between items-start mb-3",children:[Ie.jsxs("div",{className:"flex-1 min-w-0",children:[Ie.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.property_name}),Ie.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[Ie.jsx(I,{className:"w-4 h-4 mr-1 flex-shrink-0"}),Ie.jsx("span",{className:"truncate",children:e.location})]})]}),Ie.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full border ${c=e.property_status,{available:"bg-green-100 text-green-800 border-green-200",reserved:"bg-yellow-100 text-yellow-800 border-yellow-200",completed:"bg-blue-100 text-blue-800 border-blue-200"}[c]||"bg-gray-100 text-gray-800 border-gray-200"}`,children:(e=>({available:"거래가능",reserved:"거래보류",completed:"거래완료"}[e]||e))(e.property_status)})]}),Ie.jsxs("div",{className:"space-y-2 mb-4",children:[Ie.jsx("div",{className:"flex items-center justify-between",children:Ie.jsxs("div",{className:"flex items-center space-x-2",children:[Ie.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-700 rounded",children:(o=e.property_type,{apt:"아파트",officetel:"오피스텔",villa:"빌라/연립",house:"단독주택",commercial:"상가"}[o]||o)}),Ie.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded",children:(e=>({sale:"매매",lease:"전세",rent:"월세"}[e]||e))(e.transaction_type)})]})}),Ie.jsx("div",{className:"text-lg font-bold text-gray-900",children:(()=>{const t=e.transaction_type;return"sale"===t?i(e.sale_price):"lease"===t?i(e.lease_price):"rent"===t?`${i(e.lease_price)} / ${i(e.price)}`:"-"})()}),e.supply_area_sqm&&Ie.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[Ie.jsx(R,{className:"w-4 h-4 mr-1"}),Ie.jsxs("span",{children:["공급면적: ",(l=e.supply_area_sqm,l?`${l}㎡ (${(.3025*l).toFixed(1)}평)`:"-")]})]}),Ie.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.floor_info&&Ie.jsx("span",{children:e.floor_info}),e.direction&&Ie.jsx("span",{children:e.direction}),e.rooms_bathrooms&&Ie.jsx("span",{children:e.rooms_bathrooms})]}),Ie.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[Ie.jsx($,{className:"w-3 h-3 mr-1"}),Ie.jsxs("span",{children:["등록: ",new Date(e.created_at).toLocaleDateString()]})]})]}),a&&Ie.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded",children:[Ie.jsxs("div",{className:"flex items-center mb-2",children:[Ie.jsx(L,{className:"w-4 h-4 mr-2 text-blue-600"}),Ie.jsx("span",{className:"text-sm font-medium text-blue-800",children:"고객정보"})]}),(()=>{const t=(e=>{if(!e)return null;try{return JSON.parse(e)}catch{return null}})(e.resident);return t?Ie.jsxs("div",{className:"text-sm text-blue-700",children:[Ie.jsxs("div",{children:[Ie.jsx("span",{className:"font-medium",children:"이름:"})," ",t.name||"-"]}),Ie.jsxs("div",{children:[Ie.jsx("span",{className:"font-medium",children:"연락처:"})," ",t.phone||"-"]}),t.notes&&Ie.jsxs("div",{children:[Ie.jsx("span",{className:"font-medium",children:"메모:"})," ",t.notes]})]}):Ie.jsx("div",{className:"text-sm text-blue-600",children:"고객정보가 없습니다."})})()]}),e.special_notes&&Ie.jsxs("div",{className:"mb-4 p-2 bg-yellow-50 border border-yellow-200 rounded text-sm text-yellow-800",children:[Ie.jsx("span",{className:"font-medium",children:"특이사항: "}),Ie.jsx("span",{className:"line-clamp-2",children:e.special_notes})]}),Ie.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[Ie.jsxs("div",{className:"flex space-x-2",children:[Ie.jsxs("button",{onClick:()=>s&&s(e),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-gray-600 bg-gray-100 rounded hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[Ie.jsx(q,{className:"w-4 h-4 mr-1"}),"보기"]}),Vr(n,e,"edit")&&Ie.jsxs("button",{onClick:()=>t&&t(e),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-600 bg-blue-100 rounded hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ie.jsx(z,{className:"w-4 h-4 mr-1"}),"수정"]})]}),r&&Vr(n,e,"delete")&&Ie.jsxs("button",{onClick:()=>r(e),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-red-600 bg-red-100 rounded hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-500",children:[Ie.jsx(U,{className:"w-4 h-4 mr-1"}),"삭제"]})]})]})});var l,o,c},ns={"gyum@the-realty.co.kr":"김규민","lucas@the-realty.co.kr":"하상현","yool@the-realty.co.kr":"정서연","grace@the-realty.co.kr":"정선혜","sso@the-realty.co.kr":"박소현","jenny@the-realty.co.kr":"정연서","joo@the-realty.co.kr":"송영주","yun@the-realty.co.kr":"정윤식","mimi@the-realty.co.kr":"성은미","sun@the-realty.co.kr":"서을선","kylie@the-realty.co.kr":"서지혜","hmlee@the-realty.co.kr":"이혜만","seok@the-realty.co.kr":"김효석"},is=()=>{var e,r,s,a;const[n,i]=t.useState({search:"",status:"",type:"",transactionType:""}),[c,d]=t.useState("table"),[u,m]=t.useState({show:!1,property:null}),h=l(),{user:p,userProfile:x}=yr(),f=Lt(),g=t.useRef(null),{data:y,fetchNextPage:v,hasNextPage:j,isFetchingNextPage:w,isLoading:N,error:_,refetch:S}=Vt(Qe(["properties",n,null==p?void 0:p.email],async({pageParam:e=0})=>{const t=JSON.parse(localStorage.getItem("temp-bypass-user")||"{}"),r=t.id?t:p,s={userId:null==r?void 0:r.id,userEmail:null==r?void 0:r.email,isAdmin:_r(null==r?void 0:r.email)},a=await es(n,s,{page:e,pageSize:30});if(a.error)throw a.error;return{properties:a.data,totalCount:a.totalCount,currentPage:e,hasMore:30*(e+1)<a.totalCount}},{getNextPageParam:e=>e.hasMore?e.currentPage+1:void 0,refetchOnWindowFocus:!1}),At),k=(null==y?void 0:y.pages.flatMap(e=>e.properties))||[],E=(null==(e=null==y?void 0:y.pages[0])?void 0:e.totalCount)||0,{data:C={}}=Qt("lookupTables",async()=>await Zr(),{staleTime:3e5});t.useEffect(()=>{const e=new IntersectionObserver(e=>{const[t]=e;t.isIntersecting&&j&&!w&&v()},{root:null,rootMargin:"100px",threshold:0});return g.current&&e.observe(g.current),()=>{g.current&&e.unobserve(g.current)}},[j,v,w]);const O=e=>{var t;const r=e.property_type_id||e.property_type,s=null==(t=C.propertyTypes)?void 0:t.find(e=>e.id===r);return(null==s?void 0:s.name)||r||"미지정"},T=e=>{var t;const r=e.transaction_type_id||e.transaction_type,s=null==(t=C.transactionTypes)?void 0:t.find(e=>e.id===r);return(null==s?void 0:s.name)||r||"미지정"},A=e=>{var t;const r=e.property_status_id||e.property_status,s=null==(t=C.propertyStatuses)?void 0:t.find(e=>e.id===r);return(null==s?void 0:s.name)||{available:"거래가능",completed:"거래완료",hold:"거래보류",cancelled:"거래철회",inspection_available:"임장가능"}[r]||r||"미지정"},D=e=>{var t,r,s;return e.manager_name?e.manager_name:(null==(t=e.manager_id)?void 0:t.includes("@"))?(e=>{if(!e)return"미지정";const t=e.replace("hardcoded-","");return ns[t]||t.split("@")[0]})(e.manager_id.replace("hardcoded-","")):(null==(r=e.users)?void 0:r.name)||(null==(s=e.users)?void 0:s.email)||"미지정"},P=Bt(async e=>{const{error:t}=await rs(e);if(t)throw new Error(t);return e},{onSuccess:e=>{f.invalidateQueries(["properties"]),m({show:!1,property:null}),alert("매물이 성공적으로 삭제되었습니다.")},onError:e=>{alert(`매물 삭제 중 오류가 발생했습니다: ${e.message}`)}}),F=e=>{m({show:!0,property:e})},M=k.filter(e=>{var t,r;const s=!n.search||(null==(t=e.property_name)?void 0:t.toLowerCase().includes(n.search.toLowerCase()))||(null==(r=e.location)?void 0:r.toLowerCase().includes(n.search.toLowerCase())),a=A(e),i=O(e),l=T(e),o=!n.status||a===n.status,c=!n.type||i===n.type,d=!n.transactionType||l===n.transactionType;return s&&o&&c&&d}),R=e=>{if(e>=1e8){const t=Math.floor(e/1e8),r=Math.floor(e%1e8/1e4);return r>0?`${t}억 ${r.toLocaleString()}만원`:`${t}억원`}return e>=1e4?`${(e/1e4).toLocaleString()}만원`:`${e.toLocaleString()}원`},L=e=>{const t=T(e);return"매매"===t?R(e.price||0):"전세"===t?R(e.lease_price||0):"월세"===t?`${R(e.lease_price||0)} / ${R(e.monthly_rent||0)}`:R(e.price||0)||"-"},q=e=>e?`${e}㎡ (${(.3025*e).toFixed(1)}평)`:"-";return Ie.jsxs("div",{className:"space-y-6",children:[Ie.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[Ie.jsxs("div",{children:[Ie.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"매물 목록"}),Ie.jsxs("p",{className:"text-gray-600",children:["총 ",E.toLocaleString(),"개의 매물이 등록되어 있습니다.",M.length!==E&&` (필터된 매물: ${M.length}개)`]})]}),Ie.jsxs("div",{className:"flex items-center space-x-3",children:[Ie.jsxs("div",{className:"flex rounded-lg bg-gray-100 p-1",children:[Ie.jsx("button",{onClick:()=>d("table"),className:"px-3 py-1 rounded "+("table"===c?"bg-white shadow":""),children:Ie.jsx(B,{className:"w-4 h-4"})}),Ie.jsx("button",{onClick:()=>d("card"),className:"px-3 py-1 rounded "+("card"===c?"bg-white shadow":""),children:Ie.jsx(V,{className:"w-4 h-4"})})]}),Ie.jsxs("button",{onClick:()=>S(),className:"btn-secondary",children:[Ie.jsx(Q,{className:"w-4 h-4 mr-2"}),"새로고침"]}),Ie.jsxs(o,{to:"/properties/new",className:"btn-primary",children:[Ie.jsx(b,{className:"w-4 h-4 mr-2"}),"매물 등록"]})]})]}),Ie.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[Ie.jsx("div",{className:"md:col-span-2",children:Ie.jsxs("div",{className:"relative",children:[Ie.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Ie.jsx("input",{type:"text",placeholder:"매물명, 위치로 검색...",value:n.search,onChange:e=>i({...n,search:e.target.value}),className:"pl-10 w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})}),Ie.jsxs("select",{value:n.status,onChange:e=>i({...n,status:e.target.value}),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[Ie.jsx("option",{value:"",children:"전체 상태"}),Ie.jsx("option",{value:"거래가능",children:"거래가능"}),Ie.jsx("option",{value:"거래완료",children:"거래완료"}),Ie.jsx("option",{value:"거래보류",children:"거래보류"}),Ie.jsx("option",{value:"거래철회",children:"거래철회"}),Ie.jsx("option",{value:"임장가능",children:"임장가능"})]}),Ie.jsxs("select",{value:n.type,onChange:e=>i({...n,type:e.target.value}),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[Ie.jsx("option",{value:"",children:"전체 유형"}),null==(r=C.propertyTypes)?void 0:r.map(e=>Ie.jsx("option",{value:e.name,children:e.name},e.id))]}),Ie.jsxs("select",{value:n.transactionType,onChange:e=>i({...n,transactionType:e.target.value}),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[Ie.jsx("option",{value:"",children:"거래 유형"}),null==(s=C.transactionTypes)?void 0:s.map(e=>Ie.jsx("option",{value:e.name,children:e.name},e.id))]})]})}),N?Ie.jsxs("div",{className:"text-center py-8",children:[Ie.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),Ie.jsx("p",{className:"mt-2 text-gray-600",children:"매물 목록을 불러오는 중..."})]}):_?Ie.jsx("div",{className:"text-center py-8 text-red-600",children:"매물 목록을 불러오는 중 오류가 발생했습니다."}):"table"===c?Ie.jsxs("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[Ie.jsx("div",{className:"overflow-x-auto",children:Ie.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ie.jsx("thead",{className:"bg-gray-50",children:Ie.jsxs("tr",{children:[Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"번호"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"매물 정보"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"위치"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"유형"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"거래"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"면적"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"담당자"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등록일"}),Ie.jsx("th",{className:"relative px-6 py-3",children:Ie.jsx("span",{className:"sr-only",children:"Actions"})})]})}),Ie.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map((e,t)=>Ie.jsxs("tr",{className:"hover:bg-gray-50",children:[Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t+1}),Ie.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[Ie.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.property_name||"-"}),e.dong&&e.ho&&Ie.jsxs("div",{className:"text-sm text-gray-500",children:[e.dong,"동 ",e.ho,"호"]})]}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx(I,{className:"w-4 h-4 mr-1 text-gray-400"}),e.location||"-"]})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:O(e)}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:T(e)}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L(e)}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:q(e.area_supply_sqm)}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("거래가능"===A(e)?"bg-green-100 text-green-800":"거래완료"===A(e)?"bg-gray-100 text-gray-800":"거래보류"===A(e)?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:A(e)})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx(W,{className:"w-4 h-4 mr-1 text-gray-400"}),D(e)]})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx($,{className:"w-4 h-4 mr-1 text-gray-400"}),new Date(e.created_at).toLocaleDateString()]})}),Ie.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[Ie.jsx(o,{to:`/properties/${e.id}`,className:"text-blue-600 hover:text-blue-900 mr-3",children:"상세"}),Ie.jsx(o,{to:`/properties/${e.id}/edit`,className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"수정"}),((null==x?void 0:x.isAdmin)||e.manager_id===(null==x?void 0:x.email))&&Ie.jsx("button",{onClick:()=>F(e),className:"text-red-600 hover:text-red-900",children:"삭제"})]})]},e.id))})]})}),Ie.jsxs("div",{ref:g,className:"h-10 flex items-center justify-center",children:[w&&Ie.jsxs("div",{className:"text-center py-4",children:[Ie.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"}),Ie.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"더 많은 매물을 불러오는 중..."})]}),!j&&k.length>0&&Ie.jsx("p",{className:"text-sm text-gray-500 py-4",children:"모든 매물을 불러왔습니다."})]})]}):Ie.jsxs("div",{children:[Ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:M.map(e=>Ie.jsx(as,{property:e,onEdit:()=>h(`/properties/${e.id}/edit`),onDelete:()=>F(e),onView:()=>h(`/properties/${e.id}`),lookupData:C},e.id))}),Ie.jsxs("div",{ref:g,className:"h-10 flex items-center justify-center mt-6",children:[w&&Ie.jsxs("div",{className:"text-center py-4",children:[Ie.jsx("div",{className:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900"}),Ie.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"더 많은 매물을 불러오는 중..."})]}),!j&&k.length>0&&Ie.jsx("p",{className:"text-sm text-gray-500 py-4",children:"모든 매물을 불러왔습니다."})]})]}),u.show&&Ie.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:Ie.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[Ie.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"매물 삭제 확인"}),Ie.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:['매물 "',null==(a=u.property)?void 0:a.property_name,'"을(를) 정말 삭제하시겠습니까?']}),Ie.jsxs("div",{className:"flex justify-end space-x-3",children:[Ie.jsx("button",{onClick:()=>{m({show:!1,property:null})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"취소"}),Ie.jsx("button",{onClick:()=>{u.property&&P.mutate(u.property.id)},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700",children:"삭제"})]})]})})]})},ls=()=>{var e,r,s,a;const[n,i]=t.useState({search:"",status:"",type:"",transactionType:""}),[c,d]=t.useState("table"),[u,m]=t.useState({show:!1,property:null}),h=l(),{user:p,userProfile:x}=yr(),f=Lt(),{data:g=[],isLoading:v,error:j,refetch:w}=Qt(["my-properties",n,null==p?void 0:p.email],async()=>{const e={...p,isAdmin:!1,role:"user"},{data:t,error:r}=await es(n,e);if(r)throw r;return t||[]},{refetchOnWindowFocus:!1}),{data:N={}}=Qt("lookupTables",async()=>await Zr(),{staleTime:3e5}),_=e=>{var t;const r=null==(t=N.propertyTypes)?void 0:t.find(t=>t.id===e.property_type_id);return(null==r?void 0:r.name)||"미지정"},S=e=>{var t;const r=null==(t=N.transactionTypes)?void 0:t.find(t=>t.id===e.transaction_type_id);return(null==r?void 0:r.name)||"미지정"},k=e=>{var t;const r=null==(t=N.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);return(null==r?void 0:r.name)||"미지정"},E=Bt(async e=>{const{error:t}=await rs(e,p);if(t)throw new Error(t);return e},{onSuccess:e=>{f.invalidateQueries(["my-properties"]),m({show:!1,property:null}),alert("매물이 성공적으로 삭제되었습니다.")},onError:e=>{alert(`매물 삭제 중 오류가 발생했습니다: ${e.message}`)}}),C=e=>{m({show:!0,property:e})},O=g.filter(e=>{const t=!n.search||e.property_name.toLowerCase().includes(n.search.toLowerCase())||e.location.toLowerCase().includes(n.search.toLowerCase()),r=k(e),s=_(e),a=S(e),i=!n.status||r===n.status,l=!n.type||s===n.type,o=!n.transactionType||a===n.transactionType;return t&&i&&l&&o}),T=e=>{if(e>=1e8){const t=Math.floor(e/1e8),r=Math.floor(e%1e8/1e4);return r>0?`${t}억 ${r.toLocaleString()}만원`:`${t}억원`}return e>=1e4?`${(e/1e4).toLocaleString()}만원`:`${e.toLocaleString()}원`},A=e=>{const t=S(e);return"매매"===t?T(e.price||0):"전세"===t?T(e.lease_price||0):"월세"===t?`${T(e.lease_price||0)} / ${T(e.monthly_rent||0)}`:T(e.price||0)||"-"},D=e=>e?`${e}㎡ (${(.3025*e).toFixed(1)}평)`:"-";return Ie.jsxs("div",{className:"space-y-6",children:[Ie.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center space-y-4 sm:space-y-0",children:[Ie.jsxs("div",{children:[Ie.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"내 매물 관리"}),Ie.jsx("p",{className:"text-gray-600",children:"본인이 담당하는 매물을 관리하고 고객정보를 확인할 수 있습니다."})]}),Ie.jsxs("div",{className:"flex items-center space-x-3",children:[Ie.jsxs("div",{className:"hidden sm:flex border border-gray-300 rounded-md",children:[Ie.jsx("button",{onClick:()=>d("table"),className:"px-3 py-2 text-sm font-medium rounded-l-md "+("table"===c?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:Ie.jsx(B,{className:"w-4 h-4"})}),Ie.jsx("button",{onClick:()=>d("card"),className:"px-3 py-2 text-sm font-medium rounded-r-md "+("card"===c?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:Ie.jsx(V,{className:"w-4 h-4"})})]}),Ie.jsxs(o,{to:"/properties/new",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ie.jsx(b,{className:"w-5 h-5 mr-2"}),"새 매물 등록"]})]})]}),v&&Ie.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ie.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ie.jsx("p",{className:"ml-2 text-gray-600",children:"매물 목록을 불러오는 중..."})]}),j&&Ie.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsxs("span",{className:"text-red-600",children:["매물 목록을 불러오는데 실패했습니다: ",j.message]}),Ie.jsx("button",{onClick:()=>w(),className:"ml-4 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"다시 시도"})]})}),!v&&!j&&Ie.jsxs(Ie.Fragment,{children:[Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"필터 및 검색"}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"검색"}),Ie.jsxs("div",{className:"relative",children:[Ie.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),Ie.jsx("input",{type:"text",placeholder:"매물명, 지역 검색",value:n.search,onChange:e=>i({...n,search:e.target.value}),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"진행상태"}),Ie.jsxs("select",{value:n.status,onChange:e=>i({...n,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[Ie.jsx("option",{value:"",children:"전체"}),null==(e=N.propertyStatuses)?void 0:e.map(e=>Ie.jsx("option",{value:e.name,children:e.name},e.id))]})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"매물종류"}),Ie.jsxs("select",{value:n.type,onChange:e=>i({...n,type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[Ie.jsx("option",{value:"",children:"전체"}),null==(r=N.propertyTypes)?void 0:r.map(e=>Ie.jsx("option",{value:e.name,children:e.name},e.id))]})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"매물유형"}),Ie.jsxs("select",{value:n.transactionType,onChange:e=>i({...n,transactionType:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[Ie.jsx("option",{value:"",children:"전체"}),null==(s=N.transactionTypes)?void 0:s.map(e=>Ie.jsx("option",{value:e.name,children:e.name},e.id))]})]}),Ie.jsx("div",{className:"flex items-end",children:Ie.jsxs("button",{onClick:()=>i({search:"",status:"",type:"",transactionType:""}),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 font-medium rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:[Ie.jsx(Q,{className:"w-4 h-4 mr-2 inline"}),"초기화"]})})]})]}),0===O.length?Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-8 text-center text-gray-500",children:[Ie.jsx(y,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),Ie.jsx("p",{className:"text-lg font-medium mb-2",children:"담당 매물이 없습니다"}),Ie.jsx("p",{className:"text-sm",children:"새로운 매물을 등록해보세요."})]}):Ie.jsxs(Ie.Fragment,{children:[Ie.jsx("div",{className:"bg-white shadow rounded-lg",children:Ie.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:Ie.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["내 매물 목록 (",O.length,"건) - 고객정보 포함"]})})}),"table"===c&&Ie.jsx("div",{className:"hidden md:block bg-white shadow rounded-lg overflow-hidden",children:Ie.jsx("div",{className:"overflow-x-auto",children:Ie.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ie.jsx("thead",{className:"bg-gray-50",children:Ie.jsxs("tr",{children:[Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"매물ID"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"매물정보"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"위치"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"매물유형"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"가격"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"고객정보"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등록일"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),Ie.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(e=>{const t=(e=>{if(!e)return null;try{return JSON.parse(e)}catch{return null}})(e.resident);return Ie.jsxs("tr",{className:"hover:bg-gray-50",children:[Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[Ie.jsx(K,{className:"w-4 h-4 mr-1"}),Ie.jsx("span",{className:"font-mono text-xs",children:e.id.slice(0,8)})]})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsxs("div",{children:[Ie.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.property_name}),Ie.jsxs("div",{className:"text-sm text-gray-500",children:[_(e)," • ",D(e.supply_area_sqm)]})]})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[Ie.jsx(I,{className:"w-4 h-4 mr-1 text-gray-400"}),e.location]})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsx("div",{className:"text-sm text-gray-900",children:S(e)})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsx("div",{className:"flex items-center text-sm font-medium text-gray-900",children:A(e)})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsx("div",{className:"text-sm text-gray-900",children:t?Ie.jsxs("div",{children:[Ie.jsx("div",{className:"font-medium",children:t.name||"-"}),Ie.jsx("div",{className:"text-xs text-gray-500",children:t.phone||"-"})]}):Ie.jsx("span",{className:"text-gray-400",children:"정보 없음"})})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("매물확보"===k(e)||"광고진행"===k(e)?"bg-green-100 text-green-800":"거래완료"===k(e)?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:k(e)})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[Ie.jsx($,{className:"w-4 h-4 mr-1"}),new Date(e.created_at).toLocaleDateString()]})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ie.jsxs("div",{className:"flex space-x-2",children:[Ie.jsx(o,{to:`/properties/${e.id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:"상세"}),Ie.jsx(o,{to:`/properties/${e.id}/edit`,className:"text-green-600 hover:text-green-800 font-medium",children:"수정"}),Ie.jsx("button",{onClick:()=>C(e),className:"text-red-600 hover:text-red-800 font-medium",disabled:E.isLoading,children:"삭제"})]})})]},e.id)})})]})})}),("card"===c||window.innerWidth<768)&&Ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(e=>Ie.jsx(as,{property:e,showCustomerInfo:!0,onView:e=>h(`/properties/${e.id}`),onEdit:e=>h(`/properties/${e.id}/edit`),onDelete:e=>C(e)},e.id))})]})]}),u.show&&Ie.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:Ie.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:Ie.jsxs("div",{className:"mt-3 text-center",children:[Ie.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:Ie.jsx(U,{className:"h-6 w-6 text-red-600"})}),Ie.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mt-4",children:"매물 삭제 확인"}),Ie.jsxs("div",{className:"mt-2 px-7 py-3",children:[Ie.jsxs("p",{className:"text-sm text-gray-500",children:["'",null==(a=u.property)?void 0:a.property_name,"' 매물을 정말로 삭제하시겠습니까?"]}),Ie.jsx("p",{className:"text-sm text-red-600 mt-2",children:"삭제된 매물은 복구할 수 없습니다."})]}),Ie.jsx("div",{className:"items-center px-4 py-3",children:Ie.jsxs("div",{className:"flex space-x-3",children:[Ie.jsx("button",{onClick:()=>{m({show:!1,property:null})},className:"flex-1 px-4 py-2 bg-gray-500 text-white text-base font-medium rounded-md shadow-sm hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-300",disabled:E.isLoading,children:"취소"}),Ie.jsx("button",{onClick:()=>{u.property&&E.mutate(u.property.id)},className:"flex-1 px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:opacity-50",disabled:E.isLoading,children:E.isLoading?"삭제 중...":"삭제"})]})})]})})})]})},os={primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-gray-200 hover:bg-gray-300 text-gray-800",success:"bg-green-600 hover:bg-green-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",warning:"bg-yellow-500 hover:bg-yellow-600 text-white",outline:"bg-transparent border border-current hover:bg-gray-50"},cs={sm:"px-2 py-1 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"},ds=({children:e,type:t="button",variant:r="primary",size:s="md",className:a="",disabled:n=!1,onClick:i,...l})=>Ie.jsx("button",{type:t,className:`\n        ${os[r]||os.primary}\n        ${cs[s]||cs.md}\n        rounded-md font-medium transition-colors\n        focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50\n        ${n?"opacity-50 cursor-not-allowed":""}\n        ${a}\n      `,disabled:n,onClick:i,...l,children:e}),us=({propertyId:e,currentManagerId:r})=>{var s,a;const[n,i]=t.useState(""),[l,o]=t.useState(""),[c,d]=t.useState(!1),[u,m]=t.useState(null),h=Lt();t.useEffect(()=>{r&&i(r)},[r]);const{data:p,isLoading:x}=Qt("users",async()=>{const{data:e,error:t}=await lr.from("users").select("id, name, email").eq("status","active").order("name");if(t)throw t;return e}),{data:f,isLoading:g}=Qt(["manager-history",e],async()=>{const{data:t,error:r}=await lr.from("manager_history").select("\n          id,\n          changed_at,\n          reason,\n          previous_manager_id,\n          new_manager_id,\n          changed_by,\n          previous_manager:previous_manager_id(name),\n          new_manager:new_manager_id(name),\n          changer:changed_by(name)\n        ").eq("property_id",e).order("changed_at",{ascending:!1});if(r)throw r;return t},{enabled:!!e}),y=Bt(async({propertyId:e,managerId:t,reason:r})=>{const{data:s,error:a}=await lr.from("properties").update({manager_id:t}).eq("id",e);if(a)throw a;return s},{onSuccess:()=>{h.invalidateQueries(["property",e]),h.invalidateQueries(["manager-history",e]),d(!1),o("")},onError:e=>{m(`담당자 변경 중 오류가 발생했습니다: ${e.message}`)}}),b=e=>e?new Date(e).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-";return e?Ie.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4",children:[Ie.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ie.jsx(Y,{className:"w-5 h-5 mr-2 text-blue-600"}),"담당자 관리"]}),u&&Ie.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-md flex items-center",children:[Ie.jsx(H,{className:"w-5 h-5 mr-2"}),u]}),Ie.jsxs("div",{className:"mb-4",children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"담당자 선택"}),Ie.jsxs("div",{className:"flex space-x-2",children:[Ie.jsxs("select",{value:n,onChange:e=>{i(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:x,children:[Ie.jsx("option",{value:"",children:"담당자 선택"}),!x&&(null==p?void 0:p.map(e=>Ie.jsxs("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id)))]}),Ie.jsx(ds,{onClick:()=>{n!==r?d(!0):m("현재 담당자와 동일한 담당자를 선택했습니다.")},disabled:!n||n===r,children:"변경"})]})]}),Ie.jsxs("div",{children:[Ie.jsx("h4",{className:"text-md font-medium mb-2",children:"담당자 변경 이력"}),g?Ie.jsx("div",{className:"text-gray-500",children:"로딩 중..."}):f&&0!==f.length?Ie.jsx("div",{className:"max-h-64 overflow-y-auto border rounded-md",children:Ie.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ie.jsx("thead",{className:"bg-gray-50",children:Ie.jsxs("tr",{children:[Ie.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"변경일시"}),Ie.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"이전 담당자"}),Ie.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"새 담당자"}),Ie.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"변경자"})]})}),Ie.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>{var t,r,s;return Ie.jsxs("tr",{className:"hover:bg-gray-50",children:[Ie.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:b(e.changed_at)}),Ie.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(null==(t=e.previous_manager)?void 0:t.name)||"-"}),Ie.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(null==(r=e.new_manager)?void 0:r.name)||"-"}),Ie.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(null==(s=e.changer)?void 0:s.name)||"-"})]},e.id)})})]})}):Ie.jsx("div",{className:"text-gray-500",children:"변경 이력이 없습니다."})]}),c&&Ie.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:Ie.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Ie.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:Ie.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),Ie.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:Ie.jsxs("form",{onSubmit:t=>{t.preventDefault(),y.mutate({propertyId:e,managerId:n,reason:l})},children:[Ie.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Ie.jsx("div",{className:"sm:flex sm:items-start",children:Ie.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[Ie.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"담당자 변경"}),Ie.jsxs("div",{className:"mt-4",children:[Ie.jsxs("div",{className:"mb-4",children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"현재 담당자"}),Ie.jsx("div",{className:"bg-gray-100 p-2 rounded-md",children:(null==(s=null==p?void 0:p.find(e=>e.id===r))?void 0:s.name)||"담당자 없음"})]}),Ie.jsxs("div",{className:"mb-4",children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"새 담당자"}),Ie.jsx("div",{className:"bg-blue-50 p-2 rounded-md text-blue-700",children:(null==(a=null==p?void 0:p.find(e=>e.id===n))?void 0:a.name)||"선택된 담당자 없음"})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"변경 사유"}),Ie.jsx("textarea",{value:l,onChange:e=>{o(e.target.value)},rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"담당자 변경 사유를 입력하세요"})]})]})]})})}),Ie.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Ie.jsx(ds,{type:"submit",variant:"primary",className:"w-full sm:w-auto sm:ml-3",disabled:y.isLoading,children:y.isLoading?"처리 중...":Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(J,{className:"w-4 h-4 mr-1"}),"확인"]})}),Ie.jsx(ds,{type:"button",variant:"secondary",className:"mt-3 w-full sm:w-auto sm:mt-0",onClick:()=>{d(!1),m(null)},disabled:y.isLoading,children:"취소"})]})]})})]})})]}):Ie.jsx("div",{className:"text-gray-500",children:"매물 ID가 필요합니다."})},ms=({type:e="text",label:t,name:r,value:s,onChange:a,placeholder:n,error:i,required:l=!1,className:o="",...c})=>Ie.jsxs("div",{className:"mb-4",children:[t&&Ie.jsxs("label",{htmlFor:r,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,l&&Ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),Ie.jsx("input",{type:e,id:r,name:r,value:s,onChange:a,placeholder:n,className:`\n          w-full px-3 py-2 border rounded-md\n          ${i?"border-red-500 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}\n          focus:outline-none focus:ring-2 focus:ring-opacity-50\n          disabled:bg-gray-100 disabled:cursor-not-allowed\n          ${o}\n        `,...c}),i&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:i})]}),hs=({propertyId:e})=>{const r=Lt(),[s,a]=t.useState(!1),[n,i]=t.useState(null),[l,o]=t.useState({broker_name:"",broker_contact:"",share_percentage:""}),[c,d]=t.useState(null),{data:u,isLoading:m}=Qt(["co-brokers",e],async()=>{const{data:t,error:r}=await lr.from("co_brokers").select("*").eq("property_id",e).order("created_at",{ascending:!1});if(r)throw r;return t},{enabled:!!e}),h=Bt(async t=>{const{data:r,error:s}=await lr.from("co_brokers").insert([{...t,property_id:e}]);if(s)throw s;return r},{onSuccess:()=>{r.invalidateQueries(["co-brokers",e]),g()},onError:e=>{d(`공동중개사 추가 중 오류가 발생했습니다: ${e.message}`)}}),p=Bt(async({id:e,...t})=>{const{data:r,error:s}=await lr.from("co_brokers").update(t).eq("id",e);if(s)throw s;return r},{onSuccess:()=>{r.invalidateQueries(["co-brokers",e]),g()},onError:e=>{d(`공동중개사 수정 중 오류가 발생했습니다: ${e.message}`)}}),x=Bt(async e=>{const{data:t,error:r}=await lr.from("co_brokers").delete().eq("id",e);if(r)throw r;return t},{onSuccess:()=>{r.invalidateQueries(["co-brokers",e])},onError:e=>{d(`공동중개사 삭제 중 오류가 발생했습니다: ${e.message}`)}}),f=e=>{const{name:t,value:r}=e.target;o({...l,[t]:r})},g=()=>{o({broker_name:"",broker_contact:"",share_percentage:""}),a(!1),i(null),d(null)};return e?Ie.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4",children:[Ie.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ie.jsx(F,{className:"w-5 h-5 mr-2 text-blue-600"}),"공동중개사 관리"]}),c&&Ie.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-md flex items-center",children:[Ie.jsx(H,{className:"w-5 h-5 mr-2"}),c]}),s?Ie.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!l.broker_name.trim())return void d("중개사 이름은 필수 입력사항입니다");if(l.share_percentage&&isNaN(parseFloat(l.share_percentage)))return void d("배분율은 숫자로 입력해주세요");const t={...l};t.share_percentage&&(t.share_percentage=parseFloat(t.share_percentage)),n?p.mutate({id:n,...t}):h.mutate(t)},className:"mb-4 p-4 border rounded-md bg-gray-50",children:[Ie.jsx("h4",{className:"text-md font-medium mb-2",children:n?"공동중개사 수정":"새 공동중개사 추가"}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[Ie.jsx(ms,{label:"중개사 이름",name:"broker_name",value:l.broker_name,onChange:f,required:!0,placeholder:"중개사 이름"}),Ie.jsx(ms,{label:"중개사 연락처",name:"broker_contact",value:l.broker_contact,onChange:f,placeholder:"연락처"}),Ie.jsx(ms,{label:"배분율 (%)",name:"share_percentage",type:"number",value:l.share_percentage,onChange:f,placeholder:"예: 50"})]}),Ie.jsxs("div",{className:"flex justify-end space-x-2",children:[Ie.jsxs(ds,{type:"button",variant:"secondary",size:"sm",onClick:g,children:[Ie.jsx(Z,{className:"w-4 h-4 mr-1"}),"취소"]}),Ie.jsxs(ds,{type:"submit",variant:"primary",size:"sm",disabled:h.isLoading||p.isLoading,children:[Ie.jsx(J,{className:"w-4 h-4 mr-1"}),n?"수정":"추가"]})]})]}):Ie.jsx("div",{className:"mb-4",children:Ie.jsxs(ds,{onClick:()=>a(!0),variant:"primary",size:"sm",children:[Ie.jsx(X,{className:"w-4 h-4 mr-1"}),"공동중개사 추가"]})}),Ie.jsxs("div",{children:[Ie.jsx("h4",{className:"text-md font-medium mb-2",children:"공동중개사 목록"}),m?Ie.jsx("div",{className:"text-gray-500",children:"로딩 중..."}):u&&0!==u.length?Ie.jsx("div",{className:"overflow-x-auto",children:Ie.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ie.jsx("thead",{className:"bg-gray-50",children:Ie.jsxs("tr",{children:[Ie.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"중개사 이름"}),Ie.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"연락처"}),Ie.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"배분율"}),Ie.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),Ie.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>Ie.jsxs("tr",{className:"hover:bg-gray-50",children:[Ie.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.broker_name}),Ie.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.broker_contact||"-"}),Ie.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.share_percentage?`${e.share_percentage}%`:"-"}),Ie.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:Ie.jsxs("div",{className:"flex space-x-2",children:[Ie.jsx("button",{onClick:()=>(e=>{o({broker_name:e.broker_name||"",broker_contact:e.broker_contact||"",share_percentage:e.share_percentage?e.share_percentage.toString():""}),i(e.id),a(!0)})(e),className:"text-blue-600 hover:text-blue-800",title:"수정",children:Ie.jsx(z,{className:"w-4 h-4"})}),Ie.jsx("button",{onClick:()=>{return t=e.id,void(window.confirm("이 공동중개사를 삭제하시겠습니까?")&&x.mutate(t));var t},className:"text-red-600 hover:text-red-800",title:"삭제",children:Ie.jsx(ee,{className:"w-4 h-4"})})]})})]},e.id))})]})}):Ie.jsx("div",{className:"text-gray-500 p-4 border rounded-md text-center",children:"등록된 공동중개사가 없습니다."})]})]}):Ie.jsx("div",{className:"text-gray-500",children:"매물 ID가 필요합니다."})},ps=({property:e})=>{var t,r,s,a,n;const{user:i}=yr(),l=i&&(i.id===e.manager_id||i.email===e.manager_id||e.manager_id===`hardcoded-${i.email}`),o=i&&_r(i.email),c=!o&&l;return Ie.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[Ie.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[Ie.jsx(L,{className:"w-5 h-5 mr-2 text-blue-600"}),"연락처 정보"]}),!c&&Ie.jsxs("div",{className:"bg-yellow-50 p-4 mb-4 rounded-md flex items-start",children:[Ie.jsx(H,{className:"w-5 h-5 text-yellow-500 mt-0.5 mr-2 flex-shrink-0"}),Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"고객정보 제한"}),Ie.jsx("p",{className:"text-sm text-yellow-700",children:o?"매물 관리 모드에서는 고객정보가 표시되지 않습니다. 본인 매물 관리에서 고객정보를 확인하세요.":"이 매물의 고객정보는 담당자만 볼 수 있습니다. 고객정보가 필요하시면 담당자에게 문의하세요."})]})]}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ie.jsxs("div",{children:[Ie.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-3 flex items-center",children:[Ie.jsx(W,{className:"w-4 h-4 mr-2 text-gray-500"}),"담당자 정보"]}),Ie.jsxs("div",{className:"space-y-2",children:[Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"담당자"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:(null==(t=e.manager)?void 0:t.name)||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"이메일"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:(null==(r=e.manager)?void 0:r.email)||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"연락처"}),c?Ie.jsx("p",{className:"text-sm text-gray-900",children:e.manager_contact||"-"}):Ie.jsxs("p",{className:"text-sm flex items-center text-gray-400",children:[Ie.jsx(te,{className:"w-3 h-3 mr-1"})," 권한 없음"]})]})]})]}),Ie.jsxs("div",{children:[Ie.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-3 flex items-center",children:[Ie.jsx(re,{className:"w-4 h-4 mr-2 text-gray-500"}),"소유주 정보"]}),Ie.jsxs("div",{className:"space-y-2",children:[Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"소유주"}),c?Ie.jsx("p",{className:"text-sm text-gray-900",children:(null==(s=e.owner)?void 0:s.name)||"-"}):Ie.jsxs("p",{className:"text-sm flex items-center text-gray-400",children:[Ie.jsx(te,{className:"w-3 h-3 mr-1"})," 권한 없음"]})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"연락처"}),c?Ie.jsx("p",{className:"text-sm text-gray-900",children:(null==(a=e.owner)?void 0:a.phone)||"-"}):Ie.jsxs("p",{className:"text-sm flex items-center text-gray-400",children:[Ie.jsx(te,{className:"w-3 h-3 mr-1"})," 권한 없음"]})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"관계"}),c?Ie.jsx("p",{className:"text-sm text-gray-900",children:(null==(n=e.owner)?void 0:n.contact_relation)||"-"}):Ie.jsxs("p",{className:"text-sm flex items-center text-gray-400",children:[Ie.jsx(te,{className:"w-3 h-3 mr-1"})," 권한 없음"]})]})]})]})]})]})};function xs(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function fs(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const gs=6048e5;let ys={};function bs(){return ys}function vs(e,t){var r,s,a,n;const i=bs(),l=(null==t?void 0:t.weekStartsOn)??(null==(s=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:s.weekStartsOn)??i.weekStartsOn??(null==(n=null==(a=i.locale)?void 0:a.options)?void 0:n.weekStartsOn)??0,o=xs(e),c=o.getDay(),d=(c<l?7:0)+c-l;return o.setDate(o.getDate()-d),o.setHours(0,0,0,0),o}function js(e){return vs(e,{weekStartsOn:1})}function ws(e){const t=xs(e),r=t.getFullYear(),s=fs(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=js(s),n=fs(e,0);n.setFullYear(r,0,4),n.setHours(0,0,0,0);const i=js(n);return t.getTime()>=a.getTime()?r+1:t.getTime()>=i.getTime()?r:r-1}function Ns(e){const t=xs(e);return t.setHours(0,0,0,0),t}function _s(e){const t=xs(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Ss(e){if(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const r=xs(e);return!isNaN(Number(r))}const ks={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Es(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Cs={date:Es({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Es({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Es({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Os={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Ts(e){return(t,r)=>{let s;if("formatting"===((null==r?void 0:r.context)?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=(null==r?void 0:r.width)?String(r.width):t;s=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=(null==r?void 0:r.width)?String(r.width):e.defaultWidth;s=e.values[a]||e.values[t]}return s[e.argumentCallback?e.argumentCallback(t):t]}}function As(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],n=t.match(a);if(!n)return null;const i=n[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(l)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(l,e=>e.test(i)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(l,e=>e.test(i));let c;return c=e.valueCallback?e.valueCallback(o):o,c=r.valueCallback?r.valueCallback(c):c,{value:c,rest:t.slice(i.length)}}}function Ds(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],n=t.match(e.parsePattern);if(!n)return null;let i=e.valueCallback?e.valueCallback(n[0]):n[0];return i=r.valueCallback?r.valueCallback(i):i,{value:i,rest:t.slice(a.length)}}}const Ps={code:"en-US",formatDistance:(e,t,r)=>{let s;const a=ks[e];return s="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),(null==r?void 0:r.addSuffix)?r.comparison&&r.comparison>0?"in "+s:s+" ago":s},formatLong:Cs,formatRelative:(e,t,r,s)=>Os[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Ts({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Ts({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ts({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Ts({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Ts({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:Ds({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:As({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:As({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:As({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:As({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:As({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Fs(e){const t=xs(e),r=function(e,t){const r=Ns(e),s=Ns(t),a=+r-_s(r),n=+s-_s(s);return Math.round((a-n)/864e5)}(t,function(e){const t=xs(e),r=fs(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}(t));return r+1}function Ms(e){const t=xs(e),r=+js(t)-+function(e){const t=ws(e),r=fs(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),js(r)}(t);return Math.round(r/gs)+1}function Is(e,t){var r,s,a,n;const i=xs(e),l=i.getFullYear(),o=bs(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(s=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:s.firstWeekContainsDate)??o.firstWeekContainsDate??(null==(n=null==(a=o.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??1,d=fs(e,0);d.setFullYear(l+1,0,c),d.setHours(0,0,0,0);const u=vs(d,t),m=fs(e,0);m.setFullYear(l,0,c),m.setHours(0,0,0,0);const h=vs(m,t);return i.getTime()>=u.getTime()?l+1:i.getTime()>=h.getTime()?l:l-1}function Rs(e,t){const r=xs(e),s=+vs(r,t)-+function(e,t){var r,s,a,n;const i=bs(),l=(null==t?void 0:t.firstWeekContainsDate)??(null==(s=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:s.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(n=null==(a=i.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??1,o=Is(e,t),c=fs(e,0);return c.setFullYear(o,0,l),c.setHours(0,0,0,0),vs(c,t)}(r,t);return Math.round(s/gs)+1}function $s(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const Ls={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return $s("yy"===t?s%100:s,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):$s(r+1,2)},d:(e,t)=>$s(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>$s(e.getHours()%12||12,t.length),H:(e,t)=>$s(e.getHours(),t.length),m:(e,t)=>$s(e.getMinutes(),t.length),s:(e,t)=>$s(e.getSeconds(),t.length),S(e,t){const r=t.length,s=e.getMilliseconds();return $s(Math.trunc(s*Math.pow(10,r-3)),t.length)}},qs="midnight",zs="noon",Us="morning",Bs="afternoon",Vs="evening",Qs="night",Gs={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),s=t>0?t:1-t;return r.ordinalNumber(s,{unit:"year"})}return Ls.y(e,t)},Y:function(e,t,r,s){const a=Is(e,s),n=a>0?a:1-a;return"YY"===t?$s(n%100,2):"Yo"===t?r.ordinalNumber(n,{unit:"year"}):$s(n,t.length)},R:function(e,t){return $s(ws(e),t.length)},u:function(e,t){return $s(e.getFullYear(),t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return $s(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return $s(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return Ls.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return $s(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=Rs(e,s);return"wo"===t?r.ordinalNumber(a,{unit:"week"}):$s(a,t.length)},I:function(e,t,r){const s=Ms(e);return"Io"===t?r.ordinalNumber(s,{unit:"week"}):$s(s,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):Ls.d(e,t)},D:function(e,t,r){const s=Fs(e);return"Do"===t?r.ordinalNumber(s,{unit:"dayOfYear"}):$s(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),n=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(n);case"ee":return $s(n,2);case"eo":return r.ordinalNumber(n,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),n=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(n);case"cc":return $s(n,t.length);case"co":return r.ordinalNumber(n,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=0===s?7:s;switch(t){case"i":return String(a);case"ii":return $s(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(a=12===s?zs:0===s?qs:s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(a=s>=17?Vs:s>=12?Bs:s>=4?Us:Qs,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return Ls.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):Ls.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return"Ko"===t?r.ordinalNumber(s,{unit:"hour"}):$s(s,t.length)},k:function(e,t,r){let s=e.getHours();return 0===s&&(s=24),"ko"===t?r.ordinalNumber(s,{unit:"hour"}):$s(s,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ls.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Ls.s(e,t)},S:function(e,t){return Ls.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(0===s)return"Z";switch(t){case"X":return Ks(s);case"XXXX":case"XX":return Ys(s);default:return Ys(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return Ks(s);case"xxxx":case"xx":return Ys(s);default:return Ys(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ws(s,":");default:return"GMT"+Ys(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ws(s,":");default:return"GMT"+Ys(s,":")}},t:function(e,t,r){return $s(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,r){return $s(e.getTime(),t.length)}};function Ws(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),n=s%60;return 0===n?r+String(a):r+String(a)+t+$s(n,2)}function Ks(e,t){return e%60==0?(e>0?"-":"+")+$s(Math.abs(e)/60,2):Ys(e,t)}function Ys(e,t=""){const r=e>0?"-":"+",s=Math.abs(e);return r+$s(Math.trunc(s/60),2)+t+$s(s%60,2)}const Hs=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Js=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Xs={p:Js,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return Hs(e,t);let n;switch(s){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",Hs(s,t)).replace("{{time}}",Js(a,t))}},Zs=/^D+$/,ea=/^Y+$/,ta=["D","DD","YY","YYYY"],ra=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,sa=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,aa=/^'([^]*?)'?$/,na=/''/g,ia=/[a-zA-Z]/;function la(e,t,r){var s,a,n,i,l,o,c,d;const u=bs(),m=(null==r?void 0:r.locale)??u.locale??Ps,h=(null==r?void 0:r.firstWeekContainsDate)??(null==(a=null==(s=null==r?void 0:r.locale)?void 0:s.options)?void 0:a.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(i=null==(n=u.locale)?void 0:n.options)?void 0:i.firstWeekContainsDate)??1,p=(null==r?void 0:r.weekStartsOn)??(null==(o=null==(l=null==r?void 0:r.locale)?void 0:l.options)?void 0:o.weekStartsOn)??u.weekStartsOn??(null==(d=null==(c=u.locale)?void 0:c.options)?void 0:d.weekStartsOn)??0,x=xs(e);if(!Ss(x))throw new RangeError("Invalid time value");let f=t.match(sa).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,Xs[t])(e,m.formatLong):e}).join("").match(ra).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:oa(e)};if(Gs[t])return{isToken:!0,value:e};if(t.match(ia))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});m.localize.preprocessor&&(f=m.localize.preprocessor(x,f));const g={firstWeekContainsDate:h,weekStartsOn:p,locale:m};return f.map(s=>{if(!s.isToken)return s.value;const a=s.value;return(!(null==r?void 0:r.useAdditionalWeekYearTokens)&&function(e){return ea.test(e)}(a)||!(null==r?void 0:r.useAdditionalDayOfYearTokens)&&function(e){return Zs.test(e)}(a))&&function(e,t,r){const s=function(e,t,r){const s="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(ta.includes(e))throw new RangeError(s)}(a,t,String(e)),(0,Gs[a[0]])(x,a,m.localize,g)}).join("")}function oa(e){const t=e.match(aa);return t?t[1].replace(na,"'"):e}const ca={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},da={date:Es({formats:{full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},defaultWidth:"full"}),time:Es({formats:{full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:Es({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},ua={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},ma={code:"ko",formatDistance:(e,t,r)=>{let s;const a=ca[e];return s="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),(null==r?void 0:r.addSuffix)?r.comparison&&r.comparison>0?s+" 후":s+" 전":s},formatLong:da,formatRelative:(e,t,r,s)=>ua[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e);switch(String(null==t?void 0:t.unit)){case"minute":case"second":return String(r);case"date":return r+"일";default:return r+"번째"}},era:Ts({values:{narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},defaultWidth:"wide"}),quarter:Ts({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ts({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},defaultWidth:"wide"}),day:Ts({values:{narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},defaultWidth:"wide"}),dayPeriod:Ts({values:{narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},defaultWidth:"wide",formattingValues:{narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:Ds({matchPattern:/^(\d+)(일|번째)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:As({matchPatterns:{narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^(bc|기원전)/i,/^(ad|서기)/i]},defaultParseWidth:"any"}),quarter:As({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:As({matchPatterns:{narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:As({matchPatterns:{narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},defaultMatchWidth:"wide",parsePatterns:{any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},defaultParseWidth:"any"}),dayPeriod:As({matchPatterns:{any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},ha=t.createContext(),pa={"auth/invalid-credentials":"이메일 또는 비밀번호가 올바르지 않습니다.","auth/user-not-found":"등록되지 않은 사용자입니다.","auth/unauthorized":"권한이 없습니다.",PGRST116:"요청한 데이터를 찾을 수 없습니다.",PGRST204:"요청한 리소스를 찾을 수 없습니다.",23505:"이미 존재하는 데이터입니다.",23503:"참조하는 데이터가 존재하지 않습니다.","42P01":"요청한 테이블을 찾을 수 없습니다.","network-error":"네트워크 연결을 확인해주세요.",timeout:"요청 시간이 초과되었습니다.",default:"처리 중 오류가 발생했습니다. 잠시 후 다시 시도해주세요."},xa=(e,t,r={})=>{t.message,t.stack,t.code,(new Date).toISOString(),r.user&&r.user.id},fa=async e=>{try{const{data:t,error:r}=await lr.from("property_comments").select("*").eq("property_id",e).order("created_at",{ascending:!1});if(r)throw r;return{success:!0,data:t}}catch(t){return xa("코멘트 조회 실패",t,{propertyId:e}),((e,t={})=>{var r,s,a;xa("Error occurred",e,t);let n=pa.default;return e.code&&(n=pa[e.code]||pa.default),(null==(r=e.details)?void 0:r.includes("duplicate key"))&&(n=pa[23505]),((null==(s=e.message)?void 0:s.includes("fetch failed"))||(null==(a=e.message)?void 0:a.includes("network")))&&(n=pa["network-error"]),{success:!1,error:n}})(t,{action:"getPropertyComments",propertyId:e})}},ga=({propertyId:e})=>{const{user:r}=t.useContext(fr),{showToast:s}=t.useContext(ha),[a,n]=t.useState([]),[i,l]=t.useState(!0),[o,c]=t.useState(""),[d,u]=t.useState(null),[m,h]=t.useState(""),[p,x]=t.useState(!1);t.useEffect(()=>{f()},[e]),t.useEffect(()=>{const t=((e,t)=>lr.channel(`property-comments-${e}`).on("postgres_changes",{event:"*",schema:"public",table:"property_comments",filter:`property_id=eq.${e}`},e=>{t(e)}).subscribe())(e,e=>{"INSERT"===e.eventType?n(t=>[e.new,...t]):"UPDATE"===e.eventType?n(t=>t.map(t=>t.id===e.new.id?e.new:t)):"DELETE"===e.eventType&&n(t=>t.filter(t=>t.id!==e.old.id))});return()=>{t.unsubscribe()}},[e]);const f=async()=>{l(!0);const t=await fa(e);t.success?n(t.data):s("코멘트를 불러오는데 실패했습니다.","error"),l(!1)},g=async e=>{if(!m.trim())return;const t=await(async(e,t)=>{try{const{data:r,error:s}=await lr.from("property_comments").update({comment_text:t}).eq("id",e).select().single();if(s)throw s;return{success:!0,data:r}}catch(r){return{success:!1,error:r.message}}})(e,m.trim());t.success?(u(null),h(""),s("코멘트가 수정되었습니다.","success")):s("코멘트 수정에 실패했습니다.","error")},y=async e=>{if(!confirm("코멘트를 삭제하시겠습니까?"))return;const t=await(async e=>{try{const{error:t}=await lr.from("property_comments").delete().eq("id",e);if(t)throw t;return{success:!0}}catch(t){return{success:!1,error:t.message}}})(e);t.success?s("코멘트가 삭제되었습니다.","success"):s("코멘트 삭제에 실패했습니다.","error")},b=()=>{u(null),h("")};return i?Ie.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:Ie.jsxs("div",{className:"animate-pulse",children:[Ie.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-4"}),Ie.jsxs("div",{className:"space-y-3",children:[Ie.jsx("div",{className:"h-20 bg-gray-200 rounded"}),Ie.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})]})}):Ie.jsx("div",{className:"bg-white rounded-lg shadow",children:Ie.jsxs("div",{className:"p-6",children:[Ie.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ie.jsx(se,{className:"w-5 h-5 mr-2"}),"코멘트 (",a.length,")"]}),r?Ie.jsx("form",{onSubmit:async t=>{if(t.preventDefault(),!o.trim()||!r)return;x(!0);const a=await(async(e,t,r)=>{try{const{data:s,error:a}=await lr.from("property_comments").insert([{property_id:e,user_id:r.id||r.email,user_name:r.name||r.email.split("@")[0],comment_text:t}]).select().single();if(a)throw a;return{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}})(e,o.trim(),r);a.success?(c(""),s("코멘트가 등록되었습니다.","success")):s("코멘트 등록에 실패했습니다.","error"),x(!1)},className:"mb-6",children:Ie.jsxs("div",{className:"flex space-x-2",children:[Ie.jsx("input",{type:"text",value:o,onChange:e=>c(e.target.value),placeholder:"코멘트를 입력하세요...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:p}),Ie.jsx("button",{type:"submit",disabled:!o.trim()||p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center",children:Ie.jsx(ae,{className:"w-4 h-4"})})]})}):Ie.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg text-gray-600 text-sm",children:"로그인 후 코멘트를 작성할 수 있습니다."}),Ie.jsx("div",{className:"space-y-4",children:0===a.length?Ie.jsx("p",{className:"text-gray-500 text-center py-8",children:"아직 코멘트가 없습니다."}):a.map(e=>Ie.jsxs("div",{className:"border-b border-gray-200 pb-4 last:border-0",children:[Ie.jsxs("div",{className:"flex justify-between items-start mb-2",children:[Ie.jsxs("div",{children:[Ie.jsx("span",{className:"font-medium",children:e.user_name}),Ie.jsx("span",{className:"text-gray-500 text-sm ml-2",children:la(new Date(e.created_at),"yyyy.MM.dd HH:mm",{locale:ma})})]}),r&&(r.id===e.user_id||r.email===e.user_id)&&Ie.jsx("div",{className:"flex space-x-1",children:d===e.id?Ie.jsxs(Ie.Fragment,{children:[Ie.jsx("button",{onClick:()=>g(e.id),className:"p-1 text-green-600 hover:bg-green-50 rounded",children:Ie.jsx(J,{className:"w-4 h-4"})}),Ie.jsx("button",{onClick:b,className:"p-1 text-gray-600 hover:bg-gray-50 rounded",children:Ie.jsx(Z,{className:"w-4 h-4"})})]}):Ie.jsxs(Ie.Fragment,{children:[Ie.jsx("button",{onClick:()=>(e=>{u(e.id),h(e.comment_text)})(e),className:"p-1 text-gray-600 hover:bg-gray-50 rounded",children:Ie.jsx(ne,{className:"w-4 h-4"})}),Ie.jsx("button",{onClick:()=>y(e.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",children:Ie.jsx(U,{className:"w-4 h-4"})})]})})]}),d===e.id?Ie.jsx("input",{type:"text",value:m,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}):Ie.jsx("p",{className:"text-gray-700",children:e.comment_text})]},e.id))})]})})},ya=()=>{var e,r;const{id:s}=c(),a=l(),n=Lt(),{user:i}=yr(),[d,u]=t.useState(!1),[m,h]=t.useState(!1),{data:p,isLoading:x,error:f}=Qt(["property",s],async()=>{const{data:e,error:t}=await ts(s);if(t)throw new Error(t);return e}),{data:g={}}=Qt("lookupTables",async()=>await Zr(),{staleTime:3e5}),y=Bt(async()=>{u(!0);const{error:e}=await rs(s);if(e)throw new Error(e)},{onSuccess:()=>{n.invalidateQueries("properties"),a("/properties")},onError:e=>{u(!1)}});if(x)return Ie.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ie.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ie.jsx("p",{className:"ml-2 text-gray-600",children:"매물 정보를 불러오는 중..."})]});if(f)return Ie.jsxs("div",{className:"bg-red-50 p-4 rounded-md text-red-600",children:[Ie.jsx(H,{className:"w-6 h-6 inline-block mr-2"}),"매물 정보를 불러오는데 실패했습니다: ",f.message]});if(!p)return Ie.jsxs("div",{className:"bg-yellow-50 p-4 rounded-md text-yellow-700",children:[Ie.jsx(H,{className:"w-6 h-6 inline-block mr-2"}),"해당 매물을 찾을 수 없습니다."]});const b=()=>{var e,t;return(null==(t=null==(e=g.propertyTypes)?void 0:e.find(e=>e.id===p.property_type_id))?void 0:t.name)||"-"},v=()=>{var e,t;return(null==(t=null==(e=g.transactionTypes)?void 0:e.find(e=>e.id===p.transaction_type_id))?void 0:t.name)||"-"},j=()=>{var e,t;return(null==(t=null==(e=g.propertyStatuses)?void 0:e.find(e=>e.id===p.property_status_id))?void 0:t.name)||"-"},w=e=>{if(!e||0===e)return"-";if(e>=1e8){const t=Math.floor(e/1e8),r=Math.floor(e%1e8/1e4);return r>0?`${t}억 ${r.toLocaleString()}만원`:`${t}억원`}return e>=1e4?`${(e/1e4).toLocaleString()}만원`:`${e.toLocaleString()}원`},N=()=>{const e=v();return"매매"===e?w(p.price||0):"전세"===e?w(p.lease_price||0):"월세"===e?`${w(p.lease_price||0)} / ${w(p.monthly_rent||0)}`:w(p.price||0)||"-"},_=e=>e?`${(.3025*e).toFixed(1)}평`:"-",S=i&&(i.id===p.manager_id||i.email===p.manager_id||"admin"===i.role);return Ie.jsxs("div",{children:[Ie.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ie.jsx("div",{children:Ie.jsxs(ds,{variant:"secondary",size:"sm",onClick:()=>a("/properties"),children:[Ie.jsx(ie,{className:"w-4 h-4 mr-1"})," 목록으로"]})}),S&&Ie.jsxs("div",{className:"flex space-x-2",children:[Ie.jsx(o,{to:`/properties/${s}/edit`,children:Ie.jsxs(ds,{variant:"secondary",size:"sm",children:[Ie.jsx(z,{className:"w-4 h-4 mr-1"})," 수정"]})}),Ie.jsxs(ds,{variant:"danger",size:"sm",onClick:()=>{h(!0)},disabled:d,children:[Ie.jsx(U,{className:"w-4 h-4 mr-1"})," 삭제"]})]})]}),Ie.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[Ie.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center",children:[Ie.jsxs("div",{children:[Ie.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:p.property_name}),Ie.jsxs("p",{className:"text-gray-600 mt-1",children:[p.location," ",p.building," ",p.unit]})]}),Ie.jsx("div",{className:"mt-4 md:mt-0",children:Ie.jsx("span",{className:"px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full \n              "+("거래가능"===j()?"bg-green-100 text-green-800":"거래완료"===j()?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),children:j()})})]}),Ie.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"매물종류"}),Ie.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:b()})]}),Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"거래유형"}),Ie.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:v()})]}),Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"금액"}),Ie.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:N()})]}),Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"담당자"}),Ie.jsx("p",{className:"mt-1 text-lg font-semibold text-gray-900",children:(null==(r=null==(e=p.manager_id)?void 0:e.split("@")[0])?void 0:r.replace("hardcoded-","").toUpperCase())||"-"})]})]})]}),Ie.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[Ie.jsx("h2",{className:"text-xl font-semibold mb-4",children:"매물 상세 정보"}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ie.jsxs("div",{children:[Ie.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"기본 정보"}),Ie.jsxs("div",{className:"space-y-2",children:[Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"소재지"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.location||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"건물명"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.property_name||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"동/호수"}),Ie.jsxs("p",{className:"text-sm text-gray-900",children:[p.building?p.building:"",p.unit?`${p.building?"/":""} ${p.unit}`:"",!p.building&&!p.unit&&"-"]})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"매물종류"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:b()})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"상가여부"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.is_commercial?"상가":"비상가"})]})]})]}),Ie.jsxs("div",{children:[Ie.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"거래 정보"}),Ie.jsxs("div",{className:"space-y-2",children:[Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"진행상태"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:j()})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"거래유형"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:v()})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"금액"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:N()})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"거래완료날짜"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.transaction_completed_date||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"등록일"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.created_at?new Date(p.created_at).toLocaleDateString("ko-KR"):"-"})]})]})]}),Ie.jsxs("div",{children:[Ie.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"물건 정보"}),Ie.jsxs("div",{className:"space-y-2",children:[Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"공급/전용(㎡)"}),Ie.jsxs("p",{className:"text-sm text-gray-900",children:[p.supply_area_sqm?`${p.supply_area_sqm}㎡`:"-"," /",p.private_area_sqm?` ${p.private_area_sqm}㎡`:" -"]})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"공급/전용(평)"}),Ie.jsxs("p",{className:"text-sm text-gray-900",children:[p.supply_area_sqm?_(p.supply_area_sqm):"-"," /",p.private_area_sqm?` ${_(p.private_area_sqm)}`:" -"]})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"해당층/총층"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.floor_info||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"방/욕실"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.rooms_bathrooms||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"방향"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.direction||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"관리비"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.maintenance_fee||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"주차"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.parking||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"입주가능일"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.move_in_date||"-"})]}),Ie.jsxs("div",{className:"grid grid-cols-2 border-b border-gray-200 py-2",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500",children:"사용승인"}),Ie.jsx("p",{className:"text-sm text-gray-900",children:p.approval_date||"-"})]})]})]}),Ie.jsxs("div",{children:[Ie.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"추가 정보"}),Ie.jsxs("div",{className:"space-y-4",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"특이사항"}),Ie.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:Ie.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-line",children:p.special_notes||"특이사항이 없습니다."})})]}),S&&Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"담당자 메모 (내부용)"}),Ie.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:Ie.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-line",children:p.manager_memo||"메모가 없습니다."})})]})]})]})]})]}),Ie.jsx(ps,{property:p}),Ie.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 mb-6",children:[Ie.jsx("h2",{className:"text-xl font-semibold mb-4",children:"매칭 관리"}),Ie.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[Ie.jsx(us,{propertyId:s,currentManagerId:null==p?void 0:p.manager_id}),Ie.jsx(hs,{propertyId:s})]})]}),Ie.jsx(ga,{propertyId:s}),m&&Ie.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:Ie.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Ie.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:Ie.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),Ie.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Ie.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Ie.jsxs("div",{className:"sm:flex sm:items-start",children:[Ie.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10",children:Ie.jsx(H,{className:"h-6 w-6 text-red-600"})}),Ie.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[Ie.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"매물 삭제"}),Ie.jsx("div",{className:"mt-2",children:Ie.jsx("p",{className:"text-sm text-gray-500",children:"정말로 이 매물을 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."})})]})]})}),Ie.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[Ie.jsx(ds,{type:"button",variant:"danger",className:"w-full sm:w-auto sm:ml-3",onClick:()=>{y.mutate()},disabled:d,children:d?"삭제 중...":"삭제"}),Ie.jsx(ds,{type:"button",variant:"secondary",className:"mt-3 w-full sm:w-auto sm:mt-0",onClick:()=>{h(!1)},disabled:d,children:"취소"})]})]})]})})]})};var ba=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===va}(e)}(e)},va="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function ja(e,t){return!1!==t.clone&&t.isMergeableObject(e)?Na((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function wa(e,t,r){return e.concat(t).map(function(e){return ja(e,r)})}function Na(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||wa,r.isMergeableObject=r.isMergeableObject||ba;var s=Array.isArray(t);return s===Array.isArray(e)?s?r.arrayMerge(e,t,r):function(e,t,r){var s={};return r.isMergeableObject(e)&&Object.keys(e).forEach(function(t){s[t]=ja(e[t],r)}),Object.keys(t).forEach(function(a){r.isMergeableObject(t[a])&&e[a]?s[a]=Na(e[a],t[a],r):s[a]=ja(t[a],r)}),s}(e,t,r):ja(t,r)}Na.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,r){return Na(e,r,t)},{})};var _a=Na,Sa="object"==typeof global&&global&&global.Object===Object&&global,ka="object"==typeof self&&self&&self.Object===Object&&self,Ea=Sa||ka||Function("return this")(),Ca=Ea.Symbol,Oa=Object.prototype,Ta=Oa.hasOwnProperty,Aa=Oa.toString,Da=Ca?Ca.toStringTag:void 0,Pa=Object.prototype.toString,Fa=Ca?Ca.toStringTag:void 0;function Ma(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Fa&&Fa in Object(e)?function(e){var t=Ta.call(e,Da),r=e[Da];try{e[Da]=void 0;var s=!0}catch(md){}var a=Aa.call(e);return s&&(t?e[Da]=r:delete e[Da]),a}(e):function(e){return Pa.call(e)}(e)}function Ia(e,t){return function(r){return e(t(r))}}var Ra=Ia(Object.getPrototypeOf,Object);function $a(e){return null!=e&&"object"==typeof e}var La=Function.prototype,qa=Object.prototype,za=La.toString,Ua=qa.hasOwnProperty,Ba=za.call(Object);function Va(e){if(!$a(e)||"[object Object]"!=Ma(e))return!1;var t=Ra(e);if(null===t)return!0;var r=Ua.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&za.call(r)==Ba}function Qa(e,t){return e===t||e!=e&&t!=t}function Ga(e,t){for(var r=e.length;r--;)if(Qa(e[r][0],t))return r;return-1}var Wa=Array.prototype.splice;function Ka(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function Ya(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ha(e){if(!Ya(e))return!1;var t=Ma(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}Ka.prototype.clear=function(){this.__data__=[],this.size=0},Ka.prototype.delete=function(e){var t=this.__data__,r=Ga(t,e);return!(r<0||(r==t.length-1?t.pop():Wa.call(t,r,1),--this.size,0))},Ka.prototype.get=function(e){var t=this.__data__,r=Ga(t,e);return r<0?void 0:t[r][1]},Ka.prototype.has=function(e){return Ga(this.__data__,e)>-1},Ka.prototype.set=function(e,t){var r=this.__data__,s=Ga(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this};var Ja,Xa=Ea["__core-js_shared__"],Za=(Ja=/[^.]+$/.exec(Xa&&Xa.keys&&Xa.keys.IE_PROTO||""))?"Symbol(src)_1."+Ja:"",en=Function.prototype.toString;function tn(e){if(null!=e){try{return en.call(e)}catch(md){}try{return e+""}catch(md){}}return""}var rn=/^\[object .+?Constructor\]$/,sn=Function.prototype,an=Object.prototype,nn=sn.toString,ln=an.hasOwnProperty,on=RegExp("^"+nn.call(ln).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cn(e){return!(!Ya(e)||(t=e,Za&&Za in t))&&(Ha(e)?on:rn).test(tn(e));var t}function dn(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return cn(r)?r:void 0}var un=dn(Ea,"Map"),mn=dn(Object,"create"),hn=Object.prototype.hasOwnProperty,pn=Object.prototype.hasOwnProperty;function xn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function fn(e,t){var r,s,a=e.__data__;return("string"==(s=typeof(r=t))||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function gn(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}function yn(e){var t=this.__data__=new Ka(e);this.size=t.size}xn.prototype.clear=function(){this.__data__=mn?mn(null):{},this.size=0},xn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xn.prototype.get=function(e){var t=this.__data__;if(mn){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return hn.call(t,e)?t[e]:void 0},xn.prototype.has=function(e){var t=this.__data__;return mn?void 0!==t[e]:pn.call(t,e)},xn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=mn&&void 0===t?"__lodash_hash_undefined__":t,this},gn.prototype.clear=function(){this.size=0,this.__data__={hash:new xn,map:new(un||Ka),string:new xn}},gn.prototype.delete=function(e){var t=fn(this,e).delete(e);return this.size-=t?1:0,t},gn.prototype.get=function(e){return fn(this,e).get(e)},gn.prototype.has=function(e){return fn(this,e).has(e)},gn.prototype.set=function(e,t){var r=fn(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this},yn.prototype.clear=function(){this.__data__=new Ka,this.size=0},yn.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},yn.prototype.get=function(e){return this.__data__.get(e)},yn.prototype.has=function(e){return this.__data__.has(e)},yn.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ka){var s=r.__data__;if(!un||s.length<199)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new gn(s)}return r.set(e,t),this.size=r.size,this};var bn=function(){try{var e=dn(Object,"defineProperty");return e({},"",{}),e}catch(md){}}();function vn(e,t,r){"__proto__"==t&&bn?bn(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var jn=Object.prototype.hasOwnProperty;function wn(e,t,r){var s=e[t];jn.call(e,t)&&Qa(s,r)&&(void 0!==r||t in e)||vn(e,t,r)}function Nn(e,t,r,s){var a=!r;r||(r={});for(var n=-1,i=t.length;++n<i;){var l=t[n],o=void 0;void 0===o&&(o=e[l]),a?vn(r,l,o):wn(r,l,o)}return r}function _n(e){return $a(e)&&"[object Arguments]"==Ma(e)}var Sn=Object.prototype,kn=Sn.hasOwnProperty,En=Sn.propertyIsEnumerable,Cn=_n(function(){return arguments}())?_n:function(e){return $a(e)&&kn.call(e,"callee")&&!En.call(e,"callee")},On=Array.isArray,Tn="object"==typeof e&&e&&!e.nodeType&&e,An=Tn&&"object"==typeof ke&&ke&&!ke.nodeType&&ke,Dn=An&&An.exports===Tn?Ea.Buffer:void 0,Pn=(Dn?Dn.isBuffer:void 0)||function(){return!1},Fn=/^(?:0|[1-9]\d*)$/;function Mn(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Fn.test(e))&&e>-1&&e%1==0&&e<t}function In(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}var Rn={};function $n(e){return function(t){return e(t)}}Rn["[object Float32Array]"]=Rn["[object Float64Array]"]=Rn["[object Int8Array]"]=Rn["[object Int16Array]"]=Rn["[object Int32Array]"]=Rn["[object Uint8Array]"]=Rn["[object Uint8ClampedArray]"]=Rn["[object Uint16Array]"]=Rn["[object Uint32Array]"]=!0,Rn["[object Arguments]"]=Rn["[object Array]"]=Rn["[object ArrayBuffer]"]=Rn["[object Boolean]"]=Rn["[object DataView]"]=Rn["[object Date]"]=Rn["[object Error]"]=Rn["[object Function]"]=Rn["[object Map]"]=Rn["[object Number]"]=Rn["[object Object]"]=Rn["[object RegExp]"]=Rn["[object Set]"]=Rn["[object String]"]=Rn["[object WeakMap]"]=!1;var Ln="object"==typeof e&&e&&!e.nodeType&&e,qn=Ln&&"object"==typeof ke&&ke&&!ke.nodeType&&ke,zn=qn&&qn.exports===Ln&&Sa.process,Un=function(){try{var e=qn&&qn.require&&qn.require("util").types;return e||zn&&zn.binding&&zn.binding("util")}catch(md){}}(),Bn=Un&&Un.isTypedArray,Vn=Bn?$n(Bn):function(e){return $a(e)&&In(e.length)&&!!Rn[Ma(e)]},Qn=Object.prototype.hasOwnProperty;function Gn(e,t){var r=On(e),s=!r&&Cn(e),a=!r&&!s&&Pn(e),n=!r&&!s&&!a&&Vn(e),i=r||s||a||n,l=i?function(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}(e.length,String):[],o=l.length;for(var c in e)!t&&!Qn.call(e,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||n&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Mn(c,o))||l.push(c);return l}var Wn=Object.prototype;function Kn(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Wn)}var Yn=Ia(Object.keys,Object),Hn=Object.prototype.hasOwnProperty;function Jn(e){return null!=e&&In(e.length)&&!Ha(e)}function Xn(e){return Jn(e)?Gn(e):function(e){if(!Kn(e))return Yn(e);var t=[];for(var r in Object(e))Hn.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)}var Zn=Object.prototype.hasOwnProperty;function ei(e){if(!Ya(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Kn(e),r=[];for(var s in e)("constructor"!=s||!t&&Zn.call(e,s))&&r.push(s);return r}function ti(e){return Jn(e)?Gn(e,!0):ei(e)}var ri="object"==typeof e&&e&&!e.nodeType&&e,si=ri&&"object"==typeof ke&&ke&&!ke.nodeType&&ke,ai=si&&si.exports===ri?Ea.Buffer:void 0,ni=ai?ai.allocUnsafe:void 0;function ii(e,t){var r=-1,s=e.length;for(t||(t=Array(s));++r<s;)t[r]=e[r];return t}function li(){return[]}var oi=Object.prototype.propertyIsEnumerable,ci=Object.getOwnPropertySymbols,di=ci?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,s=null==e?0:e.length,a=0,n=[];++r<s;){var i=e[r];t(i,r,e)&&(n[a++]=i)}return n}(ci(e),function(t){return oi.call(e,t)}))}:li;function ui(e,t){for(var r=-1,s=t.length,a=e.length;++r<s;)e[a+r]=t[r];return e}var mi=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)ui(t,di(e)),e=Ra(e);return t}:li;function hi(e,t,r){var s=t(e);return On(e)?s:ui(s,r(e))}function pi(e){return hi(e,Xn,di)}function xi(e){return hi(e,ti,mi)}var fi=dn(Ea,"DataView"),gi=dn(Ea,"Promise"),yi=dn(Ea,"Set"),bi=dn(Ea,"WeakMap"),vi="[object Map]",ji="[object Promise]",wi="[object Set]",Ni="[object WeakMap]",_i="[object DataView]",Si=tn(fi),ki=tn(un),Ei=tn(gi),Ci=tn(yi),Oi=tn(bi),Ti=Ma;(fi&&Ti(new fi(new ArrayBuffer(1)))!=_i||un&&Ti(new un)!=vi||gi&&Ti(gi.resolve())!=ji||yi&&Ti(new yi)!=wi||bi&&Ti(new bi)!=Ni)&&(Ti=function(e){var t=Ma(e),r="[object Object]"==t?e.constructor:void 0,s=r?tn(r):"";if(s)switch(s){case Si:return _i;case ki:return vi;case Ei:return ji;case Ci:return wi;case Oi:return Ni}return t});var Ai=Object.prototype.hasOwnProperty,Di=Ea.Uint8Array;function Pi(e){var t=new e.constructor(e.byteLength);return new Di(t).set(new Di(e)),t}var Fi=/\w*$/,Mi=Ca?Ca.prototype:void 0,Ii=Mi?Mi.valueOf:void 0;function Ri(e,t,r){var s,a,n,i=e.constructor;switch(t){case"[object ArrayBuffer]":return Pi(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var r=t?Pi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var r=t?Pi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return(n=new(a=e).constructor(a.source,Fi.exec(a))).lastIndex=a.lastIndex,n;case"[object Symbol]":return s=e,Ii?Object(Ii.call(s)):{}}}var $i=Object.create,Li=function(){function e(){}return function(t){if(!Ya(t))return{};if($i)return $i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),qi=Un&&Un.isMap,zi=qi?$n(qi):function(e){return $a(e)&&"[object Map]"==Ti(e)},Ui=Un&&Un.isSet,Bi=Ui?$n(Ui):function(e){return $a(e)&&"[object Set]"==Ti(e)},Vi="[object Arguments]",Qi="[object Function]",Gi="[object Object]",Wi={};function Ki(e,t,r,s,a,n){var i,l=1&t,o=2&t,c=4&t;if(void 0!==i)return i;if(!Ya(e))return e;var d=On(e);if(d){if(i=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Ai.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!l)return ii(e,i)}else{var u=Ti(e),m=u==Qi||"[object GeneratorFunction]"==u;if(Pn(e))return function(e,t){if(t)return e.slice();var r=e.length,s=ni?ni(r):new e.constructor(r);return e.copy(s),s}(e,l);if(u==Gi||u==Vi||m&&!a){if(i=o||m?{}:function(e){return"function"!=typeof e.constructor||Kn(e)?{}:Li(Ra(e))}(e),!l)return o?function(e,t){return Nn(e,mi(e),t)}(e,function(e,t){return e&&Nn(t,ti(t),e)}(i,e)):function(e,t){return Nn(e,di(e),t)}(e,function(e,t){return e&&Nn(t,Xn(t),e)}(i,e))}else{if(!Wi[u])return a?e:{};i=Ri(e,u,l)}}n||(n=new yn);var h=n.get(e);if(h)return h;n.set(e,i),Bi(e)?e.forEach(function(s){i.add(Ki(s,t,r,0,e,n))}):zi(e)&&e.forEach(function(s,a){i.set(a,Ki(s,t,r,0,e,n))});var p=d?void 0:(c?o?xi:pi:o?ti:Xn)(e);return function(e,t){for(var r=-1,s=null==e?0:e.length;++r<s&&!1!==t(e[r],r,e););}(p||e,function(s,a){p&&(s=e[a=s]),wn(i,a,Ki(s,t,r,0,e,n))}),i}function Yi(e){return Ki(e,5)}Wi[Vi]=Wi["[object Array]"]=Wi["[object ArrayBuffer]"]=Wi["[object DataView]"]=Wi["[object Boolean]"]=Wi["[object Date]"]=Wi["[object Float32Array]"]=Wi["[object Float64Array]"]=Wi["[object Int8Array]"]=Wi["[object Int16Array]"]=Wi["[object Int32Array]"]=Wi["[object Map]"]=Wi["[object Number]"]=Wi[Gi]=Wi["[object RegExp]"]=Wi["[object Set]"]=Wi["[object String]"]=Wi["[object Symbol]"]=Wi["[object Uint8Array]"]=Wi["[object Uint8ClampedArray]"]=Wi["[object Uint16Array]"]=Wi["[object Uint32Array]"]=!0,Wi["[object Error]"]=Wi[Qi]=Wi["[object WeakMap]"]=!1;var Hi=Array.isArray,Ji=Object.keys,Xi=Object.prototype.hasOwnProperty,Zi="undefined"!=typeof Element;function el(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,s,a,n=Hi(e),i=Hi(t);if(n&&i){if((s=e.length)!=t.length)return!1;for(r=s;0!==r--;)if(!el(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var l=e instanceof Date,o=t instanceof Date;if(l!=o)return!1;if(l&&o)return e.getTime()==t.getTime();var c=e instanceof RegExp,d=t instanceof RegExp;if(c!=d)return!1;if(c&&d)return e.toString()==t.toString();var u=Ji(e);if((s=u.length)!==Ji(t).length)return!1;for(r=s;0!==r--;)if(!Xi.call(t,u[r]))return!1;if(Zi&&e instanceof Element&&t instanceof Element)return e===t;for(r=s;0!==r--;)if(!("_owner"===(a=u[r])&&e.$$typeof||el(e[a],t[a])))return!1;return!0}return e!=e&&t!=t}const tl=d(function(e,t){try{return el(e,t)}catch(r){if(r.message&&r.message.match(/stack|recursion/i)||-2146828260===r.number)return!1;throw r}});function rl(e){return Ki(e,4)}function sl(e,t){for(var r=-1,s=null==e?0:e.length,a=Array(s);++r<s;)a[r]=t(e[r],r,e);return a}function al(e){return"symbol"==typeof e||$a(e)&&"[object Symbol]"==Ma(e)}function nl(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var s=arguments,a=t?t.apply(this,s):s[0],n=r.cache;if(n.has(a))return n.get(a);var i=e.apply(this,s);return r.cache=n.set(a,i)||n,i};return r.cache=new(nl.Cache||gn),r}nl.Cache=gn;var il,ll,ol,cl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dl=/\\(\\)?/g,ul=(il=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(cl,function(e,r,s,a){t.push(s?a.replace(dl,"$1"):r||e)}),t},ll=nl(il,function(e){return 500===ol.size&&ol.clear(),e}),ol=ll.cache,ll);function ml(e){if("string"==typeof e||al(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var hl=Ca?Ca.prototype:void 0,pl=hl?hl.toString:void 0;function xl(e){if("string"==typeof e)return e;if(On(e))return sl(e,xl)+"";if(al(e))return pl?pl.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fl(e){return On(e)?sl(e,ml):al(e)?[e]:ii(ul(function(e){return null==e?"":xl(e)}(e)))}var gl={exports:{}},yl={},bl="function"==typeof Symbol&&Symbol.for,vl=bl?Symbol.for("react.element"):60103,jl=bl?Symbol.for("react.portal"):60106,wl=bl?Symbol.for("react.fragment"):60107,Nl=bl?Symbol.for("react.strict_mode"):60108,_l=bl?Symbol.for("react.profiler"):60114,Sl=bl?Symbol.for("react.provider"):60109,kl=bl?Symbol.for("react.context"):60110,El=bl?Symbol.for("react.async_mode"):60111,Cl=bl?Symbol.for("react.concurrent_mode"):60111,Ol=bl?Symbol.for("react.forward_ref"):60112,Tl=bl?Symbol.for("react.suspense"):60113,Al=bl?Symbol.for("react.suspense_list"):60120,Dl=bl?Symbol.for("react.memo"):60115,Pl=bl?Symbol.for("react.lazy"):60116,Fl=bl?Symbol.for("react.block"):60121,Ml=bl?Symbol.for("react.fundamental"):60117,Il=bl?Symbol.for("react.responder"):60118,Rl=bl?Symbol.for("react.scope"):60119;function $l(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case vl:switch(e=e.type){case El:case Cl:case wl:case _l:case Nl:case Tl:return e;default:switch(e=e&&e.$$typeof){case kl:case Ol:case Pl:case Dl:case Sl:return e;default:return t}}case jl:return t}}}function Ll(e){return $l(e)===Cl}yl.AsyncMode=El,yl.ConcurrentMode=Cl,yl.ContextConsumer=kl,yl.ContextProvider=Sl,yl.Element=vl,yl.ForwardRef=Ol,yl.Fragment=wl,yl.Lazy=Pl,yl.Memo=Dl,yl.Portal=jl,yl.Profiler=_l,yl.StrictMode=Nl,yl.Suspense=Tl,yl.isAsyncMode=function(e){return Ll(e)||$l(e)===El},yl.isConcurrentMode=Ll,yl.isContextConsumer=function(e){return $l(e)===kl},yl.isContextProvider=function(e){return $l(e)===Sl},yl.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===vl},yl.isForwardRef=function(e){return $l(e)===Ol},yl.isFragment=function(e){return $l(e)===wl},yl.isLazy=function(e){return $l(e)===Pl},yl.isMemo=function(e){return $l(e)===Dl},yl.isPortal=function(e){return $l(e)===jl},yl.isProfiler=function(e){return $l(e)===_l},yl.isStrictMode=function(e){return $l(e)===Nl},yl.isSuspense=function(e){return $l(e)===Tl},yl.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===wl||e===Cl||e===_l||e===Nl||e===Tl||e===Al||"object"==typeof e&&null!==e&&(e.$$typeof===Pl||e.$$typeof===Dl||e.$$typeof===Sl||e.$$typeof===kl||e.$$typeof===Ol||e.$$typeof===Ml||e.$$typeof===Il||e.$$typeof===Rl||e.$$typeof===Fl)},yl.typeOf=$l,gl.exports=yl;var ql=gl.exports,zl={};function Ul(){return Ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ul.apply(this,arguments)}function Bl(e,t){if(null==e)return{};var r,s,a={},n=Object.keys(e);for(s=0;s<n.length;s++)r=n[s],t.indexOf(r)>=0||(a[r]=e[r]);return a}zl[ql.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},zl[ql.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var Vl=t.createContext(void 0);Vl.displayName="FormikContext",Vl.Provider,Vl.Consumer;var Ql=function(e){return"function"==typeof e},Gl=function(e){return null!==e&&"object"==typeof e},Wl=function(e){return String(Math.floor(Number(e)))===e},Kl=function(e){return"[object String]"===Object.prototype.toString.call(e)},Yl=function(e){return Gl(e)&&Ql(e.then)};function Hl(e,t,r,s){void 0===s&&(s=0);for(var a=fl(t);e&&s<a.length;)e=e[a[s++]];return s===a.length||e?void 0===e?r:e:r}function Jl(e,t,r){for(var s=rl(e),a=s,n=0,i=fl(t);n<i.length-1;n++){var l=i[n],o=Hl(e,i.slice(0,n+1));if(o&&(Gl(o)||Array.isArray(o)))a=a[l]=rl(o);else{var c=i[n+1];a=a[l]=Wl(c)&&Number(c)>=0?[]:{}}}return(0===n?e:a)[i[n]]===r?e:(void 0===r?delete a[i[n]]:a[i[n]]=r,0===n&&void 0===r&&delete s[i[n]],s)}function Xl(e,t,r,s){void 0===r&&(r=new WeakMap),void 0===s&&(s={});for(var a=0,n=Object.keys(e);a<n.length;a++){var i=n[a],l=e[i];Gl(l)?r.get(l)||(r.set(l,!0),s[i]=Array.isArray(l)?[]:{},Xl(l,t,r,s[i])):s[i]=t}return s}var Zl={},eo={};function to(e){var r=e.validateOnChange,s=void 0===r||r,a=e.validateOnBlur,n=void 0===a||a,i=e.validateOnMount,l=void 0!==i&&i,o=e.isInitialValid,c=e.enableReinitialize,d=void 0!==c&&c,u=e.onSubmit,m=Bl(e,["validateOnChange","validateOnBlur","validateOnMount","isInitialValid","enableReinitialize","onSubmit"]),h=Ul({validateOnChange:s,validateOnBlur:n,validateOnMount:l,onSubmit:u},m),p=t.useRef(h.initialValues),x=t.useRef(h.initialErrors||Zl),f=t.useRef(h.initialTouched||eo),g=t.useRef(h.initialStatus),y=t.useRef(!1),b=t.useRef({});t.useEffect(function(){return y.current=!0,function(){y.current=!1}},[]);var v=t.useState(0)[1],j=t.useRef({values:Yi(h.initialValues),errors:Yi(h.initialErrors)||Zl,touched:Yi(h.initialTouched)||eo,status:Yi(h.initialStatus),isSubmitting:!1,isValidating:!1,submitCount:0}),w=j.current,N=t.useCallback(function(e){var t=j.current;j.current=function(e,t){switch(t.type){case"SET_VALUES":return Ul({},e,{values:t.payload});case"SET_TOUCHED":return Ul({},e,{touched:t.payload});case"SET_ERRORS":return tl(e.errors,t.payload)?e:Ul({},e,{errors:t.payload});case"SET_STATUS":return Ul({},e,{status:t.payload});case"SET_ISSUBMITTING":return Ul({},e,{isSubmitting:t.payload});case"SET_ISVALIDATING":return Ul({},e,{isValidating:t.payload});case"SET_FIELD_VALUE":return Ul({},e,{values:Jl(e.values,t.payload.field,t.payload.value)});case"SET_FIELD_TOUCHED":return Ul({},e,{touched:Jl(e.touched,t.payload.field,t.payload.value)});case"SET_FIELD_ERROR":return Ul({},e,{errors:Jl(e.errors,t.payload.field,t.payload.value)});case"RESET_FORM":return Ul({},e,t.payload);case"SET_FORMIK_STATE":return t.payload(e);case"SUBMIT_ATTEMPT":return Ul({},e,{touched:Xl(e.values,!0),isSubmitting:!0,submitCount:e.submitCount+1});case"SUBMIT_FAILURE":case"SUBMIT_SUCCESS":return Ul({},e,{isSubmitting:!1});default:return e}}(t,e),t!==j.current&&v(function(e){return e+1})},[]),_=t.useCallback(function(e,t){return new Promise(function(r,s){var a=h.validate(e,t);null==a?r(Zl):Yl(a)?a.then(function(e){r(e||Zl)},function(e){s(e)}):r(a)})},[h.validate]),S=t.useCallback(function(e,t){var r=h.validationSchema,s=Ql(r)?r(t):r,a=t&&s.validateAt?s.validateAt(t,e):function(e,t,r){void 0===r&&(r=!1);var s=ro(e);return t[r?"validateSync":"validate"](s,{abortEarly:!1,context:s})}(e,s);return new Promise(function(e,t){a.then(function(){e(Zl)},function(r){"ValidationError"===r.name?e(function(e){var t={};if(e.inner){if(0===e.inner.length)return Jl(t,e.path,e.message);var r=e.inner,s=Array.isArray(r),a=0;for(r=s?r:r[Symbol.iterator]();;){var n;if(s){if(a>=r.length)break;n=r[a++]}else{if((a=r.next()).done)break;n=a.value}var i=n;Hl(t,i.path)||(t=Jl(t,i.path,i.message))}}return t}(r)):t(r)})})},[h.validationSchema]),k=t.useCallback(function(e,t){return new Promise(function(r){return r(b.current[e].validate(t))})},[]),E=t.useCallback(function(e){var t=Object.keys(b.current).filter(function(e){return Ql(b.current[e].validate)}),r=t.length>0?t.map(function(t){return k(t,Hl(e,t))}):[Promise.resolve("DO_NOT_DELETE_YOU_WILL_BE_FIRED")];return Promise.all(r).then(function(e){return e.reduce(function(e,r,s){return"DO_NOT_DELETE_YOU_WILL_BE_FIRED"===r||r&&(e=Jl(e,t[s],r)),e},{})})},[k]),C=t.useCallback(function(e){return Promise.all([E(e),h.validationSchema?S(e):{},h.validate?_(e):{}]).then(function(e){var t=e[0],r=e[1],s=e[2];return _a.all([t,r,s],{arrayMerge:so})})},[h.validate,h.validationSchema,E,_,S]),O=no(function(e){return void 0===e&&(e=w.values),N({type:"SET_ISVALIDATING",payload:!0}),C(e).then(function(e){return y.current&&(N({type:"SET_ISVALIDATING",payload:!1}),N({type:"SET_ERRORS",payload:e})),e})});t.useEffect(function(){l&&!0===y.current&&tl(p.current,h.initialValues)&&O(p.current)},[l,O]);var T=t.useCallback(function(e){var t=e&&e.values?e.values:p.current,r=e&&e.errors?e.errors:x.current?x.current:h.initialErrors||{},s=e&&e.touched?e.touched:f.current?f.current:h.initialTouched||{},a=e&&e.status?e.status:g.current?g.current:h.initialStatus;p.current=t,x.current=r,f.current=s,g.current=a;var n=function(){N({type:"RESET_FORM",payload:{isSubmitting:!!e&&!!e.isSubmitting,errors:r,touched:s,status:a,values:t,isValidating:!!e&&!!e.isValidating,submitCount:e&&e.submitCount&&"number"==typeof e.submitCount?e.submitCount:0}})};if(h.onReset){var i=h.onReset(w.values,Y);Yl(i)?i.then(n):n()}else n()},[h.initialErrors,h.initialStatus,h.initialTouched,h.onReset]);t.useEffect(function(){!0!==y.current||tl(p.current,h.initialValues)||d&&(p.current=h.initialValues,T(),l&&O(p.current))},[d,h.initialValues,T,l,O]),t.useEffect(function(){d&&!0===y.current&&!tl(x.current,h.initialErrors)&&(x.current=h.initialErrors||Zl,N({type:"SET_ERRORS",payload:h.initialErrors||Zl}))},[d,h.initialErrors]),t.useEffect(function(){d&&!0===y.current&&!tl(f.current,h.initialTouched)&&(f.current=h.initialTouched||eo,N({type:"SET_TOUCHED",payload:h.initialTouched||eo}))},[d,h.initialTouched]),t.useEffect(function(){d&&!0===y.current&&!tl(g.current,h.initialStatus)&&(g.current=h.initialStatus,N({type:"SET_STATUS",payload:h.initialStatus}))},[d,h.initialStatus,h.initialTouched]);var A=no(function(e){if(b.current[e]&&Ql(b.current[e].validate)){var t=Hl(w.values,e),r=b.current[e].validate(t);return Yl(r)?(N({type:"SET_ISVALIDATING",payload:!0}),r.then(function(e){return e}).then(function(t){N({type:"SET_FIELD_ERROR",payload:{field:e,value:t}}),N({type:"SET_ISVALIDATING",payload:!1})})):(N({type:"SET_FIELD_ERROR",payload:{field:e,value:r}}),Promise.resolve(r))}return h.validationSchema?(N({type:"SET_ISVALIDATING",payload:!0}),S(w.values,e).then(function(e){return e}).then(function(t){N({type:"SET_FIELD_ERROR",payload:{field:e,value:Hl(t,e)}}),N({type:"SET_ISVALIDATING",payload:!1})})):Promise.resolve()}),D=t.useCallback(function(e,t){var r=t.validate;b.current[e]={validate:r}},[]),P=t.useCallback(function(e){delete b.current[e]},[]),F=no(function(e,t){return N({type:"SET_TOUCHED",payload:e}),(void 0===t?n:t)?O(w.values):Promise.resolve()}),M=t.useCallback(function(e){N({type:"SET_ERRORS",payload:e})},[]),I=no(function(e,t){var r=Ql(e)?e(w.values):e;return N({type:"SET_VALUES",payload:r}),(void 0===t?s:t)?O(r):Promise.resolve()}),R=t.useCallback(function(e,t){N({type:"SET_FIELD_ERROR",payload:{field:e,value:t}})},[]),$=no(function(e,t,r){return N({type:"SET_FIELD_VALUE",payload:{field:e,value:t}}),(void 0===r?s:r)?O(Jl(w.values,e,t)):Promise.resolve()}),L=t.useCallback(function(e,t){var r,s=t,a=e;if(!Kl(e)){e.persist&&e.persist();var n=e.target?e.target:e.currentTarget,i=n.type,l=n.name,o=n.id,c=n.value,d=n.checked;n.outerHTML;var u=n.options,m=n.multiple;s=t||l||o,a=/number|range/.test(i)?(r=parseFloat(c),isNaN(r)?"":r):/checkbox/.test(i)?function(e,t,r){if("boolean"==typeof e)return Boolean(t);var s=[],a=!1,n=-1;if(Array.isArray(e))s=e,a=(n=e.indexOf(r))>=0;else if(!r||"true"==r||"false"==r)return Boolean(t);return t&&r&&!a?s.concat(r):a?s.slice(0,n).concat(s.slice(n+1)):s}(Hl(w.values,s),d,c):u&&m?function(e){return Array.from(e).filter(function(e){return e.selected}).map(function(e){return e.value})}(u):c}s&&$(s,a)},[$,w.values]),q=no(function(e){if(Kl(e))return function(t){return L(t,e)};L(e)}),z=no(function(e,t,r){return void 0===t&&(t=!0),N({type:"SET_FIELD_TOUCHED",payload:{field:e,value:t}}),(void 0===r?n:r)?O(w.values):Promise.resolve()}),U=t.useCallback(function(e,t){e.persist&&e.persist();var r=e.target,s=r.name,a=r.id;r.outerHTML,z(t||s||a,!0)},[z]),B=no(function(e){if(Kl(e))return function(t){return U(t,e)};U(e)}),V=t.useCallback(function(e){Ql(e)?N({type:"SET_FORMIK_STATE",payload:e}):N({type:"SET_FORMIK_STATE",payload:function(){return e}})},[]),Q=t.useCallback(function(e){N({type:"SET_STATUS",payload:e})},[]),G=t.useCallback(function(e){N({type:"SET_ISSUBMITTING",payload:e})},[]),W=no(function(){return N({type:"SUBMIT_ATTEMPT"}),O().then(function(e){var t=e instanceof Error;if(!t&&0===Object.keys(e).length){var r;try{if(void 0===(r=H()))return}catch(s){throw s}return Promise.resolve(r).then(function(e){return y.current&&N({type:"SUBMIT_SUCCESS"}),e}).catch(function(e){if(y.current)throw N({type:"SUBMIT_FAILURE"}),e})}if(y.current&&(N({type:"SUBMIT_FAILURE"}),t))throw e})}),K=no(function(e){e&&e.preventDefault&&Ql(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&Ql(e.stopPropagation)&&e.stopPropagation(),W().catch(function(e){})}),Y={resetForm:T,validateForm:O,validateField:A,setErrors:M,setFieldError:R,setFieldTouched:z,setFieldValue:$,setStatus:Q,setSubmitting:G,setTouched:F,setValues:I,setFormikState:V,submitForm:W},H=no(function(){return u(w.values,Y)}),J=no(function(e){e&&e.preventDefault&&Ql(e.preventDefault)&&e.preventDefault(),e&&e.stopPropagation&&Ql(e.stopPropagation)&&e.stopPropagation(),T()}),X=t.useCallback(function(e){return{value:Hl(w.values,e),error:Hl(w.errors,e),touched:!!Hl(w.touched,e),initialValue:Hl(p.current,e),initialTouched:!!Hl(f.current,e),initialError:Hl(x.current,e)}},[w.errors,w.touched,w.values]),Z=t.useCallback(function(e){return{setValue:function(t,r){return $(e,t,r)},setTouched:function(t,r){return z(e,t,r)},setError:function(t){return R(e,t)}}},[$,z,R]),ee=t.useCallback(function(e){var t=Gl(e),r=t?e.name:e,s=Hl(w.values,r),a={name:r,value:s,onChange:q,onBlur:B};if(t){var n=e.type,i=e.value,l=e.as,o=e.multiple;"checkbox"===n?void 0===i?a.checked=!!s:(a.checked=!(!Array.isArray(s)||!~s.indexOf(i)),a.value=i):"radio"===n?(a.checked=s===i,a.value=i):"select"===l&&o&&(a.value=a.value||[],a.multiple=!0)}return a},[B,q,w.values]),te=t.useMemo(function(){return!tl(p.current,w.values)},[p.current,w.values]),re=t.useMemo(function(){return void 0!==o?te?w.errors&&0===Object.keys(w.errors).length:!1!==o&&Ql(o)?o(h):o:w.errors&&0===Object.keys(w.errors).length},[o,te,w.errors,h]);return Ul({},w,{initialValues:p.current,initialErrors:x.current,initialTouched:f.current,initialStatus:g.current,handleBlur:B,handleChange:q,handleReset:J,handleSubmit:K,resetForm:T,setErrors:M,setFormikState:V,setFieldTouched:z,setFieldValue:$,setFieldError:R,setStatus:Q,setSubmitting:G,setTouched:F,setValues:I,submitForm:W,validateForm:O,validateField:A,isValid:re,dirty:te,unregisterField:P,registerField:D,getFieldProps:ee,getFieldMeta:X,getFieldHelpers:Z,validateOnBlur:n,validateOnChange:s,validateOnMount:l})}function ro(e){var t=Array.isArray(e)?[]:{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=String(r);!0===Array.isArray(e[s])?t[s]=e[s].map(function(e){return!0===Array.isArray(e)||Va(e)?ro(e):""!==e?e:void 0}):Va(e[s])?t[s]=ro(e[s]):t[s]=""!==e[s]?e[s]:void 0}return t}function so(e,t,r){var s=e.slice();return t.forEach(function(t,a){if(void 0===s[a]){var n=!1!==r.clone&&r.isMergeableObject(t);s[a]=n?_a(Array.isArray(t)?[]:{},t,r):t}else r.isMergeableObject(t)?s[a]=_a(e[a],t,r):-1===e.indexOf(t)&&s.push(t)}),s}var ao="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t.useLayoutEffect:t.useEffect;function no(e){var r=t.useRef(e);return ao(function(){r.current=e}),t.useCallback(function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return r.current.apply(void 0,t)},[])}function io(e){this._maxSize=e,this.clear()}t.forwardRef(function(e,r){var s=e.action,a=Bl(e,["action"]),n=null!=s?s:"#",i=t.useContext(Vl),l=i.handleReset,o=i.handleSubmit;return t.createElement("form",Ul({onSubmit:o,ref:r,onReset:l,action:n},a))}).displayName="Form",io.prototype.clear=function(){this._size=0,this._values=Object.create(null)},io.prototype.get=function(e){return this._values[e]},io.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var lo=/[^.^\]^[]+|(?=\[\]|\.\.)/g,oo=/^\d+$/,co=/^\d/,uo=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,mo=/^\s*(['"]?)(.*?)(\1)\s*$/,ho=new io(512),po=new io(512),xo=new io(512),fo={Cache:io,split:yo,normalizePath:go,setter:function(e){var t=go(e);return po.get(e)||po.set(e,function(e,r){for(var s=0,a=t.length,n=e;s<a-1;){var i=t[s];if("__proto__"===i||"constructor"===i||"prototype"===i)return e;n=n[t[s++]]}n[t[s]]=r})},getter:function(e,t){var r=go(e);return xo.get(e)||xo.set(e,function(e){for(var s=0,a=r.length;s<a;){if(null==e&&t)return;e=e[r[s++]]}return e})},join:function(e){return e.reduce(function(e,t){return e+(bo(t)||oo.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(e,t,r){!function(e,t,r){var s,a,n,i,l=e.length;for(a=0;a<l;a++)(s=e[a])&&(vo(s)&&(s='"'+s+'"'),n=!(i=bo(s))&&/^\d+$/.test(s),t.call(r,s,i,n,a,e))}(Array.isArray(e)?e:yo(e),t,r)}};function go(e){return ho.get(e)||ho.set(e,yo(e).map(function(e){return e.replace(mo,"$2")}))}function yo(e){return e.match(lo)||[""]}function bo(e){return"string"==typeof e&&e&&-1!==["'",'"'].indexOf(e.charAt(0))}function vo(e){return!bo(e)&&(function(e){return e.match(co)&&!e.match(oo)}(e)||function(e){return uo.test(e)}(e))}const jo=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,wo=e=>e.match(jo)||[],No=(e,t)=>wo(e).join(t).toLowerCase(),_o=e=>wo(e).reduce((e,t)=>`${e}${e?t[0].toUpperCase()+t.slice(1).toLowerCase():t.toLowerCase()}`,"");var So=_o,ko=e=>No(e,"_"),Eo={exports:{}};function Co(e,t){var r=e.length,s=new Array(r),a={},n=r,i=function(e){for(var t=new Map,r=0,s=e.length;r<s;r++){var a=e[r];t.has(a[0])||t.set(a[0],new Set),t.has(a[1])||t.set(a[1],new Set),t.get(a[0]).add(a[1])}return t}(t),l=function(e){for(var t=new Map,r=0,s=e.length;r<s;r++)t.set(e[r],r);return t}(e);for(t.forEach(function(e){if(!l.has(e[0])||!l.has(e[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});n--;)a[n]||o(e[n],n,new Set);return s;function o(e,t,n){if(n.has(e)){var c;try{c=", node was:"+JSON.stringify(e)}catch(md){c=""}throw new Error("Cyclic dependency"+c)}if(!l.has(e))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(e));if(!a[t]){a[t]=!0;var d=i.get(e)||new Set;if(t=(d=Array.from(d)).length){n.add(e);do{var u=d[--t];o(u,l.get(u),n)}while(t);n.delete(e)}s[--r]=e}}}Eo.exports=function(e){return Co(function(e){for(var t=new Set,r=0,s=e.length;r<s;r++){var a=e[r];t.add(a[0]),t.add(a[1])}return Array.from(t)}(e),e)},Eo.exports.array=Co;var Oo=Eo.exports;const To=d(Oo),Ao=Object.prototype.toString,Do=Error.prototype.toString,Po=RegExp.prototype.toString,Fo="undefined"!=typeof Symbol?Symbol.prototype.toString:()=>"",Mo=/^Symbol\((.*)\)(.*)$/;function Io(e,t=!1){if(null==e||!0===e||!1===e)return""+e;const r=typeof e;if("number"===r)return function(e){return e!=+e?"NaN":0===e&&1/e<0?"-0":""+e}(e);if("string"===r)return t?`"${e}"`:e;if("function"===r)return"[Function "+(e.name||"anonymous")+"]";if("symbol"===r)return Fo.call(e).replace(Mo,"Symbol($1)");const s=Ao.call(e).slice(8,-1);return"Date"===s?isNaN(e.getTime())?""+e:e.toISOString(e):"Error"===s||e instanceof Error?"["+Do.call(e)+"]":"RegExp"===s?Po.call(e):null}function Ro(e,t){let r=Io(e,t);return null!==r?r:JSON.stringify(e,function(e,r){let s=Io(this[e],t);return null!==s?s:r},2)}function $o(e){return null==e?[]:[].concat(e)}let Lo,qo,zo,Uo=/\$\{\s*(\w+)\s*\}/g;Lo=Symbol.toStringTag;class Bo{constructor(e,t,r,s){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[Lo]="Error",this.name="ValidationError",this.value=t,this.path=r,this.type=s,this.errors=[],this.inner=[],$o(e).forEach(e=>{if(Vo.isError(e)){this.errors.push(...e.errors);const t=e.inner.length?e.inner:[e];this.inner.push(...t)}else this.errors.push(e)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}qo=Symbol.hasInstance,zo=Symbol.toStringTag;class Vo extends Error{static formatError(e,t){const r=t.label||t.path||"this";return t=Object.assign({},t,{path:r,originalPath:t.path}),"string"==typeof e?e.replace(Uo,(e,r)=>Ro(t[r])):"function"==typeof e?e(t):e}static isError(e){return e&&"ValidationError"===e.name}constructor(e,t,r,s,a){const n=new Bo(e,t,r,s);if(a)return n;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[zo]="Error",this.name=n.name,this.message=n.message,this.type=n.type,this.value=n.value,this.path=n.path,this.errors=n.errors,this.inner=n.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Vo)}static[qo](e){return Bo[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Qo={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:r,originalValue:s})=>{const a=null!=s&&s!==r?` (cast from the value \`${Ro(s,!0)}\`).`:".";return"mixed"!==t?`${e} must be a \`${t}\` type, but the final value was: \`${Ro(r,!0)}\``+a:`${e} must match the configured type. The validated value was: \`${Ro(r,!0)}\``+a}},Go={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Wo={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},Ko={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Yo={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},Ho={notType:e=>{const{path:t,value:r,spec:s}=e,a=s.types.length;if(Array.isArray(r)){if(r.length<a)return`${t} tuple value has too few items, expected a length of ${a} but got ${r.length} for value: \`${Ro(r,!0)}\``;if(r.length>a)return`${t} tuple value has too many items, expected a length of ${a} but got ${r.length} for value: \`${Ro(r,!0)}\``}return Vo.formatError(Qo.notType,e)}};Object.assign(Object.create(null),{mixed:Qo,string:Go,number:Wo,date:Ko,object:Yo,array:{min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},boolean:{isValue:"${path} field must be ${value}"},tuple:Ho});const Jo=e=>e&&e.__isYupSchema__;class Xo{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:s,otherwise:a}=t,n="function"==typeof r?r:(...e)=>e.every(e=>e===r);return new Xo(e,(e,t)=>{var r;let i=n(...e)?s:a;return null!=(r=null==i?void 0:i(t))?r:t})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let r=this.refs.map(e=>e.getValue(null==t?void 0:t.value,null==t?void 0:t.parent,null==t?void 0:t.context)),s=this.fn(r,e,t);if(void 0===s||s===e)return e;if(!Jo(s))throw new TypeError("conditions must return a schema object");return s.resolve(t)}}const Zo="$",ec=".";class tc{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,"string"!=typeof e)throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),""===e)throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Zo,this.isValue=this.key[0]===ec,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?Zo:this.isValue?ec:"";this.path=this.key.slice(r.length),this.getter=this.path&&fo.getter(this.path,!0),this.map=t.map}getValue(e,t,r){let s=this.isContext?r:this.isValue?e:t;return this.getter&&(s=this.getter(s||{})),this.map&&(s=this.map(s)),s}cast(e,t){return this.getValue(e,null==t?void 0:t.parent,null==t?void 0:t.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}tc.prototype.__isYupRef=!0;const rc=e=>null==e;function sc(e){function t({value:t,path:r="",options:s,originalValue:a,schema:n},i,l){const{name:o,test:c,params:d,message:u,skipAbsent:m}=e;let{parent:h,context:p,abortEarly:x=n.spec.abortEarly,disableStackTrace:f=n.spec.disableStackTrace}=s;function g(e){return tc.isRef(e)?e.getValue(t,h,p):e}function y(e={}){const s=Object.assign({value:t,originalValue:a,label:n.spec.label,path:e.path||r,spec:n.spec,disableStackTrace:e.disableStackTrace||f},d,e.params);for(const t of Object.keys(s))s[t]=g(s[t]);const i=new Vo(Vo.formatError(e.message||u,s),t,s.path,e.type||o,s.disableStackTrace);return i.params=s,i}const b=x?i:l;let v={path:r,parent:h,type:o,from:s.from,createError:y,resolve:g,options:s,originalValue:a,schema:n};const j=e=>{Vo.isError(e)?b(e):e?l(null):b(y())},w=e=>{Vo.isError(e)?b(e):i(e)};if(m&&rc(t))return j(!0);let N;try{var _;if(N=c.call(v,t,v),"function"==typeof(null==(_=N)?void 0:_.then)){if(s.sync)throw new Error(`Validation test of type: "${v.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(N).then(j,w)}}catch(S){return void w(S)}j(N)}return t.OPTIONS=e,t}function ac(e,t,r,s=r){let a,n,i;return t?(fo.forEach(t,(l,o,c)=>{let d=o?l.slice(1,l.length-1):l,u="tuple"===(e=e.resolve({context:s,parent:a,value:r})).type,m=c?parseInt(d,10):0;if(e.innerType||u){if(u&&!c)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${i}" must contain an index to the tuple element, e.g. "${i}[0]"`);if(r&&m>=r.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${l}, in the path: ${t}. because there is no value at that index. `);a=r,r=r&&r[m],e=u?e.spec.types[m]:e.innerType}if(!c){if(!e.fields||!e.fields[d])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${i} which is a type: "${e.type}")`);a=r,r=r&&r[d],e=e.fields[d]}n=d,i=o?"["+l+"]":"."+l}),{schema:e,parent:a,parentPath:n}):{parent:a,parentPath:t,schema:e}}class nc extends Set{describe(){const e=[];for(const t of this.values())e.push(tc.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const r of this.values())t.push(e(r));return t}clone(){return new nc(this.values())}merge(e,t){const r=this.clone();return e.forEach(e=>r.add(e)),t.forEach(e=>r.delete(e)),r}}function ic(e,t=new Map){if(Jo(e)||!e||"object"!=typeof e)return e;if(t.has(e))return t.get(e);let r;if(e instanceof Date)r=new Date(e.getTime()),t.set(e,r);else if(e instanceof RegExp)r=new RegExp(e),t.set(e,r);else if(Array.isArray(e)){r=new Array(e.length),t.set(e,r);for(let s=0;s<e.length;s++)r[s]=ic(e[s],t)}else if(e instanceof Map){r=new Map,t.set(e,r);for(const[s,a]of e.entries())r.set(s,ic(a,t))}else if(e instanceof Set){r=new Set,t.set(e,r);for(const s of e)r.add(ic(s,t))}else{if(!(e instanceof Object))throw Error(`Unable to clone ${e}`);r={},t.set(e,r);for(const[s,a]of Object.entries(e))r[s]=ic(a,t)}return r}class lc{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new nc,this._blacklist=new nc,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Qo.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},null==e?void 0:e.spec),this.withMutation(e=>{e.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=ic(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(0===e.length)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=t,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&"mixed"!==this.type)throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,r=e.clone();const s=Object.assign({},t.spec,r.spec);return r.spec=s,r.internalTests=Object.assign({},t.internalTests,r.internalTests),r._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),r.tests=t.tests,r.exclusiveTests=t.exclusiveTests,r.withMutation(t=>{e.tests.forEach(e=>{t.test(e.OPTIONS)})}),r.transforms=[...t.transforms,...r.transforms],r}isType(e){return null==e?!(!this.spec.nullable||null!==e)||!(!this.spec.optional||void 0!==e):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let r=t.conditions;t=t.clone(),t.conditions=[],t=r.reduce((t,r)=>r.resolve(t,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,r,s,a;return Object.assign({},e,{from:e.from||[],strict:null!=(t=e.strict)?t:this.spec.strict,abortEarly:null!=(r=e.abortEarly)?r:this.spec.abortEarly,recursive:null!=(s=e.recursive)?s:this.spec.recursive,disableStackTrace:null!=(a=e.disableStackTrace)?a:this.spec.disableStackTrace})}cast(e,t={}){let r=this.resolve(Object.assign({value:e},t)),s="ignore-optionality"===t.assert,a=r._cast(e,t);if(!1!==t.assert&&!r.isType(a)){if(s&&rc(a))return a;let n=Ro(e),i=Ro(a);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". \n\nattempted value: ${n} \n`+(i!==n?`result of cast: ${i}`:""))}return a}_cast(e,t){let r=void 0===e?e:this.transforms.reduce((t,r)=>r.call(this,t,e,this),e);return void 0===r&&(r=this.getDefault(t)),r}_validate(e,t={},r,s){let{path:a,originalValue:n=e,strict:i=this.spec.strict}=t,l=e;i||(l=this._cast(l,Object.assign({assert:!1},t)));let o=[];for(let c of Object.values(this.internalTests))c&&o.push(c);this.runTests({path:a,value:l,originalValue:n,options:t,tests:o},r,e=>{if(e.length)return s(e,l);this.runTests({path:a,value:l,originalValue:n,options:t,tests:this.tests},r,s)})}runTests(e,t,r){let s=!1,{tests:a,value:n,originalValue:i,path:l,options:o}=e,c=e=>{s||(s=!0,t(e,n))},d=e=>{s||(s=!0,r(e,n))},u=a.length,m=[];if(!u)return d([]);let h={value:n,originalValue:i,path:l,options:o,schema:this};for(let p=0;p<a.length;p++)(0,a[p])(h,c,function(e){e&&(Array.isArray(e)?m.push(...e):m.push(e)),--u<=0&&d(m)})}asNestedTest({key:e,index:t,parent:r,parentPath:s,originalParent:a,options:n}){const i=null!=e?e:t;if(null==i)throw TypeError("Must include `key` or `index` for nested validations");const l="number"==typeof i;let o=r[i];const c=Object.assign({},n,{strict:!0,parent:r,value:o,originalValue:a[i],key:void 0,[l?"index":"key"]:i,path:l||i.includes(".")?`${s||""}[${l?i:`"${i}"`}]`:(s?`${s}.`:"")+e});return(e,t,r)=>this.resolve(c)._validate(o,c,t,r)}validate(e,t){var r;let s=this.resolve(Object.assign({},t,{value:e})),a=null!=(r=null==t?void 0:t.disableStackTrace)?r:s.spec.disableStackTrace;return new Promise((r,n)=>s._validate(e,t,(e,t)=>{Vo.isError(e)&&(e.value=t),n(e)},(e,t)=>{e.length?n(new Vo(e,t,void 0,void 0,a)):r(t)}))}validateSync(e,t){var r;let s,a=this.resolve(Object.assign({},t,{value:e})),n=null!=(r=null==t?void 0:t.disableStackTrace)?r:a.spec.disableStackTrace;return a._validate(e,Object.assign({},t,{sync:!0}),(e,t)=>{throw Vo.isError(e)&&(e.value=t),e},(t,r)=>{if(t.length)throw new Vo(t,e,void 0,void 0,n);s=r}),s}isValid(e,t){return this.validate(e,t).then(()=>!0,e=>{if(Vo.isError(e))return!1;throw e})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(r){if(Vo.isError(r))return!1;throw r}}_getDefault(e){let t=this.spec.default;return null==t?t:"function"==typeof t?t.call(this,e):ic(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return 0===arguments.length?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const r=this.clone({nullable:e});return r.internalTests.nullable=sc({message:t,name:"nullable",test(e){return null!==e||this.schema.spec.nullable}}),r}optionality(e,t){const r=this.clone({optional:e});return r.internalTests.optionality=sc({message:t,name:"optionality",test(e){return void 0!==e||this.schema.spec.optional}}),r}optional(){return this.optionality(!0)}defined(e=Qo.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=Qo.notNull){return this.nullability(!1,e)}required(e=Qo.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(t=1===e.length?"function"==typeof e[0]?{test:e[0]}:e[0]:2===e.length?{name:e[0],test:e[1]}:{name:e[0],message:e[1],test:e[2]},void 0===t.message&&(t.message=Qo.default),"function"!=typeof t.test)throw new TypeError("`test` is a required parameters");let r=this.clone(),s=sc(t),a=t.exclusive||t.name&&!0===r.exclusiveTests[t.name];if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(r.exclusiveTests[t.name]=!!t.exclusive),r.tests=r.tests.filter(e=>{if(e.OPTIONS.name===t.name){if(a)return!1;if(e.OPTIONS.test===s.OPTIONS.test)return!1}return!0}),r.tests.push(s),r}when(e,t){Array.isArray(e)||"string"==typeof e||(t=e,e=".");let r=this.clone(),s=$o(e).map(e=>new tc(e));return s.forEach(e=>{e.isSibling&&r.deps.push(e.key)}),r.conditions.push("function"==typeof t?new Xo(s,t):Xo.fromOptions(s,t)),r}typeError(e){let t=this.clone();return t.internalTests.typeError=sc({message:e,name:"typeError",skipAbsent:!0,test(e){return!!this.schema._typeCheck(e)||this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=Qo.oneOf){let r=this.clone();return e.forEach(e=>{r._whitelist.add(e),r._blacklist.delete(e)}),r.internalTests.whiteList=sc({message:t,name:"oneOf",skipAbsent:!0,test(e){let t=this.schema._whitelist,r=t.resolveAll(this.resolve);return!!r.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:r}})}}),r}notOneOf(e,t=Qo.notOneOf){let r=this.clone();return e.forEach(e=>{r._blacklist.add(e),r._whitelist.delete(e)}),r.internalTests.blacklist=sc({message:t,name:"notOneOf",test(e){let t=this.schema._blacklist,r=t.resolveAll(this.resolve);return!r.includes(e)||this.createError({params:{values:Array.from(t).join(", "),resolved:r}})}}),r}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:r,meta:s,optional:a,nullable:n}=t.spec;return{meta:s,label:r,optional:a,nullable:n,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.map(e=>({name:e.OPTIONS.name,params:e.OPTIONS.params})).filter((e,t,r)=>r.findIndex(t=>t.name===e.name)===t)}}}lc.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])lc.prototype[`${t}At`]=function(e,r,s={}){const{parent:a,parentPath:n,schema:i}=ac(this,e,r,s.context);return i[t](a&&a[n],Object.assign({},s,{parent:a,path:e}))};for(const t of["equals","is"])lc.prototype[t]=lc.prototype.oneOf;for(const t of["not","nope"])lc.prototype[t]=lc.prototype.notOneOf;const oc=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function cc(e){var t,r;const s=oc.exec(e);return s?{year:dc(s[1]),month:dc(s[2],1)-1,day:dc(s[3],1),hour:dc(s[4]),minute:dc(s[5]),second:dc(s[6]),millisecond:s[7]?dc(s[7].substring(0,3)):0,precision:null!=(t=null==(r=s[7])?void 0:r.length)?t:void 0,z:s[8]||void 0,plusMinus:s[9]||void 0,hourOffset:dc(s[10]),minuteOffset:dc(s[11])}:null}function dc(e,t=0){return Number(e)||t}let uc=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,mc=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,hc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,pc=new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"),xc=e=>rc(e)||e===e.trim(),fc={}.toString();function gc(){return new yc}class yc extends lc{constructor(){super({type:"string",check:e=>(e instanceof String&&(e=e.valueOf()),"string"==typeof e)}),this.withMutation(()=>{this.transform((e,t,r)=>{if(!r.spec.coerce||r.isType(e))return e;if(Array.isArray(e))return e;const s=null!=e&&e.toString?e.toString():e;return s===fc?e:s})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||Qo.required,name:"required",skipAbsent:!0,test:e=>!!e.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(e=>"required"!==e.OPTIONS.name),e))}length(e,t=Go.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(t){return t.length===this.resolve(e)}})}min(e,t=Go.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t.length>=this.resolve(e)}})}max(e,t=Go.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(t){return t.length<=this.resolve(e)}})}matches(e,t){let r,s,a=!1;return t&&("object"==typeof t?({excludeEmptyString:a=!1,message:r,name:s}=t):r=t),this.test({name:s||"matches",message:r||Go.matches,params:{regex:e},skipAbsent:!0,test:t=>""===t&&a||-1!==t.search(e)})}email(e=Go.email){return this.matches(uc,{name:"email",message:e,excludeEmptyString:!0})}url(e=Go.url){return this.matches(mc,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Go.uuid){return this.matches(hc,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t,r,s="";return e&&("object"==typeof e?({message:s="",allowOffset:t=!1,precision:r}=e):s=e),this.matches(pc,{name:"datetime",message:s||Go.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:s||Go.datetime_offset,params:{allowOffset:t},skipAbsent:!0,test:e=>{if(!e||t)return!0;const r=cc(e);return!!r&&!!r.z}}).test({name:"datetime_precision",message:s||Go.datetime_precision,params:{precision:r},skipAbsent:!0,test:e=>{if(!e||null==r)return!0;const t=cc(e);return!!t&&t.precision===r}})}ensure(){return this.default("").transform(e=>null===e?"":e)}trim(e=Go.trim){return this.transform(e=>null!=e?e.trim():e).test({message:e,name:"trim",test:xc})}lowercase(e=Go.lowercase){return this.transform(e=>rc(e)?e:e.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>rc(e)||e===e.toLowerCase()})}uppercase(e=Go.uppercase){return this.transform(e=>rc(e)?e:e.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:e=>rc(e)||e===e.toUpperCase()})}}function bc(){return new vc}gc.prototype=yc.prototype;class vc extends lc{constructor(){super({type:"number",check:e=>(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&!(e=>e!=+e)(e))}),this.withMutation(()=>{this.transform((e,t,r)=>{if(!r.spec.coerce)return e;let s=e;if("string"==typeof s){if(s=s.replace(/\s/g,""),""===s)return NaN;s=+s}return r.isType(s)||null===s?s:parseFloat(s)})})}min(e,t=Wo.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(t){return t>=this.resolve(e)}})}max(e,t=Wo.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(t){return t<=this.resolve(e)}})}lessThan(e,t=Wo.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(t){return t<this.resolve(e)}})}moreThan(e,t=Wo.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(t){return t>this.resolve(e)}})}positive(e=Wo.positive){return this.moreThan(0,e)}negative(e=Wo.negative){return this.lessThan(0,e)}integer(e=Wo.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:e=>Number.isInteger(e)})}truncate(){return this.transform(e=>rc(e)?e:0|e)}round(e){var t;let r=["ceil","floor","round","trunc"];if("trunc"===(e=(null==(t=e)?void 0:t.toLowerCase())||"round"))return this.truncate();if(-1===r.indexOf(e.toLowerCase()))throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(t=>rc(t)?t:Math[e](t))}}bc.prototype=vc.prototype;let jc=new Date("");class wc extends lc{constructor(){super({type:"date",check(e){return t=e,"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(e.getTime());var t}}),this.withMutation(()=>{this.transform((e,t,r)=>!r.spec.coerce||r.isType(e)||null===e?e:(e=function(e){const t=cc(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(void 0===t.z&&void 0===t.plusMinus)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let r=0;return"Z"!==t.z&&void 0!==t.plusMinus&&(r=60*t.hourOffset+t.minuteOffset,"+"===t.plusMinus&&(r=0-r)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+r,t.second,t.millisecond)}(e),isNaN(e)?wc.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let r;if(tc.isRef(e))r=e;else{let s=this.cast(e);if(!this._typeCheck(s))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);r=s}return r}min(e,t=Ko.min){let r=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(e){return e>=this.resolve(r)}})}max(e,t=Ko.max){let r=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(e){return e<=this.resolve(r)}})}}function Nc(e,t){let r=1/0;return e.some((e,s)=>{var a;if(null!=(a=t.path)&&a.includes(e))return r=s,!0}),r}function _c(e){return(t,r)=>Nc(e,t)-Nc(e,r)}wc.INVALID_DATE=jc;const Sc=(e,t,r)=>{if("string"!=typeof e)return e;let s=e;try{s=JSON.parse(e)}catch(a){}return r.isType(s)?s:e};function kc(e){if("fields"in e){const t={};for(const[r,s]of Object.entries(e.fields))t[r]=kc(s);return e.setFields(t)}if("array"===e.type){const t=e.optional();return t.innerType&&(t.innerType=kc(t.innerType)),t}return"tuple"===e.type?e.optional().clone({types:e.spec.types.map(kc)}):"optional"in e?e.optional():e}let Ec=e=>"[object Object]"===Object.prototype.toString.call(e);function Cc(e,t){let r=Object.keys(e.fields);return Object.keys(t).filter(e=>-1===r.indexOf(e))}const Oc=_c([]);function Tc(e){return new Ac(e)}class Ac extends lc{constructor(e){super({type:"object",check:e=>Ec(e)||"function"==typeof e}),this.fields=Object.create(null),this._sortErrors=Oc,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var r;let s=super._cast(e,t);if(void 0===s)return this.getDefault(t);if(!this._typeCheck(s))return s;let a=this.fields,n=null!=(r=t.stripUnknown)?r:this.spec.noUnknown,i=[].concat(this._nodes,Object.keys(s).filter(e=>!this._nodes.includes(e))),l={},o=Object.assign({},t,{parent:l,__validating:t.__validating||!1}),c=!1;for(const d of i){let e=a[d],r=d in s;if(e){let r,a=s[d];o.path=(t.path?`${t.path}.`:"")+d,e=e.resolve({value:a,context:t.context,parent:l});let n=e instanceof lc?e.spec:void 0,i=null==n?void 0:n.strict;if(null!=n&&n.strip){c=c||d in s;continue}r=t.__validating&&i?s[d]:e.cast(s[d],o),void 0!==r&&(l[d]=r)}else r&&!n&&(l[d]=s[d]);r===d in l&&l[d]===s[d]||(c=!0)}return c?l:s}_validate(e,t={},r,s){let{from:a=[],originalValue:n=e,recursive:i=this.spec.recursive}=t;t.from=[{schema:this,value:n},...a],t.__validating=!0,t.originalValue=n,super._validate(e,t,r,(e,a)=>{if(!i||!Ec(a))return void s(e,a);n=n||a;let l=[];for(let r of this._nodes){let e=this.fields[r];e&&!tc.isRef(e)&&l.push(e.asNestedTest({options:t,key:r,parent:a,parentPath:t.path,originalParent:n}))}this.runTests({tests:l,value:a,originalValue:n,options:t},r,t=>{s(t.sort(this._sortErrors).concat(e),a)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),r=t.fields;for(let[s,a]of Object.entries(this.fields)){const e=r[s];r[s]=void 0===e?a:e}return t.withMutation(t=>t.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(r=>{var s;const a=this.fields[r];let n=e;null!=(s=n)&&s.value&&(n=Object.assign({},n,{parent:n.value,value:n.value[r]})),t[r]=a&&"getDefault"in a?a.getDefault(n):void 0}),t}setFields(e,t){let r=this.clone();return r.fields=e,r._nodes=function(e,t=[]){let r=[],s=new Set,a=new Set(t.map(([e,t])=>`${e}-${t}`));function n(e,t){let n=fo.split(e)[0];s.add(n),a.has(`${t}-${n}`)||r.push([t,n])}for(const i of Object.keys(e)){let t=e[i];s.add(i),tc.isRef(t)&&t.isSibling?n(t.path,i):Jo(t)&&"deps"in t&&t.deps.forEach(e=>n(e,i))}return To.array(Array.from(s),r).reverse()}(e,t),r._sortErrors=_c(Object.keys(e)),t&&(r._excludedEdges=t),r}shape(e,t=[]){return this.clone().withMutation(r=>{let s=r._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),s=[...r._excludedEdges,...t]),r.setFields(Object.assign(r.fields,e),s)})}partial(){const e={};for(const[t,r]of Object.entries(this.fields))e[t]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return kc(this)}pick(e){const t={};for(const r of e)this.fields[r]&&(t[r]=this.fields[r]);return this.setFields(t,this._excludedEdges.filter(([t,r])=>e.includes(t)&&e.includes(r)))}omit(e){const t=[];for(const r of Object.keys(this.fields))e.includes(r)||t.push(r);return this.pick(t)}from(e,t,r){let s=fo.getter(e,!0);return this.transform(a=>{if(!a)return a;let n=a;return((e,t)=>{const r=[...fo.normalizePath(t)];if(1===r.length)return r[0]in e;let s=r.pop(),a=fo.getter(fo.join(r),!0)(e);return!(!a||!(s in a))})(a,e)&&(n=Object.assign({},a),r||delete n[e],n[t]=s(a)),n})}json(){return this.transform(Sc)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||Yo.exact,test(e){if(null==e)return!0;const t=Cc(this.schema,e);return 0===t.length||this.createError({params:{properties:t.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,t=Yo.noUnknown){"boolean"!=typeof e&&(t=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:t,test(t){if(null==t)return!0;const r=Cc(this.schema,t);return!e||0===r.length||this.createError({params:{unknown:r.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,t=Yo.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const r={};for(const s of Object.keys(t))r[e(s)]=t[s];return r})}camelCase(){return this.transformKeys(So)}snakeCase(){return this.transformKeys(ko)}constantCase(){return this.transformKeys(e=>ko(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[a,n]of Object.entries(t.fields)){var s;let t=e;null!=(s=t)&&s.value&&(t=Object.assign({},t,{parent:t.value,value:t.value[a]})),r.fields[a]=n.describe(t)}return r}}Tc.prototype=Ac.prototype;const Dc=({isEditing:e=!1})=>{const{id:r}=c(),s=l(),a=Lt(),{user:n}=yr(),[i,o]=t.useState(!1),[d,u]=t.useState(null),[m,h]=t.useState(!1),{data:p,isLoading:x}=Qt(["lookupTables"],Yr,{staleTime:3e5,onError:e=>{}}),f=(null==p?void 0:p.propertyTypes)||[],g=(null==p?void 0:p.propertyStatuses)||[],y=(null==p?void 0:p.transactionTypes)||[],{data:b,isLoading:v}=Qt(["property",r],async()=>{if(!r)return null;const{data:e,error:t}=await lr.from("properties").select("*").eq("id",r).single();if(t)throw t;return e},{enabled:e&&!!r,onError:e=>{u(`매물 정보를 불러오는데 실패했습니다: ${e.message}`)}}),j=Bt(async t=>{const s=(e=>{const t={...e};return["price","lease_price","supply_area_sqm","private_area_sqm","supply_area_pyeong","private_area_pyeong","maintenance_fee"].forEach(e=>{if(""===t[e]||void 0===t[e])t[e]=null;else if(null!==t[e]){const r=parseFloat(t[e]);t[e]=isNaN(r)?null:r}}),["move_in_date","available_date"].forEach(e=>{""!==t[e]&&void 0!==t[e]||(t[e]=null)}),t})(t),a={property_name:s.property_name,location:s.location,building_name:s.dong||"",room_number:s.ho||"",property_type:s.property_type_id,transaction_type:s.transaction_type_id,property_status:s.property_status_id,price:s.price,lease_price:s.lease_price,area_m2:s.supply_area_sqm,area_pyeong:s.supply_area_sqm?Math.round(.3025*s.supply_area_sqm*10)/10:null,floor_current:s.floor_current,floor_total:s.floor_total,room_count:s.rooms,bath_count:s.bathrooms,monthly_fee:s.maintenance_fee,description:s.special_notes,special_notes:s.manager_memo,available_date:s.move_in_date||null,customer_name:s.customer_name,customer_phone:s.customer_phone,customer_request:s.customer_notes,owner_name:s.owner||"",owner_phone:s.owner_contact||""};if(e){const{data:e,error:t}=await lr.from("properties").update(a).eq("id",r).select();if(t)throw t;return e}{const{data:e,error:t}=await lr.from("properties").insert([{...a,manager_id:n.id}]).select();if(t)throw t;return e}},{onSuccess:()=>{a.invalidateQueries(["properties"]),a.invalidateQueries(["property",r]),h(!0),setTimeout(()=>{s("/properties")},2e3)},onError:t=>{u(`매물 ${e?"수정":"등록"}에 실패했습니다: ${t.message}`)},onSettled:()=>{o(!1)}}),w=(()=>{if(null==b?void 0:b.resident)try{return JSON.parse(b.resident)}catch(md){return{}}return{}})(),N=to({initialValues:{property_type_id:(null==b?void 0:b.property_type_id)||"",property_status_id:(null==b?void 0:b.property_status_id)||"",transaction_type_id:(null==b?void 0:b.transaction_type_id)||"",property_name:(null==b?void 0:b.property_name)||"",location:(null==b?void 0:b.location)||"",dong:(null==b?void 0:b.dong)||"",ho:(null==b?void 0:b.ho)||"",lease_price:(null==b?void 0:b.lease_price)||"",price:(null==b?void 0:b.price)||"",supply_area_sqm:(null==b?void 0:b.supply_area_sqm)||"",private_area_sqm:(null==b?void 0:b.private_area_sqm)||"",floor_info:(null==b?void 0:b.floor_info)||"",rooms_bathrooms:(null==b?void 0:b.rooms_bathrooms)||"",direction:(null==b?void 0:b.direction)||"",maintenance_fee:(null==b?void 0:b.maintenance_fee)||"",parking:(null==b?void 0:b.parking)||"",move_in_date:(null==b?void 0:b.move_in_date)||"",approval_date:(null==b?void 0:b.approval_date)||"",special_notes:(null==b?void 0:b.special_notes)||"",manager_memo:(null==b?void 0:b.manager_memo)||"",customer_name:w.name||"",customer_phone:w.phone||"",customer_email:w.email||"",customer_address:w.address||"",customer_notes:w.notes||""},validationSchema:Tc({property_name:gc().required("매물명은 필수 입력사항입니다"),location:gc().required("소재지는 필수 입력사항입니다"),property_type_id:gc().required("매물종류는 필수 선택사항입니다"),property_status_id:gc().required("진행상태는 필수 선택사항입니다"),transaction_type_id:gc().required("거래유형은 필수 선택사항입니다"),supply_area_sqm:bc().positive("유효한 면적을 입력하세요"),private_area_sqm:bc().positive("유효한 면적을 입력하세요"),customer_name:gc().required("고객 이름은 필수 입력사항입니다"),customer_phone:gc().matches(/^010-\d{4}-\d{4}$/,"올바른 전화번호 형식을 입력하세요 (예: 010-1234-5678)").required("고객 전화번호는 필수 입력사항입니다"),customer_email:gc().email("올바른 이메일 형식을 입력하세요")}),onSubmit:async e=>{o(!0),u(null),j.mutate(e)},enableReinitialize:!0}),_=e=>e?(.3025*e).toFixed(2):"",S=e=>{const t=y.find(t=>t.id===e);return t?t.name:""};return e&&v||x?Ie.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ie.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ie.jsx("p",{className:"ml-2 text-gray-600",children:e?"매물 정보를 불러오는 중...":"시스템 데이터를 불러오는 중..."})]}):Ie.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-4 sm:p-6 lg:p-8 border border-slate-200",children:[Ie.jsxs("div",{className:"mb-6 sm:mb-8",children:[Ie.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-slate-900 mb-2",children:e?"매물 정보 수정":"새 매물 등록"}),Ie.jsx("p",{className:"text-sm sm:text-base text-slate-600",children:e?"매물 정보를 수정하세요":"새로운 매물을 등록해주세요"})]}),d&&Ie.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-400 rounded-xl text-red-700 shadow-sm",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx("svg",{className:"w-5 h-5 mr-3 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:Ie.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),Ie.jsx("span",{className:"font-medium",children:d})]})}),m&&Ie.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-400 rounded-xl text-green-700 shadow-sm",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx("svg",{className:"w-5 h-5 mr-3 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:Ie.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),Ie.jsxs("span",{className:"font-medium",children:["매물이 성공적으로 ",e?"수정":"등록","되었습니다! 매물 목록으로 이동합니다..."]})]})}),Ie.jsx("form",{onSubmit:N.handleSubmit,children:Ie.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:gap-8 mb-6 sm:mb-8",children:[Ie.jsxs("div",{children:[Ie.jsx("h3",{className:"text-lg sm:text-xl font-bold text-slate-900 mb-3 sm:mb-4 pb-2 border-b border-slate-200",children:"기본 정보"}),Ie.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["매물명 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsx("input",{type:"text",name:"property_name",value:N.values.property_name,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 래미안 아파트 106동"}),N.touched.property_name&&N.errors.property_name&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.property_name})]}),Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["소재지 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsx("input",{type:"text",name:"location",value:N.values.location,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 서울시 강남구 삼성동"}),N.touched.location&&N.errors.location&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.location})]}),Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["매물종류 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsxs("select",{name:"property_type_id",value:N.values.property_type_id,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",children:[Ie.jsx("option",{value:"",children:"매물종류 선택"}),f.map(e=>Ie.jsx("option",{value:e.id,children:e.name},e.id))]}),N.touched.property_type_id&&N.errors.property_type_id&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.property_type_id})]}),Ie.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"동"}),Ie.jsx("input",{type:"text",name:"dong",value:N.values.dong,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 106동"})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"호"}),Ie.jsx("input",{type:"text",name:"ho",value:N.values.ho,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 1503호"})]})]})]})]}),Ie.jsxs("div",{className:"md:col-span-2",children:[Ie.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 pb-2 border-b border-gray-100",children:"거래 정보"}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["진행상태 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsxs("select",{name:"property_status_id",value:N.values.property_status_id,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",children:[Ie.jsx("option",{value:"",children:"진행상태 선택"}),g.map(e=>Ie.jsx("option",{value:e.id,children:e.name},e.id))]}),N.touched.property_status_id&&N.errors.property_status_id&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.property_status_id})]}),Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["거래유형 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsxs("select",{name:"transaction_type_id",value:N.values.transaction_type_id,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",children:[Ie.jsx("option",{value:"",children:"거래유형 선택"}),y.map(e=>Ie.jsx("option",{value:e.id,children:e.name},e.id))]}),N.touched.transaction_type_id&&N.errors.transaction_type_id&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.transaction_type_id})]}),Ie.jsxs("div",{className:"space-y-4",children:[Ie.jsx("h4",{className:"text-sm font-medium text-gray-800",children:"가격 정보"}),"매매"===S(N.values.transaction_type_id)&&Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["매매가 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsxs("div",{className:"relative",children:[Ie.jsx("input",{type:"number",name:"price",value:N.values.price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 2500000000"}),Ie.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원"})]}),N.touched.price&&N.errors.price&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.price})]}),"분양"===S(N.values.transaction_type_id)&&Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["분양가 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsxs("div",{className:"relative",children:[Ie.jsx("input",{type:"number",name:"price",value:N.values.price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 3000000000"}),Ie.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원"})]}),N.touched.price&&N.errors.price&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.price})]}),"전세"===S(N.values.transaction_type_id)&&Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["전세 보증금 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsxs("div",{className:"relative",children:[Ie.jsx("input",{type:"number",name:"lease_price",value:N.values.lease_price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 200000000"}),Ie.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원"})]}),N.touched.lease_price&&N.errors.lease_price&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.lease_price})]}),("월세"===S(N.values.transaction_type_id)||"월세/렌트"===S(N.values.transaction_type_id))&&Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["보증금 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsxs("div",{className:"relative",children:[Ie.jsx("input",{type:"number",name:"lease_price",value:N.values.lease_price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 50000000"}),Ie.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원"})]}),N.touched.lease_price&&N.errors.lease_price&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.lease_price})]}),Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["월세 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsxs("div",{className:"relative",children:[Ie.jsx("input",{type:"number",name:"price",value:N.values.price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 500000"}),Ie.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원"})]}),N.touched.price&&N.errors.price&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.price})]})]}),("단기"===S(N.values.transaction_type_id)||"단기임대"===S(N.values.transaction_type_id))&&Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["일일요금 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsxs("div",{className:"relative",children:[Ie.jsx("input",{type:"number",name:"price",value:N.values.price,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 150000"}),Ie.jsx("span",{className:"absolute right-3 top-2 text-sm text-gray-500",children:"원/일"})]}),N.touched.price&&N.errors.price&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.price})]}),!S(N.values.transaction_type_id)&&Ie.jsx("div",{className:"text-sm text-gray-500 bg-gray-50 p-3 rounded-md",children:"거래유형을 먼저 선택하시면 해당 유형에 맞는 가격 입력 필드가 나타납니다."})]})]})]}),Ie.jsxs("div",{className:"md:col-span-2",children:[Ie.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 pb-2 border-b border-gray-100",children:"물건 정보"}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ie.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"공급면적(㎡)"}),Ie.jsx("input",{type:"number",name:"supply_area_sqm",value:N.values.supply_area_sqm,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 84.56"}),Ie.jsx("div",{className:"text-sm text-gray-500 mt-1",children:N.values.supply_area_sqm?`${_(N.values.supply_area_sqm)}평`:""}),N.touched.supply_area_sqm&&N.errors.supply_area_sqm&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.supply_area_sqm})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"전용면적(㎡)"}),Ie.jsx("input",{type:"number",name:"private_area_sqm",value:N.values.private_area_sqm,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 59.82"}),Ie.jsx("div",{className:"text-sm text-gray-500 mt-1",children:N.values.private_area_sqm?`${_(N.values.private_area_sqm)}평`:""}),N.touched.private_area_sqm&&N.errors.private_area_sqm&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.private_area_sqm})]})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"층/총층"}),Ie.jsx("input",{type:"text",name:"floor_info",value:N.values.floor_info,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 15층/25층"})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"방/욕실"}),Ie.jsx("input",{type:"text",name:"rooms_bathrooms",value:N.values.rooms_bathrooms,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 3개/2개"})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"방향"}),Ie.jsx("input",{type:"text",name:"direction",value:N.values.direction,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 남향"})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"관리비"}),Ie.jsx("input",{type:"text",name:"maintenance_fee",value:N.values.maintenance_fee,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 15만원"})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"주차"}),Ie.jsx("input",{type:"text",name:"parking",value:N.values.parking,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 2대"})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"입주가능일"}),Ie.jsx("input",{type:"text",name:"move_in_date",value:N.values.move_in_date,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 즉시입주"})]}),_r(null==n?void 0:n.email)&&Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"사용승인일"}),Ie.jsx("input",{type:"text",name:"approval_date",value:N.values.approval_date,onChange:N.handleChange,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"예: 2022.05.20"})]})]})]}),Ie.jsxs("div",{className:"md:col-span-2",children:[Ie.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 pb-2 border-b border-gray-100",children:"추가 정보"}),Ie.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"특이사항"}),Ie.jsx("textarea",{name:"special_notes",value:N.values.special_notes,onChange:N.handleChange,rows:"3",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"매물의 특이사항을 입력하세요"})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"담당자 메모"}),Ie.jsx("textarea",{name:"manager_memo",value:N.values.manager_memo,onChange:N.handleChange,rows:"3",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"담당자만 볼 수 있는 내부 메모"})]})]})]}),Ie.jsxs("div",{className:"md:col-span-2",children:[Ie.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 pb-2 border-b border-gray-100",children:"고객 정보"}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["고객 이름 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsx("input",{type:"text",name:"customer_name",value:N.values.customer_name,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"고객 이름을 입력하세요"}),N.touched.customer_name&&N.errors.customer_name&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.customer_name})]}),Ie.jsxs("div",{children:[Ie.jsxs("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["전화번호 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsx("input",{type:"tel",name:"customer_phone",value:N.values.customer_phone,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"010-1234-5678"}),N.touched.customer_phone&&N.errors.customer_phone&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.customer_phone})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"이메일"}),Ie.jsx("input",{type:"email",name:"customer_email",value:N.values.customer_email,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"customer@example.com"}),N.touched.customer_email&&N.errors.customer_email&&Ie.jsx("p",{className:"mt-1 text-sm text-red-500",children:N.errors.customer_email})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"주소"}),Ie.jsx("input",{type:"text",name:"customer_address",value:N.values.customer_address,onChange:N.handleChange,onBlur:N.handleBlur,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"고객 주소를 입력하세요"})]}),Ie.jsxs("div",{className:"md:col-span-2",children:[Ie.jsx("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"고객 메모"}),Ie.jsx("textarea",{name:"customer_notes",value:N.values.customer_notes,onChange:N.handleChange,rows:"3",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 hover:border-gray-300 bg-gray-50 focus:bg-white shadow-sm",placeholder:"고객 관련 메모사항을 입력하세요"})]})]})]}),Ie.jsxs("div",{className:"md:col-span-2 flex justify-end space-x-4 mt-8",children:[Ie.jsx("button",{type:"button",onClick:()=>s("/properties"),disabled:i,className:"px-6 py-3 border border-gray-200 rounded-xl text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-300 disabled:opacity-50 transition-all duration-200 font-medium shadow-sm hover:shadow-md",children:"취소"}),Ie.jsx("button",{type:"submit",disabled:i,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 transition-all duration-200 font-medium shadow-md hover:shadow-lg transform hover:scale-105",children:i?Ie.jsxs("span",{className:"flex items-center",children:[Ie.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[Ie.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),Ie.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"처리 중..."]}):e?"수정 완료":"등록 완료"})]})]})})]})},Pc=()=>{const{id:e}=c(),t=!!e;return Ie.jsxs("div",{children:[Ie.jsx("h1",{className:"text-2xl font-bold mb-6",children:t?"매물 정보 수정":"새 매물 등록"}),Ie.jsx(Dc,{isEditing:t})]})},Fc=async e=>{try{const{data:t,error:r}=await lr.from("properties").select("property_status_id, transaction_type_id, price, lease_price, monthly_rent").eq("manager_id",e);if(r)throw r;const s=t.length,a=t.filter(e=>"available"===e.property_status_id).length,n=t.filter(e=>"completed"===e.property_status_id).length;return{totalProperties:s,activeProperties:a,completedProperties:n,totalValue:t.reduce((e,t)=>e+(t.price||t.lease_price||t.monthly_rent||0),0),successRate:s>0?(n/s*100).toFixed(1):0}}catch(t){return{totalProperties:0,activeProperties:0,completedProperties:0,totalValue:0,successRate:0}}},Mc=async()=>{try{const{data:e,error:t}=await lr.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return{data:e||[],error:null}}catch(e){return{data:[],error:e.message}}},Ic=async e=>{try{const{data:t,error:r}=await lr.from("users").select("*").eq("id",e).single();if(r)throw r;const s=await Fc(e);return{data:{...t,stats:s},error:null}}catch(t){return{data:null,error:t.message}}},Rc=async e=>{try{const{data:t,error:r}=await lr.auth.signUp({email:e.email,password:e.password});if(r)throw r;const{data:s,error:a}=await lr.from("users").insert([{...e,id:t.user.id,password:void 0}]).select().single();if(a)throw a;return{data:s,error:null}}catch(t){return{data:null,error:t.message}}},$c=async(e,t)=>{try{const{data:r,error:s}=await lr.from("users").update(t).eq("id",e).select().single();if(s)throw s;return{data:r,error:null}}catch(r){return{data:null,error:r.message}}},Lc=async(e,t)=>{try{const{error:r}=await lr.auth.admin.updateUserById(e,{password:t});if(r)throw r;return{error:null}}catch(r){return{error:r.message}}},qc=[{id:1,name:"김규민",email:"gyum@the-realty.co.kr",role:"admin"},{id:2,name:"하상현",email:"lucas@the-realty.co.kr",role:"admin"},{id:6,name:"정연서",email:"jenny@the-realty.co.kr",role:"admin"},{id:3,name:"정서연",email:"yool@the-realty.co.kr",role:"user"},{id:4,name:"정선혜",email:"grace@the-realty.co.kr",role:"user"},{id:5,name:"박소현",email:"sso@the-realty.co.kr",role:"user"},{id:7,name:"송영주",email:"joo@the-realty.co.kr",role:"user"},{id:8,name:"정윤식",email:"yun@the-realty.co.kr",role:"user"},{id:9,name:"성은미",email:"mimi@the-realty.co.kr",role:"user"},{id:10,name:"서을선",email:"sun@the-realty.co.kr",role:"user"},{id:11,name:"서지혜",email:"kylie@the-realty.co.kr",role:"user"},{id:12,name:"이혜만",email:"hmlee@the-realty.co.kr",role:"user"},{id:13,name:"김효석",email:"seok@the-realty.co.kr",role:"user"}];qc.filter(e=>"admin"===e.role),qc.map((e,t)=>({id:`hardcoded-${e.email}`,email:e.email,name:e.name,phone:`010-${Math.floor(1e3+9e3*Math.random())}-${Math.floor(1e3+9e3*Math.random())}`,role:e.role,status:"active",created_at:"2025-01-01T00:00:00.000Z",updated_at:"2025-07-31T00:00:00.000Z",last_login:new Date(Date.now()-Math.floor(7*Math.random()*24*60*60*1e3)).toISOString()}));const zc=()=>{const{user:e}=yr(),r=Lt(),[s,a]=t.useState("list"),[n,i]=t.useState(!1),[l,c]=t.useState(null),[d,u]=t.useState(null),[m,h]=t.useState(null),[p,x]=t.useState({email:"",name:"",phone:"",role:"user"}),f=_r(null==e?void 0:e.email),{data:g=[],isLoading:y}=Qt("users",async()=>{const{data:e,error:t}=await Mc();if(t)throw t;return e},{enabled:!!f}),b=Bt(async e=>{const{data:t,error:r}=await Rc(e);if(r)throw new Error(r);return t},{onSuccess:()=>{r.invalidateQueries("users"),S(),h("사용자가 성공적으로 추가되었습니다."),setTimeout(()=>h(null),5e3)},onError:e=>{u(`사용자 추가 중 오류가 발생했습니다: ${e.message}`)}}),j=Bt(async({id:e,...t})=>{const{data:r,error:s}=await $c(e,t);if(s)throw new Error(s);return r},{onSuccess:()=>{r.invalidateQueries("users"),S(),h("사용자 정보가 성공적으로 업데이트되었습니다."),setTimeout(()=>h(null),3e3)},onError:e=>{u(`사용자 수정 중 오류가 발생했습니다: ${e.message}`)}}),N=Bt(async({id:e,status:t})=>{const{error:r}=await $c(e,{status:t});if(r)throw new Error(r);return!0},{onSuccess:()=>{r.invalidateQueries("users"),h("사용자 상태가 변경되었습니다."),setTimeout(()=>h(null),3e3)},onError:e=>{u(`사용자 상태 변경 중 오류가 발생했습니다: ${e.message}`)}}),_=e=>{const{name:t,value:r}=e.target;x({...p,[t]:r})},S=()=>{x({email:"",name:"",phone:"",role:"user"}),i(!1),c(null),u(null)},k=e=>{const t=(e=>{const t={totalProperties:Math.floor(10*Math.random()),activeProperties:Math.floor(5*Math.random()),completedDeals:Math.floor(20*Math.random()),monthlyDeals:Math.floor(5*Math.random())};return{"hardcoded-jenny@the-realty.co.kr":{totalProperties:8,activeProperties:6,completedDeals:24,monthlyDeals:4},"hardcoded-lucas@the-realty.co.kr":{totalProperties:7,activeProperties:5,completedDeals:18,monthlyDeals:3},"hardcoded-gyum@the-realty.co.kr":{totalProperties:10,activeProperties:7,completedDeals:32,monthlyDeals:5}}[e]||t})(e);return(null==t?void 0:t.totalProperties)||0};return f?Ie.jsxs("div",{className:"space-y-6",children:[Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center",children:[Ie.jsx(W,{className:"w-8 h-8 mr-2 text-blue-600"}),"직원 관리"]}),Ie.jsx("div",{className:"border-b border-gray-200 mb-6",children:Ie.jsxs("nav",{className:"-mb-px flex space-x-8",children:[Ie.jsxs("button",{onClick:()=>a("list"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("list"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[Ie.jsx(F,{className:"w-4 h-4 inline-block mr-2"}),"직원 목록"]}),Ie.jsxs("button",{onClick:()=>a("performance"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("performance"===s?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[Ie.jsx(le,{className:"w-4 h-4 inline-block mr-2"}),"직원별 성과"]})]})}),d&&Ie.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-700 rounded-md flex items-center",children:[Ie.jsx(H,{className:"w-5 h-5 mr-2"}),d]}),m&&Ie.jsxs("div",{className:"mb-4 p-3 bg-green-50 text-green-700 rounded-md flex items-center",children:[Ie.jsx(v,{className:"w-5 h-5 mr-2"}),m]})]}),"list"===s?Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[n?Ie.jsxs("form",{onSubmit:e=>{e.preventDefault(),p.email||l?p.name?l?j.mutate({id:l,...p}):b.mutate(p):u("이름은 필수 입력사항입니다."):u("이메일은 필수 입력사항입니다.")},className:"mb-6 p-4 border rounded-md bg-gray-50",children:[Ie.jsx("h3",{className:"text-lg font-medium mb-4",children:l?"사용자 정보 수정":"새 사용자 추가"}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[Ie.jsx(ms,{label:"이메일",name:"email",type:"email",value:p.email,onChange:_,required:!l,placeholder:"예: user@example.com",disabled:!!l}),Ie.jsx(ms,{label:"이름",name:"name",value:p.name,onChange:_,required:!0,placeholder:"예: 홍길동"}),Ie.jsx(ms,{label:"연락처",name:"phone",value:p.phone,onChange:_,placeholder:"예: 010-1234-5678"}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"권한"}),Ie.jsxs("select",{name:"role",value:p.role,onChange:_,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[Ie.jsx("option",{value:"user",children:"일반 사용자"}),Ie.jsx("option",{value:"admin",children:"관리자"})]})]})]}),Ie.jsxs("div",{className:"flex justify-end space-x-2",children:[Ie.jsxs(ds,{type:"button",variant:"secondary",onClick:S,children:[Ie.jsx(Z,{className:"w-4 h-4 mr-1"}),"취소"]}),Ie.jsxs(ds,{type:"submit",variant:"primary",disabled:b.isLoading||j.isLoading,children:[Ie.jsx(J,{className:"w-4 h-4 mr-1"}),l?"수정":"추가"]})]})]}):Ie.jsx("div",{className:"mb-4",children:Ie.jsxs(ds,{onClick:()=>i(!0),variant:"primary",children:[Ie.jsx(oe,{className:"w-4 h-4 mr-2"}),"새 사용자 추가"]})}),Ie.jsx("h3",{className:"text-lg font-medium mb-2",children:"사용자 목록"}),y?Ie.jsxs("div",{className:"text-gray-500 flex justify-center p-4",children:[Ie.jsx("div",{className:"w-6 h-6 border-2 border-t-blue-600 border-blue-200 rounded-full animate-spin mr-2"}),"로딩 중..."]}):g&&0!==g.length?Ie.jsx("div",{className:"overflow-x-auto",children:Ie.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ie.jsx("thead",{className:"bg-gray-50",children:Ie.jsxs("tr",{children:[Ie.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"이름"}),Ie.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"이메일"}),Ie.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"연락처"}),Ie.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"권한"}),Ie.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),Ie.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"담당 매물"}),Ie.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"최근 로그인"}),Ie.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),Ie.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(t=>Ie.jsxs("tr",{className:"hover:bg-gray-50 "+("inactive"===t.status?"bg-gray-50 text-gray-400":""),children:[Ie.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:t.name||"-"}),Ie.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:t.email}),Ie.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:t.phone||"-"}),Ie.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Ie.jsxs("div",{className:"flex items-center space-x-2",children:[Ie.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("admin"===t.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:"admin"===t.role?"관리자":"일반"}),Ie.jsx("button",{onClick:()=>(async e=>{const t="admin"===e.role?"user":"admin",s=`${e.name}님의 권한을 ${"admin"===t?"관리자":"일반"}로 변경하시겠습니까?`;if(window.confirm(s))try{const{error:s}=await $c(e.id,{role:t});if(s)throw new Error(s);h(`${e.name}님의 권한이 변경되었습니다.`),r.invalidateQueries("users"),setTimeout(()=>h(null),3e3)}catch(a){u(`권한 변경 실패: ${a.message}`),setTimeout(()=>u(null),5e3)}})(t),className:"text-xs text-gray-600 hover:text-gray-800 underline",title:"권한 변경",children:"변경"})]})}),Ie.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Ie.jsx("span",{className:"px-2 py-1 rounded-full text-xs "+("active"===t.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"active"===t.status?"활성":"비활성"})}),Ie.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx(ce,{className:"w-4 h-4 mr-1 text-gray-400"}),Ie.jsxs("span",{children:[k(t.id),"건"]})]})}),Ie.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:t.last_login?new Date(t.last_login).toLocaleDateString():"-"}),Ie.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:Ie.jsxs("div",{className:"flex space-x-2",children:[Ie.jsx(o,{to:`/users/${t.id}/performance`,className:"text-purple-600 hover:text-purple-800",title:"성과 보기",children:Ie.jsx(w,{className:"w-4 h-4"})}),Ie.jsx("button",{onClick:()=>{return x({email:(e=t).email||"",name:e.name||"",phone:e.phone||"",role:e.role||"user"}),c(e.id),void i(!0);var e},className:"text-blue-600 hover:text-blue-800",title:"수정",children:Ie.jsx(z,{className:"w-4 h-4"})}),Ie.jsx("button",{onClick:()=>(async e=>{if(window.confirm(`${e.name}님의 비밀번호를 재설정하시겠습니까?\n새로운 임시 비밀번호가 해당 이메일로 전송됩니다.`))try{const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%";let r="";for(let e=0;e<12;e++)r+=t.charAt(Math.floor(Math.random()*t.length));const{error:s}=await Lc(e.id,r);if(s)throw new Error(s);h(`${e.name}님의 비밀번호가 재설정되었습니다.\n임시 비밀번호: ${r}\n\n이 정보를 안전하게 전달해주세요.`),navigator.clipboard.writeText(`${e.email}의 임시 비밀번호: ${r}`),setTimeout(()=>h(null),1e4)}catch(t){u(`비밀번호 재설정 실패: ${t.message}`),setTimeout(()=>u(null),5e3)}})(t),className:"text-yellow-600 hover:text-yellow-800",title:"비밀번호 재설정",children:Ie.jsx(de,{className:"w-4 h-4"})}),Ie.jsx("button",{onClick:()=>(t=>{if(t.id===(null==e?void 0:e.id))return void u("자신의 계정 상태는 변경할 수 없습니다.");const r="active"===t.status?"inactive":"active";window.confirm(`${t.name} 사용자의 상태를 ${"inactive"===r?"비활성화":"활성화"} 하시겠습니까?`)&&N.mutate({id:t.id,status:r})})(t),className:"active"===t.status?"text-red-600 hover:text-red-800":"text-green-600 hover:text-green-800",title:"active"===t.status?"비활성화":"활성화",disabled:t.id===(null==t?void 0:t.id),children:"active"===t.status?Ie.jsx(ee,{className:"w-4 h-4"}):Ie.jsx(v,{className:"w-4 h-4"})})]})})]},t.id))})]})}):Ie.jsx("div",{className:"text-gray-500 p-4 border rounded-md text-center",children:"등록된 사용자가 없습니다."})]}):Ie.jsx(Uc,{})]}):Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsx("h2",{className:"text-xl font-semibold mb-4",children:"사용자 관리"}),Ie.jsx("div",{className:"bg-yellow-50 p-4 rounded-md text-yellow-800",children:"관리자 권한이 필요합니다. 관리자에게 문의하세요."})]})},Uc=()=>{const{data:e=[]}=Qt("users",async()=>{const{data:e,error:t}=await Mc();if(t)throw t;return e}),{data:t=[]}=Qt("all-properties",async()=>{const{data:e,error:t}=await es();if(t)throw t;return e||[]}),{data:r={}}=Qt("lookupTables",async()=>await Zr(),{staleTime:3e5});return Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsx("h3",{className:"text-lg font-semibold mb-6",children:"직원별 성과 현황"}),Ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>{const s=(e=>{const s=t.filter(t=>t.manager_id===e),a={totalProperties:s.length,completedDeals:0,activeDeals:0,monthlyDeals:0};return s.forEach(e=>{var t;const s=null==(t=r.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);"거래완료"===(null==s?void 0:s.name)?a.completedDeals++:"거래가능"===(null==s?void 0:s.name)&&a.activeDeals++;const n=new Date(e.created_at),i=new Date;n.getMonth()===i.getMonth()&&n.getFullYear()===i.getFullYear()&&a.monthlyDeals++}),a})(e.id),a=s.totalProperties>0?Math.round(s.completedDeals/s.totalProperties*100):0;return Ie.jsxs("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:[Ie.jsxs("div",{className:"flex justify-between items-start mb-4",children:[Ie.jsxs("div",{children:[Ie.jsx("h4",{className:"font-semibold text-lg",children:e.name}),Ie.jsx("p",{className:"text-sm text-gray-600",children:e.email})]}),Ie.jsx(o,{to:`/users/${e.id}/performance`,className:"text-blue-600 hover:text-blue-800",children:Ie.jsx(w,{className:"w-5 h-5"})})]}),Ie.jsxs("div",{className:"space-y-2",children:[Ie.jsxs("div",{className:"flex justify-between items-center",children:[Ie.jsx("span",{className:"text-sm text-gray-600",children:"총 매물"}),Ie.jsxs("span",{className:"font-semibold",children:[s.totalProperties,"건"]})]}),Ie.jsxs("div",{className:"flex justify-between items-center",children:[Ie.jsx("span",{className:"text-sm text-gray-600",children:"거래완료"}),Ie.jsxs("span",{className:"font-semibold text-green-600",children:[s.completedDeals,"건"]})]}),Ie.jsxs("div",{className:"flex justify-between items-center",children:[Ie.jsx("span",{className:"text-sm text-gray-600",children:"진행중"}),Ie.jsxs("span",{className:"font-semibold text-blue-600",children:[s.activeDeals,"건"]})]}),Ie.jsxs("div",{className:"flex justify-between items-center",children:[Ie.jsx("span",{className:"text-sm text-gray-600",children:"이번달 등록"}),Ie.jsxs("span",{className:"font-semibold",children:[s.monthlyDeals,"건"]})]})]}),Ie.jsx("div",{className:"mt-4 pt-4 border-t",children:Ie.jsxs("div",{className:"flex justify-between items-center",children:[Ie.jsx("span",{className:"text-sm font-medium text-gray-700",children:"성과율"}),Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2 mr-2",children:Ie.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${a}%`}})}),Ie.jsxs("span",{className:"text-sm font-semibold",children:[a,"%"]})]})]})})]},e.id)})})]})},Bc=()=>{const{userId:e}=c(),r=l(),{user:s}=yr(),[a,n]=t.useState("month");if(!Ur(s))return Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsx("h2",{className:"text-xl font-semibold mb-4",children:"접근 권한 없음"}),Ie.jsx("div",{className:"bg-yellow-50 p-4 rounded-md text-yellow-800",children:"관리자 권한이 필요합니다. 관리자에게 문의하세요."})]});const{data:i,isLoading:d}=Qt(["user",e],async()=>{const{data:t,error:r}=await Ic(e);if(r)throw new Error(r);return t}),{data:u=[],isLoading:m}=Qt(["staff-properties",e],async()=>{const{data:t,error:r}=await es();if(r)throw new Error(r);return t.filter(t=>{const r=t.manager_id;return r===e||r===`hardcoded-${null==i?void 0:i.email}`||(null==i?void 0:i.email)&&(null==r?void 0:r.includes(i.email))})},{enabled:!!i}),{data:h={}}=Qt("lookupTables",async()=>await Zr()),p=(()=>{const e=new Date,t=e.getFullYear(),r=e.getMonth(),s=Math.floor(r/3),n=u.filter(e=>{const n=new Date(e.created_at),i=n.getFullYear(),l=n.getMonth(),o=Math.floor(l/3);switch(a){case"month":return i===t&&l===r;case"quarter":return i===t&&o===s;case"year":return i===t;default:return!0}}),i={total:n.length,available:0,completed:0,pending:0},l={sale:0,lease:0,rent:0},o={};return n.forEach(e=>{var t,r,s;const a=null==(t=h.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);"거래가능"===(null==a?void 0:a.name)?i.available++:"거래완료"===(null==a?void 0:a.name)?i.completed++:"거래보류"===(null==a?void 0:a.name)&&i.pending++;const n=null==(r=h.transactionTypes)?void 0:r.find(t=>t.id===e.transaction_type_id);"매매"===(null==n?void 0:n.name)?l.sale++:"전세"===(null==n?void 0:n.name)?l.lease++:"월세"===(null==n?void 0:n.name)&&l.rent++;const c=null==(s=h.propertyTypes)?void 0:s.find(t=>t.id===e.property_type_id);(null==c?void 0:c.name)&&(o[c.name]=(o[c.name]||0)+1)}),{statusStats:i,transactionStats:l,propertyTypeStats:o,filteredProperties:n}})();return d||m?Ie.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ie.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ie.jsx("p",{className:"ml-2 text-gray-600",children:"성과 데이터를 불러오는 중..."})]}):i?Ie.jsxs("div",{className:"space-y-6",children:[Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsxs("div",{className:"flex justify-between items-start mb-6",children:[Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx("button",{onClick:()=>r("/users"),className:"mr-4 p-2 hover:bg-gray-100 rounded-full",children:Ie.jsx(ie,{className:"w-5 h-5"})}),Ie.jsxs("div",{children:[Ie.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[Ie.jsx(W,{className:"w-8 h-8 mr-2 text-blue-600"}),i.name," 님의 성과"]}),Ie.jsx("p",{className:"text-gray-600 mt-1",children:i.email})]})]}),Ie.jsxs("div",{className:"flex items-center space-x-2",children:[Ie.jsx("label",{className:"text-sm font-medium text-gray-700",children:"기간:"}),Ie.jsxs("select",{value:a,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[Ie.jsx("option",{value:"month",children:"이번 달"}),Ie.jsx("option",{value:"quarter",children:"이번 분기"}),Ie.jsx("option",{value:"year",children:"올해"}),Ie.jsx("option",{value:"all",children:"전체"})]})]})]}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[Ie.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:Ie.jsxs("div",{className:"flex items-center justify-between",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-blue-600",children:"총 매물"}),Ie.jsx("p",{className:"text-2xl font-bold text-blue-900",children:p.statusStats.total})]}),Ie.jsx(y,{className:"w-8 h-8 text-blue-400"})]})}),Ie.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:Ie.jsxs("div",{className:"flex items-center justify-between",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-green-600",children:"거래완료"}),Ie.jsx("p",{className:"text-2xl font-bold text-green-900",children:p.statusStats.completed})]}),Ie.jsx(v,{className:"w-8 h-8 text-green-400"})]})}),Ie.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:Ie.jsxs("div",{className:"flex items-center justify-between",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"진행중"}),Ie.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:p.statusStats.available})]}),Ie.jsx(j,{className:"w-8 h-8 text-yellow-400"})]})}),Ie.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:Ie.jsxs("div",{className:"flex items-center justify-between",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-purple-600",children:"성과율"}),Ie.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[p.statusStats.total>0?Math.round(p.statusStats.completed/p.statusStats.total*100):0,"%"]})]}),Ie.jsx(le,{className:"w-8 h-8 text-purple-400"})]})})]})]}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ie.jsx(w,{className:"w-5 h-5 mr-2 text-blue-600"}),"거래 유형별 분석"]}),Ie.jsxs("div",{className:"space-y-3",children:[Ie.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Ie.jsx("span",{className:"font-medium",children:"매매"}),Ie.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[p.transactionStats.sale,"건"]})]}),Ie.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Ie.jsx("span",{className:"font-medium",children:"전세"}),Ie.jsxs("span",{className:"text-lg font-bold text-green-600",children:[p.transactionStats.lease,"건"]})]}),Ie.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Ie.jsx("span",{className:"font-medium",children:"월세"}),Ie.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[p.transactionStats.rent,"건"]})]})]})]}),Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ie.jsx(y,{className:"w-5 h-5 mr-2 text-blue-600"}),"매물 종류별 분석"]}),Ie.jsx("div",{className:"space-y-3",children:Object.entries(p.propertyTypeStats).map(([e,t])=>Ie.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[Ie.jsx("span",{className:"font-medium",children:e}),Ie.jsxs("span",{className:"text-lg font-bold",children:[t,"건"]})]},e))})]})]}),Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center",children:[Ie.jsx(ue,{className:"w-5 h-5 mr-2 text-blue-600"}),"최근 담당 매물"]}),Ie.jsx("div",{className:"overflow-x-auto",children:Ie.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ie.jsx("thead",{className:"bg-gray-50",children:Ie.jsxs("tr",{children:[Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"매물명"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"위치"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"거래유형"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등록일"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),Ie.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.filteredProperties.slice(0,10).map(e=>{var t,r;const s=null==(t=h.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id),a=null==(r=h.transactionTypes)?void 0:r.find(t=>t.id===e.transaction_type_id);return Ie.jsxs("tr",{className:"hover:bg-gray-50",children:[Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.property_name}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.location}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null==a?void 0:a.name)||"-"}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("거래완료"===(null==s?void 0:s.name)?"bg-blue-100 text-blue-800":"거래가능"===(null==s?void 0:s.name)?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:(null==s?void 0:s.name)||"-"})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:Ie.jsx(o,{to:`/properties/${e.id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:"상세보기"})})]},e.id)})})]})})]})]}):Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsx("h2",{className:"text-xl font-semibold mb-4",children:"사용자를 찾을 수 없습니다"}),Ie.jsx(o,{to:"/users",className:"text-blue-600 hover:text-blue-800",children:"사용자 목록으로 돌아가기"})]})},Vc=()=>{const{user:e}=yr();if(!Ur(e))return Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsx("h2",{className:"text-xl font-semibold mb-4",children:"접근 권한 없음"}),Ie.jsx("div",{className:"bg-yellow-50 p-4 rounded-md text-yellow-800",children:"관리자 권한이 필요합니다. 관리자에게 문의하세요."})]});const{data:t=[],isLoading:r}=Qt("users",async()=>{const{data:e,error:t}=await Mc();if(t)throw t;return e}),{data:s=[],isLoading:a}=Qt("all-properties",async()=>{const{data:e,error:t}=await es();if(t)throw t;return e||[]}),{data:n={}}=Qt("lookupTables",async()=>await Zr(),{staleTime:3e5}),i=(e,t)=>{const r=s.filter(r=>{const s=r.manager_id;return s===e||s===`hardcoded-${t}`||t&&(null==s?void 0:s.includes(t))}),a={totalProperties:r.length,completedDeals:0,activeDeals:0,pendingDeals:0,monthlyDeals:0};return r.forEach(e=>{var t;const r=null==(t=n.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);"거래완료"===(null==r?void 0:r.name)?a.completedDeals++:"거래가능"===(null==r?void 0:r.name)?a.activeDeals++:"거래보류"===(null==r?void 0:r.name)&&a.pendingDeals++;const s=new Date(e.created_at),i=new Date;s.getMonth()===i.getMonth()&&s.getFullYear()===i.getFullYear()&&a.monthlyDeals++}),a},l=(()=>{const e=s.length,r=s.filter(e=>{var t;const r=null==(t=n.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);return"거래완료"===(null==r?void 0:r.name)}).length;return{totalProperties:e,completedDeals:r,activeDeals:s.filter(e=>{var t;const r=null==(t=n.propertyStatuses)?void 0:t.find(t=>t.id===e.property_status_id);return"거래가능"===(null==r?void 0:r.name)}).length,performanceRate:e>0?Math.round(r/e*100):0,totalStaff:t.length}})();if(r||a)return Ie.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ie.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ie.jsx("p",{className:"ml-2 text-gray-600",children:"성과 데이터를 불러오는 중..."})]});const c=t.map(e=>({...e,stats:i(e.id,e.email)})).sort((e,t)=>t.stats.totalProperties-e.stats.totalProperties);return Ie.jsxs("div",{className:"space-y-6",children:[Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center mb-6",children:[Ie.jsx(w,{className:"w-8 h-8 mr-2 text-blue-600"}),"직원 성과 현황"]}),Ie.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[Ie.jsx("div",{className:"bg-blue-50 rounded-lg p-4",children:Ie.jsxs("div",{className:"flex items-center justify-between",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-blue-600",children:"총 직원"}),Ie.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[l.totalStaff,"명"]})]}),Ie.jsx(F,{className:"w-8 h-8 text-blue-400"})]})}),Ie.jsx("div",{className:"bg-purple-50 rounded-lg p-4",children:Ie.jsxs("div",{className:"flex items-center justify-between",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-purple-600",children:"총 매물"}),Ie.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[l.totalProperties,"건"]})]}),Ie.jsx(y,{className:"w-8 h-8 text-purple-400"})]})}),Ie.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:Ie.jsxs("div",{className:"flex items-center justify-between",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-green-600",children:"거래완료"}),Ie.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[l.completedDeals,"건"]})]}),Ie.jsx(me,{className:"w-8 h-8 text-green-400"})]})}),Ie.jsx("div",{className:"bg-yellow-50 rounded-lg p-4",children:Ie.jsxs("div",{className:"flex items-center justify-between",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"진행중"}),Ie.jsxs("p",{className:"text-2xl font-bold text-yellow-900",children:[l.activeDeals,"건"]})]}),Ie.jsx(ce,{className:"w-8 h-8 text-yellow-400"})]})}),Ie.jsx("div",{className:"bg-red-50 rounded-lg p-4",children:Ie.jsxs("div",{className:"flex items-center justify-between",children:[Ie.jsxs("div",{children:[Ie.jsx("p",{className:"text-sm font-medium text-red-600",children:"평균 성과율"}),Ie.jsxs("p",{className:"text-2xl font-bold text-red-900",children:[l.performanceRate,"%"]})]}),Ie.jsx(le,{className:"w-8 h-8 text-red-400"})]})})]})]}),Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsx("h2",{className:"text-lg font-semibold mb-6",children:"직원별 성과 순위"}),Ie.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map((e,t)=>{const r=e.stats,s=r.totalProperties>0?Math.round(r.completedDeals/r.totalProperties*100):0;return Ie.jsxs(o,{to:`/users/${e.id}/performance`,className:"block border rounded-lg p-4 hover:shadow-md transition-shadow hover:border-blue-300",children:[Ie.jsxs("div",{className:"flex justify-between items-start mb-4",children:[Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold "+(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-500":"bg-blue-500"),children:t+1}),Ie.jsxs("div",{className:"ml-3",children:[Ie.jsx("h3",{className:"font-semibold text-lg",children:e.name}),Ie.jsx("p",{className:"text-sm text-gray-600",children:e.email})]})]}),Ie.jsx(he,{className:"w-5 h-5 text-gray-400"})]}),Ie.jsxs("div",{className:"space-y-2",children:[Ie.jsxs("div",{className:"flex justify-between items-center",children:[Ie.jsx("span",{className:"text-sm text-gray-600",children:"총 매물"}),Ie.jsxs("span",{className:"font-semibold",children:[r.totalProperties,"건"]})]}),Ie.jsxs("div",{className:"flex justify-between items-center",children:[Ie.jsx("span",{className:"text-sm text-gray-600",children:"거래완료"}),Ie.jsxs("span",{className:"font-semibold text-green-600",children:[r.completedDeals,"건"]})]}),Ie.jsxs("div",{className:"flex justify-between items-center",children:[Ie.jsx("span",{className:"text-sm text-gray-600",children:"진행중"}),Ie.jsxs("span",{className:"font-semibold text-blue-600",children:[r.activeDeals,"건"]})]}),Ie.jsxs("div",{className:"flex justify-between items-center",children:[Ie.jsx("span",{className:"text-sm text-gray-600",children:"이번달 등록"}),Ie.jsxs("span",{className:"font-semibold",children:[r.monthlyDeals,"건"]})]})]}),Ie.jsx("div",{className:"mt-4 pt-4 border-t",children:Ie.jsxs("div",{className:"flex justify-between items-center",children:[Ie.jsx("span",{className:"text-sm font-medium text-gray-700",children:"성과율"}),Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mr-2",children:Ie.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${s}%`}})}),Ie.jsxs("span",{className:"text-sm font-semibold",children:[s,"%"]})]})]})})]},e.id)})})]})]})},Qc=()=>{const{user:e}=yr(),r=Lt(),[s,a]=t.useState(null),[n,i]=t.useState(!1),[l,o]=t.useState(null),[c,d]=t.useState(null);if(!e||"admin"!==e.email&&"admin"!==e.role)return Ie.jsxs("div",{className:"p-6 text-center",children:[Ie.jsx(g,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),Ie.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"접근 권한이 없습니다"}),Ie.jsx("p",{className:"text-gray-600",children:"관리자만 CSV 파일을 업로드할 수 있습니다."})]});const u=e=>({"아파트":"apt","오피스텔":"officetel","빌라":"villa","연립":"villa","빌라/연립":"villa","단독주택":"house","상가":"commercial","사무실":"commercial","점포":"commercial"}[e]||"apt");return Ie.jsxs("div",{className:"space-y-6",children:[Ie.jsxs("div",{children:[Ie.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CSV 매물 데이터 가져오기"}),Ie.jsx("p",{className:"text-gray-600",children:"CSV 파일을 업로드하여 매물 데이터를 일괄 등록할 수 있습니다."})]}),Ie.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:Ie.jsxs("div",{className:"flex items-center justify-between",children:[Ie.jsxs("div",{children:[Ie.jsx("h3",{className:"font-medium text-blue-900",children:"CSV 템플릿 다운로드"}),Ie.jsx("p",{className:"text-sm text-blue-700",children:"올바른 형식의 CSV 파일을 작성하기 위한 템플릿을 다운로드하세요."})]}),Ie.jsxs("button",{onClick:()=>{const e=["매물명,소재지,매물종류,거래유형,가격,상태,동,호,공급면적,전용면적,층수,방수,향,관리비,주차,입주일,사용승인일,특이사항,메모,상가여부","래미안 아파트 101동 1503호,서울시 강남구 삼성동,아파트,매매,2500000000,거래가능,101동,1503호,84.56,59.82,15층/25층,3개/2개,남향,15만원,2대,즉시입주,2020.05.15,신축,관리자 확인 필요,아니오","힐스테이트 오피스텔 A동 205호,서울시 서초구 서초동,오피스텔,전세,800000000,거래가능,A동,205호,32.15,25.48,2층/15층,1개/1개,동향,8만원,1대,즉시입주,2019.03.10,,투자용,아니오","신축 빌라 3층,서울시 마포구 합정동,빌라/연립,월세,50000000/500000,거래완료,,3층,65.23,52.31,3층/3층,2개/1개,남서향,5만원,1대,즉시입주,2021.08.20,신축 빌라,계약 완료,아니오"].join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),s=URL.createObjectURL(t);r.setAttribute("href",s),r.setAttribute("download","property_sample.csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[Ie.jsx(pe,{className:"w-4 h-4 mr-2"}),"템플릿 다운로드"]})]})}),Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"CSV 파일 업로드"}),Ie.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[Ie.jsx(xe,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),Ie.jsxs("div",{className:"space-y-2",children:[Ie.jsxs("label",{className:"block",children:[Ie.jsx("span",{className:"sr-only",children:"Choose file"}),Ie.jsx("input",{type:"file",accept:".csv",onChange:e=>{const t=e.target.files[0];t&&"text/csv"===t.type?(a(t),d(null)):(d("CSV 파일을 선택해주세요."),a(null))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),Ie.jsx("p",{className:"text-sm text-gray-500",children:"CSV 파일을 선택하세요"})]})]}),s&&Ie.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx(ue,{className:"w-5 h-5 text-blue-500 mr-2"}),Ie.jsx("span",{className:"font-medium",children:s.name}),Ie.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",(s.size/1024).toFixed(1)," KB)"]})]})}),c&&Ie.jsx("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx(g,{className:"w-5 h-5 mr-2"}),c]})}),Ie.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[Ie.jsx("button",{onClick:async()=>{i(!0),d(null);try{const t=await fetch("/processed_properties.json");if(!t.ok)throw new Error("처리된 데이터 파일을 찾을 수 없습니다. CSV 처리를 먼저 실행해주세요.");const s=await t.json(),a=await Xr(s,(null==e?void 0:e.id)||"admin");if(r.invalidateQueries(["properties"]),o({total:a.totalCount,processed:a.uploadedCount,errors:a.errors,properties:s.slice(0,5)}),a.success&&a.uploadedCount>0);else if(!a.success)throw new Error(`업로드 실패: ${a.errors.join(", ")}`)}catch(t){d(`데이터 업로드 중 오류가 발생했습니다: ${t.message}`)}finally{i(!1)}},disabled:n,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"업로드 중...":"처리된 데이터 업로드"}),Ie.jsx("button",{onClick:async()=>{if(s){i(!0),d(null);try{const t=(await s.text()).split("\n").filter(e=>e.trim());if(0===t.length)throw new Error("CSV 파일이 비어있습니다.");const r=t[0].split(",").map(e=>e.trim()),a=t.slice(1),n=[],i=[];a.forEach((t,s)=>{try{const l=t.split(",").map(e=>e.trim()),o={};if(r.forEach((e,t)=>{o[e]=l[t]||""}),!o["매물명"]||!o["소재지"]||!o["거래유형"])return void i.push(`${s+2}행: 필수 필드가 누락되었습니다`);const c={"매매":"sale","전세":"lease","월세":"rent","매매/전세":"sale","전세/월세":"lease"}[o["거래유형"]]||"sale",d=((e,t)=>{if(!e)return{sale_price:0,lease_price:0,price:0};const r=e.replace(/[,\s]/g,"");if("sale"===t)return{sale_price:parseInt(r)||0,lease_price:0,price:0};if("lease"===t)return{sale_price:0,lease_price:parseInt(r)||0,price:0};if("rent"===t){if(r.includes("/")){const[e,t]=r.split("/");return{sale_price:0,lease_price:parseInt(e)||0,price:parseInt(t)||0}}return{sale_price:0,lease_price:0,price:parseInt(r)||0}}return{sale_price:0,lease_price:0,price:0}})(o["가격"]||o["금액"],c),m={property_name:o["매물명"],location:o["소재지"],property_type:u(o["매물종류"]||o["종류"]),transaction_type:c,property_status:(a=o["상태"]||o["진행상태"],{"거래가능":"available","거래중":"available","판매중":"available","임대가능":"available","거래완료":"completed","계약완료":"completed","판매완료":"completed","임대완료":"completed","거래보류":"reserved","보류":"reserved","일시정지":"reserved"}[a]||"available"),...d,building:o["동"]||"",unit:o["호"]||"",supply_area_sqm:parseFloat(o["공급면적"])||0,private_area_sqm:parseFloat(o["전용면적"])||0,floor_info:o["층수"]||"",rooms_bathrooms:o["방수"]||"",direction:o["향"]||"",maintenance_fee:o["관리비"]||"",parking:o["주차"]||"",move_in_date:o["입주일"]||"",approval_date:o["사용승인일"]||"",special_notes:o["특이사항"]||"",manager_memo:o["메모"]||"",is_commercial:"예"===o["상가여부"]||"Y"===o["상가여부"],manager_id:e.id||"admin-hardcoded"};n.push(m)}catch(l){i.push(`${s+2}행: ${l.message}`)}var a}),o({total:a.length,processed:n.length,errors:i,properties:n})}catch(t){d(`CSV 처리 중 오류가 발생했습니다: ${t.message}`)}finally{i(!1)}}},disabled:!s||n,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"처리 중...":"CSV 처리하기"})]})]}),l&&Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"처리 결과"}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[Ie.jsxs("div",{className:"text-center",children:[Ie.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l.total}),Ie.jsx("div",{className:"text-sm text-gray-600",children:"총 라인 수"})]}),Ie.jsxs("div",{className:"text-center",children:[Ie.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.processed}),Ie.jsx("div",{className:"text-sm text-gray-600",children:"처리 성공"})]}),Ie.jsxs("div",{className:"text-center",children:[Ie.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.errors.length}),Ie.jsx("div",{className:"text-sm text-gray-600",children:"처리 실패"})]})]}),l.errors.length>0&&Ie.jsxs("div",{className:"mb-6",children:[Ie.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"오류 목록"}),Ie.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-h-40 overflow-y-auto",children:l.errors.map((e,t)=>Ie.jsx("div",{className:"text-sm text-red-600 mb-1",children:e},t))})]}),l.processed>0&&Ie.jsxs("div",{children:[Ie.jsxs("div",{className:"flex items-center mb-4",children:[Ie.jsx(v,{className:"w-5 h-5 text-green-500 mr-2"}),Ie.jsxs("span",{className:"font-medium text-green-600",children:[l.processed,"개의 매물이 성공적으로 처리되었습니다!"]})]}),Ie.jsx("div",{className:"text-sm text-gray-600 mb-4",children:"처리된 데이터는 Mock 환경에서 확인용으로만 표시됩니다. 실제 운영 환경에서는 데이터베이스에 저장됩니다."}),Ie.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 max-h-60 overflow-y-auto",children:[Ie.jsx("h4",{className:"font-medium mb-2",children:"처리된 매물 미리보기 (처음 5개)"}),l.properties.slice(0,5).map((e,t)=>Ie.jsxs("div",{className:"border-b border-gray-200 py-2 last:border-b-0",children:[Ie.jsx("div",{className:"font-medium",children:e.property_name}),Ie.jsxs("div",{className:"text-sm text-gray-600",children:[e.location," | ",e.transaction_type," |","sale"===e.transaction_type&&e.sale_price>0&&` ${e.sale_price.toLocaleString()}원`,"lease"===e.transaction_type&&e.lease_price>0&&` ${e.lease_price.toLocaleString()}원`,"rent"===e.transaction_type&&` ${e.lease_price.toLocaleString()}/${e.price.toLocaleString()}원`]})]},t)),l.properties.length>5&&Ie.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:["... 그 외 ",l.properties.length-5,"개 매물"]})]})]})]})]})},Gc=async()=>{try{const{data:{user:t},error:r}=await lr.auth.getUser();if(r||!t)throw new Error("로그인이 필요합니다");const s=[],a=[{name:"원룸"},{name:"투룸"},{name:"쓰리룸"},{name:"오피스텔"},{name:"아파트"},{name:"빌라"},{name:"단독주택"},{name:"상가"}];try{const{data:e,error:t}=await lr.from("property_types").upsert(a,{onConflict:"name"}).select();if(t)throw t;s.push({table:"property_types",success:!0,count:e.length})}catch(e){s.push({table:"property_types",success:!1,error:e.message})}const n=[{name:"매물확보"},{name:"광고진행"},{name:"계약진행"},{name:"거래완료"},{name:"매물취소"}];try{const{data:e,error:t}=await lr.from("property_statuses").upsert(n,{onConflict:"name"}).select();if(t)throw t;s.push({table:"property_statuses",success:!0,count:e.length})}catch(e){s.push({table:"property_statuses",success:!1,error:e.message})}const i=[{name:"매매"},{name:"전세"},{name:"월세"},{name:"단기임대"}];try{const{data:e,error:t}=await lr.from("transaction_types").upsert(i,{onConflict:"name"}).select();if(t)throw t;s.push({table:"transaction_types",success:!0,count:e.length})}catch(e){s.push({table:"transaction_types",success:!1,error:e.message})}const l=[{name:"김소유자",phone:"010-1234-5678",contact_relation:"본인"},{name:"박소유자",phone:"010-2345-6789",contact_relation:"본인"},{name:"이소유자",phone:"010-3456-7890",contact_relation:"대리인"}];let o=0;for(const d of l)try{const{data:e}=await lr.from("owners").select("id").eq("phone",d.phone).single();if(!e){const{data:e,error:t}=await lr.from("owners").insert([d]).select();if(t)throw t;o++}}catch(e){}o>0?s.push({table:"owners",success:!0,count:o}):s.push({table:"owners",success:!1,error:"소유주 데이터 삽입 실패"});const c=s.filter(e=>e.success);return s.filter(e=>!e.success).length,{success:c.length>0,results:s,canTestPropertyInsert:c.length>=3}}catch(e){return{success:!1,error:e.message}}},Wc=async()=>{var e,t,r,s;try{const[a,n,i,l]=await Promise.all([lr.from("property_types").select("*").limit(1),lr.from("property_statuses").select("*").limit(1),lr.from("transaction_types").select("*").limit(1),lr.from("owners").select("*").limit(1)]),o=null==(e=a.data)?void 0:e[0],c=null==(t=n.data)?void 0:t[0],d=null==(r=i.data)?void 0:r[0],u=null==(s=l.data)?void 0:s[0];if(!o||!c||!d)throw new Error("필수 룩업 데이터가 없습니다. 먼저 setupDatabase()를 실행하세요.");const m={property_name:`테스트 매물 ${(new Date).getTime()}`,location:"서울시 강남구 삼성동",property_type_id:o.id,property_status_id:c.id,transaction_type_id:d.id,owner_id:(null==u?void 0:u.id)||null,price:5e8,supply_area_sqm:84.5,private_area_sqm:59.8,floor_info:"15층/25층",rooms_bathrooms:"3개/2개",direction:"남향",maintenance_fee:"15만원",parking:"2대",move_in_date:"즉시입주",special_notes:"클라이언트 테스트용 매물입니다"},{data:h,error:p}=await lr.from("properties").insert([m]).select();if(p)throw p;return{success:!0,property:h[0]}}catch(a){return{success:!1,error:a.message}}},Kc=()=>{const{user:e}=yr(),[r,s]=t.useState(!1),[a,n]=t.useState(null),[i,l]=t.useState([]),o=(e,t="info")=>{const r=(new Date).toLocaleTimeString();l(s=>[...s,{timestamp:r,message:e,type:t}])},c=()=>{l([]),n(null)};return"admin"!==(null==e?void 0:e.role)&&"admin@the-realty.co.kr"!==(null==e?void 0:e.email)?Ie.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[Ie.jsx("h2",{className:"text-xl font-semibold mb-4",children:"설정"}),Ie.jsx("p",{className:"text-gray-600",children:"관리자만 접근할 수 있습니다."})]}):Ie.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[Ie.jsx("h2",{className:"text-xl font-semibold mb-6",children:"시스템 설정"}),Ie.jsxs("div",{className:"mb-6",children:[Ie.jsx("h3",{className:"text-lg font-medium mb-4",children:"데이터베이스 설정"}),Ie.jsx("p",{className:"text-gray-600 mb-4",children:"시스템 사용에 필요한 기본 데이터를 설정합니다. (매물종류, 진행상태, 거래유형, 테스트 소유주)"}),Ie.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[Ie.jsx("button",{onClick:async()=>{if(!r){s(!0),c(),o("데이터베이스 셋업 시작...","info");try{const e=console.log;console.log=(...t)=>{o(t.join(" "),"info"),e(...t)};const t=await Gc();console.log=e,n(t),t.success?o("✅ 데이터베이스 셋업 완료!","success"):o("❌ 데이터베이스 셋업 실패: "+t.error,"error")}catch(e){o("❌ 오류 발생: "+e.message,"error"),n({success:!1,error:e.message})}finally{s(!1)}}},disabled:r,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:r?"처리 중...":"기본 데이터 설정"}),Ie.jsx("button",{onClick:async()=>{var e;if(!r){s(!0),o("매물 등록 테스트 시작...","info");try{const t=console.log;console.log=(...e)=>{o(e.join(" "),"info"),t(...e)};const r=await Wc();console.log=t,r.success?(o("✅ 매물 등록 테스트 성공!","success"),o(`등록된 매물 ID: ${null==(e=r.property)?void 0:e.id}`,"info")):o("❌ 매물 등록 테스트 실패: "+r.error,"error")}catch(t){o("❌ 오류 발생: "+t.message,"error")}finally{s(!1)}}},disabled:r,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50",children:r?"처리 중...":"매물 등록 테스트"}),Ie.jsx("button",{onClick:async()=>{var e,t;if(!r){s(!0),c(),o("전체 셋업 및 테스트 시작...","info");try{const r=console.log;console.log=(...e)=>{o(e.join(" "),"info"),r(...e)};const s=await(async()=>{const e=await Gc();return e.canTestPropertyInsert?{setupResult:e,testResult:await Wc()}:{setupResult:e,testResult:{success:!1,error:"셋업 불완전"}}})();console.log=r,n(s),(null==(e=s.setupResult)?void 0:e.success)&&(null==(t=s.testResult)?void 0:t.success)?o("✅ 전체 셋업 및 테스트 완료!","success"):o("⚠️ 일부 작업이 실패했습니다. 로그를 확인하세요.","warning")}catch(a){o("❌ 오류 발생: "+a.message,"error")}finally{s(!1)}}},disabled:r,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50",children:r?"처리 중...":"전체 셋업 & 테스트"}),Ie.jsx("button",{onClick:c,disabled:r,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 disabled:opacity-50",children:"로그 지우기"})]})]}),a&&Ie.jsxs("div",{className:"mb-6",children:[Ie.jsx("h4",{className:"text-md font-medium mb-2",children:"결과 요약"}),Ie.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[a.setupResult&&Ie.jsxs("div",{className:"mb-2",children:[Ie.jsx("span",{className:"font-medium",children:"데이터베이스 셋업: "}),Ie.jsx("span",{className:a.setupResult.success?"text-green-600":"text-red-600",children:a.setupResult.success?"성공":"실패"}),a.setupResult.results&&Ie.jsxs("div",{className:"ml-4 mt-1 text-sm",children:["성공: ",a.setupResult.results.filter(e=>e.success).length,"개 테이블, 실패: ",a.setupResult.results.filter(e=>!e.success).length,"개 테이블"]})]}),a.testResult&&Ie.jsxs("div",{children:[Ie.jsx("span",{className:"font-medium",children:"매물 등록 테스트: "}),Ie.jsx("span",{className:a.testResult.success?"text-green-600":"text-red-600",children:a.testResult.success?"성공":"실패"}),a.testResult.property&&Ie.jsxs("div",{className:"ml-4 mt-1 text-sm",children:["등록된 매물: ",a.testResult.property.property_name," (ID: ",a.testResult.property.id,")"]})]})]})]}),i.length>0&&Ie.jsxs("div",{children:[Ie.jsx("h4",{className:"text-md font-medium mb-2",children:"실행 로그"}),Ie.jsx("div",{className:"bg-black text-green-400 p-4 rounded-md font-mono text-sm max-h-96 overflow-y-auto",children:i.map((e,t)=>Ie.jsxs("div",{className:"mb-1",children:[Ie.jsxs("span",{className:"text-gray-400",children:["[",e.timestamp,"]"]})," ",Ie.jsx("span",{className:"error"===e.type?"text-red-400":"success"===e.type?"text-green-400":"warning"===e.type?"text-yellow-400":"text-green-400",children:e.message})]},t))})]}),Ie.jsxs("div",{className:"mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-md",children:[Ie.jsx("h4",{className:"text-md font-medium text-yellow-800 mb-2",children:"💡 참고사항"}),Ie.jsxs("ul",{className:"text-sm text-yellow-700 list-disc list-inside space-y-1",children:[Ie.jsx("li",{children:"RLS(Row Level Security) 정책으로 인해 데이터 삽입이 실패할 수 있습니다."}),Ie.jsx("li",{children:"실패 시 Supabase 대시보드에서 수동으로 SQL을 실행하거나 서비스 역할 키를 설정하세요."}),Ie.jsx("li",{children:"SQL 파일들이 scripts/ 폴더에 준비되어 있습니다."})]})]})]})},Yc=()=>{const e=e=>{switch(e){case"완료":return Ie.jsx(v,{className:"w-5 h-5 text-green-500"});case"진행중":return Ie.jsx(j,{className:"w-5 h-5 text-blue-500"});case"보류":return Ie.jsx(H,{className:"w-5 h-5 text-yellow-500"});default:return Ie.jsx(fe,{className:"w-5 h-5 text-gray-500"})}},t=e=>{switch(e){case"feature":return Ie.jsx(be,{className:"w-4 h-4 text-blue-500"});case"fix":return Ie.jsx(ye,{className:"w-4 h-4 text-red-500"});case"database":return Ie.jsx(ge,{className:"w-4 h-4 text-purple-500"});case"user":return Ie.jsx(F,{className:"w-4 h-4 text-green-500"});default:return Ie.jsx(fe,{className:"w-4 h-4 text-gray-500"})}},r=e=>{switch(e){case"feature":return"기능";case"fix":return"수정";case"database":return"DB";case"user":return"사용자";default:return"기타"}},s=e=>{switch(e){case"feature":return"bg-blue-100 text-blue-800";case"fix":return"bg-red-100 text-red-800";case"database":return"bg-purple-100 text-purple-800";case"user":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return Ie.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[Ie.jsxs("div",{className:"mb-6",children:[Ie.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"업데이트 내역"}),Ie.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx(H,{className:"w-5 h-5 text-yellow-400 mr-2"}),Ie.jsxs("p",{className:"text-yellow-800 text-sm",children:[Ie.jsx("strong",{children:"개발 진행 중:"})," 현재 시스템을 지속적으로 개선하고 있습니다. 일부 기능이 변경되거나 임시적으로 동작하지 않을 수 있습니다."]})]})})]}),Ie.jsx("div",{className:"space-y-6",children:[{version:"v1.4.0",date:"2025-07-31 15:30",status:"완료",type:"feature",title:"매물 관리 시스템 완전 구축",description:"매물-담당자-고객 연결 시스템 및 권한별 접근 제한 구현",changes:["매물 목록에 담당자 정보 표시 (users 테이블 JOIN)","권한별 매물 접근 제한 (일반 사용자: 본인 매물만, 관리자: 모든 매물)","매물 등록 시 로그인한 사용자를 담당자로 자동 설정","고객 정보 입력 기능 추가 (이름, 전화번호, 이메일, 주소, 메모)","거래유형별 맞춤 금액 필드 (매매가, 분양가, 보증금, 월세, 일일요금)","전화번호 형식 검증 및 필수 항목 설정","고객 정보를 properties.resident 컬럼에 JSON 형태로 저장"],impact:"완전한 매물 관리 시스템 구축 - 매물, 담당자, 고객 정보 통합 관리 가능"},{version:"v1.3.4",date:"2025-07-31 14:20",status:"완료",type:"feature",title:"구글 로그인 대비 사용자 관리 시스템 개선",description:"Google 로그인 연동을 위한 사용자 추가 프로세스 최적화",changes:["관리자 전용 서비스(adminService.js) 구현으로 RLS 정책 우회","임시 Auth 사용자 생성 후 Google 로그인 시 연결하는 구조","Service Role Key 활용한 관리자 권한 사용자 CRUD 작업","Google 로그인 전까지 임시 비밀번호로 Auth 시스템 연동 유지"],impact:"'User not allowed' 오류 완전 해결 및 Google 로그인 준비 완료"},{version:"v1.3.3",date:"2025-07-31 13:45",status:"완료",type:"fix",title:"매물 등록 시 숫자 필드 빈 값 처리 개선",description:"숫자 필드에 빈 문자열 입력 시 발생하는 데이터베이스 오류 해결",changes:["빈 문자열을 null로 변환하는 processNumericFields 함수 추가","price, lease_price, area 등 숫자 필드 전처리 로직 구현","숫자 변환 실패 시 null로 처리하여 데이터베이스 호환성 확보","매물 등록/수정 시 데이터 검증 및 변환 과정 표준화"],impact:"'invalid input syntax for type numeric' 오류 해결"},{version:"v1.3.2",date:"2025-07-31 12:15",status:"완료",type:"fix",title:"사용자 추가 시 ID NULL 오류 해결",description:"Auth 시스템과 Public 사용자 테이블 연동 구조 정상화",changes:["auth.users에 먼저 사용자 생성 후 public.users에 연결하는 방식으로 변경","외래키 제약조건(users_id_fkey) 준수하도록 수정","사용자 생성 실패 시 롤백 로직 추가","기본 비밀번호 설정 및 이메일 자동 확인 처리"],impact:"'null value in column id violates not-null constraint' 오류 해결"},{version:"v1.3.1",date:"2025-07-31 11:30",status:"완료",type:"fix",title:"사용자 관리 기능 단순화",description:"인증 시스템 대신 users 테이블 직접 관리 방식으로 변경",changes:["비밀번호 필드 및 검증 로직 제거","supabase.auth.signUp 대신 직접 테이블 삽입","사용자 추가 프로세스 단순화","양방향 데이터 동기화 완성"],impact:"사용자 추가 시 'User not allowed' 오류 해결"},{version:"v1.3.0",date:"2025-07-31 10:45",status:"완료",type:"fix",title:"로그인 인증 문제 해결",description:"관리자 계정 재생성 및 인증 플로우 수정",changes:["기존 admin 계정 삭제 후 재생성","이메일 확인 자동 처리","로그인 테스트 스크립트 추가","public.users 테이블 동기화"],impact:"'Invalid login credentials' 오류 해결"},{version:"v1.2.0",date:"2025-07-31 09:20",status:"완료",type:"feature",title:"데이터베이스 스키마 통합",description:"UUID 기반 외래키 구조로 전면 변경",changes:["property_type, property_status, transaction_type을 별도 테이블로 분리","UUID 기반 외래키 관계 설정","JOIN 쿼리를 사용한 데이터 조회 방식 적용","PropertyForm 및 PropertyList 컴포넌트 업데이트"],impact:"매물 등록 시 'property_status column not found' 오류 해결"},{version:"v1.1.0",date:"2025-07-30 16:30",status:"완료",type:"feature",title:"Supabase 데이터베이스 연동",description:"PostgreSQL 기반 데이터베이스 구축 및 연동",changes:["Supabase 프로젝트 설정","테이블 스키마 설계 (properties, users, contacts)","RLS 정책 설정","더미 데이터 생성 스크립트 추가"],impact:"실제 데이터 저장 및 조회 기능 구현"},{version:"v1.0.0",date:"2025-07-29 14:00",status:"완료",type:"feature",title:"초기 프로젝트 구축",description:"React 기반 부동산 관리 대시보드 기본 구조 구현",changes:["React + Vite 프로젝트 초기화","Tailwind CSS 스타일링 적용","기본 컴포넌트 구조 설계","라우팅 시스템 구축"],impact:"프로젝트 기반 구조 완성"}].map((a,n)=>Ie.jsxs("div",{className:"border rounded-lg p-6 hover:shadow-md transition-shadow",children:[Ie.jsxs("div",{className:"flex items-start justify-between mb-4",children:[Ie.jsxs("div",{className:"flex items-center space-x-3",children:[Ie.jsxs("div",{className:"flex items-center space-x-2",children:[e(a.status),Ie.jsx("span",{className:"text-lg font-semibold text-gray-900",children:a.version})]}),Ie.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s(a.type)}`,children:[t(a.type),Ie.jsx("span",{className:"ml-1",children:r(a.type)})]})]}),Ie.jsx("span",{className:"text-sm text-gray-500",children:a.date})]}),Ie.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a.title}),Ie.jsx("p",{className:"text-gray-600 mb-4",children:a.description}),Ie.jsxs("div",{className:"mb-4",children:[Ie.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"주요 변경사항:"}),Ie.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:a.changes.map((e,t)=>Ie.jsx("li",{children:e},t))})]}),a.impact&&Ie.jsxs("div",{className:"bg-gray-50 rounded-md p-3",children:[Ie.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:"해결된 문제:"}),Ie.jsx("p",{className:"text-sm text-gray-600",children:a.impact})]})]},n))}),Ie.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-lg",children:[Ie.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"다음 계획"}),Ie.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-blue-800",children:[Ie.jsx("li",{children:"Google 로그인 연동 (최종 단계)"}),Ie.jsx("li",{children:"UI/UX 최적화"}),Ie.jsx("li",{children:"모바일 반응형 개선"}),Ie.jsx("li",{children:"성능 최적화"}),Ie.jsx("li",{children:"보안 강화"})]})]})]})},Hc={},Jc=new class{constructor(){this.serviceName="the-realty-dashboard"}async storeSecret(e,t){try{return localStorage.setItem(`${this.serviceName}_${e}`,t),!0}catch(r){return!1}}async getSecret(e){try{return localStorage.getItem(`${this.serviceName}_${e}`)||null}catch(t){return null}}async deleteSecret(e){try{return localStorage.removeItem(`${this.serviceName}_${e}`),!0}catch(t){return!1}}async hasSecret(e){try{return null!==await this.getSecret(e)}catch(t){return!1}}async initializeGoogleDriveKeys(){const e={GOOGLE_CLIENT_EMAIL:(null==Hc?void 0:Hc.VITE_GOOGLE_CLIENT_EMAIL)||"",GOOGLE_PRIVATE_KEY:(null==Hc?void 0:Hc.VITE_GOOGLE_PRIVATE_KEY)||"",GOOGLE_PROJECT_ID:(null==Hc?void 0:Hc.VITE_GOOGLE_PROJECT_ID)||"",GOOGLE_DRIVE_ROOT_FOLDER_ID:(null==Hc?void 0:Hc.VITE_GOOGLE_DRIVE_ROOT_FOLDER_ID)||"",GOOGLE_DRIVE_SHARE_FOLDER_ID:(null==Hc?void 0:Hc.VITE_GOOGLE_DRIVE_SHARE_FOLDER_ID)||""},t={};for(const[r,s]of Object.entries(e))if(s&&"your-service-account@project.iam.gserviceaccount.com"!==s){const e=await this.storeSecret(r,s);t[r]=e}return t}async getGoogleDriveConfig(){try{const e={client_email:await this.getSecret("GOOGLE_CLIENT_EMAIL"),private_key:await this.getSecret("GOOGLE_PRIVATE_KEY"),project_id:await this.getSecret("GOOGLE_PROJECT_ID"),root_folder_id:await this.getSecret("GOOGLE_DRIVE_ROOT_FOLDER_ID"),share_folder_id:await this.getSecret("GOOGLE_DRIVE_SHARE_FOLDER_ID")},t=["client_email","private_key","project_id"].filter(t=>!e[t]);if(t.length>0)throw new Error(`Missing required Google Drive configuration: ${t.join(", ")}`);return e}catch(e){throw e}}async getPublicDataApiKey(){try{const e=await this.getSecret("PUBLIC_DATA_API_KEY");if(!e)throw new Error("공공데이터포털 API 키가 설정되지 않았습니다.");return e}catch(e){throw e}}async setPublicDataApiKey(e){try{return await this.storeSecret("PUBLIC_DATA_API_KEY",e)}catch(t){throw t}}async setupInitialKeys(){return{}}async listStoredKeys(){const e=["GOOGLE_CLIENT_EMAIL","GOOGLE_PRIVATE_KEY","GOOGLE_PROJECT_ID","GOOGLE_DRIVE_ROOT_FOLDER_ID","GOOGLE_DRIVE_SHARE_FOLDER_ID","PUBLIC_DATA_API_KEY"],t={};for(const r of e)t[r]=await this.hasSecret(r);return t}async clearAllKeys(){const e=["GOOGLE_CLIENT_EMAIL","GOOGLE_PRIVATE_KEY","GOOGLE_PROJECT_ID","GOOGLE_DRIVE_ROOT_FOLDER_ID","GOOGLE_DRIVE_SHARE_FOLDER_ID","PUBLIC_DATA_API_KEY"],t={};for(const r of e)t[r]=await this.deleteSecret(r);return t}};class Xc{constructor(){this.supabaseUrl="https://qwxghpwasmvottahchky.supabase.co",this.supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF3eGdocHdhc212b3R0YWhjaGt5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzU0ODI2MTQsImV4cCI6MjA1MTA1ODYxNH0.gCsX7a7s17MwSQvlFpOcjVo6p49Y8QgwQNa52LZ9ZL4",this.supabase=Se(this.supabaseUrl,this.supabaseKey),this.apiKey=null,this.baseUrl="https://openapi.molit.go.kr/OpenAPI_ToolInstallPackage/service/rest/RTMSOBJSvc",this.loadApiKeyFromKeychain(),this.intervalTime=108e5,this.isRunning=!1,this.lastCollectionTime=null,this.targetAreas=[{name:"강남구 역삼동",code:"11680"},{name:"강남구 삼성동",code:"11680"},{name:"서초구 서초동",code:"11650"},{name:"송파구 잠실동",code:"11710"},{name:"영등포구 여의도동",code:"11560"},{name:"마포구 상암동",code:"11440"},{name:"용산구 한남동",code:"11170"},{name:"종로구 청운동",code:"11110"}]}async loadApiKeyFromKeychain(){try{const e=await Jc.getPublicDataApiKey();e&&(this.apiKey=e)}catch(e){}}setApiKey(e){this.apiKey=e}getCurrentYearMonth(){const e=new Date;return`${e.getFullYear()}${(e.getMonth()+1).toString().padStart(2,"0")}`}getLastMonth(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth()-1,1);return`${t.getFullYear()}${(t.getMonth()+1).toString().padStart(2,"0")}`}async fetchApartmentData(e,t){if(!this.apiKey)throw new Error("공공데이터포털 API 키가 설정되지 않았습니다.");const r=`${this.baseUrl}/getRTMSDataSvcAptTradeDev`,s=new URLSearchParams({serviceKey:this.apiKey,pageNo:"1",numOfRows:"1000",LAWD_CD:e,DEAL_YMD:t});try{const e=await fetch(`${r}?${s}`);if(!e.ok)throw new Error(`API 호출 실패: ${e.status}`);const t=await e.text();return this.parseXmlResponse(t)}catch(a){throw a}}parseXmlResponse(e){const t=[],r=/<item>([\s\S]*?)<\/item>/g;let s;for(;null!==(s=r.exec(e));){const e=s[1],r={};["거래금액","건축년도","년","법정동","아파트","월","일","전용면적","지번","지역코드","층"].forEach(t=>{const s=new RegExp(`<${t}>(.*?)</${t}>`).exec(e);s&&(r[t]=s[1].trim())}),Object.keys(r).length>0&&t.push(r)}return t}async saveToDatabase(e,t){try{const r=e.map(e=>({area_name:t.name,area_code:t.code,apartment_name:e["아파트"]||"",transaction_amount:this.parseAmount(e["거래금액"]||"0"),build_year:parseInt(e["건축년도"]||"0"),transaction_year:parseInt(e["년"]||"0"),transaction_month:parseInt(e["월"]||"0"),transaction_day:parseInt(e["일"]||"0"),exclusive_area:parseFloat(e["전용면적"]||"0"),legal_dong:e["법정동"]||"",jibun:e["지번"]||"",floor:parseInt(e["층"]||"0"),collected_at:(new Date).toISOString(),updated_at:(new Date).toISOString()})),{data:s,error:a}=await this.supabase.from("real_estate_transactions").upsert(r,{onConflict:"area_code,apartment_name,transaction_year,transaction_month,transaction_day,jibun"});if(a)throw a;return r.length}catch(r){throw r}}parseAmount(e){return parseInt(e.replace(/,/g,""))||0}async collectAreaData(e){try{const r=this.getCurrentYearMonth(),s=this.getLastMonth();let a=0;for(const n of[r,s])try{const t=await this.fetchApartmentData(e.code,n);t&&t.length>0&&(a+=await this.saveToDatabase(t,e)),await this.sleep(200)}catch(t){}return a}catch(t){return 0}}async collectAllData(){if(!this.apiKey)return;const e=new Date;let t=0;try{for(const e of this.targetAreas)t+=await this.collectAreaData(e),await this.sleep(1e3);this.lastCollectionTime=new Date;const r=this.lastCollectionTime-e;await this.saveCollectionLog(t,r)}catch(r){}}async saveCollectionLog(e,t){try{await this.supabase.from("collection_logs").insert({collected_count:e,duration_ms:t,collected_at:(new Date).toISOString(),status:"success"})}catch(r){}}sleep(e){return new Promise(t=>setTimeout(t,e))}startAutoCollection(){this.isRunning||(this.isRunning=!0,this.collectAllData(),this.intervalId=setInterval(()=>{this.collectAllData()},this.intervalTime))}stopAutoCollection(){this.isRunning&&(this.isRunning=!1,this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null))}getStatus(){return{isRunning:this.isRunning,lastCollectionTime:this.lastCollectionTime,nextCollectionTime:this.isRunning?new Date(Date.now()+this.intervalTime):null,targetAreas:this.targetAreas.length,apiKeyConfigured:!!this.apiKey}}}const Zc=()=>{const{collectorStatus:e,isLoading:r,error:s,collectionLogs:a,setApiKey:n,collectDataManually:i,startAutoCollection:l,stopAutoCollection:o,refreshCollectionLogs:c,formatLastCollectionTime:d,getTimeUntilNext:u}=(()=>{const[e,r]=t.useState({isRunning:!1,lastCollectionTime:null,nextCollectionTime:null,targetAreas:0,apiKeyConfigured:!1}),[s,a]=t.useState(!1),[n,i]=t.useState(null),[l,o]=t.useState([]),c=t.useRef(null);t.useEffect(()=>(c.current||(c.current=new Xc,d()),()=>{var e;(null==(e=c.current)?void 0:e.isRunning)&&c.current.stopAutoCollection()}),[]);const d=()=>{c.current&&r(c.current.getStatus())},u=async()=>{try{const{data:e,error:t}=await c.current.supabase.from("collection_logs").select("*").order("collected_at",{ascending:!1}).limit(10);if(t)throw t;o(e||[])}catch(e){}};return t.useEffect(()=>{const e=setInterval(()=>{d()},3e4);return()=>clearInterval(e)},[]),t.useEffect(()=>{u()},[]),{collectorStatus:e,isLoading:s,error:n,collectionLogs:l,setApiKey:e=>{try{if(!e||""===e.trim())throw new Error("API 키를 입력해주세요.");return c.current.setApiKey(e.trim()),d(),i(null),!0}catch(t){return i(t.message),!1}},collectDataManually:async()=>{if(!c.current)return!1;try{return a(!0),i(null),await c.current.collectAllData(),d(),await u(),!0}catch(e){return i(e.message),!1}finally{a(!1)}},startAutoCollection:()=>{if(!c.current)return!1;try{return c.current.startAutoCollection(),d(),setTimeout(d,3e3),i(null),!0}catch(e){return i(e.message),!1}},stopAutoCollection:()=>{if(!c.current)return!1;try{return c.current.stopAutoCollection(),d(),i(null),!0}catch(e){return i(e.message),!1}},refreshCollectionLogs:u,updateStatus:d,formatNextCollectionTime:e=>e?new Date(e).toLocaleString("ko-KR"):"예정 없음",formatLastCollectionTime:e=>e?new Date(e).toLocaleString("ko-KR"):"수집 기록 없음",getTimeUntilNext:()=>{if(!e.nextCollectionTime)return null;const t=new Date,r=new Date(e.nextCollectionTime)-t;return r<=0?"곧 실행":`${Math.floor(r/36e5)}시간 ${Math.floor(r%36e5/6e4)}분 후`}}})(),[m,h]=t.useState(""),[p,x]=t.useState(!1);return Ie.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[Ie.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"🏢 부동산 실거래가 자동 수집"}),Ie.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[Ie.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"공공데이터포털 API 키 설정"}),Ie.jsx("div",{className:"mb-3",children:Ie.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📋 ",Ie.jsx("a",{href:"https://www.data.go.kr/data/15057511/openapi.do",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline",children:"공공데이터포털"}),'에서 "국토교통부_아파트매매 실거래 상세 자료" API 키를 발급받으세요.']})}),Ie.jsxs("div",{className:"flex gap-2 mb-2",children:[Ie.jsx("input",{type:p?"text":"password",value:m,onChange:e=>h(e.target.value),placeholder:"API 키를 입력하세요...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),Ie.jsx("button",{onClick:()=>x(!p),className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:p?"🙈":"👁️"}),Ie.jsx("button",{onClick:()=>{n(m)&&(h(""),alert("API 키가 설정되었습니다!"))},disabled:!m.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"설정"})]}),Ie.jsxs("div",{className:"text-sm",children:["상태: ",e.apiKeyConfigured?Ie.jsx("span",{className:"text-green-600 font-semibold",children:"✅ 설정됨"}):Ie.jsx("span",{className:"text-red-600 font-semibold",children:"❌ 미설정"})]})]}),Ie.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[Ie.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"📊 수집 상태"}),Ie.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[Ie.jsxs("div",{children:[Ie.jsx("span",{className:"font-medium",children:"자동 수집 상태:"}),Ie.jsx("span",{className:"ml-2 font-semibold "+(e.isRunning?"text-green-600":"text-gray-600"),children:e.isRunning?"🟢 실행 중":"⚪ 중지됨"})]}),Ie.jsxs("div",{children:[Ie.jsx("span",{className:"font-medium",children:"대상 지역:"}),Ie.jsxs("span",{className:"ml-2",children:[e.targetAreas,"개 지역"]})]}),Ie.jsxs("div",{children:[Ie.jsx("span",{className:"font-medium",children:"마지막 수집:"}),Ie.jsx("span",{className:"ml-2",children:d(e.lastCollectionTime)})]}),Ie.jsxs("div",{children:[Ie.jsx("span",{className:"font-medium",children:"다음 수집:"}),Ie.jsx("span",{className:"ml-2",children:e.isRunning?u()||"계산 중...":"자동 수집 중지됨"})]})]})]}),s&&Ie.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md",children:["❌ ",s]}),Ie.jsxs("div",{className:"mb-6",children:[Ie.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"🎮 수집 제어"}),Ie.jsxs("div",{className:"flex flex-wrap gap-3",children:[Ie.jsxs("button",{onClick:async()=>{e.apiKeyConfigured?await i()&&alert("데이터 수집이 완료되었습니다!"):alert("먼저 공공데이터포털 API 키를 설정해주세요.")},disabled:r||!e.apiKeyConfigured,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 flex items-center gap-2",children:[r?"🔄":"▶️",r?"수집 중...":"수동 수집"]}),e.isRunning?Ie.jsx("button",{onClick:()=>{o()&&alert("자동 데이터 수집을 중지했습니다.")},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"⏹️ 자동 수집 중지"}):Ie.jsx("button",{onClick:()=>{e.apiKeyConfigured?l()&&alert("자동 데이터 수집을 시작했습니다!"):alert("먼저 공공데이터포털 API 키를 설정해주세요.")},disabled:!e.apiKeyConfigured,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"🚀 자동 수집 시작"}),Ie.jsx("button",{onClick:c,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"🔄 로그 새로고침"})]})]}),Ie.jsxs("div",{children:[Ie.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"📋 최근 수집 로그"}),a.length>0?Ie.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:a.map((e,t)=>Ie.jsx("div",{className:"p-3 bg-gray-50 rounded-md border-l-4 border-blue-500",children:Ie.jsxs("div",{className:"flex justify-between items-start",children:[Ie.jsxs("div",{children:[Ie.jsxs("span",{className:"font-medium text-green-600",children:["✅ ",e.collected_count,"건 수집 완료"]}),Ie.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["소요시간: ",Math.round(e.duration_ms/1e3),"초"]})]}),Ie.jsx("div",{className:"text-sm text-gray-500",children:new Date(e.collected_at).toLocaleString("ko-KR")})]})},t))}):Ie.jsx("div",{className:"p-4 bg-gray-50 rounded-md text-center text-gray-600",children:"아직 수집 기록이 없습니다."})]}),Ie.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ie.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"💡 사용 안내"}),Ie.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[Ie.jsx("li",{children:"• 3시간마다 자동으로 서울시 주요 8개 지역의 아파트 실거래가 데이터를 수집합니다."}),Ie.jsx("li",{children:"• API 호출 제한을 준수하여 서버에 부하를 주지 않도록 설계되었습니다."}),Ie.jsx("li",{children:"• 중복 데이터는 자동으로 필터링되어 최신 데이터만 유지됩니다."}),Ie.jsx("li",{children:"• 공공데이터포털의 무료 API를 사용하므로 추가 비용이 발생하지 않습니다."})]})]})]})},ed=()=>{const[e,r]=t.useState(""),[s,a]=t.useState(!1),[n,i]=t.useState(null),[l,o]=t.useState(null),[c,d]=t.useState("11680"),[u,m]=t.useState("202407");return Ie.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[Ie.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"📈 실시간 아파트 실거래가 조회"}),Ie.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"공공데이터포털 API 키"}),Ie.jsx("input",{type:"password",value:e,onChange:e=>r(e.target.value),placeholder:"API 키를 입력하세요...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),Ie.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"지역 선택"}),Ie.jsx("select",{value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{code:"11680",name:"강남구"},{code:"11650",name:"서초구"},{code:"11710",name:"송파구"},{code:"11560",name:"영등포구"},{code:"11440",name:"마포구"},{code:"11170",name:"용산구"},{code:"11110",name:"종로구"},{code:"11140",name:"중구"}].map(e=>Ie.jsx("option",{value:e.code,children:e.name},e.code))})]}),Ie.jsxs("div",{children:[Ie.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"조회 년월"}),Ie.jsx("input",{type:"month",value:`${u.slice(0,4)}-${u.slice(4,6)}`,onChange:e=>{const[t,r]=e.target.value.split("-");m(t+r)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),Ie.jsx("div",{className:"flex items-end",children:Ie.jsx("button",{onClick:async()=>{if(e){a(!0),o(null);try{const t="https://openapi.molit.go.kr/OpenAPI_ToolInstallPackage/service/rest/RTMSOBJSvc/getRTMSDataSvcAptTradeDev",r=new URLSearchParams({serviceKey:e,pageNo:"1",numOfRows:"100",LAWD_CD:c,DEAL_YMD:u}),s=await fetch(`${t}?${r}`);if(!s.ok)throw new Error(`HTTP 오류: ${s.status}`);const a=(e=>{var t,r;const s=(new DOMParser).parseFromString(e,"text/xml");if(s.querySelector("cmmMsgHeader")){const e=null==(t=s.querySelector("returnReasonCode"))?void 0:t.textContent,a=null==(r=s.querySelector("returnAuthMsg"))?void 0:r.textContent;throw new Error(`API 오류 ${e}: ${a}`)}const a=s.querySelectorAll("item");return Array.from(a).map(e=>{const t={};for(const r of e.children)t[r.tagName]=r.textContent;return t})})(await s.text());i(a)}catch(t){o(t.message),i(null)}finally{a(!1)}}else o("API 키를 입력해주세요.")},disabled:s||!e,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:s?"조회 중...":"실시간 조회"})})]}),l&&Ie.jsxs("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md",children:["❌ ",l]}),n&&Ie.jsxs("div",{children:[Ie.jsxs("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded-md",children:["✅ ",n.length,"건의 실거래 데이터를 조회했습니다."]}),n.length>0&&Ie.jsx("div",{className:"overflow-x-auto",children:Ie.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ie.jsx("thead",{className:"bg-gray-50",children:Ie.jsxs("tr",{children:[Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"아파트명"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"거래금액"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"전용면적"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"층"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"거래일"}),Ie.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"법정동"})]})}),Ie.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map((e,t)=>{return Ie.jsxs("tr",{className:"hover:bg-gray-50",children:[Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.아파트||"-"}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(r=e.거래금액,r?parseInt(r.replace(/,/g,"")).toLocaleString()+"만원":"0")}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.전용면적?`${e.전용면적}㎡`:"-"}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.층?`${e.층}층`:"-"}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.년&&e.월&&e.일?`${e.년}.${e.월}.${e.일}`:"-"}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.법정동||"-"})]},t);var r})})]})})]}),Ie.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[Ie.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"💡 사용 안내"}),Ie.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[Ie.jsx("li",{children:"• 공공데이터포털에서 발급받은 API 키를 입력하세요."}),Ie.jsx("li",{children:"• 실시간으로 최신 실거래 데이터를 조회합니다."}),Ie.jsx("li",{children:"• 데이터는 저장되지 않고 조회할 때마다 새로 가져옵니다."}),Ie.jsx("li",{children:"• 최신 데이터는 보통 1-2개월 후에 업데이트됩니다."})]})]})]})},td=()=>Ie.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:Ie.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[Ie.jsxs("div",{className:"mb-8",children:[Ie.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"📊 부동산 실거래가 데이터 수집"}),Ie.jsx("p",{className:"mt-2 text-lg text-gray-600",children:"공공데이터포털 API를 활용한 자동 데이터 수집 시스템"})]}),Ie.jsx(ed,{}),Ie.jsx("div",{className:"mt-8",children:Ie.jsx(Zc,{})}),Ie.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[Ie.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[Ie.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"🔄 자동 수집 시스템"}),Ie.jsx("p",{className:"text-gray-600 text-sm",children:"3시간마다 자동으로 서울시 주요 8개 지역의 아파트 실거래가 데이터를 수집합니다. API 호출 제한을 준수하여 안정적으로 운영됩니다."})]}),Ie.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[Ie.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"📊 데이터 분석"}),Ie.jsx("p",{className:"text-gray-600 text-sm",children:"수집된 데이터는 실시간으로 분석되어 거래 트렌드, 평균 가격, 지역별 분포 등의 인사이트를 제공합니다."})]}),Ie.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[Ie.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"🔒 데이터 보안"}),Ie.jsx("p",{className:"text-gray-600 text-sm",children:"모든 데이터는 Supabase에 안전하게 저장되며, API 키는 암호화되어 관리됩니다."})]})]})]})}),rd=()=>{var e;const{user:r,signOut:s}=yr(),a=n(),[i,l]=t.useState(!1),[c,d]=t.useState(null),u={"📊":R,"🏠":W,"🏢":y,"👥":F,"📈":w,"📁":xe,"🔄":ue,"⚙️":ye},m=Qr(r).map(e=>({...e,icon:u[e.icon]||R})),h=()=>{l(!i)};return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx("button",{onClick:h,className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-white shadow-md text-gray-700 border border-gray-200",children:i?Ie.jsx(Z,{className:"w-6 h-6"}):Ie.jsx(ve,{className:"w-6 h-6"})}),i&&Ie.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:h}),Ie.jsxs("div",{className:"sidebar "+(i?"open":""),children:[Ie.jsx("div",{className:"sidebar-header",children:Ie.jsx("div",{className:"flex items-center justify-center",children:Ie.jsx("img",{src:"/logo_white.svg",alt:"Logo",className:"h-10 w-auto"})})}),Ie.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center",children:Ie.jsx(je,{className:"w-6 h-6 text-primary-600"})}),Ie.jsxs("div",{className:"ml-3 flex-1",children:[Ie.jsx("p",{className:"text-sm font-medium text-gray-900",children:(null==r?void 0:r.name)||(null==(e=null==r?void 0:r.email)?void 0:e.split("@")[0])}),Ie.jsx("div",{className:"flex items-center gap-2 mt-1",children:Ie.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border ${Wr(r)}`,children:Gr(r)})})]})]})}),Ie.jsx("nav",{className:"sidebar-nav",children:m.filter(e=>"Settings"!==e.name).map(e=>{const t=e.icon,r=(s=e.path,a.pathname===s||a.pathname.startsWith(s+"/"));var s;return Ie.jsxs(o,{to:e.path,className:"sidebar-nav-item "+(r?"active":""),onClick:()=>l(!1),children:[Ie.jsx(t,{className:"sidebar-nav-icon"}),Ie.jsx("span",{children:e.name})]},e.name)})}),Ie.jsxs("div",{className:"absolute bottom-0 w-full p-4 border-t border-gray-200",children:[Ie.jsxs(o,{to:"/settings",className:"sidebar-nav-item mb-2",onClick:()=>l(!1),children:[Ie.jsx(ye,{className:"sidebar-nav-icon"}),Ie.jsx("span",{children:"설정"})]}),Ie.jsxs("button",{onClick:s,className:"sidebar-nav-item w-full text-left hover:bg-red-50 hover:text-red-600",children:[Ie.jsx(we,{className:"sidebar-nav-icon"}),Ie.jsx("span",{children:"로그아웃"})]})]})]})]})},sd=({children:e})=>{const{user:t,loading:r}=yr();return r?Ie.jsx("div",{className:"flex items-center justify-center min-h-screen",children:Ie.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):t?e:Ie.jsx(i,{to:"/login",replace:!0})},ad=()=>{const{user:e}=yr(),t=sr.ENABLE_DEMO_BANNER,r=e&&e.id&&e.id.toString().startsWith("hardcoded-");return t&&r?Ie.jsxs("div",{className:"bg-yellow-100 border-b border-yellow-200 p-2 text-center text-sm",children:[Ie.jsx("span",{className:"font-medium text-yellow-800",children:"데모 관리자 모드"}),Ie.jsx("span",{className:"mx-2 text-yellow-700",children:"|"}),Ie.jsxs("span",{className:"text-yellow-700",children:["로그인 계정: ",e.email||e.name]})]}):null},nd=()=>{var e;const{user:t}=yr();return Ie.jsx(sd,{children:Ie.jsxs("div",{className:"min-h-screen bg-gray-50",children:[Ie.jsx(ad,{}),Ie.jsx(rd,{}),Ie.jsxs("div",{className:"main-layout",children:[Ie.jsxs("header",{className:"main-header",children:[Ie.jsx("div",{className:"flex items-center flex-1",children:Ie.jsxs("div",{className:"relative flex-1 max-w-md",children:[Ie.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),Ie.jsx("input",{type:"text",placeholder:"검색...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),Ie.jsxs("div",{className:"flex items-center space-x-4",children:[Ie.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-gray-900 transition-colors",children:[Ie.jsx(P,{className:"w-6 h-6"}),Ie.jsx("span",{className:"absolute top-0 right-0 h-2 w-2 bg-red-500 rounded-full"})]}),Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx("span",{className:"text-sm font-medium text-gray-700 mr-2",children:(null==t?void 0:t.name)||(null==(e=null==t?void 0:t.email)?void 0:e.split("@")[0])}),Ie.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-600 flex items-center justify-center text-white font-semibold text-sm",children:((null==t?void 0:t.name)||(null==t?void 0:t.email)||"U")[0].toUpperCase()})]})]})]}),Ie.jsx("main",{className:"main-content",children:Ie.jsx(u,{})})]})]})})},id=()=>{const e=l(),[r,s]=t.useState(""),[a,n]=t.useState("");t.useEffect(()=>{const e=setTimeout(()=>{n(r)},300);return()=>clearTimeout(e)},[r]);const{data:i=[],isLoading:o,error:c}=Qt(["customers",a],async()=>{let e=lr.from("customers").select("\n          *,\n          user:user_id (\n            name,\n            email\n          )\n        ").order("created_at",{ascending:!1});a&&(e=e.or(`\n          name.ilike.%${a}%,\n          phone.ilike.%${a}%,\n          email.ilike.%${a}%\n        `));const{data:t,error:r}=await e;if(r)throw r;return t||[]},{staleTime:3e5,refetchOnWindowFocus:!1});return Ie.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[Ie.jsxs("div",{className:"sm:flex sm:items-center",children:[Ie.jsxs("div",{className:"sm:flex-auto",children:[Ie.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"고객 관리"}),Ie.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"고객 정보 조회, 등록 및 관리"})]}),Ie.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:Ie.jsxs("button",{type:"button",onClick:()=>{e("/customers/new")},className:"inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[Ie.jsx(X,{className:"w-4 h-4 mr-2"}),"고객 등록"]})})]}),Ie.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[Ie.jsxs("div",{className:"relative flex-1 max-w-lg",children:[Ie.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:Ie.jsx(G,{className:"h-5 w-5 text-gray-400"})}),Ie.jsx("input",{type:"text",value:r,onChange:e=>{s(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"이름, 전화번호 또는 이메일 검색"})]}),Ie.jsxs("div",{className:"ml-3 text-sm text-gray-500",children:["총 ",i.length,"명의 고객"]})]}),Ie.jsx("div",{className:"mt-6 flex flex-col",children:Ie.jsx("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Ie.jsx("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Ie.jsx("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Ie.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[Ie.jsx("thead",{className:"bg-gray-50",children:Ie.jsxs("tr",{children:[Ie.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"고객명"}),Ie.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"연락처"}),Ie.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"담당자"}),Ie.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"등록일"})]})}),Ie.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o?Ie.jsx("tr",{children:Ie.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:Ie.jsxs("div",{className:"flex justify-center",children:[Ie.jsx("div",{className:"w-5 h-5 border-2 border-t-blue-600 border-blue-200 rounded-full animate-spin"}),Ie.jsx("span",{className:"ml-2",children:"로딩 중..."})]})})}):c?Ie.jsx("tr",{children:Ie.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-red-500",children:"데이터를 불러오는 중 오류가 발생했습니다."})}):0===i.length?Ie.jsx("tr",{children:Ie.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:a?"검색 결과가 없습니다.":"등록된 고객이 없습니다."})}):i.map(t=>{var r,s;return Ie.jsxs("tr",{onClick:()=>{return r=t.id,void e(`/customers/${r}`);var r},className:"cursor-pointer hover:bg-gray-50",children:[Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx("div",{className:"flex-shrink-0 h-10 w-10 flex items-center justify-center bg-gray-100 rounded-full",children:Ie.jsx(W,{className:"h-5 w-5 text-gray-500"})}),Ie.jsxs("div",{className:"ml-4",children:[Ie.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.email&&Ie.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})]})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx(L,{className:"h-4 w-4 text-gray-400 mr-2"}),Ie.jsx("span",{className:"text-sm text-gray-900",children:t.phone||"-"})]})}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null==(r=t.user)?void 0:r.name)||"-"}),Ie.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(s=t.created_at,s?new Date(s).toLocaleDateString():"-")})]},t.id)})})]})})})})})]})},ld=()=>{var e;const{id:r}=c(),s=l(),[a,n]=t.useState("info"),{data:i,isLoading:o,error:d}=Qt(["customer",r],async()=>{const{data:e,error:t}=await lr.from("customers").select("\n          *,\n          user:user_id (\n            name,\n            email\n          )\n        ").eq("id",r).single();if(t)throw t;return e},{enabled:!!r,staleTime:3e5,refetchOnWindowFocus:!1}),{data:u=[]}=Qt(["customerInterests",r],async()=>{const{data:e,error:t}=await lr.from("customer_interests").select("\n          *,\n          property_type:property_type_id (name),\n          transaction_type:transaction_type_id (name)\n        ").eq("customer_id",r).order("created_at",{ascending:!1});if(t)throw t;return e||[]},{enabled:!!r,staleTime:3e5}),{data:m=[]}=Qt(["customerFunnelEvents",r],async()=>{const{data:e,error:t}=await lr.from("funnel_events").select("\n          *,\n          property:property_id (\n            property_name,\n            location\n          ),\n          stage:stage_id (\n            name,\n            color\n          ),\n          previous_stage:previous_stage_id (\n            name\n          ),\n          user:user_id (\n            name\n          )\n        ").eq("customer_id",r).order("event_date",{ascending:!1});if(t)throw t;return e||[]},{enabled:!!r&&"history"===a,staleTime:3e5}),{data:h=[]}=Qt(["customerProperties",r],async()=>{const{data:e,error:t}=await lr.from("properties").select("\n          id,\n          property_name,\n          location,\n          property_type,\n          property_status,\n          transaction_type,\n          price,\n          created_at\n        ").eq("customer_id",r).order("created_at",{ascending:!1});if(t)throw t;return e||[]},{enabled:!!r&&"properties"===a,staleTime:3e5}),p=e=>e?new Date(e).toLocaleDateString():"-",x=()=>{s("/customers")},f=e=>{n(e)};if(o)return Ie.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8 flex justify-center",children:[Ie.jsx("div",{className:"w-6 h-6 border-2 border-t-blue-600 border-blue-200 rounded-full animate-spin"}),Ie.jsx("span",{className:"ml-2",children:"고객 정보 로딩 중..."})]});if(d)return Ie.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[Ie.jsx("div",{className:"bg-red-50 p-4 rounded-md",children:Ie.jsxs("div",{className:"flex",children:[Ie.jsx("div",{className:"flex-shrink-0",children:Ie.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ie.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Ie.jsxs("div",{className:"ml-3",children:[Ie.jsx("h3",{className:"text-sm font-medium text-red-800",children:"고객 정보를 불러오는 중 오류가 발생했습니다."}),Ie.jsx("div",{className:"mt-2 text-sm text-red-700",children:Ie.jsx("p",{children:d.message})})]})]})}),Ie.jsx("div",{className:"mt-4",children:Ie.jsxs("button",{type:"button",onClick:x,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[Ie.jsx(ie,{className:"w-4 h-4 mr-2"}),"돌아가기"]})})]});if(!i)return Ie.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[Ie.jsx("div",{className:"bg-yellow-50 p-4 rounded-md",children:Ie.jsxs("div",{className:"flex",children:[Ie.jsx("div",{className:"flex-shrink-0",children:Ie.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ie.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),Ie.jsx("div",{className:"ml-3",children:Ie.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"고객 정보를 찾을 수 없습니다."})})]})}),Ie.jsx("div",{className:"mt-4",children:Ie.jsxs("button",{type:"button",onClick:x,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[Ie.jsx(ie,{className:"w-4 h-4 mr-2"}),"돌아가기"]})})]});const g=e=>({available:"거래가능",reserved:"거래보류",completed:"거래완료"}[e]||e);return Ie.jsxs("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:[Ie.jsxs("div",{className:"flex justify-between items-center mb-6",children:[Ie.jsxs("div",{className:"flex items-center",children:[Ie.jsx("button",{type:"button",onClick:x,className:"mr-4 text-gray-400 hover:text-gray-500",children:Ie.jsx(ie,{className:"w-5 h-5"})}),Ie.jsxs("h1",{className:"text-2xl font-semibold text-gray-900",children:[i.name," 님 상세 정보"]})]}),Ie.jsxs("button",{type:"button",onClick:()=>{s(`/customers/${r}/edit`)},className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[Ie.jsx(z,{className:"w-4 h-4 mr-2"}),"정보 수정"]})]}),Ie.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg mb-6",children:[Ie.jsxs("div",{className:"px-4 py-5 sm:px-6 bg-gray-50",children:[Ie.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"고객 기본 정보"}),Ie.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"개인 정보 및 연락처"})]}),Ie.jsx("div",{className:"border-t border-gray-200",children:Ie.jsxs("dl",{children:[Ie.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ie.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ie.jsx(W,{className:"w-4 h-4 mr-2"}),"이름"]}),Ie.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:i.name})]}),Ie.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ie.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ie.jsx(L,{className:"w-4 h-4 mr-2"}),"연락처"]}),Ie.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:i.phone||"-"})]}),Ie.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ie.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ie.jsx(Ne,{className:"w-4 h-4 mr-2"}),"이메일"]}),Ie.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:i.email||"-"})]}),Ie.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ie.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ie.jsx(W,{className:"w-4 h-4 mr-2"}),"담당자"]}),Ie.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(null==(e=i.user)?void 0:e.name)||"-"})]}),Ie.jsxs("div",{className:"bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ie.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ie.jsx($,{className:"w-4 h-4 mr-2"}),"등록일"]}),Ie.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:p(i.created_at)})]}),i.notes&&Ie.jsxs("div",{className:"bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[Ie.jsxs("dt",{className:"text-sm font-medium text-gray-500 flex items-center",children:[Ie.jsx(ue,{className:"w-4 h-4 mr-2"}),"메모"]}),Ie.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 whitespace-pre-line",children:i.notes})]})]})})]}),Ie.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[Ie.jsx("div",{className:"border-b border-gray-200",children:Ie.jsxs("nav",{className:"-mb-px flex",children:[Ie.jsx("button",{onClick:()=>f("info"),className:("info"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm",children:"관심 정보"}),Ie.jsx("button",{onClick:()=>f("properties"),className:("properties"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm",children:"연결 매물"}),Ie.jsx("button",{onClick:()=>f("history"),className:("history"===a?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm",children:"상담 이력"})]})}),Ie.jsxs("div",{className:"px-4 py-5 sm:px-6",children:["info"===a&&Ie.jsxs("div",{children:[Ie.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"관심 매물 정보"}),0===u.length?Ie.jsx("div",{className:"text-center py-6 text-gray-500",children:"등록된 관심 정보가 없습니다."}):Ie.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:Ie.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[Ie.jsx("thead",{className:"bg-gray-50",children:Ie.jsxs("tr",{children:[Ie.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6",children:"매물종류"}),Ie.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"지역"}),Ie.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"거래유형"}),Ie.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"가격대"}),Ie.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"등록일"})]})}),Ie.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:u.map(e=>{var t,r;return Ie.jsxs("tr",{children:[Ie.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6",children:(null==(t=e.property_type)?void 0:t.name)||"-"}),Ie.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.location||"-"}),Ie.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(null==(r=e.transaction_type)?void 0:r.name)||"-"}),Ie.jsxs("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:[e.min_price||"0"," ~ ",e.max_price||"무제한"]}),Ie.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:p(e.created_at)})]},e.id)})})]})})]}),"properties"===a&&Ie.jsxs("div",{children:[Ie.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"연결된 매물"}),0===h.length?Ie.jsx("div",{className:"text-center py-6 text-gray-500",children:"연결된 매물이 없습니다."}):Ie.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:h.map(e=>{return Ie.jsx("div",{onClick:()=>s(`/properties/${e.id}`),className:"bg-white overflow-hidden shadow rounded-lg border border-gray-200 cursor-pointer hover:shadow-md transition-shadow duration-200",children:Ie.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[Ie.jsx("h4",{className:"text-lg font-semibold text-gray-900 truncate",children:e.property_name}),Ie.jsxs("div",{className:"mt-1 flex items-center text-sm text-gray-500",children:[Ie.jsx(R,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),Ie.jsx("span",{className:"truncate",children:e.location})]}),Ie.jsxs("div",{className:"mt-3 flex items-center space-x-2",children:[Ie.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:(r=e.property_type,{apt:"아파트",officetel:"오피스텔",villa:"빌라/연립",house:"단독주택",commercial:"상가"}[r]||r)}),Ie.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t=e.property_status,{available:"text-green-600",reserved:"text-yellow-600",completed:"text-blue-600"}[t]||"text-gray-600"}`,children:g(e.property_status)})]})]})},e.id);var t,r})})]}),"history"===a&&Ie.jsxs("div",{children:[Ie.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:"상담 및 진행 이력"}),0===m.length?Ie.jsx("div",{className:"text-center py-6 text-gray-500",children:"상담 이력이 없습니다."}):Ie.jsx("div",{className:"flow-root",children:Ie.jsx("ul",{className:"-mb-8",children:m.map((e,t)=>{var r,s,a,n;return Ie.jsx("li",{children:Ie.jsxs("div",{className:"relative pb-8",children:[t!==m.length-1?Ie.jsx("span",{className:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,Ie.jsxs("div",{className:"relative flex items-start space-x-3",children:[Ie.jsx("div",{children:Ie.jsx("div",{className:"relative px-1",children:Ie.jsx("div",{className:"h-8 w-8 bg-blue-100 rounded-full ring-8 ring-white flex items-center justify-center",children:Ie.jsx(j,{className:"h-5 w-5 text-blue-500"})})})}),Ie.jsxs("div",{className:"min-w-0 flex-1 py-1.5",children:[Ie.jsxs("div",{className:"text-sm text-gray-500",children:[Ie.jsxs("div",{className:"font-medium text-gray-900",children:[(null==(r=e.stage)?void 0:r.name)||"상태 변경",(null==(s=e.previous_stage)?void 0:s.name)&&` (이전: ${e.previous_stage.name})`]}),Ie.jsx("span",{className:"whitespace-nowrap",children:(n=e.event_date,n?new Date(n).toLocaleString():"-")}),(null==(a=e.user)?void 0:a.name)&&Ie.jsxs("span",{children:[" · 담당자: ",e.user.name]})]}),e.property&&Ie.jsxs("div",{className:"mt-2 text-sm text-gray-700",children:[Ie.jsx("span",{className:"font-medium",children:e.property.property_name}),e.property.location&&Ie.jsxs("span",{children:[" · ",e.property.location]})]}),e.notes&&Ie.jsx("div",{className:"mt-2 text-sm text-gray-700 bg-gray-50 p-2 rounded",children:e.notes})]})]})]})},e.id)})})})]})]})]})]})},od=({isEditing:e=!1})=>{const{id:r}=c(),s=l(),a=Lt(),{user:n}=yr(),[i,o]=t.useState(!1),[d,u]=t.useState(null),[m,h]=t.useState(!1),[p,x]=t.useState(!1),{data:f,isLoading:g}=Qt(["customer",r],async()=>{if(!r)return null;const{data:e,error:t}=await lr.from("customers").select("*").eq("id",r).single();if(t)throw t;return e},{enabled:e&&!!r,onError:e=>{u(`고객 정보를 불러오는데 실패했습니다: ${e.message}`)}}),y=async t=>{if(!t||""===t.trim())return!1;try{let s=lr.from("customers").select("id, phone").eq("phone",t);e&&r&&(s=s.neq("id",r));const{data:a,error:n}=await s;if(n)throw n;return a&&a.length>0}catch(s){return!1}},b=Bt(async t=>{if(e){const{data:e,error:s}=await lr.from("customers").update(t).eq("id",r).select();if(s)throw s;return e}{const{data:e,error:r}=await lr.from("customers").insert([{...t,user_id:n.id}]).select();if(r)throw r;return e}},{onSuccess:()=>{a.invalidateQueries(["customers"]),e&&a.invalidateQueries(["customer",r]),h(!0),setTimeout(()=>{s("/customers")},2e3)},onError:t=>{u(`고객 ${e?"수정":"등록"}에 실패했습니다: ${t.message}`)},onSettled:()=>{o(!1)}}),v=to({initialValues:{name:(null==f?void 0:f.name)||"",phone:(null==f?void 0:f.phone)||"",email:(null==f?void 0:f.email)||"",source:(null==f?void 0:f.source)||"",notes:(null==f?void 0:f.notes)||""},validationSchema:Tc({name:gc().required("고객명은 필수 입력사항입니다"),phone:gc().test("phone-exists","이미 등록된 전화번호입니다",function(e){return!e||!p}),email:gc().email("유효한 이메일 주소를 입력해주세요")}),onSubmit:async function(e){if(o(!0),u(null),e.phone&&""!==e.phone.trim()&&await y(e.phone))return x(!0),void o(!1);b.mutate(e)},enableReinitialize:!0});return t.useEffect(()=>{const e=setTimeout(()=>{(async()=>{if(v.values.phone&&""!==v.values.phone.trim()){const e=await y(v.values.phone);x(e)}else x(!1)})()},500);return()=>clearTimeout(e)},[v.values.phone]),e&&g?Ie.jsxs("div",{className:"flex justify-center items-center h-64",children:[Ie.jsx("div",{className:"w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"}),Ie.jsx("p",{className:"ml-2 text-gray-600",children:"고객 정보를 불러오는 중..."})]}):Ie.jsx("div",{className:"px-4 py-6 sm:px-6 lg:px-8",children:Ie.jsxs("div",{className:"max-w-3xl mx-auto",children:[Ie.jsx("div",{className:"md:flex md:items-center md:justify-between mb-6",children:Ie.jsxs("div",{className:"flex-1 min-w-0 flex items-center",children:[Ie.jsx("button",{type:"button",onClick:()=>s("/customers"),className:"mr-4 text-gray-400 hover:text-gray-500",children:Ie.jsx(ie,{className:"w-5 h-5"})}),Ie.jsx("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate",children:e?"고객 정보 수정":"신규 고객 등록"})]})}),d&&Ie.jsx("div",{className:"mb-4 p-4 bg-red-50 rounded-md",children:Ie.jsxs("div",{className:"flex",children:[Ie.jsx("div",{className:"flex-shrink-0",children:Ie.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ie.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),Ie.jsxs("div",{className:"ml-3",children:[Ie.jsx("h3",{className:"text-sm font-medium text-red-800",children:"오류가 발생했습니다"}),Ie.jsx("div",{className:"mt-2 text-sm text-red-700",children:Ie.jsx("p",{children:d})})]})]})}),m&&Ie.jsx("div",{className:"mb-4 p-4 bg-green-50 rounded-md",children:Ie.jsxs("div",{className:"flex",children:[Ie.jsx("div",{className:"flex-shrink-0",children:Ie.jsx("svg",{className:"h-5 w-5 text-green-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Ie.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),Ie.jsxs("div",{className:"ml-3",children:[Ie.jsxs("h3",{className:"text-sm font-medium text-green-800",children:["고객 정보가 성공적으로 ",e?"수정":"등록","되었습니다"]}),Ie.jsx("div",{className:"mt-2 text-sm text-green-700",children:Ie.jsx("p",{children:"고객 목록 페이지로 이동합니다..."})})]})]})}),Ie.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:Ie.jsx("div",{className:"px-4 py-5 sm:p-6",children:Ie.jsxs("form",{onSubmit:v.handleSubmit,children:[Ie.jsxs("div",{className:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6",children:[Ie.jsxs("div",{className:"sm:col-span-3",children:[Ie.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:["고객명 ",Ie.jsx("span",{className:"text-red-500",children:"*"})]}),Ie.jsxs("div",{className:"mt-1",children:[Ie.jsx("input",{type:"text",name:"name",id:"name",value:v.values.name,onChange:v.handleChange,onBlur:v.handleBlur,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md "+(v.touched.name&&v.errors.name?"border-red-300":""),placeholder:"고객 이름"}),v.touched.name&&v.errors.name&&Ie.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.errors.name})]})]}),Ie.jsxs("div",{className:"sm:col-span-3",children:[Ie.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"전화번호"}),Ie.jsxs("div",{className:"mt-1",children:[Ie.jsx("input",{type:"text",name:"phone",id:"phone",value:v.values.phone,onChange:v.handleChange,onBlur:v.handleBlur,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md "+(v.touched.phone&&v.errors.phone||p?"border-red-300":""),placeholder:"010-0000-0000"}),v.touched.phone&&v.errors.phone&&Ie.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.errors.phone}),p&&Ie.jsx("p",{className:"mt-2 text-sm text-red-600",children:"이미 등록된 전화번호입니다"})]})]}),Ie.jsxs("div",{className:"sm:col-span-3",children:[Ie.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"이메일"}),Ie.jsxs("div",{className:"mt-1",children:[Ie.jsx("input",{type:"text",name:"email",id:"email",value:v.values.email,onChange:v.handleChange,onBlur:v.handleBlur,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md "+(v.touched.email&&v.errors.email?"border-red-300":""),placeholder:"example@email.com"}),v.touched.email&&v.errors.email&&Ie.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.errors.email})]})]}),Ie.jsxs("div",{className:"sm:col-span-3",children:[Ie.jsx("label",{htmlFor:"source",className:"block text-sm font-medium text-gray-700",children:"유입 경로"}),Ie.jsx("div",{className:"mt-1",children:Ie.jsxs("select",{id:"source",name:"source",value:v.values.source,onChange:v.handleChange,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border-gray-300 rounded-md",children:[Ie.jsx("option",{value:"",children:"선택하세요"}),Ie.jsx("option",{value:"direct",children:"직접 방문"}),Ie.jsx("option",{value:"referral",children:"지인 소개"}),Ie.jsx("option",{value:"phone",children:"전화 문의"}),Ie.jsx("option",{value:"portal",children:"부동산 포털"}),Ie.jsx("option",{value:"chat",children:"채팅/메시지"}),Ie.jsx("option",{value:"other",children:"기타"})]})})]}),Ie.jsxs("div",{className:"sm:col-span-6",children:[Ie.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:"메모"}),Ie.jsx("div",{className:"mt-1",children:Ie.jsx("textarea",{id:"notes",name:"notes",rows:"4",value:v.values.notes,onChange:v.handleChange,className:"shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full sm:text-sm border border-gray-300 rounded-md",placeholder:"고객 관련 메모사항을 입력하세요"})})]})]}),Ie.jsxs("div",{className:"mt-8 flex justify-end",children:[Ie.jsx("button",{type:"button",onClick:()=>s("/customers"),className:"mr-3 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"취소"}),Ie.jsxs("button",{type:"submit",disabled:i||p,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300",children:[Ie.jsx(_e,{className:"w-4 h-4 mr-2"}),i?Ie.jsx(Ie.Fragment,{children:"처리 중..."}):e?Ie.jsx(Ie.Fragment,{children:"수정 완료"}):Ie.jsx(Ie.Fragment,{children:"등록 완료"})]})]})]})})})]})})},cd=()=>{const{id:e}=c(),t=!!e;return Ie.jsx(od,{isEditing:t})},dd=new St({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:(e,t)=>{var r;return!!((null==t?void 0:t.status)>=500||(null==(r=null==t?void 0:t.message)?void 0:r.includes("fetch")))&&e<2},staleTime:3e5,cacheTime:6e5},mutations:{retry:!1}}});function ud(){return Ie.jsx(br,{children:Ie.jsx(qt,{client:dd,children:Ie.jsx(gr,{children:Ie.jsx(m,{basename:"/the-realty-itemlist-dashboard",children:Ie.jsx(vr,{children:Ie.jsxs(h,{children:[Ie.jsx(p,{path:"/login",element:Ie.jsx(jr,{})}),Ie.jsx(p,{path:"/auth/callback",element:Ie.jsx(wr,{})}),Ie.jsx(p,{path:"/auth/process",element:Ie.jsx(Nr,{})}),Ie.jsxs(p,{element:Ie.jsx(nd,{}),children:[Ie.jsx(p,{path:"/",element:Ie.jsx(ss,{})}),Ie.jsx(p,{path:"/properties",element:Ie.jsx(is,{})}),Ie.jsx(p,{path:"/my-properties",element:Ie.jsx(ls,{})}),Ie.jsx(p,{path:"/properties/new",element:Ie.jsx(Pc,{})}),Ie.jsx(p,{path:"/properties/:id",element:Ie.jsx(ya,{})}),Ie.jsx(p,{path:"/properties/:id/edit",element:Ie.jsx(Pc,{})}),Ie.jsx(p,{path:"/users",element:Ie.jsx(zc,{})}),Ie.jsx(p,{path:"/performance",element:Ie.jsx(Vc,{})}),Ie.jsx(p,{path:"/users/:userId/performance",element:Ie.jsx(Bc,{})}),Ie.jsx(p,{path:"/csv-import",element:Ie.jsx(Qc,{})}),Ie.jsx(p,{path:"/data-collection",element:Ie.jsx(td,{})}),Ie.jsx(p,{path:"/settings",element:Ie.jsx(Kc,{})}),Ie.jsx(p,{path:"/updates",element:Ie.jsx(Yc,{})}),Ie.jsx(p,{path:"/customers",element:Ie.jsx(id,{})}),Ie.jsx(p,{path:"/customers/new",element:Ie.jsx(cd,{})}),Ie.jsx(p,{path:"/customers/:id",element:Ie.jsx(ld,{})}),Ie.jsx(p,{path:"/customers/:id/edit",element:Ie.jsx(cd,{})})]}),Ie.jsx(p,{path:"*",element:Ie.jsx(i,{to:"/",replace:!0})})]})})})})})})}window.addEventListener("error",e=>{}),window.addEventListener("unhandledrejection",e=>{});try{const e=document.getElementById("root");if(!e)throw new Error("Root element not found");Re.createRoot(e).render(Ie.jsx(a.StrictMode,{children:Ie.jsx(ud,{})}))}catch(hd){document.body.innerHTML='\n    <div style="padding: 20px; text-align: center; font-family: Arial, sans-serif;">\n      <h1>팀 매물장 로딩 중...</h1>\n      <p>잠시만 기다려주세요.</p>\n      <p style="color: #666; font-size: 12px;">오류가 지속되면 페이지를 새로고침해주세요.</p>\n    </div>\n  '}}},function(){return Ee||(0,ke[e(ke)[0]])((Ee={exports:{}}).exports,Ee),Ee.exports});export default Ce();
